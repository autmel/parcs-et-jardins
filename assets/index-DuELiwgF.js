function Aw(t,e){for(var i=0;i<e.length;i++){const s=e[i];if(typeof s!="string"&&!Array.isArray(s)){for(const n in s)if(n!=="default"&&!(n in t)){const r=Object.getOwnPropertyDescriptor(s,n);r&&Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:()=>s[n]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function i(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=i(n);fetch(n.href,r)}})();/**
* @vue/shared v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Vg(t){const e=Object.create(null);for(const i of t.split(","))e[i]=1;return i=>i in e}const It={},Ya=[],Hn=()=>{},HT=()=>!1,Qd=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),qg=t=>t.startsWith("onUpdate:"),Bi=Object.assign,$g=(t,e)=>{const i=t.indexOf(e);i>-1&&t.splice(i,1)},Dw=Object.prototype.hasOwnProperty,xt=(t,e)=>Dw.call(t,e),Qe=Array.isArray,Qa=t=>Ec(t)==="[object Map]",Pl=t=>Ec(t)==="[object Set]",x0=t=>Ec(t)==="[object Date]",rt=t=>typeof t=="function",ci=t=>typeof t=="string",Vn=t=>typeof t=="symbol",Rt=t=>t!==null&&typeof t=="object",VT=t=>(Rt(t)||rt(t))&&rt(t.then)&&rt(t.catch),qT=Object.prototype.toString,Ec=t=>qT.call(t),Pw=t=>Ec(t).slice(8,-1),$T=t=>Ec(t)==="[object Object]",Wg=t=>ci(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,$u=Vg(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Jd=t=>{const e=Object.create(null);return(i=>e[i]||(e[i]=t(i)))},kw=/-\w/g,Gs=Jd(t=>t.replace(kw,e=>e.slice(1).toUpperCase())),Iw=/\B([A-Z])/g,fa=Jd(t=>t.replace(Iw,"-$1").toLowerCase()),ef=Jd(t=>t.charAt(0).toUpperCase()+t.slice(1)),bp=Jd(t=>t?`on${ef(t)}`:""),no=(t,e)=>!Object.is(t,e),Yh=(t,...e)=>{for(let i=0;i<t.length;i++)t[i](...e)},WT=(t,e,i,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:i})},tf=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let S0;const sf=()=>S0||(S0=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function un(t){if(Qe(t)){const e={};for(let i=0;i<t.length;i++){const s=t[i],n=ci(s)?Rw(s):un(s);if(n)for(const r in n)e[r]=n[r]}return e}else if(ci(t)||Rt(t))return t}const Lw=/;(?![^(]*\))/g,Ow=/:([^]+)/,Mw=/\/\*[^]*?\*\//g;function Rw(t){const e={};return t.replace(Mw,"").split(Lw).forEach(i=>{if(i){const s=i.split(Ow);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function nf(t){let e="";if(ci(t))e=t;else if(Qe(t))for(let i=0;i<t.length;i++){const s=nf(t[i]);s&&(e+=s+" ")}else if(Rt(t))for(const i in t)t[i]&&(e+=i+" ");return e.trim()}const Nw="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Bw=Vg(Nw);function GT(t){return!!t||t===""}function Fw(t,e){if(t.length!==e.length)return!1;let i=!0;for(let s=0;i&&s<t.length;s++)i=Ac(t[s],e[s]);return i}function Ac(t,e){if(t===e)return!0;let i=x0(t),s=x0(e);if(i||s)return i&&s?t.getTime()===e.getTime():!1;if(i=Vn(t),s=Vn(e),i||s)return t===e;if(i=Qe(t),s=Qe(e),i||s)return i&&s?Fw(t,e):!1;if(i=Rt(t),s=Rt(e),i||s){if(!i||!s)return!1;const n=Object.keys(t).length,r=Object.keys(e).length;if(n!==r)return!1;for(const o in t){const l=t.hasOwnProperty(o),u=e.hasOwnProperty(o);if(l&&!u||!l&&u||!Ac(t[o],e[o]))return!1}}return String(t)===String(e)}function Gg(t,e){return t.findIndex(i=>Ac(i,e))}const XT=t=>!!(t&&t.__v_isRef===!0),Ps=t=>ci(t)?t:t==null?"":Qe(t)||Rt(t)&&(t.toString===qT||!rt(t.toString))?XT(t)?Ps(t.value):JSON.stringify(t,KT,2):String(t),KT=(t,e)=>XT(e)?KT(t,e.value):Qa(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((i,[s,n],r)=>(i[Tp(s,r)+" =>"]=n,i),{})}:Pl(e)?{[`Set(${e.size})`]:[...e.values()].map(i=>Tp(i))}:Vn(e)?Tp(e):Rt(e)&&!Qe(e)&&!$T(e)?String(e):e,Tp=(t,e="")=>{var i;return Vn(t)?`Symbol(${(i=t.description)!=null?i:e})`:t};/**
* @vue/reactivity v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let us;class Uw{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=us,!e&&us&&(this.index=(us.scopes||(us.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,i;if(this.scopes)for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].pause();for(e=0,i=this.effects.length;e<i;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,i;if(this.scopes)for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].resume();for(e=0,i=this.effects.length;e<i;e++)this.effects[e].resume()}}run(e){if(this._active){const i=us;try{return us=this,e()}finally{us=i}}}on(){++this._on===1&&(this.prevScope=us,us=this)}off(){this._on>0&&--this._on===0&&(us=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let i,s;for(i=0,s=this.effects.length;i<s;i++)this.effects[i].stop();for(this.effects.length=0,i=0,s=this.cleanups.length;i<s;i++)this.cleanups[i]();if(this.cleanups.length=0,this.scopes){for(i=0,s=this.scopes.length;i<s;i++)this.scopes[i].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function jw(){return us}let Ft;const xp=new WeakSet;class ZT{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,us&&us.active&&us.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,xp.has(this)&&(xp.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||QT(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,C0(this),JT(this);const e=Ft,i=cn;Ft=this,cn=!0;try{return this.fn()}finally{ex(this),Ft=e,cn=i,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Zg(e);this.deps=this.depsTail=void 0,C0(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?xp.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){$m(this)&&this.run()}get dirty(){return $m(this)}}let YT=0,Wu,Gu;function QT(t,e=!1){if(t.flags|=8,e){t.next=Gu,Gu=t;return}t.next=Wu,Wu=t}function Xg(){YT++}function Kg(){if(--YT>0)return;if(Gu){let e=Gu;for(Gu=void 0;e;){const i=e.next;e.next=void 0,e.flags&=-9,e=i}}let t;for(;Wu;){let e=Wu;for(Wu=void 0;e;){const i=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=i}}if(t)throw t}function JT(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function ex(t){let e,i=t.depsTail,s=i;for(;s;){const n=s.prevDep;s.version===-1?(s===i&&(i=n),Zg(s),zw(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=n}t.deps=e,t.depsTail=i}function $m(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(tx(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function tx(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===uc)||(t.globalVersion=uc,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!$m(t))))return;t.flags|=2;const e=t.dep,i=Ft,s=cn;Ft=t,cn=!0;try{JT(t);const n=t.fn(t._value);(e.version===0||no(n,t._value))&&(t.flags|=128,t._value=n,e.version++)}catch(n){throw e.version++,n}finally{Ft=i,cn=s,ex(t),t.flags&=-3}}function Zg(t,e=!1){const{dep:i,prevSub:s,nextSub:n}=t;if(s&&(s.nextSub=n,t.prevSub=void 0),n&&(n.prevSub=s,t.nextSub=void 0),i.subs===t&&(i.subs=s,!s&&i.computed)){i.computed.flags&=-5;for(let r=i.computed.deps;r;r=r.nextDep)Zg(r,!0)}!e&&!--i.sc&&i.map&&i.map.delete(i.key)}function zw(t){const{prevDep:e,nextDep:i}=t;e&&(e.nextDep=i,t.prevDep=void 0),i&&(i.prevDep=e,t.nextDep=void 0)}let cn=!0;const ix=[];function xr(){ix.push(cn),cn=!1}function Sr(){const t=ix.pop();cn=t===void 0?!0:t}function C0(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const i=Ft;Ft=void 0;try{e()}finally{Ft=i}}}let uc=0;class Hw{constructor(e,i){this.sub=e,this.dep=i,this.version=i.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Yg{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Ft||!cn||Ft===this.computed)return;let i=this.activeLink;if(i===void 0||i.sub!==Ft)i=this.activeLink=new Hw(Ft,this),Ft.deps?(i.prevDep=Ft.depsTail,Ft.depsTail.nextDep=i,Ft.depsTail=i):Ft.deps=Ft.depsTail=i,sx(i);else if(i.version===-1&&(i.version=this.version,i.nextDep)){const s=i.nextDep;s.prevDep=i.prevDep,i.prevDep&&(i.prevDep.nextDep=s),i.prevDep=Ft.depsTail,i.nextDep=void 0,Ft.depsTail.nextDep=i,Ft.depsTail=i,Ft.deps===i&&(Ft.deps=s)}return i}trigger(e){this.version++,uc++,this.notify(e)}notify(e){Xg();try{for(let i=this.subs;i;i=i.prevSub)i.sub.notify()&&i.sub.dep.notify()}finally{Kg()}}}function sx(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)sx(s)}const i=t.dep.subs;i!==t&&(t.prevSub=i,i&&(i.nextSub=t)),t.dep.subs=t}}const Wm=new WeakMap,Yo=Symbol(""),Gm=Symbol(""),cc=Symbol("");function Di(t,e,i){if(cn&&Ft){let s=Wm.get(t);s||Wm.set(t,s=new Map);let n=s.get(i);n||(s.set(i,n=new Yg),n.map=s,n.key=i),n.track()}}function pr(t,e,i,s,n,r){const o=Wm.get(t);if(!o){uc++;return}const l=u=>{u&&u.trigger()};if(Xg(),e==="clear")o.forEach(l);else{const u=Qe(t),h=u&&Wg(i);if(u&&i==="length"){const d=Number(s);o.forEach((m,_)=>{(_==="length"||_===cc||!Vn(_)&&_>=d)&&l(m)})}else switch((i!==void 0||o.has(void 0))&&l(o.get(i)),h&&l(o.get(cc)),e){case"add":u?h&&l(o.get("length")):(l(o.get(Yo)),Qa(t)&&l(o.get(Gm)));break;case"delete":u||(l(o.get(Yo)),Qa(t)&&l(o.get(Gm)));break;case"set":Qa(t)&&l(o.get(Yo));break}}Kg()}function Fa(t){const e=pt(t);return e===t?e:(Di(e,"iterate",cc),qs(t)?e:e.map(dn))}function rf(t){return Di(t=pt(t),"iterate",cc),t}function Wr(t,e){return Cr(t)?Qo(t)?fl(dn(e)):fl(e):dn(e)}const Vw={__proto__:null,[Symbol.iterator](){return Sp(this,Symbol.iterator,t=>Wr(this,t))},concat(...t){return Fa(this).concat(...t.map(e=>Qe(e)?Fa(e):e))},entries(){return Sp(this,"entries",t=>(t[1]=Wr(this,t[1]),t))},every(t,e){return or(this,"every",t,e,void 0,arguments)},filter(t,e){return or(this,"filter",t,e,i=>i.map(s=>Wr(this,s)),arguments)},find(t,e){return or(this,"find",t,e,i=>Wr(this,i),arguments)},findIndex(t,e){return or(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return or(this,"findLast",t,e,i=>Wr(this,i),arguments)},findLastIndex(t,e){return or(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return or(this,"forEach",t,e,void 0,arguments)},includes(...t){return Cp(this,"includes",t)},indexOf(...t){return Cp(this,"indexOf",t)},join(t){return Fa(this).join(t)},lastIndexOf(...t){return Cp(this,"lastIndexOf",t)},map(t,e){return or(this,"map",t,e,void 0,arguments)},pop(){return bu(this,"pop")},push(...t){return bu(this,"push",t)},reduce(t,...e){return w0(this,"reduce",t,e)},reduceRight(t,...e){return w0(this,"reduceRight",t,e)},shift(){return bu(this,"shift")},some(t,e){return or(this,"some",t,e,void 0,arguments)},splice(...t){return bu(this,"splice",t)},toReversed(){return Fa(this).toReversed()},toSorted(t){return Fa(this).toSorted(t)},toSpliced(...t){return Fa(this).toSpliced(...t)},unshift(...t){return bu(this,"unshift",t)},values(){return Sp(this,"values",t=>Wr(this,t))}};function Sp(t,e,i){const s=rf(t),n=s[e]();return s!==t&&!qs(t)&&(n._next=n.next,n.next=()=>{const r=n._next();return r.done||(r.value=i(r.value)),r}),n}const qw=Array.prototype;function or(t,e,i,s,n,r){const o=rf(t),l=o!==t&&!qs(t),u=o[e];if(u!==qw[e]){const m=u.apply(t,r);return l?dn(m):m}let h=i;o!==t&&(l?h=function(m,_){return i.call(this,Wr(t,m),_,t)}:i.length>2&&(h=function(m,_){return i.call(this,m,_,t)}));const d=u.call(o,h,s);return l&&n?n(d):d}function w0(t,e,i,s){const n=rf(t);let r=i;return n!==t&&(qs(t)?i.length>3&&(r=function(o,l,u){return i.call(this,o,l,u,t)}):r=function(o,l,u){return i.call(this,o,Wr(t,l),u,t)}),n[e](r,...s)}function Cp(t,e,i){const s=pt(t);Di(s,"iterate",cc);const n=s[e](...i);return(n===-1||n===!1)&&Pc(i[0])?(i[0]=pt(i[0]),s[e](...i)):n}function bu(t,e,i=[]){xr(),Xg();const s=pt(t)[e].apply(t,i);return Kg(),Sr(),s}const $w=Vg("__proto__,__v_isRef,__isVue"),nx=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Vn));function Ww(t){Vn(t)||(t=String(t));const e=pt(this);return Di(e,"has",t),e.hasOwnProperty(t)}class rx{constructor(e=!1,i=!1){this._isReadonly=e,this._isShallow=i}get(e,i,s){if(i==="__v_skip")return e.__v_skip;const n=this._isReadonly,r=this._isShallow;if(i==="__v_isReactive")return!n;if(i==="__v_isReadonly")return n;if(i==="__v_isShallow")return r;if(i==="__v_raw")return s===(n?r?iE:ux:r?lx:ax).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=Qe(e);if(!n){let u;if(o&&(u=Vw[i]))return u;if(i==="hasOwnProperty")return Ww}const l=Reflect.get(e,i,Oi(e)?e:s);if((Vn(i)?nx.has(i):$w(i))||(n||Di(e,"get",i),r))return l;if(Oi(l)){const u=o&&Wg(i)?l:l.value;return n&&Rt(u)?Km(u):u}return Rt(l)?n?Km(l):Dc(l):l}}class ox extends rx{constructor(e=!1){super(!1,e)}set(e,i,s,n){let r=e[i];const o=Qe(e)&&Wg(i);if(!this._isShallow){const h=Cr(r);if(!qs(s)&&!Cr(s)&&(r=pt(r),s=pt(s)),!o&&Oi(r)&&!Oi(s))return h||(r.value=s),!0}const l=o?Number(i)<e.length:xt(e,i),u=Reflect.set(e,i,s,Oi(e)?e:n);return e===pt(n)&&(l?no(s,r)&&pr(e,"set",i,s):pr(e,"add",i,s)),u}deleteProperty(e,i){const s=xt(e,i);e[i];const n=Reflect.deleteProperty(e,i);return n&&s&&pr(e,"delete",i,void 0),n}has(e,i){const s=Reflect.has(e,i);return(!Vn(i)||!nx.has(i))&&Di(e,"has",i),s}ownKeys(e){return Di(e,"iterate",Qe(e)?"length":Yo),Reflect.ownKeys(e)}}class Gw extends rx{constructor(e=!1){super(!0,e)}set(e,i){return!0}deleteProperty(e,i){return!0}}const Xw=new ox,Kw=new Gw,Zw=new ox(!0);const Xm=t=>t,Eh=t=>Reflect.getPrototypeOf(t);function Yw(t,e,i){return function(...s){const n=this.__v_raw,r=pt(n),o=Qa(r),l=t==="entries"||t===Symbol.iterator&&o,u=t==="keys"&&o,h=n[t](...s),d=i?Xm:e?fl:dn;return!e&&Di(r,"iterate",u?Gm:Yo),{next(){const{value:m,done:_}=h.next();return _?{value:m,done:_}:{value:l?[d(m[0]),d(m[1])]:d(m),done:_}},[Symbol.iterator](){return this}}}}function Ah(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Qw(t,e){const i={get(n){const r=this.__v_raw,o=pt(r),l=pt(n);t||(no(n,l)&&Di(o,"get",n),Di(o,"get",l));const{has:u}=Eh(o),h=e?Xm:t?fl:dn;if(u.call(o,n))return h(r.get(n));if(u.call(o,l))return h(r.get(l));r!==o&&r.get(n)},get size(){const n=this.__v_raw;return!t&&Di(pt(n),"iterate",Yo),n.size},has(n){const r=this.__v_raw,o=pt(r),l=pt(n);return t||(no(n,l)&&Di(o,"has",n),Di(o,"has",l)),n===l?r.has(n):r.has(n)||r.has(l)},forEach(n,r){const o=this,l=o.__v_raw,u=pt(l),h=e?Xm:t?fl:dn;return!t&&Di(u,"iterate",Yo),l.forEach((d,m)=>n.call(r,h(d),h(m),o))}};return Bi(i,t?{add:Ah("add"),set:Ah("set"),delete:Ah("delete"),clear:Ah("clear")}:{add(n){!e&&!qs(n)&&!Cr(n)&&(n=pt(n));const r=pt(this);return Eh(r).has.call(r,n)||(r.add(n),pr(r,"add",n,n)),this},set(n,r){!e&&!qs(r)&&!Cr(r)&&(r=pt(r));const o=pt(this),{has:l,get:u}=Eh(o);let h=l.call(o,n);h||(n=pt(n),h=l.call(o,n));const d=u.call(o,n);return o.set(n,r),h?no(r,d)&&pr(o,"set",n,r):pr(o,"add",n,r),this},delete(n){const r=pt(this),{has:o,get:l}=Eh(r);let u=o.call(r,n);u||(n=pt(n),u=o.call(r,n)),l&&l.call(r,n);const h=r.delete(n);return u&&pr(r,"delete",n,void 0),h},clear(){const n=pt(this),r=n.size!==0,o=n.clear();return r&&pr(n,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(n=>{i[n]=Yw(n,t,e)}),i}function Qg(t,e){const i=Qw(t,e);return(s,n,r)=>n==="__v_isReactive"?!t:n==="__v_isReadonly"?t:n==="__v_raw"?s:Reflect.get(xt(i,n)&&n in s?i:s,n,r)}const Jw={get:Qg(!1,!1)},eE={get:Qg(!1,!0)},tE={get:Qg(!0,!1)};const ax=new WeakMap,lx=new WeakMap,ux=new WeakMap,iE=new WeakMap;function sE(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function nE(t){return t.__v_skip||!Object.isExtensible(t)?0:sE(Pw(t))}function Dc(t){return Cr(t)?t:Jg(t,!1,Xw,Jw,ax)}function cx(t){return Jg(t,!1,Zw,eE,lx)}function Km(t){return Jg(t,!0,Kw,tE,ux)}function Jg(t,e,i,s,n){if(!Rt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=nE(t);if(r===0)return t;const o=n.get(t);if(o)return o;const l=new Proxy(t,r===2?s:i);return n.set(t,l),l}function Qo(t){return Cr(t)?Qo(t.__v_raw):!!(t&&t.__v_isReactive)}function Cr(t){return!!(t&&t.__v_isReadonly)}function qs(t){return!!(t&&t.__v_isShallow)}function Pc(t){return t?!!t.__v_raw:!1}function pt(t){const e=t&&t.__v_raw;return e?pt(e):t}function Xn(t){return!xt(t,"__v_skip")&&Object.isExtensible(t)&&WT(t,"__v_skip",!0),t}const dn=t=>Rt(t)?Dc(t):t,fl=t=>Rt(t)?Km(t):t;function Oi(t){return t?t.__v_isRef===!0:!1}function ui(t){return hx(t,!1)}function e_(t){return hx(t,!0)}function hx(t,e){return Oi(t)?t:new rE(t,e)}class rE{constructor(e,i){this.dep=new Yg,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=i?e:pt(e),this._value=i?e:dn(e),this.__v_isShallow=i}get value(){return this.dep.track(),this._value}set value(e){const i=this._rawValue,s=this.__v_isShallow||qs(e)||Cr(e);e=s?e:pt(e),no(e,i)&&(this._rawValue=e,this._value=s?e:dn(e),this.dep.trigger())}}function Ja(t){return Oi(t)?t.value:t}const oE={get:(t,e,i)=>e==="__v_raw"?t:Ja(Reflect.get(t,e,i)),set:(t,e,i,s)=>{const n=t[e];return Oi(n)&&!Oi(i)?(n.value=i,!0):Reflect.set(t,e,i,s)}};function dx(t){return Qo(t)?t:new Proxy(t,oE)}class aE{constructor(e,i,s){this.fn=e,this.setter=i,this._value=void 0,this.dep=new Yg(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=uc-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!i,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Ft!==this)return QT(this,!0),!0}get value(){const e=this.dep.track();return tx(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function lE(t,e,i=!1){let s,n;return rt(t)?s=t:(s=t.get,n=t.set),new aE(s,n,i)}const Dh={},hd=new WeakMap;let Ho;function uE(t,e=!1,i=Ho){if(i){let s=hd.get(i);s||hd.set(i,s=[]),s.push(t)}}function cE(t,e,i=It){const{immediate:s,deep:n,once:r,scheduler:o,augmentJob:l,call:u}=i,h=F=>n?F:qs(F)||n===!1||n===0?mr(F,1):mr(F);let d,m,_,T,C=!1,x=!1;if(Oi(t)?(m=()=>t.value,C=qs(t)):Qo(t)?(m=()=>h(t),C=!0):Qe(t)?(x=!0,C=t.some(F=>Qo(F)||qs(F)),m=()=>t.map(F=>{if(Oi(F))return F.value;if(Qo(F))return h(F);if(rt(F))return u?u(F,2):F()})):rt(t)?e?m=u?()=>u(t,2):t:m=()=>{if(_){xr();try{_()}finally{Sr()}}const F=Ho;Ho=d;try{return u?u(t,3,[T]):t(T)}finally{Ho=F}}:m=Hn,e&&n){const F=m,z=n===!0?1/0:n;m=()=>mr(F(),z)}const E=jw(),P=()=>{d.stop(),E&&E.active&&$g(E.effects,d)};if(r&&e){const F=e;e=(...z)=>{F(...z),P()}}let k=x?new Array(t.length).fill(Dh):Dh;const I=F=>{if(!(!(d.flags&1)||!d.dirty&&!F))if(e){const z=d.run();if(n||C||(x?z.some((q,U)=>no(q,k[U])):no(z,k))){_&&_();const q=Ho;Ho=d;try{const U=[z,k===Dh?void 0:x&&k[0]===Dh?[]:k,T];k=z,u?u(e,3,U):e(...U)}finally{Ho=q}}}else d.run()};return l&&l(I),d=new ZT(m),d.scheduler=o?()=>o(I,!1):I,T=F=>uE(F,!1,d),_=d.onStop=()=>{const F=hd.get(d);if(F){if(u)u(F,4);else for(const z of F)z();hd.delete(d)}},e?s?I(!0):k=d.run():o?o(I.bind(null,!0),!0):d.run(),P.pause=d.pause.bind(d),P.resume=d.resume.bind(d),P.stop=P,P}function mr(t,e=1/0,i){if(e<=0||!Rt(t)||t.__v_skip||(i=i||new Map,(i.get(t)||0)>=e))return t;if(i.set(t,e),e--,Oi(t))mr(t.value,e,i);else if(Qe(t))for(let s=0;s<t.length;s++)mr(t[s],e,i);else if(Pl(t)||Qa(t))t.forEach(s=>{mr(s,e,i)});else if($T(t)){for(const s in t)mr(t[s],e,i);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&mr(t[s],e,i)}return t}/**
* @vue/runtime-core v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function kc(t,e,i,s){try{return s?t(...s):t()}catch(n){of(n,e,i)}}function qn(t,e,i,s){if(rt(t)){const n=kc(t,e,i,s);return n&&VT(n)&&n.catch(r=>{of(r,e,i)}),n}if(Qe(t)){const n=[];for(let r=0;r<t.length;r++)n.push(qn(t[r],e,i,s));return n}}function of(t,e,i,s=!0){const n=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||It;if(e){let l=e.parent;const u=e.proxy,h=`https://vuejs.org/error-reference/#runtime-${i}`;for(;l;){const d=l.ec;if(d){for(let m=0;m<d.length;m++)if(d[m](t,u,h)===!1)return}l=l.parent}if(r){xr(),kc(r,null,10,[t,u,h]),Sr();return}}hE(t,i,n,s,o)}function hE(t,e,i,s=!0,n=!1){if(n)throw t;console.error(t)}const Xi=[];let Ln=-1;const el=[];let Gr=null,$a=0;const fx=Promise.resolve();let dd=null;function Ji(t){const e=dd||fx;return t?e.then(this?t.bind(this):t):e}function dE(t){let e=Ln+1,i=Xi.length;for(;e<i;){const s=e+i>>>1,n=Xi[s],r=hc(n);r<t||r===t&&n.flags&2?e=s+1:i=s}return e}function t_(t){if(!(t.flags&1)){const e=hc(t),i=Xi[Xi.length-1];!i||!(t.flags&2)&&e>=hc(i)?Xi.push(t):Xi.splice(dE(e),0,t),t.flags|=1,px()}}function px(){dd||(dd=fx.then(gx))}function fE(t){Qe(t)?el.push(...t):Gr&&t.id===-1?Gr.splice($a+1,0,t):t.flags&1||(el.push(t),t.flags|=1),px()}function E0(t,e,i=Ln+1){for(;i<Xi.length;i++){const s=Xi[i];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;Xi.splice(i,1),i--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function mx(t){if(el.length){const e=[...new Set(el)].sort((i,s)=>hc(i)-hc(s));if(el.length=0,Gr){Gr.push(...e);return}for(Gr=e,$a=0;$a<Gr.length;$a++){const i=Gr[$a];i.flags&4&&(i.flags&=-2),i.flags&8||i(),i.flags&=-2}Gr=null,$a=0}}const hc=t=>t.id==null?t.flags&2?-1:1/0:t.id;function gx(t){try{for(Ln=0;Ln<Xi.length;Ln++){const e=Xi[Ln];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),kc(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Ln<Xi.length;Ln++){const e=Xi[Ln];e&&(e.flags&=-2)}Ln=-1,Xi.length=0,mx(),dd=null,(Xi.length||el.length)&&gx()}}let ks=null,_x=null;function fd(t){const e=ks;return ks=t,_x=t&&t.type.__scopeId||null,e}function yr(t,e=ks,i){if(!e||t._n)return t;const s=(...n)=>{s._d&&gd(-1);const r=fd(e);let o;try{o=t(...n)}finally{fd(r),s._d&&gd(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Ds(t,e){if(ks===null)return t;const i=hf(ks),s=t.dirs||(t.dirs=[]);for(let n=0;n<e.length;n++){let[r,o,l,u=It]=e[n];r&&(rt(r)&&(r={mounted:r,updated:r}),r.deep&&mr(o),s.push({dir:r,instance:i,value:o,oldValue:void 0,arg:l,modifiers:u}))}return t}function Ro(t,e,i,s){const n=t.dirs,r=e&&e.dirs;for(let o=0;o<n.length;o++){const l=n[o];r&&(l.oldValue=r[o].value);let u=l.dir[s];u&&(xr(),qn(u,i,8,[t.el,l,t,e]),Sr())}}function Qi(t,e){if(ki){let i=ki.provides;const s=ki.parent&&ki.parent.provides;s===i&&(i=ki.provides=Object.create(s)),i[t]=e}}function pi(t,e,i=!1){const s=dA();if(s||tl){let n=tl?tl._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(n&&t in n)return n[t];if(arguments.length>1)return i&&rt(e)?e.call(s&&s.proxy):e}}const pE=Symbol.for("v-scx"),mE=()=>pi(pE);function Jo(t,e,i){return yx(t,e,i)}function yx(t,e,i=It){const{immediate:s,deep:n,flush:r,once:o}=i,l=Bi({},i),u=e&&s||!e&&r!=="post";let h;if(fc){if(r==="sync"){const T=mE();h=T.__watcherHandles||(T.__watcherHandles=[])}else if(!u){const T=()=>{};return T.stop=Hn,T.resume=Hn,T.pause=Hn,T}}const d=ki;l.call=(T,C,x)=>qn(T,d,C,x);let m=!1;r==="post"?l.scheduler=T=>{As(T,d&&d.suspense)}:r!=="sync"&&(m=!0,l.scheduler=(T,C)=>{C?T():t_(T)}),l.augmentJob=T=>{e&&(T.flags|=4),m&&(T.flags|=2,d&&(T.id=d.uid,T.i=d))};const _=cE(t,e,l);return fc&&(h?h.push(_):u&&_()),_}function gE(t,e,i){const s=this.proxy,n=ci(t)?t.includes(".")?vx(s,t):()=>s[t]:t.bind(s,s);let r;rt(e)?r=e:(r=e.handler,i=e);const o=Ic(this),l=yx(n,r.bind(s),i);return o(),l}function vx(t,e){const i=e.split(".");return()=>{let s=t;for(let n=0;n<i.length&&s;n++)s=s[i[n]];return s}}const _E=Symbol("_vte"),yE=t=>t.__isTeleport,vE=Symbol("_leaveCb");function i_(t,e){t.shapeFlag&6&&t.component?(t.transition=e,i_(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function bs(t,e){return rt(t)?Bi({name:t.name},e,{setup:t}):t}function bx(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const pd=new WeakMap;function Xu(t,e,i,s,n=!1){if(Qe(t)){t.forEach((C,x)=>Xu(C,e&&(Qe(e)?e[x]:e),i,s,n));return}if(Ku(s)&&!n){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Xu(t,e,i,s.component.subTree);return}const r=s.shapeFlag&4?hf(s.component):s.el,o=n?null:r,{i:l,r:u}=t,h=e&&e.r,d=l.refs===It?l.refs={}:l.refs,m=l.setupState,_=pt(m),T=m===It?HT:C=>xt(_,C);if(h!=null&&h!==u){if(A0(e),ci(h))d[h]=null,T(h)&&(m[h]=null);else if(Oi(h)){h.value=null;const C=e;C.k&&(d[C.k]=null)}}if(rt(u))kc(u,l,12,[o,d]);else{const C=ci(u),x=Oi(u);if(C||x){const E=()=>{if(t.f){const P=C?T(u)?m[u]:d[u]:u.value;if(n)Qe(P)&&$g(P,r);else if(Qe(P))P.includes(r)||P.push(r);else if(C)d[u]=[r],T(u)&&(m[u]=d[u]);else{const k=[r];u.value=k,t.k&&(d[t.k]=k)}}else C?(d[u]=o,T(u)&&(m[u]=o)):x&&(u.value=o,t.k&&(d[t.k]=o))};if(o){const P=()=>{E(),pd.delete(t)};P.id=-1,pd.set(t,P),As(P,i)}else A0(t),E()}}}function A0(t){const e=pd.get(t);e&&(e.flags|=8,pd.delete(t))}sf().requestIdleCallback;sf().cancelIdleCallback;const Ku=t=>!!t.type.__asyncLoader,Tx=t=>t.type.__isKeepAlive;function bE(t,e){xx(t,"a",e)}function TE(t,e){xx(t,"da",e)}function xx(t,e,i=ki){const s=t.__wdc||(t.__wdc=()=>{let n=i;for(;n;){if(n.isDeactivated)return;n=n.parent}return t()});if(af(e,s,i),i){let n=i.parent;for(;n&&n.parent;)Tx(n.parent.vnode)&&xE(s,e,i,n),n=n.parent}}function xE(t,e,i,s){const n=af(e,t,s,!0);kl(()=>{$g(s[e],n)},i)}function af(t,e,i=ki,s=!1){if(i){const n=i[t]||(i[t]=[]),r=e.__weh||(e.__weh=(...o)=>{xr();const l=Ic(i),u=qn(e,i,t,o);return l(),Sr(),u});return s?n.unshift(r):n.push(r),r}}const Er=t=>(e,i=ki)=>{(!fc||t==="sp")&&af(t,(...s)=>e(...s),i)},SE=Er("bm"),Qs=Er("m"),CE=Er("bu"),wE=Er("u"),lf=Er("bum"),kl=Er("um"),EE=Er("sp"),AE=Er("rtg"),DE=Er("rtc");function PE(t,e=ki){af("ec",t,e)}const kE="components";function Pi(t,e){return LE(kE,t,!0,e)||t}const IE=Symbol.for("v-ndc");function LE(t,e,i=!0,s=!1){const n=ks||ki;if(n){const r=n.type;{const l=_A(r,!1);if(l&&(l===e||l===Gs(e)||l===ef(Gs(e))))return r}const o=D0(n[t]||r[t],e)||D0(n.appContext[t],e);return!o&&s?r:o}}function D0(t,e){return t&&(t[e]||t[Gs(e)]||t[ef(Gs(e))])}function ea(t,e,i,s){let n;const r=i,o=Qe(t);if(o||ci(t)){const l=o&&Qo(t);let u=!1,h=!1;l&&(u=!qs(t),h=Cr(t),t=rf(t)),n=new Array(t.length);for(let d=0,m=t.length;d<m;d++)n[d]=e(u?h?fl(dn(t[d])):dn(t[d]):t[d],d,void 0,r)}else if(typeof t=="number"){n=new Array(t);for(let l=0;l<t;l++)n[l]=e(l+1,l,void 0,r)}else if(Rt(t))if(t[Symbol.iterator])n=Array.from(t,(l,u)=>e(l,u,void 0,r));else{const l=Object.keys(t);n=new Array(l.length);for(let u=0,h=l.length;u<h;u++){const d=l[u];n[u]=e(t[d],d,u,r)}}else n=[];return n}const Zm=t=>t?zx(t)?hf(t):Zm(t.parent):null,Zu=Bi(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Zm(t.parent),$root:t=>Zm(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Cx(t),$forceUpdate:t=>t.f||(t.f=()=>{t_(t.update)}),$nextTick:t=>t.n||(t.n=Ji.bind(t.proxy)),$watch:t=>gE.bind(t)}),wp=(t,e)=>t!==It&&!t.__isScriptSetup&&xt(t,e),OE={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:i,setupState:s,data:n,props:r,accessCache:o,type:l,appContext:u}=t;if(e[0]!=="$"){const _=o[e];if(_!==void 0)switch(_){case 1:return s[e];case 2:return n[e];case 4:return i[e];case 3:return r[e]}else{if(wp(s,e))return o[e]=1,s[e];if(n!==It&&xt(n,e))return o[e]=2,n[e];if(xt(r,e))return o[e]=3,r[e];if(i!==It&&xt(i,e))return o[e]=4,i[e];Ym&&(o[e]=0)}}const h=Zu[e];let d,m;if(h)return e==="$attrs"&&Di(t.attrs,"get",""),h(t);if((d=l.__cssModules)&&(d=d[e]))return d;if(i!==It&&xt(i,e))return o[e]=4,i[e];if(m=u.config.globalProperties,xt(m,e))return m[e]},set({_:t},e,i){const{data:s,setupState:n,ctx:r}=t;return wp(n,e)?(n[e]=i,!0):s!==It&&xt(s,e)?(s[e]=i,!0):xt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=i,!0)},has({_:{data:t,setupState:e,accessCache:i,ctx:s,appContext:n,props:r,type:o}},l){let u;return!!(i[l]||t!==It&&l[0]!=="$"&&xt(t,l)||wp(e,l)||xt(r,l)||xt(s,l)||xt(Zu,l)||xt(n.config.globalProperties,l)||(u=o.__cssModules)&&u[l])},defineProperty(t,e,i){return i.get!=null?t._.accessCache[e]=0:xt(i,"value")&&this.set(t,e,i.value,null),Reflect.defineProperty(t,e,i)}};function P0(t){return Qe(t)?t.reduce((e,i)=>(e[i]=null,e),{}):t}let Ym=!0;function ME(t){const e=Cx(t),i=t.proxy,s=t.ctx;Ym=!1,e.beforeCreate&&k0(e.beforeCreate,t,"bc");const{data:n,computed:r,methods:o,watch:l,provide:u,inject:h,created:d,beforeMount:m,mounted:_,beforeUpdate:T,updated:C,activated:x,deactivated:E,beforeDestroy:P,beforeUnmount:k,destroyed:I,unmounted:F,render:z,renderTracked:q,renderTriggered:U,errorCaptured:Z,serverPrefetch:D,expose:R,inheritAttrs:Y,components:Q,directives:J,filters:ae}=e;if(h&&RE(h,s,null),o)for(const se in o){const ee=o[se];rt(ee)&&(s[se]=ee.bind(i))}if(n){const se=n.call(i,i);Rt(se)&&(t.data=Dc(se))}if(Ym=!0,r)for(const se in r){const ee=r[se],fe=rt(ee)?ee.bind(i,i):rt(ee.get)?ee.get.bind(i,i):Hn,re=!rt(ee)&&rt(ee.set)?ee.set.bind(i):Hn,ue=Zi({get:fe,set:re});Object.defineProperty(s,se,{enumerable:!0,configurable:!0,get:()=>ue.value,set:Oe=>ue.value=Oe})}if(l)for(const se in l)Sx(l[se],s,i,se);if(u){const se=rt(u)?u.call(i):u;Reflect.ownKeys(se).forEach(ee=>{Qi(ee,se[ee])})}d&&k0(d,t,"c");function le(se,ee){Qe(ee)?ee.forEach(fe=>se(fe.bind(i))):ee&&se(ee.bind(i))}if(le(SE,m),le(Qs,_),le(CE,T),le(wE,C),le(bE,x),le(TE,E),le(PE,Z),le(DE,q),le(AE,U),le(lf,k),le(kl,F),le(EE,D),Qe(R))if(R.length){const se=t.exposed||(t.exposed={});R.forEach(ee=>{Object.defineProperty(se,ee,{get:()=>i[ee],set:fe=>i[ee]=fe,enumerable:!0})})}else t.exposed||(t.exposed={});z&&t.render===Hn&&(t.render=z),Y!=null&&(t.inheritAttrs=Y),Q&&(t.components=Q),J&&(t.directives=J),D&&bx(t)}function RE(t,e,i=Hn){Qe(t)&&(t=Qm(t));for(const s in t){const n=t[s];let r;Rt(n)?"default"in n?r=pi(n.from||s,n.default,!0):r=pi(n.from||s):r=pi(n),Oi(r)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[s]=r}}function k0(t,e,i){qn(Qe(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,i)}function Sx(t,e,i,s){let n=s.includes(".")?vx(i,s):()=>i[s];if(ci(t)){const r=e[t];rt(r)&&Jo(n,r)}else if(rt(t))Jo(n,t.bind(i));else if(Rt(t))if(Qe(t))t.forEach(r=>Sx(r,e,i,s));else{const r=rt(t.handler)?t.handler.bind(i):e[t.handler];rt(r)&&Jo(n,r,t)}}function Cx(t){const e=t.type,{mixins:i,extends:s}=e,{mixins:n,optionsCache:r,config:{optionMergeStrategies:o}}=t.appContext,l=r.get(e);let u;return l?u=l:!n.length&&!i&&!s?u=e:(u={},n.length&&n.forEach(h=>md(u,h,o,!0)),md(u,e,o)),Rt(e)&&r.set(e,u),u}function md(t,e,i,s=!1){const{mixins:n,extends:r}=e;r&&md(t,r,i,!0),n&&n.forEach(o=>md(t,o,i,!0));for(const o in e)if(!(s&&o==="expose")){const l=NE[o]||i&&i[o];t[o]=l?l(t[o],e[o]):e[o]}return t}const NE={data:I0,props:L0,emits:L0,methods:Bu,computed:Bu,beforeCreate:Wi,created:Wi,beforeMount:Wi,mounted:Wi,beforeUpdate:Wi,updated:Wi,beforeDestroy:Wi,beforeUnmount:Wi,destroyed:Wi,unmounted:Wi,activated:Wi,deactivated:Wi,errorCaptured:Wi,serverPrefetch:Wi,components:Bu,directives:Bu,watch:FE,provide:I0,inject:BE};function I0(t,e){return e?t?function(){return Bi(rt(t)?t.call(this,this):t,rt(e)?e.call(this,this):e)}:e:t}function BE(t,e){return Bu(Qm(t),Qm(e))}function Qm(t){if(Qe(t)){const e={};for(let i=0;i<t.length;i++)e[t[i]]=t[i];return e}return t}function Wi(t,e){return t?[...new Set([].concat(t,e))]:e}function Bu(t,e){return t?Bi(Object.create(null),t,e):e}function L0(t,e){return t?Qe(t)&&Qe(e)?[...new Set([...t,...e])]:Bi(Object.create(null),P0(t),P0(e??{})):e}function FE(t,e){if(!t)return e;if(!e)return t;const i=Bi(Object.create(null),t);for(const s in e)i[s]=Wi(t[s],e[s]);return i}function wx(){return{app:null,config:{isNativeTag:HT,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let UE=0;function jE(t,e){return function(s,n=null){rt(s)||(s=Bi({},s)),n!=null&&!Rt(n)&&(n=null);const r=wx(),o=new WeakSet,l=[];let u=!1;const h=r.app={_uid:UE++,_component:s,_props:n,_container:null,_context:r,_instance:null,version:Vx,get config(){return r.config},set config(d){},use(d,...m){return o.has(d)||(d&&rt(d.install)?(o.add(d),d.install(h,...m)):rt(d)&&(o.add(d),d(h,...m))),h},mixin(d){return r.mixins.includes(d)||r.mixins.push(d),h},component(d,m){return m?(r.components[d]=m,h):r.components[d]},directive(d,m){return m?(r.directives[d]=m,h):r.directives[d]},mount(d,m,_){if(!u){const T=h._ceVNode||dt(s,n);return T.appContext=r,_===!0?_="svg":_===!1&&(_=void 0),t(T,d,_),u=!0,h._container=d,d.__vue_app__=h,hf(T.component)}},onUnmount(d){l.push(d)},unmount(){u&&(qn(l,h._instance,16),t(null,h._container),delete h._container.__vue_app__)},provide(d,m){return r.provides[d]=m,h},runWithContext(d){const m=tl;tl=h;try{return d()}finally{tl=m}}};return h}}let tl=null;const zE=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Gs(e)}Modifiers`]||t[`${fa(e)}Modifiers`];function HE(t,e,...i){if(t.isUnmounted)return;const s=t.vnode.props||It;let n=i;const r=e.startsWith("update:"),o=r&&zE(s,e.slice(7));o&&(o.trim&&(n=i.map(d=>ci(d)?d.trim():d)),o.number&&(n=i.map(tf)));let l,u=s[l=bp(e)]||s[l=bp(Gs(e))];!u&&r&&(u=s[l=bp(fa(e))]),u&&qn(u,t,6,n);const h=s[l+"Once"];if(h){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,qn(h,t,6,n)}}const VE=new WeakMap;function Ex(t,e,i=!1){const s=i?VE:e.emitsCache,n=s.get(t);if(n!==void 0)return n;const r=t.emits;let o={},l=!1;if(!rt(t)){const u=h=>{const d=Ex(h,e,!0);d&&(l=!0,Bi(o,d))};!i&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}return!r&&!l?(Rt(t)&&s.set(t,null),null):(Qe(r)?r.forEach(u=>o[u]=null):Bi(o,r),Rt(t)&&s.set(t,o),o)}function uf(t,e){return!t||!Qd(e)?!1:(e=e.slice(2).replace(/Once$/,""),xt(t,e[0].toLowerCase()+e.slice(1))||xt(t,fa(e))||xt(t,e))}function O0(t){const{type:e,vnode:i,proxy:s,withProxy:n,propsOptions:[r],slots:o,attrs:l,emit:u,render:h,renderCache:d,props:m,data:_,setupState:T,ctx:C,inheritAttrs:x}=t,E=fd(t);let P,k;try{if(i.shapeFlag&4){const F=n||s,z=F;P=Nn(h.call(z,F,d,m,T,_,C)),k=l}else{const F=e;P=Nn(F.length>1?F(m,{attrs:l,slots:o,emit:u}):F(m,null)),k=e.props?l:qE(l)}}catch(F){Yu.length=0,of(F,t,1),P=dt(ao)}let I=P;if(k&&x!==!1){const F=Object.keys(k),{shapeFlag:z}=I;F.length&&z&7&&(r&&F.some(qg)&&(k=$E(k,r)),I=pl(I,k,!1,!0))}return i.dirs&&(I=pl(I,null,!1,!0),I.dirs=I.dirs?I.dirs.concat(i.dirs):i.dirs),i.transition&&i_(I,i.transition),P=I,fd(E),P}const qE=t=>{let e;for(const i in t)(i==="class"||i==="style"||Qd(i))&&((e||(e={}))[i]=t[i]);return e},$E=(t,e)=>{const i={};for(const s in t)(!qg(s)||!(s.slice(9)in e))&&(i[s]=t[s]);return i};function WE(t,e,i){const{props:s,children:n,component:r}=t,{props:o,children:l,patchFlag:u}=e,h=r.emitsOptions;if(e.dirs||e.transition)return!0;if(i&&u>=0){if(u&1024)return!0;if(u&16)return s?M0(s,o,h):!!o;if(u&8){const d=e.dynamicProps;for(let m=0;m<d.length;m++){const _=d[m];if(o[_]!==s[_]&&!uf(h,_))return!0}}}else return(n||l)&&(!l||!l.$stable)?!0:s===o?!1:s?o?M0(s,o,h):!0:!!o;return!1}function M0(t,e,i){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let n=0;n<s.length;n++){const r=s[n];if(e[r]!==t[r]&&!uf(i,r))return!0}return!1}function GE({vnode:t,parent:e},i){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=i,e=e.parent;else break}}const Ax={},Dx=()=>Object.create(Ax),Px=t=>Object.getPrototypeOf(t)===Ax;function XE(t,e,i,s=!1){const n={},r=Dx();t.propsDefaults=Object.create(null),kx(t,e,n,r);for(const o in t.propsOptions[0])o in n||(n[o]=void 0);i?t.props=s?n:cx(n):t.type.props?t.props=n:t.props=r,t.attrs=r}function KE(t,e,i,s){const{props:n,attrs:r,vnode:{patchFlag:o}}=t,l=pt(n),[u]=t.propsOptions;let h=!1;if((s||o>0)&&!(o&16)){if(o&8){const d=t.vnode.dynamicProps;for(let m=0;m<d.length;m++){let _=d[m];if(uf(t.emitsOptions,_))continue;const T=e[_];if(u)if(xt(r,_))T!==r[_]&&(r[_]=T,h=!0);else{const C=Gs(_);n[C]=Jm(u,l,C,T,t,!1)}else T!==r[_]&&(r[_]=T,h=!0)}}}else{kx(t,e,n,r)&&(h=!0);let d;for(const m in l)(!e||!xt(e,m)&&((d=fa(m))===m||!xt(e,d)))&&(u?i&&(i[m]!==void 0||i[d]!==void 0)&&(n[m]=Jm(u,l,m,void 0,t,!0)):delete n[m]);if(r!==l)for(const m in r)(!e||!xt(e,m))&&(delete r[m],h=!0)}h&&pr(t.attrs,"set","")}function kx(t,e,i,s){const[n,r]=t.propsOptions;let o=!1,l;if(e)for(let u in e){if($u(u))continue;const h=e[u];let d;n&&xt(n,d=Gs(u))?!r||!r.includes(d)?i[d]=h:(l||(l={}))[d]=h:uf(t.emitsOptions,u)||(!(u in s)||h!==s[u])&&(s[u]=h,o=!0)}if(r){const u=pt(i),h=l||It;for(let d=0;d<r.length;d++){const m=r[d];i[m]=Jm(n,u,m,h[m],t,!xt(h,m))}}return o}function Jm(t,e,i,s,n,r){const o=t[i];if(o!=null){const l=xt(o,"default");if(l&&s===void 0){const u=o.default;if(o.type!==Function&&!o.skipFactory&&rt(u)){const{propsDefaults:h}=n;if(i in h)s=h[i];else{const d=Ic(n);s=h[i]=u.call(null,e),d()}}else s=u;n.ce&&n.ce._setProp(i,s)}o[0]&&(r&&!l?s=!1:o[1]&&(s===""||s===fa(i))&&(s=!0))}return s}const ZE=new WeakMap;function Ix(t,e,i=!1){const s=i?ZE:e.propsCache,n=s.get(t);if(n)return n;const r=t.props,o={},l=[];let u=!1;if(!rt(t)){const d=m=>{u=!0;const[_,T]=Ix(m,e,!0);Bi(o,_),T&&l.push(...T)};!i&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!r&&!u)return Rt(t)&&s.set(t,Ya),Ya;if(Qe(r))for(let d=0;d<r.length;d++){const m=Gs(r[d]);R0(m)&&(o[m]=It)}else if(r)for(const d in r){const m=Gs(d);if(R0(m)){const _=r[d],T=o[m]=Qe(_)||rt(_)?{type:_}:Bi({},_),C=T.type;let x=!1,E=!0;if(Qe(C))for(let P=0;P<C.length;++P){const k=C[P],I=rt(k)&&k.name;if(I==="Boolean"){x=!0;break}else I==="String"&&(E=!1)}else x=rt(C)&&C.name==="Boolean";T[0]=x,T[1]=E,(x||xt(T,"default"))&&l.push(m)}}const h=[o,l];return Rt(t)&&s.set(t,h),h}function R0(t){return t[0]!=="$"&&!$u(t)}const s_=t=>t==="_"||t==="_ctx"||t==="$stable",n_=t=>Qe(t)?t.map(Nn):[Nn(t)],YE=(t,e,i)=>{if(e._n)return e;const s=yr((...n)=>n_(e(...n)),i);return s._c=!1,s},Lx=(t,e,i)=>{const s=t._ctx;for(const n in t){if(s_(n))continue;const r=t[n];if(rt(r))e[n]=YE(n,r,s);else if(r!=null){const o=n_(r);e[n]=()=>o}}},Ox=(t,e)=>{const i=n_(e);t.slots.default=()=>i},Mx=(t,e,i)=>{for(const s in e)(i||!s_(s))&&(t[s]=e[s])},QE=(t,e,i)=>{const s=t.slots=Dx();if(t.vnode.shapeFlag&32){const n=e._;n?(Mx(s,e,i),i&&WT(s,"_",n,!0)):Lx(e,s)}else e&&Ox(t,e)},JE=(t,e,i)=>{const{vnode:s,slots:n}=t;let r=!0,o=It;if(s.shapeFlag&32){const l=e._;l?i&&l===1?r=!1:Mx(n,e,i):(r=!e.$stable,Lx(e,n)),o=e}else e&&(Ox(t,e),o={default:1});if(r)for(const l in n)!s_(l)&&o[l]==null&&delete n[l]},As=nA;function eA(t){return tA(t)}function tA(t,e){const i=sf();i.__VUE__=!0;const{insert:s,remove:n,patchProp:r,createElement:o,createText:l,createComment:u,setText:h,setElementText:d,parentNode:m,nextSibling:_,setScopeId:T=Hn,insertStaticContent:C}=t,x=(H,X,ie,ve=null,ye=null,Te=null,Ie=void 0,Pe=null,xe=!!X.dynamicChildren)=>{if(H===X)return;H&&!Tu(H,X)&&(ve=me(H),Oe(H,ye,Te,!0),H=null),X.patchFlag===-2&&(xe=!1,X.dynamicChildren=null);const{type:be,ref:Ue,shapeFlag:Re}=X;switch(be){case cf:E(H,X,ie,ve);break;case ao:P(H,X,ie,ve);break;case Qh:H==null&&k(X,ie,ve,Ie);break;case vi:Q(H,X,ie,ve,ye,Te,Ie,Pe,xe);break;default:Re&1?z(H,X,ie,ve,ye,Te,Ie,Pe,xe):Re&6?J(H,X,ie,ve,ye,Te,Ie,Pe,xe):(Re&64||Re&128)&&be.process(H,X,ie,ve,ye,Te,Ie,Pe,xe,qe)}Ue!=null&&ye?Xu(Ue,H&&H.ref,Te,X||H,!X):Ue==null&&H&&H.ref!=null&&Xu(H.ref,null,Te,H,!0)},E=(H,X,ie,ve)=>{if(H==null)s(X.el=l(X.children),ie,ve);else{const ye=X.el=H.el;X.children!==H.children&&h(ye,X.children)}},P=(H,X,ie,ve)=>{H==null?s(X.el=u(X.children||""),ie,ve):X.el=H.el},k=(H,X,ie,ve)=>{[H.el,H.anchor]=C(H.children,X,ie,ve,H.el,H.anchor)},I=({el:H,anchor:X},ie,ve)=>{let ye;for(;H&&H!==X;)ye=_(H),s(H,ie,ve),H=ye;s(X,ie,ve)},F=({el:H,anchor:X})=>{let ie;for(;H&&H!==X;)ie=_(H),n(H),H=ie;n(X)},z=(H,X,ie,ve,ye,Te,Ie,Pe,xe)=>{if(X.type==="svg"?Ie="svg":X.type==="math"&&(Ie="mathml"),H==null)q(X,ie,ve,ye,Te,Ie,Pe,xe);else{const be=H.el&&H.el._isVueCE?H.el:null;try{be&&be._beginPatch(),D(H,X,ye,Te,Ie,Pe,xe)}finally{be&&be._endPatch()}}},q=(H,X,ie,ve,ye,Te,Ie,Pe)=>{let xe,be;const{props:Ue,shapeFlag:Re,transition:$e,dirs:Ge}=H;if(xe=H.el=o(H.type,Te,Ue&&Ue.is,Ue),Re&8?d(xe,H.children):Re&16&&Z(H.children,xe,null,ve,ye,Ep(H,Te),Ie,Pe),Ge&&Ro(H,null,ve,"created"),U(xe,H,H.scopeId,Ie,ve),Ue){for(const ct in Ue)ct!=="value"&&!$u(ct)&&r(xe,ct,null,Ue[ct],Te,ve);"value"in Ue&&r(xe,"value",null,Ue.value,Te),(be=Ue.onVnodeBeforeMount)&&An(be,ve,H)}Ge&&Ro(H,null,ve,"beforeMount");const Je=iA(ye,$e);Je&&$e.beforeEnter(xe),s(xe,X,ie),((be=Ue&&Ue.onVnodeMounted)||Je||Ge)&&As(()=>{be&&An(be,ve,H),Je&&$e.enter(xe),Ge&&Ro(H,null,ve,"mounted")},ye)},U=(H,X,ie,ve,ye)=>{if(ie&&T(H,ie),ve)for(let Te=0;Te<ve.length;Te++)T(H,ve[Te]);if(ye){let Te=ye.subTree;if(X===Te||Fx(Te.type)&&(Te.ssContent===X||Te.ssFallback===X)){const Ie=ye.vnode;U(H,Ie,Ie.scopeId,Ie.slotScopeIds,ye.parent)}}},Z=(H,X,ie,ve,ye,Te,Ie,Pe,xe=0)=>{for(let be=xe;be<H.length;be++){const Ue=H[be]=Pe?Xr(H[be]):Nn(H[be]);x(null,Ue,X,ie,ve,ye,Te,Ie,Pe)}},D=(H,X,ie,ve,ye,Te,Ie)=>{const Pe=X.el=H.el;let{patchFlag:xe,dynamicChildren:be,dirs:Ue}=X;xe|=H.patchFlag&16;const Re=H.props||It,$e=X.props||It;let Ge;if(ie&&No(ie,!1),(Ge=$e.onVnodeBeforeUpdate)&&An(Ge,ie,X,H),Ue&&Ro(X,H,ie,"beforeUpdate"),ie&&No(ie,!0),(Re.innerHTML&&$e.innerHTML==null||Re.textContent&&$e.textContent==null)&&d(Pe,""),be?R(H.dynamicChildren,be,Pe,ie,ve,Ep(X,ye),Te):Ie||ee(H,X,Pe,null,ie,ve,Ep(X,ye),Te,!1),xe>0){if(xe&16)Y(Pe,Re,$e,ie,ye);else if(xe&2&&Re.class!==$e.class&&r(Pe,"class",null,$e.class,ye),xe&4&&r(Pe,"style",Re.style,$e.style,ye),xe&8){const Je=X.dynamicProps;for(let ct=0;ct<Je.length;ct++){const at=Je[ct],Qt=Re[at],Wt=$e[at];(Wt!==Qt||at==="value")&&r(Pe,at,Qt,Wt,ye,ie)}}xe&1&&H.children!==X.children&&d(Pe,X.children)}else!Ie&&be==null&&Y(Pe,Re,$e,ie,ye);((Ge=$e.onVnodeUpdated)||Ue)&&As(()=>{Ge&&An(Ge,ie,X,H),Ue&&Ro(X,H,ie,"updated")},ve)},R=(H,X,ie,ve,ye,Te,Ie)=>{for(let Pe=0;Pe<X.length;Pe++){const xe=H[Pe],be=X[Pe],Ue=xe.el&&(xe.type===vi||!Tu(xe,be)||xe.shapeFlag&198)?m(xe.el):ie;x(xe,be,Ue,null,ve,ye,Te,Ie,!0)}},Y=(H,X,ie,ve,ye)=>{if(X!==ie){if(X!==It)for(const Te in X)!$u(Te)&&!(Te in ie)&&r(H,Te,X[Te],null,ye,ve);for(const Te in ie){if($u(Te))continue;const Ie=ie[Te],Pe=X[Te];Ie!==Pe&&Te!=="value"&&r(H,Te,Pe,Ie,ye,ve)}"value"in ie&&r(H,"value",X.value,ie.value,ye)}},Q=(H,X,ie,ve,ye,Te,Ie,Pe,xe)=>{const be=X.el=H?H.el:l(""),Ue=X.anchor=H?H.anchor:l("");let{patchFlag:Re,dynamicChildren:$e,slotScopeIds:Ge}=X;Ge&&(Pe=Pe?Pe.concat(Ge):Ge),H==null?(s(be,ie,ve),s(Ue,ie,ve),Z(X.children||[],ie,Ue,ye,Te,Ie,Pe,xe)):Re>0&&Re&64&&$e&&H.dynamicChildren&&H.dynamicChildren.length===$e.length?(R(H.dynamicChildren,$e,ie,ye,Te,Ie,Pe),(X.key!=null||ye&&X===ye.subTree)&&Rx(H,X,!0)):ee(H,X,ie,Ue,ye,Te,Ie,Pe,xe)},J=(H,X,ie,ve,ye,Te,Ie,Pe,xe)=>{X.slotScopeIds=Pe,H==null?X.shapeFlag&512?ye.ctx.activate(X,ie,ve,Ie,xe):ae(X,ie,ve,ye,Te,Ie,xe):ce(H,X,xe)},ae=(H,X,ie,ve,ye,Te,Ie)=>{const Pe=H.component=hA(H,ve,ye);if(Tx(H)&&(Pe.ctx.renderer=qe),fA(Pe,!1,Ie),Pe.asyncDep){if(ye&&ye.registerDep(Pe,le,Ie),!H.el){const xe=Pe.subTree=dt(ao);P(null,xe,X,ie),H.placeholder=xe.el}}else le(Pe,H,X,ie,ye,Te,Ie)},ce=(H,X,ie)=>{const ve=X.component=H.component;if(WE(H,X,ie))if(ve.asyncDep&&!ve.asyncResolved){se(ve,X,ie);return}else ve.next=X,ve.update();else X.el=H.el,ve.vnode=X},le=(H,X,ie,ve,ye,Te,Ie)=>{const Pe=()=>{if(H.isMounted){let{next:Re,bu:$e,u:Ge,parent:Je,vnode:ct}=H;{const it=Nx(H);if(it){Re&&(Re.el=ct.el,se(H,Re,Ie)),it.asyncDep.then(()=>{H.isUnmounted||Pe()});return}}let at=Re,Qt;No(H,!1),Re?(Re.el=ct.el,se(H,Re,Ie)):Re=ct,$e&&Yh($e),(Qt=Re.props&&Re.props.onVnodeBeforeUpdate)&&An(Qt,Je,Re,ct),No(H,!0);const Wt=O0(H),ri=H.subTree;H.subTree=Wt,x(ri,Wt,m(ri.el),me(ri),H,ye,Te),Re.el=Wt.el,at===null&&GE(H,Wt.el),Ge&&As(Ge,ye),(Qt=Re.props&&Re.props.onVnodeUpdated)&&As(()=>An(Qt,Je,Re,ct),ye)}else{let Re;const{el:$e,props:Ge}=X,{bm:Je,m:ct,parent:at,root:Qt,type:Wt}=H,ri=Ku(X);No(H,!1),Je&&Yh(Je),!ri&&(Re=Ge&&Ge.onVnodeBeforeMount)&&An(Re,at,X),No(H,!0);{Qt.ce&&Qt.ce._def.shadowRoot!==!1&&Qt.ce._injectChildStyle(Wt);const it=H.subTree=O0(H);x(null,it,ie,ve,H,ye,Te),X.el=it.el}if(ct&&As(ct,ye),!ri&&(Re=Ge&&Ge.onVnodeMounted)){const it=X;As(()=>An(Re,at,it),ye)}(X.shapeFlag&256||at&&Ku(at.vnode)&&at.vnode.shapeFlag&256)&&H.a&&As(H.a,ye),H.isMounted=!0,X=ie=ve=null}};H.scope.on();const xe=H.effect=new ZT(Pe);H.scope.off();const be=H.update=xe.run.bind(xe),Ue=H.job=xe.runIfDirty.bind(xe);Ue.i=H,Ue.id=H.uid,xe.scheduler=()=>t_(Ue),No(H,!0),be()},se=(H,X,ie)=>{X.component=H;const ve=H.vnode.props;H.vnode=X,H.next=null,KE(H,X.props,ve,ie),JE(H,X.children,ie),xr(),E0(H),Sr()},ee=(H,X,ie,ve,ye,Te,Ie,Pe,xe=!1)=>{const be=H&&H.children,Ue=H?H.shapeFlag:0,Re=X.children,{patchFlag:$e,shapeFlag:Ge}=X;if($e>0){if($e&128){re(be,Re,ie,ve,ye,Te,Ie,Pe,xe);return}else if($e&256){fe(be,Re,ie,ve,ye,Te,Ie,Pe,xe);return}}Ge&8?(Ue&16&&He(be,ye,Te),Re!==be&&d(ie,Re)):Ue&16?Ge&16?re(be,Re,ie,ve,ye,Te,Ie,Pe,xe):He(be,ye,Te,!0):(Ue&8&&d(ie,""),Ge&16&&Z(Re,ie,ve,ye,Te,Ie,Pe,xe))},fe=(H,X,ie,ve,ye,Te,Ie,Pe,xe)=>{H=H||Ya,X=X||Ya;const be=H.length,Ue=X.length,Re=Math.min(be,Ue);let $e;for($e=0;$e<Re;$e++){const Ge=X[$e]=xe?Xr(X[$e]):Nn(X[$e]);x(H[$e],Ge,ie,null,ye,Te,Ie,Pe,xe)}be>Ue?He(H,ye,Te,!0,!1,Re):Z(X,ie,ve,ye,Te,Ie,Pe,xe,Re)},re=(H,X,ie,ve,ye,Te,Ie,Pe,xe)=>{let be=0;const Ue=X.length;let Re=H.length-1,$e=Ue-1;for(;be<=Re&&be<=$e;){const Ge=H[be],Je=X[be]=xe?Xr(X[be]):Nn(X[be]);if(Tu(Ge,Je))x(Ge,Je,ie,null,ye,Te,Ie,Pe,xe);else break;be++}for(;be<=Re&&be<=$e;){const Ge=H[Re],Je=X[$e]=xe?Xr(X[$e]):Nn(X[$e]);if(Tu(Ge,Je))x(Ge,Je,ie,null,ye,Te,Ie,Pe,xe);else break;Re--,$e--}if(be>Re){if(be<=$e){const Ge=$e+1,Je=Ge<Ue?X[Ge].el:ve;for(;be<=$e;)x(null,X[be]=xe?Xr(X[be]):Nn(X[be]),ie,Je,ye,Te,Ie,Pe,xe),be++}}else if(be>$e)for(;be<=Re;)Oe(H[be],ye,Te,!0),be++;else{const Ge=be,Je=be,ct=new Map;for(be=Je;be<=$e;be++){const ii=X[be]=xe?Xr(X[be]):Nn(X[be]);ii.key!=null&&ct.set(ii.key,be)}let at,Qt=0;const Wt=$e-Je+1;let ri=!1,it=0;const ts=new Array(Wt);for(be=0;be<Wt;be++)ts[be]=0;for(be=Ge;be<=Re;be++){const ii=H[be];if(Qt>=Wt){Oe(ii,ye,Te,!0);continue}let xi;if(ii.key!=null)xi=ct.get(ii.key);else for(at=Je;at<=$e;at++)if(ts[at-Je]===0&&Tu(ii,X[at])){xi=at;break}xi===void 0?Oe(ii,ye,Te,!0):(ts[xi-Je]=be+1,xi>=it?it=xi:ri=!0,x(ii,X[xi],ie,null,ye,Te,Ie,Pe,xe),Qt++)}const is=ri?sA(ts):Ya;for(at=is.length-1,be=Wt-1;be>=0;be--){const ii=Je+be,xi=X[ii],ss=X[ii+1],Ts=ii+1<Ue?ss.el||Bx(ss):ve;ts[be]===0?x(null,xi,ie,Ts,ye,Te,Ie,Pe,xe):ri&&(at<0||be!==is[at]?ue(xi,ie,Ts,2):at--)}}},ue=(H,X,ie,ve,ye=null)=>{const{el:Te,type:Ie,transition:Pe,children:xe,shapeFlag:be}=H;if(be&6){ue(H.component.subTree,X,ie,ve);return}if(be&128){H.suspense.move(X,ie,ve);return}if(be&64){Ie.move(H,X,ie,qe);return}if(Ie===vi){s(Te,X,ie);for(let Re=0;Re<xe.length;Re++)ue(xe[Re],X,ie,ve);s(H.anchor,X,ie);return}if(Ie===Qh){I(H,X,ie);return}if(ve!==2&&be&1&&Pe)if(ve===0)Pe.beforeEnter(Te),s(Te,X,ie),As(()=>Pe.enter(Te),ye);else{const{leave:Re,delayLeave:$e,afterLeave:Ge}=Pe,Je=()=>{H.ctx.isUnmounted?n(Te):s(Te,X,ie)},ct=()=>{Te._isLeaving&&Te[vE](!0),Re(Te,()=>{Je(),Ge&&Ge()})};$e?$e(Te,Je,ct):ct()}else s(Te,X,ie)},Oe=(H,X,ie,ve=!1,ye=!1)=>{const{type:Te,props:Ie,ref:Pe,children:xe,dynamicChildren:be,shapeFlag:Ue,patchFlag:Re,dirs:$e,cacheIndex:Ge}=H;if(Re===-2&&(ye=!1),Pe!=null&&(xr(),Xu(Pe,null,ie,H,!0),Sr()),Ge!=null&&(X.renderCache[Ge]=void 0),Ue&256){X.ctx.deactivate(H);return}const Je=Ue&1&&$e,ct=!Ku(H);let at;if(ct&&(at=Ie&&Ie.onVnodeBeforeUnmount)&&An(at,X,H),Ue&6)Ee(H.component,ie,ve);else{if(Ue&128){H.suspense.unmount(ie,ve);return}Je&&Ro(H,null,X,"beforeUnmount"),Ue&64?H.type.remove(H,X,ie,qe,ve):be&&!be.hasOnce&&(Te!==vi||Re>0&&Re&64)?He(be,X,ie,!1,!0):(Te===vi&&Re&384||!ye&&Ue&16)&&He(xe,X,ie),ve&&ze(H)}(ct&&(at=Ie&&Ie.onVnodeUnmounted)||Je)&&As(()=>{at&&An(at,X,H),Je&&Ro(H,null,X,"unmounted")},ie)},ze=H=>{const{type:X,el:ie,anchor:ve,transition:ye}=H;if(X===vi){Me(ie,ve);return}if(X===Qh){F(H);return}const Te=()=>{n(ie),ye&&!ye.persisted&&ye.afterLeave&&ye.afterLeave()};if(H.shapeFlag&1&&ye&&!ye.persisted){const{leave:Ie,delayLeave:Pe}=ye,xe=()=>Ie(ie,Te);Pe?Pe(H.el,Te,xe):xe()}else Te()},Me=(H,X)=>{let ie;for(;H!==X;)ie=_(H),n(H),H=ie;n(X)},Ee=(H,X,ie)=>{const{bum:ve,scope:ye,job:Te,subTree:Ie,um:Pe,m:xe,a:be}=H;N0(xe),N0(be),ve&&Yh(ve),ye.stop(),Te&&(Te.flags|=8,Oe(Ie,H,X,ie)),Pe&&As(Pe,X),As(()=>{H.isUnmounted=!0},X)},He=(H,X,ie,ve=!1,ye=!1,Te=0)=>{for(let Ie=Te;Ie<H.length;Ie++)Oe(H[Ie],X,ie,ve,ye)},me=H=>{if(H.shapeFlag&6)return me(H.component.subTree);if(H.shapeFlag&128)return H.suspense.next();const X=_(H.anchor||H.el),ie=X&&X[_E];return ie?_(ie):X};let Ae=!1;const Le=(H,X,ie)=>{let ve;H==null?X._vnode&&(Oe(X._vnode,null,null,!0),ve=X._vnode.component):x(X._vnode||null,H,X,null,null,null,ie),X._vnode=H,Ae||(Ae=!0,E0(ve),mx(),Ae=!1)},qe={p:x,um:Oe,m:ue,r:ze,mt:ae,mc:Z,pc:ee,pbc:R,n:me,o:t};return{render:Le,hydrate:void 0,createApp:jE(Le)}}function Ep({type:t,props:e},i){return i==="svg"&&t==="foreignObject"||i==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:i}function No({effect:t,job:e},i){i?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function iA(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Rx(t,e,i=!1){const s=t.children,n=e.children;if(Qe(s)&&Qe(n))for(let r=0;r<s.length;r++){const o=s[r];let l=n[r];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=n[r]=Xr(n[r]),l.el=o.el),!i&&l.patchFlag!==-2&&Rx(o,l)),l.type===cf&&(l.patchFlag!==-1?l.el=o.el:l.__elIndex=r+(t.type===vi?1:0)),l.type===ao&&!l.el&&(l.el=o.el)}}function sA(t){const e=t.slice(),i=[0];let s,n,r,o,l;const u=t.length;for(s=0;s<u;s++){const h=t[s];if(h!==0){if(n=i[i.length-1],t[n]<h){e[s]=n,i.push(s);continue}for(r=0,o=i.length-1;r<o;)l=r+o>>1,t[i[l]]<h?r=l+1:o=l;h<t[i[r]]&&(r>0&&(e[s]=i[r-1]),i[r]=s)}}for(r=i.length,o=i[r-1];r-- >0;)i[r]=o,o=e[o];return i}function Nx(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Nx(e)}function N0(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}function Bx(t){if(t.placeholder)return t.placeholder;const e=t.component;return e?Bx(e.subTree):null}const Fx=t=>t.__isSuspense;function nA(t,e){e&&e.pendingBranch?Qe(t)?e.effects.push(...t):e.effects.push(t):fE(t)}const vi=Symbol.for("v-fgt"),cf=Symbol.for("v-txt"),ao=Symbol.for("v-cmt"),Qh=Symbol.for("v-stc"),Yu=[];let Is=null;function St(t=!1){Yu.push(Is=t?null:[])}function rA(){Yu.pop(),Is=Yu[Yu.length-1]||null}let dc=1;function gd(t,e=!1){dc+=t,t<0&&Is&&e&&(Is.hasOnce=!0)}function Ux(t){return t.dynamicChildren=dc>0?Is||Ya:null,rA(),dc>0&&Is&&Is.push(t),t}function Lt(t,e,i,s,n,r){return Ux(we(t,e,i,s,n,r,!0))}function r_(t,e,i,s,n){return Ux(dt(t,e,i,s,n,!0))}function _d(t){return t?t.__v_isVNode===!0:!1}function Tu(t,e){return t.type===e.type&&t.key===e.key}const jx=({key:t})=>t??null,Jh=({ref:t,ref_key:e,ref_for:i})=>(typeof t=="number"&&(t=""+t),t!=null?ci(t)||Oi(t)||rt(t)?{i:ks,r:t,k:e,f:!!i}:t:null);function we(t,e=null,i=null,s=0,n=null,r=t===vi?0:1,o=!1,l=!1){const u={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&jx(e),ref:e&&Jh(e),scopeId:_x,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:ks};return l?(o_(u,i),r&128&&t.normalize(u)):i&&(u.shapeFlag|=ci(i)?8:16),dc>0&&!o&&Is&&(u.patchFlag>0||r&6)&&u.patchFlag!==32&&Is.push(u),u}const dt=oA;function oA(t,e=null,i=null,s=0,n=null,r=!1){if((!t||t===IE)&&(t=ao),_d(t)){const l=pl(t,e,!0);return i&&o_(l,i),dc>0&&!r&&Is&&(l.shapeFlag&6?Is[Is.indexOf(t)]=l:Is.push(l)),l.patchFlag=-2,l}if(yA(t)&&(t=t.__vccOpts),e){e=aA(e);let{class:l,style:u}=e;l&&!ci(l)&&(e.class=nf(l)),Rt(u)&&(Pc(u)&&!Qe(u)&&(u=Bi({},u)),e.style=un(u))}const o=ci(t)?1:Fx(t)?128:yE(t)?64:Rt(t)?4:rt(t)?2:0;return we(t,e,i,s,n,o,r,!0)}function aA(t){return t?Pc(t)||Px(t)?Bi({},t):t:null}function pl(t,e,i=!1,s=!1){const{props:n,ref:r,patchFlag:o,children:l,transition:u}=t,h=e?lA(n||{},e):n,d={__v_isVNode:!0,__v_skip:!0,type:t.type,props:h,key:h&&jx(h),ref:e&&e.ref?i&&r?Qe(r)?r.concat(Jh(e)):[r,Jh(e)]:Jh(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==vi?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:u,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&pl(t.ssContent),ssFallback:t.ssFallback&&pl(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return u&&s&&i_(d,u.clone(d)),d}function Hs(t=" ",e=0){return dt(cf,null,t,e)}function eg(t,e){const i=dt(Qh,null,t);return i.staticCount=e,i}function Qu(t="",e=!1){return e?(St(),r_(ao,null,t)):dt(ao,null,t)}function Nn(t){return t==null||typeof t=="boolean"?dt(ao):Qe(t)?dt(vi,null,t.slice()):_d(t)?Xr(t):dt(cf,null,String(t))}function Xr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:pl(t)}function o_(t,e){let i=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(Qe(e))i=16;else if(typeof e=="object")if(s&65){const n=e.default;n&&(n._c&&(n._d=!1),o_(t,n()),n._c&&(n._d=!0));return}else{i=32;const n=e._;!n&&!Px(e)?e._ctx=ks:n===3&&ks&&(ks.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else rt(e)?(e={default:e,_ctx:ks},i=32):(e=String(e),s&64?(i=16,e=[Hs(e)]):i=8);t.children=e,t.shapeFlag|=i}function lA(...t){const e={};for(let i=0;i<t.length;i++){const s=t[i];for(const n in s)if(n==="class")e.class!==s.class&&(e.class=nf([e.class,s.class]));else if(n==="style")e.style=un([e.style,s.style]);else if(Qd(n)){const r=e[n],o=s[n];o&&r!==o&&!(Qe(r)&&r.includes(o))&&(e[n]=r?[].concat(r,o):o)}else n!==""&&(e[n]=s[n])}return e}function An(t,e,i,s=null){qn(t,e,7,[i,s])}const uA=wx();let cA=0;function hA(t,e,i){const s=t.type,n=(e?e.appContext:t.appContext)||uA,r={uid:cA++,vnode:t,type:s,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Uw(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ix(s,n),emitsOptions:Ex(s,n),emit:null,emitted:null,propsDefaults:It,inheritAttrs:s.inheritAttrs,ctx:It,data:It,props:It,attrs:It,slots:It,refs:It,setupState:It,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=HE.bind(null,r),t.ce&&t.ce(r),r}let ki=null;const dA=()=>ki||ks;let yd,tg;{const t=sf(),e=(i,s)=>{let n;return(n=t[i])||(n=t[i]=[]),n.push(s),r=>{n.length>1?n.forEach(o=>o(r)):n[0](r)}};yd=e("__VUE_INSTANCE_SETTERS__",i=>ki=i),tg=e("__VUE_SSR_SETTERS__",i=>fc=i)}const Ic=t=>{const e=ki;return yd(t),t.scope.on(),()=>{t.scope.off(),yd(e)}},B0=()=>{ki&&ki.scope.off(),yd(null)};function zx(t){return t.vnode.shapeFlag&4}let fc=!1;function fA(t,e=!1,i=!1){e&&tg(e);const{props:s,children:n}=t.vnode,r=zx(t);XE(t,s,r,e),QE(t,n,i||e);const o=r?pA(t,e):void 0;return e&&tg(!1),o}function pA(t,e){const i=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,OE);const{setup:s}=i;if(s){xr();const n=t.setupContext=s.length>1?gA(t):null,r=Ic(t),o=kc(s,t,0,[t.props,n]),l=VT(o);if(Sr(),r(),(l||t.sp)&&!Ku(t)&&bx(t),l){if(o.then(B0,B0),e)return o.then(u=>{F0(t,u)}).catch(u=>{of(u,t,0)});t.asyncDep=o}else F0(t,o)}else Hx(t)}function F0(t,e,i){rt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Rt(e)&&(t.setupState=dx(e)),Hx(t)}function Hx(t,e,i){const s=t.type;t.render||(t.render=s.render||Hn);{const n=Ic(t);xr();try{ME(t)}finally{Sr(),n()}}}const mA={get(t,e){return Di(t,"get",""),t[e]}};function gA(t){const e=i=>{t.exposed=i||{}};return{attrs:new Proxy(t.attrs,mA),slots:t.slots,emit:t.emit,expose:e}}function hf(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(dx(Xn(t.exposed)),{get(e,i){if(i in e)return e[i];if(i in Zu)return Zu[i](t)},has(e,i){return i in e||i in Zu}})):t.proxy}function _A(t,e=!0){return rt(t)?t.displayName||t.name:t.name||e&&t.__name}function yA(t){return rt(t)&&"__vccOpts"in t}const Zi=(t,e)=>lE(t,e,fc);function fn(t,e,i){try{gd(-1);const s=arguments.length;return s===2?Rt(e)&&!Qe(e)?_d(e)?dt(t,null,[e]):dt(t,e):dt(t,null,e):(s>3?i=Array.prototype.slice.call(arguments,2):s===3&&_d(i)&&(i=[i]),dt(t,e,i))}finally{gd(1)}}const Vx="3.5.26";/**
* @vue/runtime-dom v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ig;const U0=typeof window<"u"&&window.trustedTypes;if(U0)try{ig=U0.createPolicy("vue",{createHTML:t=>t})}catch{}const qx=ig?t=>ig.createHTML(t):t=>t,vA="http://www.w3.org/2000/svg",bA="http://www.w3.org/1998/Math/MathML",dr=typeof document<"u"?document:null,j0=dr&&dr.createElement("template"),TA={insert:(t,e,i)=>{e.insertBefore(t,i||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,i,s)=>{const n=e==="svg"?dr.createElementNS(vA,t):e==="mathml"?dr.createElementNS(bA,t):i?dr.createElement(t,{is:i}):dr.createElement(t);return t==="select"&&s&&s.multiple!=null&&n.setAttribute("multiple",s.multiple),n},createText:t=>dr.createTextNode(t),createComment:t=>dr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>dr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,i,s,n,r){const o=i?i.previousSibling:e.lastChild;if(n&&(n===r||n.nextSibling))for(;e.insertBefore(n.cloneNode(!0),i),!(n===r||!(n=n.nextSibling)););else{j0.innerHTML=qx(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const l=j0.content;if(s==="svg"||s==="mathml"){const u=l.firstChild;for(;u.firstChild;)l.appendChild(u.firstChild);l.removeChild(u)}e.insertBefore(l,i)}return[o?o.nextSibling:e.firstChild,i?i.previousSibling:e.lastChild]}},xA=Symbol("_vtc");function SA(t,e,i){const s=t[xA];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):i?t.setAttribute("class",e):t.className=e}const vd=Symbol("_vod"),$x=Symbol("_vsh"),Ap={name:"show",beforeMount(t,{value:e},{transition:i}){t[vd]=t.style.display==="none"?"":t.style.display,i&&e?i.beforeEnter(t):xu(t,e)},mounted(t,{value:e},{transition:i}){i&&e&&i.enter(t)},updated(t,{value:e,oldValue:i},{transition:s}){!e!=!i&&(s?e?(s.beforeEnter(t),xu(t,!0),s.enter(t)):s.leave(t,()=>{xu(t,!1)}):xu(t,e))},beforeUnmount(t,{value:e}){xu(t,e)}};function xu(t,e){t.style.display=e?t[vd]:"none",t[$x]=!e}const CA=Symbol(""),wA=/(?:^|;)\s*display\s*:/;function EA(t,e,i){const s=t.style,n=ci(i);let r=!1;if(i&&!n){if(e)if(ci(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();i[l]==null&&ed(s,l,"")}else for(const o in e)i[o]==null&&ed(s,o,"");for(const o in i)o==="display"&&(r=!0),ed(s,o,i[o])}else if(n){if(e!==i){const o=s[CA];o&&(i+=";"+o),s.cssText=i,r=wA.test(i)}}else e&&t.removeAttribute("style");vd in t&&(t[vd]=r?s.display:"",t[$x]&&(s.display="none"))}const z0=/\s*!important$/;function ed(t,e,i){if(Qe(i))i.forEach(s=>ed(t,e,s));else if(i==null&&(i=""),e.startsWith("--"))t.setProperty(e,i);else{const s=AA(t,e);z0.test(i)?t.setProperty(fa(s),i.replace(z0,""),"important"):t[s]=i}}const H0=["Webkit","Moz","ms"],Dp={};function AA(t,e){const i=Dp[e];if(i)return i;let s=Gs(e);if(s!=="filter"&&s in t)return Dp[e]=s;s=ef(s);for(let n=0;n<H0.length;n++){const r=H0[n]+s;if(r in t)return Dp[e]=r}return e}const V0="http://www.w3.org/1999/xlink";function q0(t,e,i,s,n,r=Bw(e)){s&&e.startsWith("xlink:")?i==null?t.removeAttributeNS(V0,e.slice(6,e.length)):t.setAttributeNS(V0,e,i):i==null||r&&!GT(i)?t.removeAttribute(e):t.setAttribute(e,r?"":Vn(i)?String(i):i)}function $0(t,e,i,s,n){if(e==="innerHTML"||e==="textContent"){i!=null&&(t[e]=e==="innerHTML"?qx(i):i);return}const r=t.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const l=r==="OPTION"?t.getAttribute("value")||"":t.value,u=i==null?t.type==="checkbox"?"on":"":String(i);(l!==u||!("_value"in t))&&(t.value=u),i==null&&t.removeAttribute(e),t._value=i;return}let o=!1;if(i===""||i==null){const l=typeof t[e];l==="boolean"?i=GT(i):i==null&&l==="string"?(i="",o=!0):l==="number"&&(i=0,o=!0)}try{t[e]=i}catch{}o&&t.removeAttribute(n||e)}function Jr(t,e,i,s){t.addEventListener(e,i,s)}function DA(t,e,i,s){t.removeEventListener(e,i,s)}const W0=Symbol("_vei");function PA(t,e,i,s,n=null){const r=t[W0]||(t[W0]={}),o=r[e];if(s&&o)o.value=s;else{const[l,u]=kA(e);if(s){const h=r[e]=OA(s,n);Jr(t,l,h,u)}else o&&(DA(t,l,o,u),r[e]=void 0)}}const G0=/(?:Once|Passive|Capture)$/;function kA(t){let e;if(G0.test(t)){e={};let s;for(;s=t.match(G0);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):fa(t.slice(2)),e]}let Pp=0;const IA=Promise.resolve(),LA=()=>Pp||(IA.then(()=>Pp=0),Pp=Date.now());function OA(t,e){const i=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=i.attached)return;qn(MA(s,i.value),e,5,[s])};return i.value=t,i.attached=LA(),i}function MA(t,e){if(Qe(e)){const i=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{i.call(t),t._stopped=!0},e.map(s=>n=>!n._stopped&&s&&s(n))}else return e}const X0=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,RA=(t,e,i,s,n,r)=>{const o=n==="svg";e==="class"?SA(t,s,o):e==="style"?EA(t,i,s):Qd(e)?qg(e)||PA(t,e,i,s,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):NA(t,e,s,o))?($0(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&q0(t,e,s,o,r,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!ci(s))?$0(t,Gs(e),s,r,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),q0(t,e,s,o))};function NA(t,e,i,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&X0(e)&&rt(i));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const n=t.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return X0(e)&&ci(i)?!1:e in t}const ml=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Qe(e)?i=>Yh(e,i):e};function BA(t){t.target.composing=!0}function K0(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const br=Symbol("_assign");function Z0(t,e,i){return e&&(t=t.trim()),i&&(t=tf(t)),t}const FA={created(t,{modifiers:{lazy:e,trim:i,number:s}},n){t[br]=ml(n);const r=s||n.props&&n.props.type==="number";Jr(t,e?"change":"input",o=>{o.target.composing||t[br](Z0(t.value,i,r))}),(i||r)&&Jr(t,"change",()=>{t.value=Z0(t.value,i,r)}),e||(Jr(t,"compositionstart",BA),Jr(t,"compositionend",K0),Jr(t,"change",K0))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:i,modifiers:{lazy:s,trim:n,number:r}},o){if(t[br]=ml(o),t.composing)return;const l=(r||t.type==="number")&&!/^0\d/.test(t.value)?tf(t.value):t.value,u=e??"";l!==u&&(document.activeElement===t&&t.type!=="range"&&(s&&e===i||n&&t.value.trim()===u)||(t.value=u))}},Su={deep:!0,created(t,e,i){t[br]=ml(i),Jr(t,"change",()=>{const s=t._modelValue,n=pc(t),r=t.checked,o=t[br];if(Qe(s)){const l=Gg(s,n),u=l!==-1;if(r&&!u)o(s.concat(n));else if(!r&&u){const h=[...s];h.splice(l,1),o(h)}}else if(Pl(s)){const l=new Set(s);r?l.add(n):l.delete(n),o(l)}else o(Wx(t,r))})},mounted:Y0,beforeUpdate(t,e,i){t[br]=ml(i),Y0(t,e,i)}};function Y0(t,{value:e,oldValue:i},s){t._modelValue=e;let n;if(Qe(e))n=Gg(e,s.props.value)>-1;else if(Pl(e))n=e.has(s.props.value);else{if(e===i)return;n=Ac(e,Wx(t,!0))}t.checked!==n&&(t.checked=n)}const td={deep:!0,created(t,{value:e,modifiers:{number:i}},s){const n=Pl(e);Jr(t,"change",()=>{const r=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>i?tf(pc(o)):pc(o));t[br](t.multiple?n?new Set(r):r:r[0]),t._assigning=!0,Ji(()=>{t._assigning=!1})}),t[br]=ml(s)},mounted(t,{value:e}){Q0(t,e)},beforeUpdate(t,e,i){t[br]=ml(i)},updated(t,{value:e}){t._assigning||Q0(t,e)}};function Q0(t,e){const i=t.multiple,s=Qe(e);if(!(i&&!s&&!Pl(e))){for(let n=0,r=t.options.length;n<r;n++){const o=t.options[n],l=pc(o);if(i)if(s){const u=typeof l;u==="string"||u==="number"?o.selected=e.some(h=>String(h)===String(l)):o.selected=Gg(e,l)>-1}else o.selected=e.has(l);else if(Ac(pc(o),e)){t.selectedIndex!==n&&(t.selectedIndex=n);return}}!i&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function pc(t){return"_value"in t?t._value:t.value}function Wx(t,e){const i=e?"_trueValue":"_falseValue";return i in t?t[i]:e}const UA=["ctrl","shift","alt","meta"],jA={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>UA.some(i=>t[`${i}Key`]&&!e.includes(i))},zA=(t,e)=>{const i=t._withMods||(t._withMods={}),s=e.join(".");return i[s]||(i[s]=((n,...r)=>{for(let o=0;o<e.length;o++){const l=jA[e[o]];if(l&&l(n,e))return}return t(n,...r)}))},HA=Bi({patchProp:RA},TA);let J0;function Gx(){return J0||(J0=eA(HA))}const VA=((...t)=>{Gx().render(...t)}),qA=((...t)=>{const e=Gx().createApp(...t),{mount:i}=e;return e.mount=s=>{const n=WA(s);if(!n)return;const r=e._component;!rt(r)&&!r.render&&!r.template&&(r.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const o=i(n,!1,$A(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},e});function $A(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function WA(t){return ci(t)?document.querySelector(t):t}var eo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ho(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function GA(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var i=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var n=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(i,s,n.get?n:{enumerable:!0,get:function(){return t[s]}})}),i}var kp={exports:{}},ey;function XA(){return ey||(ey=1,(function(t,e){(function(i,s){t.exports=s()})(window,(function(){return(function(i){var s={};function n(r){if(s[r])return s[r].exports;var o=s[r]={i:r,l:!1,exports:{}};return i[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=i,n.c=s,n.d=function(r,o,l){n.o(r,o)||Object.defineProperty(r,o,{enumerable:!0,get:l})},n.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},n.t=function(r,o){if(1&o&&(r=n(r)),8&o||4&o&&typeof r=="object"&&r&&r.__esModule)return r;var l=Object.create(null);if(n.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:r}),2&o&&typeof r!="string")for(var u in r)n.d(l,u,function(h){return r[h]}.bind(null,u));return l},n.n=function(r){var o=r&&r.__esModule?function(){return r.default}:function(){return r};return n.d(o,"a",o),o},n.o=function(r,o){return Object.prototype.hasOwnProperty.call(r,o)},n.p="",n(n.s=0)})([function(i,s,n){function r(){return window.Piwik.getAsyncTracker()}function o(C){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return new Promise((function(E,P){var k=document.createElement("script");k.async=!0,k.defer=!0,k.src=C,x&&["anonymous","use-credentials"].includes(x)&&(k.crossOrigin=x),(document.head||document.getElementsByTagName("head")[0]).appendChild(k),k.onload=E,k.onerror=P}))}function l(C,x){return C.resolve(x).href}n.r(s),n.d(s,"matomoKey",(function(){return h})),n.d(s,"default",(function(){return T}));var u={debug:!1,disableCookies:!1,requireCookieConsent:!1,enableHeartBeatTimer:!1,enableLinkTracking:!0,heartBeatTimerInterval:15,requireConsent:!1,trackInitialView:!0,trackSiteSearch:!1,trackerFileName:"matomo",trackerUrl:void 0,trackerScriptUrl:void 0,userId:void 0,cookieDomain:void 0,domains:void 0,preInitActions:[],crossOrigin:void 0},h="Matomo";function d(C,x,E){if(typeof C.trackSiteSearch=="function"){var P=C.trackSiteSearch(x);if(P)return void(function(k,I){var F=I.keyword,z=I.category,q=I.resultsCount,U=r();k.debug&&console.debug("[vue-matomo] Site Search "+F),U.trackSiteSearch(F,z,q)})(C,P)}(function(k,I,F){var z,q,U,Z=r();if(k.router){if(q=l(k.router,I.fullPath),U=F&&F.fullPath?l(k.router,F.fullPath):void 0,I.meta.analyticsIgnore)return void(k.debug&&console.debug("[vue-matomo] Ignoring "+q));k.debug&&console.debug("[vue-matomo] Tracking "+q),z=I.meta.title||q}U&&Z.setReferrerUrl(window.location.origin+U),q&&Z.setCustomUrl(window.location.origin+q),Z.trackPageView(z)})(C,x,E)}function m(C,x){var E=r();if(Number(C.version.split(".")[0])>2?(C.config.globalProperties.$piwik=E,C.config.globalProperties.$matomo=E,C.provide(h,E)):(C.prototype.$piwik=E,C.prototype.$matomo=E),x.trackInitialView&&x.router){var P=x.router.currentRoute.value?x.router.currentRoute.value:x.router.currentRoute;d(x,P)}x.router&&x.router.afterEach((function(k,I){d(x,k,I),x.enableLinkTracking&&E.enableLinkTracking()}))}function _(){return new Promise((function(C,x){var E=Date.now(),P=setInterval((function(){if(window.Piwik)return clearInterval(P),C();if(Date.now()>=E+3e3)throw clearInterval(P),new Error("[vue-matomo]: window.Piwik undefined after waiting for ".concat(3e3,"ms"))}),50)}))}function T(C){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},E=Object.assign({},u,x),P=E.host,k=E.siteId,I=E.trackerFileName,F=E.trackerUrl,z=E.trackerScriptUrl,q=z||"".concat(P,"/").concat(I,".js"),U=F||"".concat(P,"/").concat(I,".php");window._paq=window._paq||[],window._paq.push(["setTrackerUrl",U]),window._paq.push(["setSiteId",k]),E.requireConsent&&window._paq.push(["requireConsent"]),E.userId&&window._paq.push(["setUserId",E.userId]),E.enableLinkTracking&&window._paq.push(["enableLinkTracking"]),E.disableCookies&&window._paq.push(["disableCookies"]),E.requireCookieConsent&&window._paq.push(["requireCookieConsent"]),E.enableHeartBeatTimer&&window._paq.push(["enableHeartBeatTimer",E.heartBeatTimerInterval]),E.cookieDomain&&window._paq.push(["setCookieDomain",E.cookieDomain]),E.domains&&window._paq.push(["setDomains",E.domains]),E.preInitActions.forEach((function(Z){return window._paq.push(Z)})),o(q,E.crossOrigin).then((function(){return _()})).then((function(){return m(C,E)})).catch((function(Z){if(Z.target)return console.error("[vue-matomo] An error occurred trying to load ".concat(Z.target.src,". ")+"If the file exists you may have an ad- or trackingblocker enabled.");console.error(Z)}))}}])}))})(kp)),kp.exports}var KA=XA();const ZA=ho(KA);function Xx(){const t=new URLSearchParams(window.location.search),e={regionId:null,c2cId:null,city:null},i=t.get("region");i&&(e.regionId=i);const s=t.get("c2c")||t.get("com2co");s&&(e.c2cId=s);const n=t.get("city");if(n){const r=n.split(",");r.length>=2&&(e.city={regionId:r[0]||null,com2coId:r[1]||null,cityId:r[2]||null,latY:parseFloat(r[3]||r[0]),lonX:parseFloat(r[4]||r[1]),name:r[5]||null,locType:r[6]||"city"},(isNaN(e.city.latY)||isNaN(e.city.lonX))&&(console.warn("Invalid city coordinates in URL parameters"),e.city=null))}return e}function YA(t={}){const{regionId:e=null,c2cId:i=null,city:s=null,keepExisting:n=!0}=t,r=new URLSearchParams;if(n){const u=new URLSearchParams(window.location.search);for(const[h,d]of u)["region","c2c","com2co","city"].includes(h)||r.append(h,d)}if(e&&r.set("region",e),i&&r.set("c2c",i),s?.latY!==void 0&&s?.lonX!==void 0){const u=`${s.regionId||""},${s.com2coId||""},${s.cityId||""},${s.latY},${s.lonX},${s.name||""},${s.locType||"city"}`;r.set("city",u)}const o=window.location.pathname,l=r.toString();return l?`${o}?${l}`:o}function QA(){const t=Xx();return t.region!==null||t.c2c!==null||t.city!==null}function Kx(t){if(!t)return JA;const e={regionId:t.regionId||null,com2coId:t.com2coId||null,cityId:t.cityId||null,latY:t.latY,lonX:t.lonX,name:t.cityName||null,locType:t.locType||"city"};return YA({regionId:t.regionId,c2cId:t.com2coId,city:e,keepExisting:!1})}const JA={locType:"city",regionId:"9",com2coId:"1",com2coName:"Haut-de-France",cityId:"2878",cityName:"LILLE",cityInsee:"59350",lonX:"3.046986424",latY:"50.631855028"},eD="/parcs-et-jardins/assets/logo-autmel-BU08OabO.png",tD="/parcs-et-jardins/assets/logo-deulair-BiDgV_t7.png",iD="/parcs-et-jardins/assets/logo-entrelianes-Br5QtD0M.png",sD="/parcs-et-jardins/assets/logo-lmo-DpmkYUEv.png",Kn=(t,e)=>{const i=t.__vccOpts||t;for(const[s,n]of e)i[s]=n;return i},nD={name:"HeaderAsso",data(){return{appVersion:"#not-set"}},mounted(){this.loadAppVersion()},methods:{async loadAppVersion(){const t=localStorage.getItem("app-version");if(t){this.appVersion=t;return}try{const i=await(await fetch("/parcs-et-jardins/version.json")).json();i?.version&&(this.appVersion=i.version,localStorage.setItem("app-version",i.version))}catch(e){console.error("Erreur lors du chargement de version:",e)}},generateShareLink(){const t=localStorage.getItem("location-selected");if(!t){console.log("Aucune localisation slectionne");return}try{const e=JSON.parse(t),i=Kx(e),s=`${window.location.protocol}//${window.location.host}`,r=window.location.pathname.split("/").filter(Boolean),o=r.length>0?`/${r[0]}/carte`:"/carte",l=i.includes("?")?i.split("?")[1]:"",u=`${s}${o}${l?"?"+l:""}`;navigator.clipboard.writeText(u).then(()=>{console.log("Lien copi dans le presse-papiers:",u)}).catch(h=>{console.error("Erreur lors de la copie:",h)})}catch(e){console.error("Erreur lors de la gnration du lien:",e)}}}},rD={class:"container mx-auto px-4 py-6 relative"},oD=["title"],aD={class:"text-center mb-6"},lD={class:"flex flex-wrap gap-2 items-center justify-center mb-6"},uD={class:"w-full"};function cD(t,e,i,s,n,r){const o=Pi("router-link"),l=Pi("router-view");return St(),Lt("div",rD,[we("div",{class:"absolute left-4 top-2 text-xs text-gray-400 select-none",title:"Version: "+n.appVersion}," v"+Ps(n.appVersion),9,oD),we("div",aD,[we("h3",{class:"text-2xl font-bold text-gray-800",onDblclick:e[0]||(e[0]=(...u)=>r.generateShareLink&&r.generateShareLink(...u)),style:{cursor:"pointer"}},"Parcs accessibles en m par habitant",32)]),e[5]||(e[5]=eg('<div class="flex justify-center items-center gap-10 mb-4" data-v-4adf56e4><a href="https://www.helloasso.com/associations/aut-mel" target="_blank" rel="noopener noreferrer" class="hover:opacity-80 transition-opacity" data-v-4adf56e4><img alt="Aut&#39;MEL&#39;" src="'+eD+'" class="h-20 border-2 border-transparent" data-v-4adf56e4></a><a href="https://www.helloasso.com/associations/deul-air" target="_blank" rel="noopener noreferrer" class="hover:opacity-80 transition-opacity" data-v-4adf56e4><img alt="Del&#39;Air" src="'+tD+'" class="h-20 border-2 border-transparent" data-v-4adf56e4></a><a href="https://www.helloasso.com/associations/entrelianes" target="_blank" rel="noopener noreferrer" class="hover:opacity-80 transition-opacity" data-v-4adf56e4><img alt="Entrelianes" src="'+iD+'" class="w-24 border-2 border-transparent" data-v-4adf56e4></a><a href="https://www.helloasso.com/associations/lm-oxygene" target="_blank" rel="noopener noreferrer" class="hover:opacity-80 transition-opacity" data-v-4adf56e4><img alt="LM Oxygne" src="'+sD+'" class="h-20 border-2 border-transparent" data-v-4adf56e4></a></div>',1)),we("nav",lD,[dt(o,{to:"/carte",class:"px-4 py-2 rounded-md text-gray-700 hover:bg-gray-100 transition-colors font-medium no-underline","active-class":"bg-yellow-50 text-black font-bold"},{default:yr(()=>[...e[1]||(e[1]=[Hs(" Carte ",-1)])]),_:1}),dt(o,{to:"/stats",class:"px-4 py-2 rounded-md text-gray-700 hover:bg-gray-100 transition-colors font-medium no-underline","active-class":"bg-yellow-50 text-black font-bold"},{default:yr(()=>[...e[2]||(e[2]=[Hs(" Statistiques ",-1)])]),_:1}),dt(o,{to:"/Information",class:"px-4 py-2 rounded-md text-gray-700 hover:bg-gray-100 transition-colors font-medium no-underline","active-class":"bg-yellow-50 text-black font-bold"},{default:yr(()=>[...e[3]||(e[3]=[Hs(" Information ",-1)])]),_:1}),dt(o,{to:"/aideoVideo",class:"px-4 py-2 rounded-md text-gray-700 hover:bg-gray-100 transition-colors font-medium no-underline","active-class":"bg-yellow-50 text-black font-bold"},{default:yr(()=>[...e[4]||(e[4]=[Hs(" Aide en vido ",-1)])]),_:1})]),we("div",uD,[dt(l)])])}const hD=Kn(nD,[["render",cD],["__scopeId","data-v-4adf56e4"]]);/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const Wa=typeof document<"u";function Zx(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function dD(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Zx(t.default)}const Tt=Object.assign;function Ip(t,e){const i={};for(const s in e){const n=e[s];i[s]=pn(n)?n.map(t):t(n)}return i}const Ju=()=>{},pn=Array.isArray;function ty(t,e){const i={};for(const s in t)i[s]=s in e?e[s]:t[s];return i}const Yx=/#/g,fD=/&/g,pD=/\//g,mD=/=/g,gD=/\?/g,Qx=/\+/g,_D=/%5B/g,yD=/%5D/g,Jx=/%5E/g,vD=/%60/g,eS=/%7B/g,bD=/%7C/g,tS=/%7D/g,TD=/%20/g;function a_(t){return t==null?"":encodeURI(""+t).replace(bD,"|").replace(_D,"[").replace(yD,"]")}function xD(t){return a_(t).replace(eS,"{").replace(tS,"}").replace(Jx,"^")}function sg(t){return a_(t).replace(Qx,"%2B").replace(TD,"+").replace(Yx,"%23").replace(fD,"%26").replace(vD,"`").replace(eS,"{").replace(tS,"}").replace(Jx,"^")}function SD(t){return sg(t).replace(mD,"%3D")}function CD(t){return a_(t).replace(Yx,"%23").replace(gD,"%3F")}function wD(t){return CD(t).replace(pD,"%2F")}function mc(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const ED=/\/$/,AD=t=>t.replace(ED,"");function Lp(t,e,i="/"){let s,n={},r="",o="";const l=e.indexOf("#");let u=e.indexOf("?");return u=l>=0&&u>l?-1:u,u>=0&&(s=e.slice(0,u),r=e.slice(u,l>0?l:e.length),n=t(r.slice(1))),l>=0&&(s=s||e.slice(0,l),o=e.slice(l,e.length)),s=ID(s??e,i),{fullPath:s+r+o,path:s,query:n,hash:mc(o)}}function DD(t,e){const i=e.query?t(e.query):"";return e.path+(i&&"?")+i+(e.hash||"")}function iy(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function PD(t,e,i){const s=e.matched.length-1,n=i.matched.length-1;return s>-1&&s===n&&gl(e.matched[s],i.matched[n])&&iS(e.params,i.params)&&t(e.query)===t(i.query)&&e.hash===i.hash}function gl(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function iS(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var i in t)if(!kD(t[i],e[i]))return!1;return!0}function kD(t,e){return pn(t)?sy(t,e):pn(e)?sy(e,t):t?.valueOf()===e?.valueOf()}function sy(t,e){return pn(e)?t.length===e.length&&t.every((i,s)=>i===e[s]):t.length===1&&t[0]===e}function ID(t,e){if(t.startsWith("/"))return t;if(!t)return e;const i=e.split("/"),s=t.split("/"),n=s[s.length-1];(n===".."||n===".")&&s.push("");let r=i.length-1,o,l;for(o=0;o<s.length;o++)if(l=s[o],l!==".")if(l==="..")r>1&&r--;else break;return i.slice(0,r).join("/")+"/"+s.slice(o).join("/")}const zr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let ng=(function(t){return t.pop="pop",t.push="push",t})({}),Op=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function LD(t){if(!t)if(Wa){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),AD(t)}const OD=/^[^#]+#/;function MD(t,e){return t.replace(OD,"#")+e}function RD(t,e){const i=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-i.left-(e.left||0),top:s.top-i.top-(e.top||0)}}const df=()=>({left:window.scrollX,top:window.scrollY});function ND(t){let e;if("el"in t){const i=t.el,s=typeof i=="string"&&i.startsWith("#"),n=typeof i=="string"?s?document.getElementById(i.slice(1)):document.querySelector(i):i;if(!n)return;e=RD(n,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function ny(t,e){return(history.state?history.state.position-e:-1)+t}const rg=new Map;function BD(t,e){rg.set(t,e)}function FD(t){const e=rg.get(t);return rg.delete(t),e}function UD(t){return typeof t=="string"||t&&typeof t=="object"}function sS(t){return typeof t=="string"||typeof t=="symbol"}let ei=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const nS=Symbol("");ei.MATCHER_NOT_FOUND+"",ei.NAVIGATION_GUARD_REDIRECT+"",ei.NAVIGATION_ABORTED+"",ei.NAVIGATION_CANCELLED+"",ei.NAVIGATION_DUPLICATED+"";function _l(t,e){return Tt(new Error,{type:t,[nS]:!0},e)}function ar(t,e){return t instanceof Error&&nS in t&&(e==null||!!(t.type&e))}const jD=["params","query","hash"];function zD(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const i of jD)i in t&&(e[i]=t[i]);return JSON.stringify(e,null,2)}function HD(t){const e={};if(t===""||t==="?")return e;const i=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<i.length;++s){const n=i[s].replace(Qx," "),r=n.indexOf("="),o=mc(r<0?n:n.slice(0,r)),l=r<0?null:mc(n.slice(r+1));if(o in e){let u=e[o];pn(u)||(u=e[o]=[u]),u.push(l)}else e[o]=l}return e}function ry(t){let e="";for(let i in t){const s=t[i];if(i=SD(i),s==null){s!==void 0&&(e+=(e.length?"&":"")+i);continue}(pn(s)?s.map(n=>n&&sg(n)):[s&&sg(s)]).forEach(n=>{n!==void 0&&(e+=(e.length?"&":"")+i,n!=null&&(e+="="+n))})}return e}function VD(t){const e={};for(const i in t){const s=t[i];s!==void 0&&(e[i]=pn(s)?s.map(n=>n==null?null:""+n):s==null?s:""+s)}return e}const qD=Symbol(""),oy=Symbol(""),l_=Symbol(""),rS=Symbol(""),og=Symbol("");function Cu(){let t=[];function e(s){return t.push(s),()=>{const n=t.indexOf(s);n>-1&&t.splice(n,1)}}function i(){t=[]}return{add:e,list:()=>t.slice(),reset:i}}function Kr(t,e,i,s,n,r=o=>o()){const o=s&&(s.enterCallbacks[n]=s.enterCallbacks[n]||[]);return()=>new Promise((l,u)=>{const h=_=>{_===!1?u(_l(ei.NAVIGATION_ABORTED,{from:i,to:e})):_ instanceof Error?u(_):UD(_)?u(_l(ei.NAVIGATION_GUARD_REDIRECT,{from:e,to:_})):(o&&s.enterCallbacks[n]===o&&typeof _=="function"&&o.push(_),l())},d=r(()=>t.call(s&&s.instances[n],e,i,h));let m=Promise.resolve(d);t.length<3&&(m=m.then(h)),m.catch(_=>u(_))})}function Mp(t,e,i,s,n=r=>r()){const r=[];for(const o of t)for(const l in o.components){let u=o.components[l];if(!(e!=="beforeRouteEnter"&&!o.instances[l]))if(Zx(u)){const h=(u.__vccOpts||u)[e];h&&r.push(Kr(h,i,s,o,l,n))}else{let h=u();r.push(()=>h.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const m=dD(d)?d.default:d;o.mods[l]=d,o.components[l]=m;const _=(m.__vccOpts||m)[e];return _&&Kr(_,i,s,o,l,n)()}))}}return r}function $D(t,e){const i=[],s=[],n=[],r=Math.max(e.matched.length,t.matched.length);for(let o=0;o<r;o++){const l=e.matched[o];l&&(t.matched.find(h=>gl(h,l))?s.push(l):i.push(l));const u=t.matched[o];u&&(e.matched.find(h=>gl(h,u))||n.push(u))}return[i,s,n]}/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let WD=()=>location.protocol+"//"+location.host;function oS(t,e){const{pathname:i,search:s,hash:n}=e,r=t.indexOf("#");if(r>-1){let o=n.includes(t.slice(r))?t.slice(r).length:1,l=n.slice(o);return l[0]!=="/"&&(l="/"+l),iy(l,"")}return iy(i,t)+s+n}function GD(t,e,i,s){let n=[],r=[],o=null;const l=({state:_})=>{const T=oS(t,location),C=i.value,x=e.value;let E=0;if(_){if(i.value=T,e.value=_,o&&o===C){o=null;return}E=x?_.position-x.position:0}else s(T);n.forEach(P=>{P(i.value,C,{delta:E,type:ng.pop,direction:E?E>0?Op.forward:Op.back:Op.unknown})})};function u(){o=i.value}function h(_){n.push(_);const T=()=>{const C=n.indexOf(_);C>-1&&n.splice(C,1)};return r.push(T),T}function d(){if(document.visibilityState==="hidden"){const{history:_}=window;if(!_.state)return;_.replaceState(Tt({},_.state,{scroll:df()}),"")}}function m(){for(const _ of r)_();r=[],window.removeEventListener("popstate",l),window.removeEventListener("pagehide",d),document.removeEventListener("visibilitychange",d)}return window.addEventListener("popstate",l),window.addEventListener("pagehide",d),document.addEventListener("visibilitychange",d),{pauseListeners:u,listen:h,destroy:m}}function ay(t,e,i,s=!1,n=!1){return{back:t,current:e,forward:i,replaced:s,position:window.history.length,scroll:n?df():null}}function XD(t){const{history:e,location:i}=window,s={value:oS(t,i)},n={value:e.state};n.value||r(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(u,h,d){const m=t.indexOf("#"),_=m>-1?(i.host&&document.querySelector("base")?t:t.slice(m))+u:WD()+t+u;try{e[d?"replaceState":"pushState"](h,"",_),n.value=h}catch(T){console.error(T),i[d?"replace":"assign"](_)}}function o(u,h){r(u,Tt({},e.state,ay(n.value.back,u,n.value.forward,!0),h,{position:n.value.position}),!0),s.value=u}function l(u,h){const d=Tt({},n.value,e.state,{forward:u,scroll:df()});r(d.current,d,!0),r(u,Tt({},ay(s.value,u,null),{position:d.position+1},h),!1),s.value=u}return{location:s,state:n,push:l,replace:o}}function KD(t){t=LD(t);const e=XD(t),i=GD(t,e.state,e.location,e.replace);function s(r,o=!0){o||i.pauseListeners(),history.go(r)}const n=Tt({location:"",base:t,go:s,createHref:MD.bind(null,t)},e,i);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>e.state.value}),n}let Wo=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var hi=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(hi||{});const ZD={type:Wo.Static,value:""},YD=/[a-zA-Z0-9_]/;function QD(t){if(!t)return[[]];if(t==="/")return[[ZD]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(T){throw new Error(`ERR (${i})/"${h}": ${T}`)}let i=hi.Static,s=i;const n=[];let r;function o(){r&&n.push(r),r=[]}let l=0,u,h="",d="";function m(){h&&(i===hi.Static?r.push({type:Wo.Static,value:h}):i===hi.Param||i===hi.ParamRegExp||i===hi.ParamRegExpEnd?(r.length>1&&(u==="*"||u==="+")&&e(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),r.push({type:Wo.Param,value:h,regexp:d,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):e("Invalid state to consume buffer"),h="")}function _(){h+=u}for(;l<t.length;){if(u=t[l++],u==="\\"&&i!==hi.ParamRegExp){s=i,i=hi.EscapeNext;continue}switch(i){case hi.Static:u==="/"?(h&&m(),o()):u===":"?(m(),i=hi.Param):_();break;case hi.EscapeNext:_(),i=s;break;case hi.Param:u==="("?i=hi.ParamRegExp:YD.test(u)?_():(m(),i=hi.Static,u!=="*"&&u!=="?"&&u!=="+"&&l--);break;case hi.ParamRegExp:u===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+u:i=hi.ParamRegExpEnd:d+=u;break;case hi.ParamRegExpEnd:m(),i=hi.Static,u!=="*"&&u!=="?"&&u!=="+"&&l--,d="";break;default:e("Unknown state");break}}return i===hi.ParamRegExp&&e(`Unfinished custom RegExp for param "${h}"`),m(),o(),n}const ly="[^/]+?",JD={sensitive:!1,strict:!1,start:!0,end:!0};var Gi=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(Gi||{});const eP=/[.+*?^${}()[\]/\\]/g;function tP(t,e){const i=Tt({},JD,e),s=[];let n=i.start?"^":"";const r=[];for(const h of t){const d=h.length?[]:[Gi.Root];i.strict&&!h.length&&(n+="/");for(let m=0;m<h.length;m++){const _=h[m];let T=Gi.Segment+(i.sensitive?Gi.BonusCaseSensitive:0);if(_.type===Wo.Static)m||(n+="/"),n+=_.value.replace(eP,"\\$&"),T+=Gi.Static;else if(_.type===Wo.Param){const{value:C,repeatable:x,optional:E,regexp:P}=_;r.push({name:C,repeatable:x,optional:E});const k=P||ly;if(k!==ly){T+=Gi.BonusCustomRegExp;try{`${k}`}catch(F){throw new Error(`Invalid custom RegExp for param "${C}" (${k}): `+F.message)}}let I=x?`((?:${k})(?:/(?:${k}))*)`:`(${k})`;m||(I=E&&h.length<2?`(?:/${I})`:"/"+I),E&&(I+="?"),n+=I,T+=Gi.Dynamic,E&&(T+=Gi.BonusOptional),x&&(T+=Gi.BonusRepeatable),k===".*"&&(T+=Gi.BonusWildcard)}d.push(T)}s.push(d)}if(i.strict&&i.end){const h=s.length-1;s[h][s[h].length-1]+=Gi.BonusStrict}i.strict||(n+="/?"),i.end?n+="$":i.strict&&!n.endsWith("/")&&(n+="(?:/|$)");const o=new RegExp(n,i.sensitive?"":"i");function l(h){const d=h.match(o),m={};if(!d)return null;for(let _=1;_<d.length;_++){const T=d[_]||"",C=r[_-1];m[C.name]=T&&C.repeatable?T.split("/"):T}return m}function u(h){let d="",m=!1;for(const _ of t){(!m||!d.endsWith("/"))&&(d+="/"),m=!1;for(const T of _)if(T.type===Wo.Static)d+=T.value;else if(T.type===Wo.Param){const{value:C,repeatable:x,optional:E}=T,P=C in h?h[C]:"";if(pn(P)&&!x)throw new Error(`Provided param "${C}" is an array but it is not repeatable (* or + modifiers)`);const k=pn(P)?P.join("/"):P;if(!k)if(E)_.length<2&&(d.endsWith("/")?d=d.slice(0,-1):m=!0);else throw new Error(`Missing required param "${C}"`);d+=k}}return d||"/"}return{re:o,score:s,keys:r,parse:l,stringify:u}}function iP(t,e){let i=0;for(;i<t.length&&i<e.length;){const s=e[i]-t[i];if(s)return s;i++}return t.length<e.length?t.length===1&&t[0]===Gi.Static+Gi.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===Gi.Static+Gi.Segment?1:-1:0}function aS(t,e){let i=0;const s=t.score,n=e.score;for(;i<s.length&&i<n.length;){const r=iP(s[i],n[i]);if(r)return r;i++}if(Math.abs(n.length-s.length)===1){if(uy(s))return 1;if(uy(n))return-1}return n.length-s.length}function uy(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const sP={strict:!1,end:!0,sensitive:!1};function nP(t,e,i){const s=tP(QD(t.path),i),n=Tt(s,{record:t,parent:e,children:[],alias:[]});return e&&!n.record.aliasOf==!e.record.aliasOf&&e.children.push(n),n}function rP(t,e){const i=[],s=new Map;e=ty(sP,e);function n(m){return s.get(m)}function r(m,_,T){const C=!T,x=hy(m);x.aliasOf=T&&T.record;const E=ty(e,m),P=[x];if("alias"in m){const F=typeof m.alias=="string"?[m.alias]:m.alias;for(const z of F)P.push(hy(Tt({},x,{components:T?T.record.components:x.components,path:z,aliasOf:T?T.record:x})))}let k,I;for(const F of P){const{path:z}=F;if(_&&z[0]!=="/"){const q=_.record.path,U=q[q.length-1]==="/"?"":"/";F.path=_.record.path+(z&&U+z)}if(k=nP(F,_,E),T?T.alias.push(k):(I=I||k,I!==k&&I.alias.push(k),C&&m.name&&!dy(k)&&o(m.name)),lS(k)&&u(k),x.children){const q=x.children;for(let U=0;U<q.length;U++)r(q[U],k,T&&T.children[U])}T=T||k}return I?()=>{o(I)}:Ju}function o(m){if(sS(m)){const _=s.get(m);_&&(s.delete(m),i.splice(i.indexOf(_),1),_.children.forEach(o),_.alias.forEach(o))}else{const _=i.indexOf(m);_>-1&&(i.splice(_,1),m.record.name&&s.delete(m.record.name),m.children.forEach(o),m.alias.forEach(o))}}function l(){return i}function u(m){const _=lP(m,i);i.splice(_,0,m),m.record.name&&!dy(m)&&s.set(m.record.name,m)}function h(m,_){let T,C={},x,E;if("name"in m&&m.name){if(T=s.get(m.name),!T)throw _l(ei.MATCHER_NOT_FOUND,{location:m});E=T.record.name,C=Tt(cy(_.params,T.keys.filter(I=>!I.optional).concat(T.parent?T.parent.keys.filter(I=>I.optional):[]).map(I=>I.name)),m.params&&cy(m.params,T.keys.map(I=>I.name))),x=T.stringify(C)}else if(m.path!=null)x=m.path,T=i.find(I=>I.re.test(x)),T&&(C=T.parse(x),E=T.record.name);else{if(T=_.name?s.get(_.name):i.find(I=>I.re.test(_.path)),!T)throw _l(ei.MATCHER_NOT_FOUND,{location:m,currentLocation:_});E=T.record.name,C=Tt({},_.params,m.params),x=T.stringify(C)}const P=[];let k=T;for(;k;)P.unshift(k.record),k=k.parent;return{name:E,path:x,params:C,matched:P,meta:aP(P)}}t.forEach(m=>r(m));function d(){i.length=0,s.clear()}return{addRoute:r,resolve:h,removeRoute:o,clearRoutes:d,getRoutes:l,getRecordMatcher:n}}function cy(t,e){const i={};for(const s of e)s in t&&(i[s]=t[s]);return i}function hy(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:oP(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function oP(t){const e={},i=t.props||!1;if("component"in t)e.default=i;else for(const s in t.components)e[s]=typeof i=="object"?i[s]:i;return e}function dy(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function aP(t){return t.reduce((e,i)=>Tt(e,i.meta),{})}function lP(t,e){let i=0,s=e.length;for(;i!==s;){const r=i+s>>1;aS(t,e[r])<0?s=r:i=r+1}const n=uP(t);return n&&(s=e.lastIndexOf(n,s-1)),s}function uP(t){let e=t;for(;e=e.parent;)if(lS(e)&&aS(t,e)===0)return e}function lS({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function fy(t){const e=pi(l_),i=pi(rS),s=Zi(()=>{const u=Ja(t.to);return e.resolve(u)}),n=Zi(()=>{const{matched:u}=s.value,{length:h}=u,d=u[h-1],m=i.matched;if(!d||!m.length)return-1;const _=m.findIndex(gl.bind(null,d));if(_>-1)return _;const T=py(u[h-2]);return h>1&&py(d)===T&&m[m.length-1].path!==T?m.findIndex(gl.bind(null,u[h-2])):_}),r=Zi(()=>n.value>-1&&pP(i.params,s.value.params)),o=Zi(()=>n.value>-1&&n.value===i.matched.length-1&&iS(i.params,s.value.params));function l(u={}){if(fP(u)){const h=e[Ja(t.replace)?"replace":"push"](Ja(t.to)).catch(Ju);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>h),h}return Promise.resolve()}return{route:s,href:Zi(()=>s.value.href),isActive:r,isExactActive:o,navigate:l}}function cP(t){return t.length===1?t[0]:t}const hP=bs({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:fy,setup(t,{slots:e}){const i=Dc(fy(t)),{options:s}=pi(l_),n=Zi(()=>({[my(t.activeClass,s.linkActiveClass,"router-link-active")]:i.isActive,[my(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:i.isExactActive}));return()=>{const r=e.default&&cP(e.default(i));return t.custom?r:fn("a",{"aria-current":i.isExactActive?t.ariaCurrentValue:null,href:i.href,onClick:i.navigate,class:n.value},r)}}}),dP=hP;function fP(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function pP(t,e){for(const i in e){const s=e[i],n=t[i];if(typeof s=="string"){if(s!==n)return!1}else if(!pn(n)||n.length!==s.length||s.some((r,o)=>r.valueOf()!==n[o].valueOf()))return!1}return!0}function py(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const my=(t,e,i)=>t??e??i,mP=bs({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:i}){const s=pi(og),n=Zi(()=>t.route||s.value),r=pi(oy,0),o=Zi(()=>{let h=Ja(r);const{matched:d}=n.value;let m;for(;(m=d[h])&&!m.components;)h++;return h}),l=Zi(()=>n.value.matched[o.value]);Qi(oy,Zi(()=>o.value+1)),Qi(qD,l),Qi(og,n);const u=ui();return Jo(()=>[u.value,l.value,t.name],([h,d,m],[_,T,C])=>{d&&(d.instances[m]=h,T&&T!==d&&h&&h===_&&(d.leaveGuards.size||(d.leaveGuards=T.leaveGuards),d.updateGuards.size||(d.updateGuards=T.updateGuards))),h&&d&&(!T||!gl(d,T)||!_)&&(d.enterCallbacks[m]||[]).forEach(x=>x(h))},{flush:"post"}),()=>{const h=n.value,d=t.name,m=l.value,_=m&&m.components[d];if(!_)return gy(i.default,{Component:_,route:h});const T=m.props[d],C=T?T===!0?h.params:typeof T=="function"?T(h):T:null,E=fn(_,Tt({},C,e,{onVnodeUnmounted:P=>{P.component.isUnmounted&&(m.instances[d]=null)},ref:u}));return gy(i.default,{Component:E,route:h})||E}}});function gy(t,e){if(!t)return null;const i=t(e);return i.length===1?i[0]:i}const gP=mP;function _P(t){const e=rP(t.routes,t),i=t.parseQuery||HD,s=t.stringifyQuery||ry,n=t.history,r=Cu(),o=Cu(),l=Cu(),u=e_(zr);let h=zr;Wa&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=Ip.bind(null,me=>""+me),m=Ip.bind(null,wD),_=Ip.bind(null,mc);function T(me,Ae){let Le,qe;return sS(me)?(Le=e.getRecordMatcher(me),qe=Ae):qe=me,e.addRoute(qe,Le)}function C(me){const Ae=e.getRecordMatcher(me);Ae&&e.removeRoute(Ae)}function x(){return e.getRoutes().map(me=>me.record)}function E(me){return!!e.getRecordMatcher(me)}function P(me,Ae){if(Ae=Tt({},Ae||u.value),typeof me=="string"){const ie=Lp(i,me,Ae.path),ve=e.resolve({path:ie.path},Ae),ye=n.createHref(ie.fullPath);return Tt(ie,ve,{params:_(ve.params),hash:mc(ie.hash),redirectedFrom:void 0,href:ye})}let Le;if(me.path!=null)Le=Tt({},me,{path:Lp(i,me.path,Ae.path).path});else{const ie=Tt({},me.params);for(const ve in ie)ie[ve]==null&&delete ie[ve];Le=Tt({},me,{params:m(ie)}),Ae.params=m(Ae.params)}const qe=e.resolve(Le,Ae),We=me.hash||"";qe.params=d(_(qe.params));const H=DD(s,Tt({},me,{hash:xD(We),path:qe.path})),X=n.createHref(H);return Tt({fullPath:H,hash:We,query:s===ry?VD(me.query):me.query||{}},qe,{redirectedFrom:void 0,href:X})}function k(me){return typeof me=="string"?Lp(i,me,u.value.path):Tt({},me)}function I(me,Ae){if(h!==me)return _l(ei.NAVIGATION_CANCELLED,{from:Ae,to:me})}function F(me){return U(me)}function z(me){return F(Tt(k(me),{replace:!0}))}function q(me,Ae){const Le=me.matched[me.matched.length-1];if(Le&&Le.redirect){const{redirect:qe}=Le;let We=typeof qe=="function"?qe(me,Ae):qe;return typeof We=="string"&&(We=We.includes("?")||We.includes("#")?We=k(We):{path:We},We.params={}),Tt({query:me.query,hash:me.hash,params:We.path!=null?{}:me.params},We)}}function U(me,Ae){const Le=h=P(me),qe=u.value,We=me.state,H=me.force,X=me.replace===!0,ie=q(Le,qe);if(ie)return U(Tt(k(ie),{state:typeof ie=="object"?Tt({},We,ie.state):We,force:H,replace:X}),Ae||Le);const ve=Le;ve.redirectedFrom=Ae;let ye;return!H&&PD(s,qe,Le)&&(ye=_l(ei.NAVIGATION_DUPLICATED,{to:ve,from:qe}),ue(qe,qe,!0,!1)),(ye?Promise.resolve(ye):R(ve,qe)).catch(Te=>ar(Te)?ar(Te,ei.NAVIGATION_GUARD_REDIRECT)?Te:re(Te):ee(Te,ve,qe)).then(Te=>{if(Te){if(ar(Te,ei.NAVIGATION_GUARD_REDIRECT))return U(Tt({replace:X},k(Te.to),{state:typeof Te.to=="object"?Tt({},We,Te.to.state):We,force:H}),Ae||ve)}else Te=Q(ve,qe,!0,X,We);return Y(ve,qe,Te),Te})}function Z(me,Ae){const Le=I(me,Ae);return Le?Promise.reject(Le):Promise.resolve()}function D(me){const Ae=Me.values().next().value;return Ae&&typeof Ae.runWithContext=="function"?Ae.runWithContext(me):me()}function R(me,Ae){let Le;const[qe,We,H]=$D(me,Ae);Le=Mp(qe.reverse(),"beforeRouteLeave",me,Ae);for(const ie of qe)ie.leaveGuards.forEach(ve=>{Le.push(Kr(ve,me,Ae))});const X=Z.bind(null,me,Ae);return Le.push(X),He(Le).then(()=>{Le=[];for(const ie of r.list())Le.push(Kr(ie,me,Ae));return Le.push(X),He(Le)}).then(()=>{Le=Mp(We,"beforeRouteUpdate",me,Ae);for(const ie of We)ie.updateGuards.forEach(ve=>{Le.push(Kr(ve,me,Ae))});return Le.push(X),He(Le)}).then(()=>{Le=[];for(const ie of H)if(ie.beforeEnter)if(pn(ie.beforeEnter))for(const ve of ie.beforeEnter)Le.push(Kr(ve,me,Ae));else Le.push(Kr(ie.beforeEnter,me,Ae));return Le.push(X),He(Le)}).then(()=>(me.matched.forEach(ie=>ie.enterCallbacks={}),Le=Mp(H,"beforeRouteEnter",me,Ae,D),Le.push(X),He(Le))).then(()=>{Le=[];for(const ie of o.list())Le.push(Kr(ie,me,Ae));return Le.push(X),He(Le)}).catch(ie=>ar(ie,ei.NAVIGATION_CANCELLED)?ie:Promise.reject(ie))}function Y(me,Ae,Le){l.list().forEach(qe=>D(()=>qe(me,Ae,Le)))}function Q(me,Ae,Le,qe,We){const H=I(me,Ae);if(H)return H;const X=Ae===zr,ie=Wa?history.state:{};Le&&(qe||X?n.replace(me.fullPath,Tt({scroll:X&&ie&&ie.scroll},We)):n.push(me.fullPath,We)),u.value=me,ue(me,Ae,Le,X),re()}let J;function ae(){J||(J=n.listen((me,Ae,Le)=>{if(!Ee.listening)return;const qe=P(me),We=q(qe,Ee.currentRoute.value);if(We){U(Tt(We,{replace:!0,force:!0}),qe).catch(Ju);return}h=qe;const H=u.value;Wa&&BD(ny(H.fullPath,Le.delta),df()),R(qe,H).catch(X=>ar(X,ei.NAVIGATION_ABORTED|ei.NAVIGATION_CANCELLED)?X:ar(X,ei.NAVIGATION_GUARD_REDIRECT)?(U(Tt(k(X.to),{force:!0}),qe).then(ie=>{ar(ie,ei.NAVIGATION_ABORTED|ei.NAVIGATION_DUPLICATED)&&!Le.delta&&Le.type===ng.pop&&n.go(-1,!1)}).catch(Ju),Promise.reject()):(Le.delta&&n.go(-Le.delta,!1),ee(X,qe,H))).then(X=>{X=X||Q(qe,H,!1),X&&(Le.delta&&!ar(X,ei.NAVIGATION_CANCELLED)?n.go(-Le.delta,!1):Le.type===ng.pop&&ar(X,ei.NAVIGATION_ABORTED|ei.NAVIGATION_DUPLICATED)&&n.go(-1,!1)),Y(qe,H,X)}).catch(Ju)}))}let ce=Cu(),le=Cu(),se;function ee(me,Ae,Le){re(me);const qe=le.list();return qe.length?qe.forEach(We=>We(me,Ae,Le)):console.error(me),Promise.reject(me)}function fe(){return se&&u.value!==zr?Promise.resolve():new Promise((me,Ae)=>{ce.add([me,Ae])})}function re(me){return se||(se=!me,ae(),ce.list().forEach(([Ae,Le])=>me?Le(me):Ae()),ce.reset()),me}function ue(me,Ae,Le,qe){const{scrollBehavior:We}=t;if(!Wa||!We)return Promise.resolve();const H=!Le&&FD(ny(me.fullPath,0))||(qe||!Le)&&history.state&&history.state.scroll||null;return Ji().then(()=>We(me,Ae,H)).then(X=>X&&ND(X)).catch(X=>ee(X,me,Ae))}const Oe=me=>n.go(me);let ze;const Me=new Set,Ee={currentRoute:u,listening:!0,addRoute:T,removeRoute:C,clearRoutes:e.clearRoutes,hasRoute:E,getRoutes:x,resolve:P,options:t,push:F,replace:z,go:Oe,back:()=>Oe(-1),forward:()=>Oe(1),beforeEach:r.add,beforeResolve:o.add,afterEach:l.add,onError:le.add,isReady:fe,install(me){me.component("RouterLink",dP),me.component("RouterView",gP),me.config.globalProperties.$router=Ee,Object.defineProperty(me.config.globalProperties,"$route",{enumerable:!0,get:()=>Ja(u)}),Wa&&!ze&&u.value===zr&&(ze=!0,F(n.location).catch(qe=>{}));const Ae={};for(const qe in zr)Object.defineProperty(Ae,qe,{get:()=>u.value[qe],enumerable:!0});me.provide(l_,Ee),me.provide(rS,cx(Ae)),me.provide(og,u);const Le=me.unmount;Me.add(me),me.unmount=function(){Me.delete(me),Me.size<1&&(h=zr,J&&J(),J=null,u.value=zr,ze=!1,se=!1),Le()}}};function He(me){return me.reduce((Ae,Le)=>Ae.then(()=>D(Le)),Promise.resolve())}return Ee}const yP="modulepreload",vP=function(t){return"/parcs-et-jardins/"+t},_y={},ms=function(e,i,s){let n=Promise.resolve();if(i&&i.length>0){let o=function(h){return Promise.all(h.map(d=>Promise.resolve(d).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=l?.nonce||l?.getAttribute("nonce");n=o(i.map(h=>{if(h=vP(h),h in _y)return;_y[h]=!0;const d=h.endsWith(".css"),m=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${m}`))return;const _=document.createElement("link");if(_.rel=d?"stylesheet":yP,d||(_.as="script"),_.crossOrigin="",_.href=h,u&&_.setAttribute("nonce",u),document.head.appendChild(_),d)return new Promise((T,C)=>{_.addEventListener("load",T),_.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${h}`)))})}))}function r(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return n.then(o=>{for(const l of o||[])l.status==="rejected"&&r(l.reason);return e().catch(r)})},yy=(t,e)=>{for(const i of Object.keys(e))t.on(i,e[i])},uS=t=>{for(const e of Object.keys(t)){const i=t[e];i&&Zr(i.cancel)&&i.cancel()}},bP=t=>!t||typeof t.charAt!="function"?t:t.charAt(0).toUpperCase()+t.slice(1),Zr=t=>typeof t=="function",Zn=(t,e,i)=>{for(const s in i){const n="set"+bP(s);t[n]?Jo(()=>i[s],(r,o)=>{t[n](r,o)}):e[n]&&Jo(()=>i[s],r=>{e[n](r)})}},es=(t,e,i={})=>{const s={...i};for(const n in t){const r=e[n],o=t[n];r&&(r&&r.custom===!0||o!==void 0&&(s[n]=o))}return s},pa=t=>{const e={},i={};for(const s in t)if(s.startsWith("on")&&!s.startsWith("onUpdate")&&s!=="onReady"){const n=s.slice(2).toLocaleLowerCase();e[n]=t[s]}else i[s]=t[s];return{listeners:e,attrs:i}},TP=async t=>{const e=await Promise.all([ms(()=>import("./marker-icon-2x-D4k_ikNW.js"),[]),ms(()=>import("./marker-icon-C2eJqgqv.js"),[]),ms(()=>import("./marker-shadow-DU6CIJ0p.js"),[])]);delete t.Default.prototype._getIconUrl,t.Default.mergeOptions({iconRetinaUrl:e[0].default,iconUrl:e[1].default,shadowUrl:e[2].default})},Ph=t=>{const e=ui((...s)=>console.warn(`Method ${t} has been invoked without being replaced`)),i=(...s)=>e.value(...s);return i.wrapped=e,Qi(t,i),i},kh=(t,e)=>t.wrapped.value=e,$s=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||globalThis,gs=t=>{const e=pi(t);if(e===void 0)throw new Error(`Attempt to inject ${t.description} before it was provided.`);return e},Yn=Symbol("useGlobalLeaflet"),fo=Symbol("addLayer"),ff=Symbol("removeLayer"),u_=Symbol("registerControl"),cS=Symbol("registerLayerControl"),hS=Symbol("canSetParentHtml"),dS=Symbol("setParentHtml"),fS=Symbol("setIcon"),xP=Symbol("bindPopup"),SP=Symbol("bindTooltip"),CP=Symbol("unbindPopup"),wP=Symbol("unbindTooltip"),Lc={options:{type:Object,default:()=>({}),custom:!0}},pf=t=>({options:t.options,methods:{}}),Il={...Lc,pane:{type:String},attribution:{type:String},name:{type:String,custom:!0},layerType:{type:String,custom:!0},visible:{type:Boolean,custom:!0,default:!0}},mf=(t,e,i)=>{const s=gs(fo),n=gs(ff),{options:r,methods:o}=pf(t),l=es(t,Il,r),u=()=>s({leafletObject:e.value}),h=()=>n({leafletObject:e.value}),d={...o,setAttribution(m){h(),e.value.options.attribution=m,t.visible&&u()},setName(){h(),t.visible&&u()},setLayerType(){h(),t.visible&&u()},setVisible(m){e.value&&(m?u():h())},bindPopup(m){if(!e.value||!Zr(e.value.bindPopup)){console.warn("Attempt to bind popup before bindPopup method available on layer.");return}e.value.bindPopup(m)},bindTooltip(m){if(!e.value||!Zr(e.value.bindTooltip)){console.warn("Attempt to bind tooltip before bindTooltip method available on layer.");return}e.value.bindTooltip(m)},unbindTooltip(){e.value&&(Zr(e.value.closeTooltip)&&e.value.closeTooltip(),Zr(e.value.unbindTooltip)&&e.value.unbindTooltip())},unbindPopup(){e.value&&(Zr(e.value.closePopup)&&e.value.closePopup(),Zr(e.value.unbindPopup)&&e.value.unbindPopup())},updateVisibleProp(m){i.emit("update:visible",m)}};return Qi(xP,d.bindPopup),Qi(SP,d.bindTooltip),Qi(CP,d.unbindPopup),Qi(wP,d.unbindTooltip),kl(()=>{d.unbindPopup(),d.unbindTooltip(),h()}),{options:l,methods:d}},c_=(t,e)=>{if(t&&e.default)return fn("div",{style:{display:"none"}},e.default())},pS={...Il,interactive:{type:Boolean,default:void 0},bubblingMouseEvents:{type:Boolean,default:void 0}},EP=(t,e,i)=>{const{options:s,methods:n}=mf(t,e,i);return{options:es(t,pS,s),methods:n}},h_={...pS,stroke:{type:Boolean,default:void 0},color:{type:String},weight:{type:Number},opacity:{type:Number},lineCap:{type:String},lineJoin:{type:String},dashArray:{type:String},dashOffset:{type:String},fill:{type:Boolean,default:void 0},fillColor:{type:String},fillOpacity:{type:Number},fillRule:{type:String},className:{type:String}},AP=(t,e,i)=>{const{options:s,methods:n}=EP(t,e,i),r=es(t,h_,s),o=gs(ff),l={...n,setStroke(u){e.value.setStyle({stroke:u})},setColor(u){e.value.setStyle({color:u})},setWeight(u){e.value.setStyle({weight:u})},setOpacity(u){e.value.setStyle({opacity:u})},setLineCap(u){e.value.setStyle({lineCap:u})},setLineJoin(u){e.value.setStyle({lineJoin:u})},setDashArray(u){e.value.setStyle({dashArray:u})},setDashOffset(u){e.value.setStyle({dashOffset:u})},setFill(u){e.value.setStyle({fill:u})},setFillColor(u){e.value.setStyle({fillColor:u})},setFillOpacity(u){e.value.setStyle({fillOpacity:u})},setFillRule(u){e.value.setStyle({fillRule:u})},setClassName(u){e.value.setStyle({className:u})}};return lf(()=>{o({leafletObject:e.value})}),{options:r,methods:l}},DP={...h_,radius:{type:Number},latLng:{type:[Object,Array],required:!0,custom:!0}};({...DP});const Ll={...Lc,position:{type:String}},d_=(t,e)=>{const{options:i,methods:s}=pf(t),n=es(t,Ll,i),r={...s,setPosition(o){e.value&&e.value.setPosition(o)}};return kl(()=>{e.value&&e.value.remove()}),{options:n,methods:r}},PP=t=>t.default?fn("div",{ref:"root"},t.default()):null,kP=bs({name:"LControl",props:{...Ll,disableClickPropagation:{type:Boolean,custom:!0,default:!0},disableScrollPropagation:{type:Boolean,custom:!0,default:!1}},setup(t,e){const i=ui(),s=ui(),n=pi(Yn),r=gs(u_),{options:o,methods:l}=d_(t,i);return Qs(async()=>{const{Control:u,DomEvent:h}=n?$s.L:await ms(()=>import("./leaflet-src.esm-C6uo2YWw.js"),[]),d=u.extend({onAdd(){return s.value}});i.value=Xn(new d(o)),Zn(l,i.value,t),r({leafletObject:i.value}),t.disableClickPropagation&&s.value&&h.disableClickPropagation(s.value),t.disableScrollPropagation&&s.value&&h.disableScrollPropagation(s.value),Ji(()=>e.emit("ready",i.value))}),{root:s,leafletObject:i}},render(){return PP(this.$slots)}});({...Ll});const mS={...Ll,collapsed:{type:Boolean,default:void 0},autoZIndex:{type:Boolean,default:void 0},hideSingleBase:{type:Boolean,default:void 0},sortLayers:{type:Boolean,default:void 0},sortFunction:{type:Function}},IP=(t,e)=>{const{options:i}=d_(t,e);return{options:es(t,mS,i),methods:{addLayer(s){s.layerType==="base"?e.value.addBaseLayer(s.leafletObject,s.name):s.layerType==="overlay"&&e.value.addOverlay(s.leafletObject,s.name)},removeLayer(s){e.value.removeLayer(s.leafletObject)}}}},LP=bs({name:"LControlLayers",props:mS,setup(t,e){const i=ui(),s=pi(Yn),n=gs(cS),{options:r,methods:o}=IP(t,i);return Qs(async()=>{const{control:l}=s?$s.L:await ms(()=>import("./leaflet-src.esm-C6uo2YWw.js"),[]);i.value=Xn(l.layers(void 0,void 0,r)),Zn(o,i.value,t),n({...t,...o,leafletObject:i.value}),Ji(()=>e.emit("ready",i.value))}),{leafletObject:i}},render(){return null}}),gS={...Ll,maxWidth:{type:Number},metric:{type:Boolean,default:void 0},imperial:{type:Boolean,default:void 0},updateWhenIdle:{type:Boolean,default:void 0}},OP=(t,e)=>{const{options:i,methods:s}=d_(t,e);return{options:es(t,gS,i),methods:s}},MP=bs({name:"LControlScale",props:gS,setup(t,e){const i=ui(),s=pi(Yn),n=gs(u_),{options:r,methods:o}=OP(t,i);return Qs(async()=>{const{control:l}=s?$s.L:await ms(()=>import("./leaflet-src.esm-C6uo2YWw.js"),[]);i.value=Xn(l.scale(r)),Zn(o,i.value,t),n({leafletObject:i.value}),Ji(()=>e.emit("ready",i.value))}),{leafletObject:i}},render(){return null}});({...Ll});const f_={...Il},RP=(t,e,i)=>{const{options:s,methods:n}=mf(t,e,i),r=es(t,f_,s),o={...n,addLayer(l){e.value.addLayer(l.leafletObject)},removeLayer(l){e.value.removeLayer(l.leafletObject)}};return Qi(fo,o.addLayer),Qi(ff,o.removeLayer),{options:r,methods:o}};({...f_});const _S={...f_,geojson:{type:[Object,Array],custom:!0},optionsStyle:{type:Function,custom:!0}},NP=(t,e,i)=>{const{options:s,methods:n}=RP(t,e,i),r=es(t,_S,s);Object.prototype.hasOwnProperty.call(t,"optionsStyle")&&(r.style=t.optionsStyle);const o={...n,setGeojson(l){e.value.clearLayers(),e.value.addData(l)},setOptionsStyle(l){e.value.setStyle(l)},getGeoJSONData(){return e.value.toGeoJSON()},getBounds(){return e.value.getBounds()}};return{options:r,methods:o}},BP=bs({props:_S,setup(t,e){const i=ui(),s=ui(!1),n=pi(Yn),r=gs(fo),{methods:o,options:l}=NP(t,i,e);return Qs(async()=>{const{geoJSON:u}=n?$s.L:await ms(()=>import("./leaflet-src.esm-C6uo2YWw.js"),[]);i.value=Xn(u(t.geojson,l));const{listeners:h}=pa(e.attrs);i.value.on(h),Zn(o,i.value,t),r({...t,...o,leafletObject:i.value}),s.value=!0,Ji(()=>e.emit("ready",i.value))}),{ready:s,leafletObject:i}},render(){return c_(this.ready,this.$slots)}}),p_={...Il,opacity:{type:Number},zIndex:{type:Number},tileSize:{type:[Number,Array,Object]},noWrap:{type:Boolean,default:void 0},minZoom:{type:Number},maxZoom:{type:Number},className:{type:String}},yS=(t,e,i)=>{const{options:s,methods:n}=mf(t,e,i),r=es(t,p_,s),o={...n,setTileComponent(){var l;(l=e.value)==null||l.redraw()}};return kl(()=>{e.value.off()}),{options:r,methods:o}},FP=(t,e,i,s)=>t.extend({initialize(n){this.tileComponents={},this.on("tileunload",this._unloadTile),i.setOptions(this,n)},createTile(n){const r=this._tileCoordsToKey(n);this.tileComponents[r]=e.create("div");const o=fn({setup:s,props:["coords"]},{coords:n});return VA(o,this.tileComponents[r]),this.tileComponents[r]},_unloadTile(n){const r=this._tileCoordsToKey(n.coords);this.tileComponents[r]&&(this.tileComponents[r].innerHTML="",this.tileComponents[r]=void 0)}});({...p_});const vy={iconUrl:{type:String},iconRetinaUrl:{type:String},iconSize:{type:[Object,Array]},iconAnchor:{type:[Object,Array]},popupAnchor:{type:[Object,Array]},tooltipAnchor:{type:[Object,Array]},shadowUrl:{type:String},shadowRetinaUrl:{type:String},shadowSize:{type:[Object,Array]},shadowAnchor:{type:[Object,Array]},bgPos:{type:[Object,Array]},className:{type:String}},UP=bs({name:"LIcon",props:{...vy,...Lc},setup(t,e){const i=ui(),s=pi(Yn),n=gs(hS),r=gs(dS),o=gs(fS);let l,u,h,d,m;const _=(E,P,k)=>{const I=E&&E.innerHTML;if(!P){k&&m&&n()&&r(I);return}const{listeners:F}=pa(e.attrs);m&&u(m,F);const{options:z}=pf(t),q=es(t,vy,z);I&&(q.html=I),m=q.html?h(q):d(q),l(m,F),o(m)},T=()=>{Ji(()=>_(i.value,!0,!1))},C=()=>{Ji(()=>_(i.value,!1,!0))},x={setIconUrl:T,setIconRetinaUrl:T,setIconSize:T,setIconAnchor:T,setPopupAnchor:T,setTooltipAnchor:T,setShadowUrl:T,setShadowRetinaUrl:T,setShadowAnchor:T,setBgPos:T,setClassName:T,setHtml:T};return Qs(async()=>{const{DomEvent:E,divIcon:P,icon:k}=s?$s.L:await ms(()=>import("./leaflet-src.esm-C6uo2YWw.js"),[]);l=E.on,u=E.off,h=P,d=k,Zn(x,{},t),new MutationObserver(C).observe(i.value,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),T()}),{root:i}},render(){const t=this.$slots.default?this.$slots.default():void 0;return fn("div",{ref:"root"},t)}});({...Il});function vS(t,e,i){var s,n,r;e===void 0&&(e=50),i===void 0&&(i={});var o=(s=i.isImmediate)!=null&&s,l=(n=i.callback)!=null&&n,u=i.maxWait,h=Date.now(),d=[];function m(){if(u!==void 0){var T=Date.now()-h;if(T+e>=u)return u-T}return e}var _=function(){var T=[].slice.call(arguments),C=this;return new Promise(function(x,E){var P=o&&r===void 0;if(r!==void 0&&clearTimeout(r),r=setTimeout(function(){if(r=void 0,h=Date.now(),!o){var I=t.apply(C,T);l&&l(I),d.forEach(function(F){return(0,F.resolve)(I)}),d=[]}},m()),P){var k=t.apply(C,T);return l&&l(k),x(k)}d.push({resolve:x,reject:E})})};return _.cancel=function(T){r!==void 0&&clearTimeout(r),d.forEach(function(C){return(0,C.reject)(T)}),d=[]},_}const by={...Lc,center:{type:[Object,Array]},bounds:{type:[Array,Object]},maxBounds:{type:[Array,Object]},zoom:{type:Number},minZoom:{type:Number},maxZoom:{type:Number},paddingBottomRight:{type:[Object,Array]},paddingTopLeft:{type:Object},padding:{type:Object},worldCopyJump:{type:Boolean,default:void 0},crs:{type:[String,Object]},maxBoundsViscosity:{type:Number},inertia:{type:Boolean,default:void 0},inertiaDeceleration:{type:Number},inertiaMaxSpeed:{type:Number},easeLinearity:{type:Number},zoomAnimation:{type:Boolean,default:void 0},zoomAnimationThreshold:{type:Number},fadeAnimation:{type:Boolean,default:void 0},markerZoomAnimation:{type:Boolean,default:void 0},noBlockingAnimations:{type:Boolean,default:void 0},useGlobalLeaflet:{type:Boolean,default:!0,custom:!0}},jP=bs({inheritAttrs:!1,emits:["ready","update:zoom","update:center","update:bounds"],props:by,setup(t,e){const i=ui(),s=Dc({ready:!1,layersToAdd:[],layersInControl:[]}),{options:n}=pf(t),r=es(t,by,n),{listeners:o,attrs:l}=pa(e.attrs),u=Ph(fo),h=Ph(ff),d=Ph(u_),m=Ph(cS);Qi(Yn,t.useGlobalLeaflet);const _=Zi(()=>{const P={};return t.noBlockingAnimations&&(P.animate=!1),P}),T=Zi(()=>{const P=_.value;return t.padding&&(P.padding=t.padding),t.paddingTopLeft&&(P.paddingTopLeft=t.paddingTopLeft),t.paddingBottomRight&&(P.paddingBottomRight=t.paddingBottomRight),P}),C={moveend:vS(P=>{s.leafletRef&&(e.emit("update:zoom",s.leafletRef.getZoom()),e.emit("update:center",s.leafletRef.getCenter()),e.emit("update:bounds",s.leafletRef.getBounds()))}),overlayadd(P){const k=s.layersInControl.find(I=>I.name===P.name);k&&k.updateVisibleProp(!0)},overlayremove(P){const k=s.layersInControl.find(I=>I.name===P.name);k&&k.updateVisibleProp(!1)}};Qs(async()=>{t.useGlobalLeaflet&&($s.L=$s.L||await ms(()=>Promise.resolve().then(()=>ek),void 0));const{map:P,CRS:k,Icon:I,latLngBounds:F,latLng:z,stamp:q}=t.useGlobalLeaflet?$s.L:await ms(()=>import("./leaflet-src.esm-C6uo2YWw.js"),[]);try{r.beforeMapMount&&await r.beforeMapMount()}catch(D){console.error(`The following error occurred running the provided beforeMapMount hook ${D.message}`)}await TP(I);const U=typeof r.crs=="string"?k[r.crs]:r.crs;r.crs=U||k.EPSG3857;const Z={addLayer(D){D.layerType!==void 0&&(s.layerControl===void 0?s.layersToAdd.push(D):s.layersInControl.find(R=>q(R.leafletObject)===q(D.leafletObject))||(s.layerControl.addLayer(D),s.layersInControl.push(D))),D.visible!==!1&&s.leafletRef.addLayer(D.leafletObject)},removeLayer(D){D.layerType!==void 0&&(s.layerControl===void 0?s.layersToAdd=s.layersToAdd.filter(R=>R.name!==D.name):(s.layerControl.removeLayer(D.leafletObject),s.layersInControl=s.layersInControl.filter(R=>q(R.leafletObject)!==q(D.leafletObject)))),s.leafletRef.removeLayer(D.leafletObject)},registerLayerControl(D){s.layerControl=D,s.layersToAdd.forEach(R=>{s.layerControl.addLayer(R)}),s.layersToAdd=[],d(D)},registerControl(D){s.leafletRef.addControl(D.leafletObject)},setZoom(D){const R=s.leafletRef.getZoom();D!==R&&s.leafletRef.setZoom(D,_.value)},setCrs(D){const R=s.leafletRef.getBounds();s.leafletRef.options.crs=D,s.leafletRef.fitBounds(R,{animate:!1,padding:[0,0]})},fitBounds(D){s.leafletRef.fitBounds(D,T.value)},setBounds(D){if(!D)return;const R=F(D);R.isValid()&&!(s.lastSetBounds||s.leafletRef.getBounds()).equals(R,0)&&(s.lastSetBounds=R,s.leafletRef.fitBounds(R))},setCenter(D){if(D==null)return;const R=z(D),Y=s.lastSetCenter||s.leafletRef.getCenter();(Y.lat!==R.lat||Y.lng!==R.lng)&&(s.lastSetCenter=R,s.leafletRef.panTo(R,_.value))}};kh(u,Z.addLayer),kh(h,Z.removeLayer),kh(d,Z.registerControl),kh(m,Z.registerLayerControl),s.leafletRef=Xn(P(i.value,r)),Zn(Z,s.leafletRef,t),yy(s.leafletRef,C),yy(s.leafletRef,o),s.ready=!0,Ji(()=>e.emit("ready",s.leafletRef))}),lf(()=>{uS(C),s.leafletRef&&(s.leafletRef.off(),s.leafletRef.remove())});const x=Zi(()=>s.leafletRef),E=Zi(()=>s.ready);return{root:i,ready:E,leafletObject:x,attrs:l}},render({attrs:t}){return t.style||(t.style={}),t.style.width||(t.style.width="100%"),t.style.height||(t.style.height="100%"),fn("div",{...t,ref:"root"},this.ready&&this.$slots.default?this.$slots.default():{})}}),zP=["Symbol(Comment)","Symbol(Text)"],HP=["LTooltip","LPopup"],bS={...Il,draggable:{type:Boolean,default:void 0},icon:{type:[Object]},zIndexOffset:{type:Number},latLng:{type:[Object,Array],custom:!0,required:!0}},VP=(t,e,i)=>{const{options:s,methods:n}=mf(t,e,i),r=es(t,bS,s),o={...n,setDraggable(l){e.value.dragging&&(l?e.value.dragging.enable():e.value.dragging.disable())},latLngSync(l){i.emit("update:latLng",l.latlng),i.emit("update:lat-lng",l.latlng)},setLatLng(l){if(l!=null&&e.value){const u=e.value.getLatLng();(!u||!u.equals(l))&&e.value.setLatLng(l)}}};return{options:r,methods:o}},qP=(t,e)=>{const i=e.slots.default&&e.slots.default();return i&&i.length&&i.some($P)};function $P(t){return!(zP.includes(t.type.toString())||HP.includes(t.type.name))}const WP=bs({name:"LMarker",props:bS,setup(t,e){const i=ui(),s=ui(!1),n=pi(Yn),r=gs(fo);Qi(hS,()=>{var h;return!!((h=i.value)!=null&&h.getElement())}),Qi(dS,h=>{var d,m;const _=Zr((d=i.value)==null?void 0:d.getElement)&&((m=i.value)==null?void 0:m.getElement());_&&(_.innerHTML=h)}),Qi(fS,h=>{var d;return((d=i.value)==null?void 0:d.setIcon)&&i.value.setIcon(h)});const{options:o,methods:l}=VP(t,i,e),u={moveHandler:vS(l.latLngSync)};return Qs(async()=>{const{marker:h,divIcon:d}=n?$s.L:await ms(()=>import("./leaflet-src.esm-C6uo2YWw.js"),[]);qP(o,e)&&(o.icon=d({className:""})),i.value=Xn(h(t.latLng,o));const{listeners:m}=pa(e.attrs);i.value.on(m),i.value.on("move",u.moveHandler),Zn(l,i.value,t),r({...t,...l,leafletObject:i.value}),s.value=!0,Ji(()=>e.emit("ready",i.value))}),lf(()=>uS(u)),{ready:s,leafletObject:i}},render(){return c_(this.ready,this.$slots)}}),TS={...h_,smoothFactor:{type:Number},noClip:{type:Boolean,default:void 0},latLngs:{type:Array,required:!0,custom:!0}},GP=(t,e,i)=>{const{options:s,methods:n}=AP(t,e,i),r=es(t,TS,s),o={...n,setSmoothFactor(l){e.value.setStyle({smoothFactor:l})},setNoClip(l){e.value.setStyle({noClip:l})},addLatLng(l){e.value.addLatLng(l)}};return{options:r,methods:o}},bd={...TS},XP=(t,e,i)=>{const{options:s,methods:n}=GP(t,e,i),r=es(t,bd,s),o={...n,toGeoJSON(l){return e.value.toGeoJSON(l)}};return{options:r,methods:o}},KP=bs({name:"LPolygon",props:bd,setup(t,e){const i=ui(),s=ui(!1),n=pi(Yn),r=gs(fo),{options:o,methods:l}=XP(t,i,e);return Qs(async()=>{const{polygon:u}=n?$s.L:await ms(()=>import("./leaflet-src.esm-C6uo2YWw.js"),[]);i.value=Xn(u(t.latLngs,o));const{listeners:h}=pa(e.attrs);i.value.on(h),Zn(l,i.value,t),r({...t,...l,leafletObject:i.value}),s.value=!0,Ji(()=>e.emit("ready",i.value))}),{ready:s,leafletObject:i}},render(){return c_(this.ready,this.$slots)}}),xS={...Lc,content:{type:String,default:null}};({...xS});({...bd,latLngs:{...bd.latLngs}});const m_={...p_,tms:{type:Boolean,default:void 0},subdomains:{type:[String,Array],validator:t=>typeof t=="string"?!0:Array.isArray(t)?t.every(e=>typeof e=="string"):!1},detectRetina:{type:Boolean,default:void 0},url:{type:String,required:!0,custom:!0}},ZP=(t,e,i)=>{const{options:s,methods:n}=yS(t,e,i),r=es(t,m_,s),o={...n};return{options:r,methods:o}},YP=bs({props:m_,setup(t,e){const i=ui(),s=pi(Yn),n=gs(fo),{options:r,methods:o}=ZP(t,i,e);return Qs(async()=>{const{tileLayer:l}=s?$s.L:await ms(()=>import("./leaflet-src.esm-C6uo2YWw.js"),[]);i.value=Xn(l(t.url,r));const{listeners:u}=pa(e.attrs);i.value.on(u),Zn(o,i.value,t),n({...t,...o,leafletObject:i.value}),Ji(()=>e.emit("ready",i.value))}),{leafletObject:i}},render(){return null}});({...xS});({...m_});var Fu={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var QP=Fu.exports,Ty;function JP(){return Ty||(Ty=1,(function(t,e){(function(i,s){s(e)})(QP,(function(i){var s="1.9.4";function n(a){var c,p,b,w;for(p=1,b=arguments.length;p<b;p++){w=arguments[p];for(c in w)a[c]=w[c]}return a}var r=Object.create||(function(){function a(){}return function(c){return a.prototype=c,new a}})();function o(a,c){var p=Array.prototype.slice;if(a.bind)return a.bind.apply(a,p.call(arguments,1));var b=p.call(arguments,2);return function(){return a.apply(c,b.length?b.concat(p.call(arguments)):arguments)}}var l=0;function u(a){return"_leaflet_id"in a||(a._leaflet_id=++l),a._leaflet_id}function h(a,c,p){var b,w,M,K;return K=function(){b=!1,w&&(M.apply(p,w),w=!1)},M=function(){b?w=arguments:(a.apply(p,arguments),setTimeout(K,c),b=!0)},M}function d(a,c,p){var b=c[1],w=c[0],M=b-w;return a===b&&p?a:((a-w)%M+M)%M+w}function m(){return!1}function _(a,c){if(c===!1)return a;var p=Math.pow(10,c===void 0?6:c);return Math.round(a*p)/p}function T(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function C(a){return T(a).split(/\s+/)}function x(a,c){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?r(a.options):{});for(var p in c)a.options[p]=c[p];return a.options}function E(a,c,p){var b=[];for(var w in a)b.push(encodeURIComponent(p?w.toUpperCase():w)+"="+encodeURIComponent(a[w]));return(!c||c.indexOf("?")===-1?"?":"&")+b.join("&")}var P=/\{ *([\w_ -]+) *\}/g;function k(a,c){return a.replace(P,function(p,b){var w=c[b];if(w===void 0)throw new Error("No value provided for variable "+p);return typeof w=="function"&&(w=w(c)),w})}var I=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function F(a,c){for(var p=0;p<a.length;p++)if(a[p]===c)return p;return-1}var z="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function q(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var U=0;function Z(a){var c=+new Date,p=Math.max(0,16-(c-U));return U=c+p,window.setTimeout(a,p)}var D=window.requestAnimationFrame||q("RequestAnimationFrame")||Z,R=window.cancelAnimationFrame||q("CancelAnimationFrame")||q("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function Y(a,c,p){if(p&&D===Z)a.call(c);else return D.call(window,o(a,c))}function Q(a){a&&R.call(window,a)}var J={__proto__:null,extend:n,create:r,bind:o,get lastId(){return l},stamp:u,throttle:h,wrapNum:d,falseFn:m,formatNum:_,trim:T,splitWords:C,setOptions:x,getParamString:E,template:k,isArray:I,indexOf:F,emptyImageUrl:z,requestFn:D,cancelFn:R,requestAnimFrame:Y,cancelAnimFrame:Q};function ae(){}ae.extend=function(a){var c=function(){x(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},p=c.__super__=this.prototype,b=r(p);b.constructor=c,c.prototype=b;for(var w in this)Object.prototype.hasOwnProperty.call(this,w)&&w!=="prototype"&&w!=="__super__"&&(c[w]=this[w]);return a.statics&&n(c,a.statics),a.includes&&(ce(a.includes),n.apply(null,[b].concat(a.includes))),n(b,a),delete b.statics,delete b.includes,b.options&&(b.options=p.options?r(p.options):{},n(b.options,a.options)),b._initHooks=[],b.callInitHooks=function(){if(!this._initHooksCalled){p.callInitHooks&&p.callInitHooks.call(this),this._initHooksCalled=!0;for(var M=0,K=b._initHooks.length;M<K;M++)b._initHooks[M].call(this)}},c},ae.include=function(a){var c=this.prototype.options;return n(this.prototype,a),a.options&&(this.prototype.options=c,this.mergeOptions(a.options)),this},ae.mergeOptions=function(a){return n(this.prototype.options,a),this},ae.addInitHook=function(a){var c=Array.prototype.slice.call(arguments,1),p=typeof a=="function"?a:function(){this[a].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(p),this};function ce(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=I(a)?a:[a];for(var c=0;c<a.length;c++)a[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var le={on:function(a,c,p){if(typeof a=="object")for(var b in a)this._on(b,a[b],c);else{a=C(a);for(var w=0,M=a.length;w<M;w++)this._on(a[w],c,p)}return this},off:function(a,c,p){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var b in a)this._off(b,a[b],c);else{a=C(a);for(var w=arguments.length===1,M=0,K=a.length;M<K;M++)w?this._off(a[M]):this._off(a[M],c,p)}return this},_on:function(a,c,p,b){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(a,c,p)===!1){p===this&&(p=void 0);var w={fn:c,ctx:p};b&&(w.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(w)}},_off:function(a,c,p){var b,w,M;if(this._events&&(b=this._events[a],!!b)){if(arguments.length===1){if(this._firingCount)for(w=0,M=b.length;w<M;w++)b[w].fn=m;delete this._events[a];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var K=this._listens(a,c,p);if(K!==!1){var ne=b[K];this._firingCount&&(ne.fn=m,this._events[a]=b=b.slice()),b.splice(K,1)}}},fire:function(a,c,p){if(!this.listens(a,p))return this;var b=n({},c,{type:a,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var w=this._events[a];if(w){this._firingCount=this._firingCount+1||1;for(var M=0,K=w.length;M<K;M++){var ne=w[M],de=ne.fn;ne.once&&this.off(a,de,ne.ctx),de.call(ne.ctx||this,b)}this._firingCount--}}return p&&this._propagateEvent(b),this},listens:function(a,c,p,b){typeof a!="string"&&console.warn('"string" type argument expected');var w=c;typeof c!="function"&&(b=!!c,w=void 0,p=void 0);var M=this._events&&this._events[a];if(M&&M.length&&this._listens(a,w,p)!==!1)return!0;if(b){for(var K in this._eventParents)if(this._eventParents[K].listens(a,c,p,b))return!0}return!1},_listens:function(a,c,p){if(!this._events)return!1;var b=this._events[a]||[];if(!c)return!!b.length;p===this&&(p=void 0);for(var w=0,M=b.length;w<M;w++)if(b[w].fn===c&&b[w].ctx===p)return w;return!1},once:function(a,c,p){if(typeof a=="object")for(var b in a)this._on(b,a[b],c,!0);else{a=C(a);for(var w=0,M=a.length;w<M;w++)this._on(a[w],c,p,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[u(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[u(a)],this},_propagateEvent:function(a){for(var c in this._eventParents)this._eventParents[c].fire(a.type,n({layer:a.target,propagatedFrom:a.target},a),!0)}};le.addEventListener=le.on,le.removeEventListener=le.clearAllEventListeners=le.off,le.addOneTimeEventListener=le.once,le.fireEvent=le.fire,le.hasEventListeners=le.listens;var se=ae.extend(le);function ee(a,c,p){this.x=p?Math.round(a):a,this.y=p?Math.round(c):c}var fe=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};ee.prototype={clone:function(){return new ee(this.x,this.y)},add:function(a){return this.clone()._add(re(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(re(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new ee(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new ee(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=fe(this.x),this.y=fe(this.y),this},distanceTo:function(a){a=re(a);var c=a.x-this.x,p=a.y-this.y;return Math.sqrt(c*c+p*p)},equals:function(a){return a=re(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=re(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+_(this.x)+", "+_(this.y)+")"}};function re(a,c,p){return a instanceof ee?a:I(a)?new ee(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new ee(a.x,a.y):new ee(a,c,p)}function ue(a,c){if(a)for(var p=c?[a,c]:a,b=0,w=p.length;b<w;b++)this.extend(p[b])}ue.prototype={extend:function(a){var c,p;if(!a)return this;if(a instanceof ee||typeof a[0]=="number"||"x"in a)c=p=re(a);else if(a=Oe(a),c=a.min,p=a.max,!c||!p)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=p.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(p.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(p.y,this.max.y)),this},getCenter:function(a){return re((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return re(this.min.x,this.max.y)},getTopRight:function(){return re(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var c,p;return typeof a[0]=="number"||a instanceof ee?a=re(a):a=Oe(a),a instanceof ue?(c=a.min,p=a.max):c=p=a,c.x>=this.min.x&&p.x<=this.max.x&&c.y>=this.min.y&&p.y<=this.max.y},intersects:function(a){a=Oe(a);var c=this.min,p=this.max,b=a.min,w=a.max,M=w.x>=c.x&&b.x<=p.x,K=w.y>=c.y&&b.y<=p.y;return M&&K},overlaps:function(a){a=Oe(a);var c=this.min,p=this.max,b=a.min,w=a.max,M=w.x>c.x&&b.x<p.x,K=w.y>c.y&&b.y<p.y;return M&&K},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var c=this.min,p=this.max,b=Math.abs(c.x-p.x)*a,w=Math.abs(c.y-p.y)*a;return Oe(re(c.x-b,c.y-w),re(p.x+b,p.y+w))},equals:function(a){return a?(a=Oe(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function Oe(a,c){return!a||a instanceof ue?a:new ue(a,c)}function ze(a,c){if(a)for(var p=c?[a,c]:a,b=0,w=p.length;b<w;b++)this.extend(p[b])}ze.prototype={extend:function(a){var c=this._southWest,p=this._northEast,b,w;if(a instanceof Ee)b=a,w=a;else if(a instanceof ze){if(b=a._southWest,w=a._northEast,!b||!w)return this}else return a?this.extend(He(a)||Me(a)):this;return!c&&!p?(this._southWest=new Ee(b.lat,b.lng),this._northEast=new Ee(w.lat,w.lng)):(c.lat=Math.min(b.lat,c.lat),c.lng=Math.min(b.lng,c.lng),p.lat=Math.max(w.lat,p.lat),p.lng=Math.max(w.lng,p.lng)),this},pad:function(a){var c=this._southWest,p=this._northEast,b=Math.abs(c.lat-p.lat)*a,w=Math.abs(c.lng-p.lng)*a;return new ze(new Ee(c.lat-b,c.lng-w),new Ee(p.lat+b,p.lng+w))},getCenter:function(){return new Ee((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ee(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ee(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof Ee||"lat"in a?a=He(a):a=Me(a);var c=this._southWest,p=this._northEast,b,w;return a instanceof ze?(b=a.getSouthWest(),w=a.getNorthEast()):b=w=a,b.lat>=c.lat&&w.lat<=p.lat&&b.lng>=c.lng&&w.lng<=p.lng},intersects:function(a){a=Me(a);var c=this._southWest,p=this._northEast,b=a.getSouthWest(),w=a.getNorthEast(),M=w.lat>=c.lat&&b.lat<=p.lat,K=w.lng>=c.lng&&b.lng<=p.lng;return M&&K},overlaps:function(a){a=Me(a);var c=this._southWest,p=this._northEast,b=a.getSouthWest(),w=a.getNorthEast(),M=w.lat>c.lat&&b.lat<p.lat,K=w.lng>c.lng&&b.lng<p.lng;return M&&K},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,c){return a?(a=Me(a),this._southWest.equals(a.getSouthWest(),c)&&this._northEast.equals(a.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Me(a,c){return a instanceof ze?a:new ze(a,c)}function Ee(a,c,p){if(isNaN(a)||isNaN(c))throw new Error("Invalid LatLng object: ("+a+", "+c+")");this.lat=+a,this.lng=+c,p!==void 0&&(this.alt=+p)}Ee.prototype={equals:function(a,c){if(!a)return!1;a=He(a);var p=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return p<=(c===void 0?1e-9:c)},toString:function(a){return"LatLng("+_(this.lat,a)+", "+_(this.lng,a)+")"},distanceTo:function(a){return Ae.distance(this,He(a))},wrap:function(){return Ae.wrapLatLng(this)},toBounds:function(a){var c=180*a/40075017,p=c/Math.cos(Math.PI/180*this.lat);return Me([this.lat-c,this.lng-p],[this.lat+c,this.lng+p])},clone:function(){return new Ee(this.lat,this.lng,this.alt)}};function He(a,c,p){return a instanceof Ee?a:I(a)&&typeof a[0]!="object"?a.length===3?new Ee(a[0],a[1],a[2]):a.length===2?new Ee(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new Ee(a.lat,"lng"in a?a.lng:a.lon,a.alt):c===void 0?null:new Ee(a,c,p)}var me={latLngToPoint:function(a,c){var p=this.projection.project(a),b=this.scale(c);return this.transformation._transform(p,b)},pointToLatLng:function(a,c){var p=this.scale(c),b=this.transformation.untransform(a,p);return this.projection.unproject(b)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var c=this.projection.bounds,p=this.scale(a),b=this.transformation.transform(c.min,p),w=this.transformation.transform(c.max,p);return new ue(b,w)},infinite:!1,wrapLatLng:function(a){var c=this.wrapLng?d(a.lng,this.wrapLng,!0):a.lng,p=this.wrapLat?d(a.lat,this.wrapLat,!0):a.lat,b=a.alt;return new Ee(p,c,b)},wrapLatLngBounds:function(a){var c=a.getCenter(),p=this.wrapLatLng(c),b=c.lat-p.lat,w=c.lng-p.lng;if(b===0&&w===0)return a;var M=a.getSouthWest(),K=a.getNorthEast(),ne=new Ee(M.lat-b,M.lng-w),de=new Ee(K.lat-b,K.lng-w);return new ze(ne,de)}},Ae=n({},me,{wrapLng:[-180,180],R:6371e3,distance:function(a,c){var p=Math.PI/180,b=a.lat*p,w=c.lat*p,M=Math.sin((c.lat-a.lat)*p/2),K=Math.sin((c.lng-a.lng)*p/2),ne=M*M+Math.cos(b)*Math.cos(w)*K*K,de=2*Math.atan2(Math.sqrt(ne),Math.sqrt(1-ne));return this.R*de}}),Le=6378137,qe={R:Le,MAX_LATITUDE:85.0511287798,project:function(a){var c=Math.PI/180,p=this.MAX_LATITUDE,b=Math.max(Math.min(p,a.lat),-p),w=Math.sin(b*c);return new ee(this.R*a.lng*c,this.R*Math.log((1+w)/(1-w))/2)},unproject:function(a){var c=180/Math.PI;return new Ee((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*c,a.x*c/this.R)},bounds:(function(){var a=Le*Math.PI;return new ue([-a,-a],[a,a])})()};function We(a,c,p,b){if(I(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=c,this._c=p,this._d=b}We.prototype={transform:function(a,c){return this._transform(a.clone(),c)},_transform:function(a,c){return c=c||1,a.x=c*(this._a*a.x+this._b),a.y=c*(this._c*a.y+this._d),a},untransform:function(a,c){return c=c||1,new ee((a.x/c-this._b)/this._a,(a.y/c-this._d)/this._c)}};function H(a,c,p,b){return new We(a,c,p,b)}var X=n({},Ae,{code:"EPSG:3857",projection:qe,transformation:(function(){var a=.5/(Math.PI*qe.R);return H(a,.5,-a,.5)})()}),ie=n({},X,{code:"EPSG:900913"});function ve(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function ye(a,c){var p="",b,w,M,K,ne,de;for(b=0,M=a.length;b<M;b++){for(ne=a[b],w=0,K=ne.length;w<K;w++)de=ne[w],p+=(w?"L":"M")+de.x+" "+de.y;p+=c?Be.svg?"z":"x":""}return p||"M0 0"}var Te=document.documentElement.style,Ie="ActiveXObject"in window,Pe=Ie&&!document.addEventListener,xe="msLaunchUri"in navigator&&!("documentMode"in document),be=Gt("webkit"),Ue=Gt("android"),Re=Gt("android 2")||Gt("android 3"),$e=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ge=Ue&&Gt("Google")&&$e<537&&!("AudioNode"in window),Je=!!window.opera,ct=!xe&&Gt("chrome"),at=Gt("gecko")&&!be&&!Je&&!Ie,Qt=!ct&&Gt("safari"),Wt=Gt("phantom"),ri="OTransition"in Te,it=navigator.platform.indexOf("Win")===0,ts=Ie&&"transition"in Te,is="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Re,ii="MozPerspective"in Te,xi=!window.L_DISABLE_3D&&(ts||is||ii)&&!ri&&!Wt,ss=typeof orientation<"u"||Gt("mobile"),Ts=ss&&be,ga=ss&&is,Ar=!window.PointerEvent&&window.MSPointerEvent,mo=!!(window.PointerEvent||Ar),ql="ontouchstart"in window||!!window.TouchEvent,O=!window.L_NO_TOUCH&&(ql||mo),N=ss&&Je,G=ss&&at,he=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,De=(function(){var a=!1;try{var c=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",m,c),window.removeEventListener("testPassiveEventSupport",m,c)}catch{}return a})(),Ze=(function(){return!!document.createElement("canvas").getContext})(),vt=!!(document.createElementNS&&ve("svg").createSVGRect),mi=!!vt&&(function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Fi=!vt&&(function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var c=a.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}})(),Ei=navigator.platform.indexOf("Mac")===0,Ui=navigator.platform.indexOf("Linux")===0;function Gt(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var Be={ie:Ie,ielt9:Pe,edge:xe,webkit:be,android:Ue,android23:Re,androidStock:Ge,opera:Je,chrome:ct,gecko:at,safari:Qt,phantom:Wt,opera12:ri,win:it,ie3d:ts,webkit3d:is,gecko3d:ii,any3d:xi,mobile:ss,mobileWebkit:Ts,mobileWebkit3d:ga,msPointer:Ar,pointer:mo,touch:O,touchNative:ql,mobileOpera:N,mobileGecko:G,retina:he,passiveEvents:De,canvas:Ze,svg:vt,vml:Fi,inlineSvg:mi,mac:Ei,linux:Ui},Ms=Be.msPointer?"MSPointerDown":"pointerdown",ji=Be.msPointer?"MSPointerMove":"pointermove",zi=Be.msPointer?"MSPointerUp":"pointerup",gi=Be.msPointer?"MSPointerCancel":"pointercancel",zt={touchstart:Ms,touchmove:ji,touchend:zi,touchcancel:gi},mt={touchstart:Xf,touchmove:va,touchend:va,touchcancel:va},Hi={},yn=!1;function _a(a,c,p){return c==="touchstart"&&ya(),mt[c]?(p=mt[c].bind(this,p),a.addEventListener(zt[c],p,!1),p):(console.warn("wrong event specified:",c),m)}function Gf(a,c,p){if(!zt[c]){console.warn("wrong event specified:",c);return}a.removeEventListener(zt[c],p,!1)}function Qn(a){Hi[a.pointerId]=a}function Nt(a){Hi[a.pointerId]&&(Hi[a.pointerId]=a)}function $l(a){delete Hi[a.pointerId]}function ya(){yn||(document.addEventListener(Ms,Qn,!0),document.addEventListener(ji,Nt,!0),document.addEventListener(zi,$l,!0),document.addEventListener(gi,$l,!0),yn=!0)}function va(a,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var p in Hi)c.touches.push(Hi[p]);c.changedTouches=[c],a(c)}}function Xf(a,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&oi(c),va(a,c)}function Kf(a){var c={},p,b;for(b in a)p=a[b],c[b]=p&&p.bind?p.bind(a):p;return a=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var qc=200;function Wl(a,c){a.addEventListener("dblclick",c);var p=0,b;function w(M){if(M.detail!==1){b=M.detail;return}if(!(M.pointerType==="mouse"||M.sourceCapabilities&&!M.sourceCapabilities.firesTouchEvents)){var K=Jl(M);if(!(K.some(function(de){return de instanceof HTMLLabelElement&&de.attributes.for})&&!K.some(function(de){return de instanceof HTMLInputElement||de instanceof HTMLSelectElement}))){var ne=Date.now();ne-p<=qc?(b++,b===2&&c(Kf(M))):b=1,p=ne}}}return a.addEventListener("click",w),{dblclick:c,simDblclick:w}}function Gl(a,c){a.removeEventListener("dblclick",c.dblclick),a.removeEventListener("click",c.simDblclick)}var ba=Dr(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),go=Dr(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),$c=go==="webkitTransition"||go==="OTransition"?go+"End":"transitionend";function _o(a){return typeof a=="string"?document.getElementById(a):a}function vn(a,c){var p=a.style[c]||a.currentStyle&&a.currentStyle[c];if((!p||p==="auto")&&document.defaultView){var b=document.defaultView.getComputedStyle(a,null);p=b?b[c]:null}return p==="auto"?null:p}function ft(a,c,p){var b=document.createElement(a);return b.className=c||"",p&&p.appendChild(b),b}function Et(a){var c=a.parentNode;c&&c.removeChild(a)}function bn(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function Rs(a){var c=a.parentNode;c&&c.lastChild!==a&&c.appendChild(a)}function Ns(a){var c=a.parentNode;c&&c.firstChild!==a&&c.insertBefore(a,c.firstChild)}function Xl(a,c){if(a.classList!==void 0)return a.classList.contains(c);var p=xs(a);return p.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(p)}function st(a,c){if(a.classList!==void 0)for(var p=C(c),b=0,w=p.length;b<w;b++)a.classList.add(p[b]);else if(!Xl(a,c)){var M=xs(a);Kl(a,(M?M+" ":"")+c)}}function Xt(a,c){a.classList!==void 0?a.classList.remove(c):Kl(a,T((" "+xs(a)+" ").replace(" "+c+" "," ")))}function Kl(a,c){a.className.baseVal===void 0?a.className=c:a.className.baseVal=c}function xs(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function Si(a,c){"opacity"in a.style?a.style.opacity=c:"filter"in a.style&&Zf(a,c)}function Zf(a,c){var p=!1,b="DXImageTransform.Microsoft.Alpha";try{p=a.filters.item(b)}catch{if(c===1)return}c=Math.round(c*100),p?(p.Enabled=c!==100,p.Opacity=c):a.style.filter+=" progid:"+b+"(opacity="+c+")"}function Dr(a){for(var c=document.documentElement.style,p=0;p<a.length;p++)if(a[p]in c)return a[p];return!1}function en(a,c,p){var b=c||new ee(0,0);a.style[ba]=(Be.ie3d?"translate("+b.x+"px,"+b.y+"px)":"translate3d("+b.x+"px,"+b.y+"px,0)")+(p?" scale("+p+")":"")}function yt(a,c){a._leaflet_pos=c,Be.any3d?en(a,c):(a.style.left=c.x+"px",a.style.top=c.y+"px")}function Jn(a){return a._leaflet_pos||new ee(0,0)}var Tn,tn,Pr;if("onselectstart"in document)Tn=function(){tt(window,"selectstart",oi)},tn=function(){At(window,"selectstart",oi)};else{var Bs=Dr(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Tn=function(){if(Bs){var a=document.documentElement.style;Pr=a[Bs],a[Bs]="none"}},tn=function(){Bs&&(document.documentElement.style[Bs]=Pr,Pr=void 0)}}function yo(){tt(window,"dragstart",oi)}function Ta(){At(window,"dragstart",oi)}var kr,Zl;function Yl(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&(xa(),kr=a,Zl=a.style.outlineStyle,a.style.outlineStyle="none",tt(window,"keydown",xa))}function xa(){kr&&(kr.style.outlineStyle=Zl,kr=void 0,Zl=void 0,At(window,"keydown",xa))}function vo(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function Sa(a){var c=a.getBoundingClientRect();return{x:c.width/a.offsetWidth||1,y:c.height/a.offsetHeight||1,boundingClientRect:c}}var Yf={__proto__:null,TRANSFORM:ba,TRANSITION:go,TRANSITION_END:$c,get:_o,getStyle:vn,create:ft,remove:Et,empty:bn,toFront:Rs,toBack:Ns,hasClass:Xl,addClass:st,removeClass:Xt,setClass:Kl,getClass:xs,setOpacity:Si,testProp:Dr,setTransform:en,setPosition:yt,getPosition:Jn,get disableTextSelection(){return Tn},get enableTextSelection(){return tn},disableImageDrag:yo,enableImageDrag:Ta,preventOutline:Yl,restoreOutline:xa,getSizedParentNode:vo,getScale:Sa};function tt(a,c,p,b){if(c&&typeof c=="object")for(var w in c)Lr(a,w,c[w],p);else{c=C(c);for(var M=0,K=c.length;M<K;M++)Lr(a,c[M],p,b)}return this}var Fs="_leaflet_events";function At(a,c,p,b){if(arguments.length===1)Wc(a),delete a[Fs];else if(c&&typeof c=="object")for(var w in c)Ca(a,w,c[w],p);else if(c=C(c),arguments.length===2)Wc(a,function(ne){return F(c,ne)!==-1});else for(var M=0,K=c.length;M<K;M++)Ca(a,c[M],p,b);return this}function Wc(a,c){for(var p in a[Fs]){var b=p.split(/\d/)[0];(!c||c(b))&&Ca(a,b,null,null,p)}}var Ir={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Lr(a,c,p,b){var w=c+u(p)+(b?"_"+u(b):"");if(a[Fs]&&a[Fs][w])return this;var M=function(ne){return p.call(b||a,ne||window.event)},K=M;!Be.touchNative&&Be.pointer&&c.indexOf("touch")===0?M=_a(a,c,M):Be.touch&&c==="dblclick"?M=Wl(a,M):"addEventListener"in a?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?a.addEventListener(Ir[c]||c,M,Be.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(M=function(ne){ne=ne||window.event,eu(a,ne)&&K(ne)},a.addEventListener(Ir[c],M,!1)):a.addEventListener(c,K,!1):a.attachEvent("on"+c,M),a[Fs]=a[Fs]||{},a[Fs][w]=M}function Ca(a,c,p,b,w){w=w||c+u(p)+(b?"_"+u(b):"");var M=a[Fs]&&a[Fs][w];if(!M)return this;!Be.touchNative&&Be.pointer&&c.indexOf("touch")===0?Gf(a,c,M):Be.touch&&c==="dblclick"?Gl(a,M):"removeEventListener"in a?a.removeEventListener(Ir[c]||c,M,!1):a.detachEvent("on"+c,M),a[Fs][w]=null}function er(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function Ql(a){return Lr(a,"wheel",er),this}function Or(a){return tt(a,"mousedown touchstart dblclick contextmenu",er),a._leaflet_disable_click=!0,this}function oi(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function tr(a){return oi(a),er(a),this}function Jl(a){if(a.composedPath)return a.composedPath();for(var c=[],p=a.target;p;)c.push(p),p=p.parentNode;return c}function Gc(a,c){if(!c)return new ee(a.clientX,a.clientY);var p=Sa(c),b=p.boundingClientRect;return new ee((a.clientX-b.left)/p.x-c.clientLeft,(a.clientY-b.top)/p.y-c.clientTop)}var Qf=Be.linux&&Be.chrome?window.devicePixelRatio:Be.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Xc(a){return Be.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/Qf:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function eu(a,c){var p=c.relatedTarget;if(!p)return!0;try{for(;p&&p!==a;)p=p.parentNode}catch{return!1}return p!==a}var Jf={__proto__:null,on:tt,off:At,stopPropagation:er,disableScrollPropagation:Ql,disableClickPropagation:Or,preventDefault:oi,stop:tr,getPropagationPath:Jl,getMousePosition:Gc,getWheelDelta:Xc,isExternalTarget:eu,addListener:tt,removeListener:At},Kc=se.extend({run:function(a,c,p,b){this.stop(),this._el=a,this._inProgress=!0,this._duration=p||.25,this._easeOutPower=1/Math.max(b||.5,.2),this._startPos=Jn(a),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Y(this._animate,this),this._step()},_step:function(a){var c=+new Date-this._startTime,p=this._duration*1e3;c<p?this._runFrame(this._easeOut(c/p),a):(this._runFrame(1),this._complete())},_runFrame:function(a,c){var p=this._startPos.add(this._offset.multiplyBy(a));c&&p._round(),yt(this._el,p),this.fire("step")},_complete:function(){Q(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),ht=se.extend({options:{crs:X,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,c){c=x(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(He(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=go&&Be.any3d&&!Be.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),tt(this._proxy,$c,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,c,p){if(c=c===void 0?this._zoom:this._limitZoom(c),a=this._limitCenter(He(a),c,this.options.maxBounds),p=p||{},this._stop(),this._loaded&&!p.reset&&p!==!0){p.animate!==void 0&&(p.zoom=n({animate:p.animate},p.zoom),p.pan=n({animate:p.animate,duration:p.duration},p.pan));var b=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,c,p.zoom):this._tryAnimatedPan(a,p.pan);if(b)return clearTimeout(this._sizeTimer),this}return this._resetView(a,c,p.pan&&p.pan.noMoveStart),this},setZoom:function(a,c){return this._loaded?this.setView(this.getCenter(),a,{zoom:c}):(this._zoom=a,this)},zoomIn:function(a,c){return a=a||(Be.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,c)},zoomOut:function(a,c){return a=a||(Be.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,c)},setZoomAround:function(a,c,p){var b=this.getZoomScale(c),w=this.getSize().divideBy(2),M=a instanceof ee?a:this.latLngToContainerPoint(a),K=M.subtract(w).multiplyBy(1-1/b),ne=this.containerPointToLatLng(w.add(K));return this.setView(ne,c,{zoom:p})},_getBoundsCenterZoom:function(a,c){c=c||{},a=a.getBounds?a.getBounds():Me(a);var p=re(c.paddingTopLeft||c.padding||[0,0]),b=re(c.paddingBottomRight||c.padding||[0,0]),w=this.getBoundsZoom(a,!1,p.add(b));if(w=typeof c.maxZoom=="number"?Math.min(c.maxZoom,w):w,w===1/0)return{center:a.getCenter(),zoom:w};var M=b.subtract(p).divideBy(2),K=this.project(a.getSouthWest(),w),ne=this.project(a.getNorthEast(),w),de=this.unproject(K.add(ne).divideBy(2).add(M),w);return{center:de,zoom:w}},fitBounds:function(a,c){if(a=Me(a),!a.isValid())throw new Error("Bounds are not valid.");var p=this._getBoundsCenterZoom(a,c);return this.setView(p.center,p.zoom,c)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,c){return this.setView(a,this._zoom,{pan:c})},panBy:function(a,c){if(a=re(a).round(),c=c||{},!a.x&&!a.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Kc,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){st(this._mapPane,"leaflet-pan-anim");var p=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,p,c.duration||.25,c.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,c,p){if(p=p||{},p.animate===!1||!Be.any3d)return this.setView(a,c,p);this._stop();var b=this.project(this.getCenter()),w=this.project(a),M=this.getSize(),K=this._zoom;a=He(a),c=c===void 0?K:c;var ne=Math.max(M.x,M.y),de=ne*this.getZoomScale(K,c),Ce=w.distanceTo(b)||1,je=1.42,Fe=je*je;function et(Kt){var f=Kt?-1:1,g=Kt?de:ne,v=de*de-ne*ne+f*Fe*Fe*Ce*Ce,y=2*g*Fe*Ce,S=v/y,A=Math.sqrt(S*S+1)-S,B=A<1e-9?-18:Math.log(A);return B}function bt(Kt){return(Math.exp(Kt)-Math.exp(-Kt))/2}function Dt(Kt){return(Math.exp(Kt)+Math.exp(-Kt))/2}function as(Kt){return bt(Kt)/Dt(Kt)}var Ci=et(0);function Ur(Kt){return ne*(Dt(Ci)/Dt(Ci+je*Kt))}function gp(Kt){return ne*(Dt(Ci)*as(Ci+je*Kt)-bt(Ci))/Fe}function _p(Kt){return 1-Math.pow(1-Kt,1.5)}var yp=Date.now(),Sh=(et(1)-Ci)/je,vp=p.duration?1e3*p.duration:1e3*Sh*.8;function Ch(){var Kt=(Date.now()-yp)/vp,f=_p(Kt)*Sh;Kt<=1?(this._flyToFrame=Y(Ch,this),this._move(this.unproject(b.add(w.subtract(b).multiplyBy(gp(f)/Ce)),K),this.getScaleZoom(ne/Ur(f),K),{flyTo:!0})):this._move(a,c)._moveEnd(!0)}return this._moveStart(!0,p.noMoveStart),Ch.call(this),this},flyToBounds:function(a,c){var p=this._getBoundsCenterZoom(a,c);return this.flyTo(p.center,p.zoom,c)},setMaxBounds:function(a){return a=Me(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var c=this.options.minZoom;return this.options.minZoom=a,this._loaded&&c!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var c=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&c!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,c){this._enforcingBounds=!0;var p=this.getCenter(),b=this._limitCenter(p,this._zoom,Me(a));return p.equals(b)||this.panTo(b,c),this._enforcingBounds=!1,this},panInside:function(a,c){c=c||{};var p=re(c.paddingTopLeft||c.padding||[0,0]),b=re(c.paddingBottomRight||c.padding||[0,0]),w=this.project(this.getCenter()),M=this.project(a),K=this.getPixelBounds(),ne=Oe([K.min.add(p),K.max.subtract(b)]),de=ne.getSize();if(!ne.contains(M)){this._enforcingBounds=!0;var Ce=M.subtract(ne.getCenter()),je=ne.extend(M).getSize().subtract(de);w.x+=Ce.x<0?-je.x:je.x,w.y+=Ce.y<0?-je.y:je.y,this.panTo(this.unproject(w),c),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=n({animate:!1,pan:!0},a===!0?{animate:!0}:a);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var p=this.getSize(),b=c.divideBy(2).round(),w=p.divideBy(2).round(),M=b.subtract(w);return!M.x&&!M.y?this:(a.animate&&a.pan?this.panBy(M):(a.pan&&this._rawPanBy(M),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:p}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=n({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=o(this._handleGeolocationResponse,this),p=o(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,p,a):navigator.geolocation.getCurrentPosition(c,p,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var c=a.code,p=a.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+p+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var c=a.coords.latitude,p=a.coords.longitude,b=new Ee(c,p),w=b.toBounds(a.coords.accuracy*2),M=this._locateOptions;if(M.setView){var K=this.getBoundsZoom(w);this.setView(b,M.maxZoom?Math.min(K,M.maxZoom):K)}var ne={latlng:b,bounds:w,timestamp:a.timestamp};for(var de in a.coords)typeof a.coords[de]=="number"&&(ne[de]=a.coords[de]);this.fire("locationfound",ne)}},addHandler:function(a,c){if(!c)return this;var p=this[a]=new c(this);return this._handlers.push(p),this.options[a]&&p.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Et(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Q(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)Et(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,c){var p="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),b=ft("div",p,c||this._mapPane);return a&&(this._panes[a]=b),b},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),c=this.unproject(a.getBottomLeft()),p=this.unproject(a.getTopRight());return new ze(c,p)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,c,p){a=Me(a),p=re(p||[0,0]);var b=this.getZoom()||0,w=this.getMinZoom(),M=this.getMaxZoom(),K=a.getNorthWest(),ne=a.getSouthEast(),de=this.getSize().subtract(p),Ce=Oe(this.project(ne,b),this.project(K,b)).getSize(),je=Be.any3d?this.options.zoomSnap:1,Fe=de.x/Ce.x,et=de.y/Ce.y,bt=c?Math.max(Fe,et):Math.min(Fe,et);return b=this.getScaleZoom(bt,b),je&&(b=Math.round(b/(je/100))*(je/100),b=c?Math.ceil(b/je)*je:Math.floor(b/je)*je),Math.max(w,Math.min(M,b))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ee(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,c){var p=this._getTopLeftPoint(a,c);return new ue(p,p.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,c){var p=this.options.crs;return c=c===void 0?this._zoom:c,p.scale(a)/p.scale(c)},getScaleZoom:function(a,c){var p=this.options.crs;c=c===void 0?this._zoom:c;var b=p.zoom(a*p.scale(c));return isNaN(b)?1/0:b},project:function(a,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(He(a),c)},unproject:function(a,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(re(a),c)},layerPointToLatLng:function(a){var c=re(a).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(a){var c=this.project(He(a))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(He(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(Me(a))},distance:function(a,c){return this.options.crs.distance(He(a),He(c))},containerPointToLayerPoint:function(a){return re(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return re(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var c=this.containerPointToLayerPoint(re(a));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(He(a)))},mouseEventToContainerPoint:function(a){return Gc(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var c=this._container=_o(a);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");tt(c,"scroll",this._onScroll,this),this._containerId=u(c)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&Be.any3d,st(a,"leaflet-container"+(Be.touch?" leaflet-touch":"")+(Be.retina?" leaflet-retina":"")+(Be.ielt9?" leaflet-oldie":"")+(Be.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=vn(a,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),yt(this._mapPane,new ee(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(st(a.markerPane,"leaflet-zoom-hide"),st(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,c,p){yt(this._mapPane,new ee(0,0));var b=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var w=this._zoom!==c;this._moveStart(w,p)._move(a,c)._moveEnd(w),this.fire("viewreset"),b&&this.fire("load")},_moveStart:function(a,c){return a&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(a,c,p,b){c===void 0&&(c=this._zoom);var w=this._zoom!==c;return this._zoom=c,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),b?p&&p.pinch&&this.fire("zoom",p):((w||p&&p.pinch)&&this.fire("zoom",p),this.fire("move",p)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Q(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){yt(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[u(this._container)]=this;var c=a?At:tt;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),Be.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Q(this._resizeRequest),this._resizeRequest=Y(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,c){for(var p=[],b,w=c==="mouseout"||c==="mouseover",M=a.target||a.srcElement,K=!1;M;){if(b=this._targets[u(M)],b&&(c==="click"||c==="preclick")&&this._draggableMoved(b)){K=!0;break}if(b&&b.listens(c,!0)&&(w&&!eu(M,a)||(p.push(b),w))||M===this._container)break;M=M.parentNode}return!p.length&&!K&&!w&&this.listens(c,!0)&&(p=[this]),p},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var c=a.target||a.srcElement;if(!(!this._loaded||c._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(c))){var p=a.type;p==="mousedown"&&Yl(c),this._fireDOMEvent(a,p)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,c,p){if(a.type==="click"){var b=n({},a);b.type="preclick",this._fireDOMEvent(b,b.type,p)}var w=this._findEventTargets(a,c);if(p){for(var M=[],K=0;K<p.length;K++)p[K].listens(c,!0)&&M.push(p[K]);w=M.concat(w)}if(w.length){c==="contextmenu"&&oi(a);var ne=w[0],de={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var Ce=ne.getLatLng&&(!ne._radius||ne._radius<=10);de.containerPoint=Ce?this.latLngToContainerPoint(ne.getLatLng()):this.mouseEventToContainerPoint(a),de.layerPoint=this.containerPointToLayerPoint(de.containerPoint),de.latlng=Ce?ne.getLatLng():this.layerPointToLatLng(de.layerPoint)}for(K=0;K<w.length;K++)if(w[K].fire(c,de,!0),de.originalEvent._stopped||w[K].options.bubblingMouseEvents===!1&&F(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,c=this._handlers.length;a<c;a++)this._handlers[a].disable()},whenReady:function(a,c){return this._loaded?a.call(c||this,{target:this}):this.on("load",a,c),this},_getMapPanePos:function(){return Jn(this._mapPane)||new ee(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,c){var p=a&&c!==void 0?this._getNewPixelOrigin(a,c):this.getPixelOrigin();return p.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,c){var p=this.getSize()._divideBy(2);return this.project(a,c)._subtract(p)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,c,p){var b=this._getNewPixelOrigin(p,c);return this.project(a,c)._subtract(b)},_latLngBoundsToNewLayerBounds:function(a,c,p){var b=this._getNewPixelOrigin(p,c);return Oe([this.project(a.getSouthWest(),c)._subtract(b),this.project(a.getNorthWest(),c)._subtract(b),this.project(a.getSouthEast(),c)._subtract(b),this.project(a.getNorthEast(),c)._subtract(b)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,c,p){if(!p)return a;var b=this.project(a,c),w=this.getSize().divideBy(2),M=new ue(b.subtract(w),b.add(w)),K=this._getBoundsOffset(M,p,c);return Math.abs(K.x)<=1&&Math.abs(K.y)<=1?a:this.unproject(b.add(K),c)},_limitOffset:function(a,c){if(!c)return a;var p=this.getPixelBounds(),b=new ue(p.min.add(a),p.max.add(a));return a.add(this._getBoundsOffset(b,c))},_getBoundsOffset:function(a,c,p){var b=Oe(this.project(c.getNorthEast(),p),this.project(c.getSouthWest(),p)),w=b.min.subtract(a.min),M=b.max.subtract(a.max),K=this._rebound(w.x,-M.x),ne=this._rebound(w.y,-M.y);return new ee(K,ne)},_rebound:function(a,c){return a+c>0?Math.round(a-c)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(c))},_limitZoom:function(a){var c=this.getMinZoom(),p=this.getMaxZoom(),b=Be.any3d?this.options.zoomSnap:1;return b&&(a=Math.round(a/b)*b),Math.max(c,Math.min(p,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Xt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,c){var p=this._getCenterOffset(a)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(p)?!1:(this.panBy(p,c),!0)},_createAnimProxy:function(){var a=this._proxy=ft("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(c){var p=ba,b=this._proxy.style[p];en(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),b===this._proxy.style[p]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Et(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),c=this.getZoom();en(this._proxy,this.project(a,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,c,p){if(this._animatingZoom)return!0;if(p=p||{},!this._zoomAnimated||p.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var b=this.getZoomScale(c),w=this._getCenterOffset(a)._divideBy(1-1/b);return p.animate!==!0&&!this.getSize().contains(w)?!1:(Y(function(){this._moveStart(!0,p.noMoveStart||!1)._animateZoom(a,c,!0)},this),!0)},_animateZoom:function(a,c,p,b){this._mapPane&&(p&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=c,st(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:c,noUpdate:b}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Xt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ep(a,c){return new ht(a,c)}var ns=ae.extend({options:{position:"topright"},initialize:function(a){x(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var c=this._map;return c&&c.removeControl(this),this.options.position=a,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var c=this._container=this.onAdd(a),p=this.getPosition(),b=a._controlCorners[p];return st(c,"leaflet-control"),p.indexOf("bottom")!==-1?b.insertBefore(c,b.firstChild):b.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Et(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),xn=function(a){return new ns(a)};ht.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},c="leaflet-",p=this._controlContainer=ft("div",c+"control-container",this._container);function b(w,M){var K=c+w+" "+c+M;a[w+M]=ft("div",K,p)}b("top","left"),b("top","right"),b("bottom","left"),b("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)Et(this._controlCorners[a]);Et(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Zc=ns.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,c,p,b){return p<b?-1:b<p?1:0}},initialize:function(a,c,p){x(this,p),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var b in a)this._addLayer(a[b],b);for(b in c)this._addLayer(c[b],b,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return ns.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,c){return this._addLayer(a,c),this._map?this._update():this},addOverlay:function(a,c){return this._addLayer(a,c,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var c=this._getLayer(u(a));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){st(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(st(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):Xt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Xt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",c=this._container=ft("div",a),p=this.options.collapsed;c.setAttribute("aria-haspopup",!0),Or(c),Ql(c);var b=this._section=ft("section",a+"-list");p&&(this._map.on("click",this.collapse,this),tt(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var w=this._layersLink=ft("a",a+"-toggle",c);w.href="#",w.title="Layers",w.setAttribute("role","button"),tt(w,{keydown:function(M){M.keyCode===13&&this._expandSafely()},click:function(M){oi(M),this._expandSafely()}},this),p||this.expand(),this._baseLayersList=ft("div",a+"-base",b),this._separator=ft("div",a+"-separator",b),this._overlaysList=ft("div",a+"-overlays",b),c.appendChild(b)},_getLayer:function(a){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&u(this._layers[c].layer)===a)return this._layers[c]},_addLayer:function(a,c,p){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:c,overlay:p}),this.options.sortLayers&&this._layers.sort(o(function(b,w){return this.options.sortFunction(b.layer,w.layer,b.name,w.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;bn(this._baseLayersList),bn(this._overlaysList),this._layerControlInputs=[];var a,c,p,b,w=0;for(p=0;p<this._layers.length;p++)b=this._layers[p],this._addItem(b),c=c||b.overlay,a=a||!b.overlay,w+=b.overlay?0:1;return this.options.hideSingleBase&&(a=a&&w>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=c&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var c=this._getLayer(u(a.target)),p=c.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;p&&this._map.fire(p,c)},_createRadioElement:function(a,c){var p='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(c?' checked="checked"':"")+"/>",b=document.createElement("div");return b.innerHTML=p,b.firstChild},_addItem:function(a){var c=document.createElement("label"),p=this._map.hasLayer(a.layer),b;a.overlay?(b=document.createElement("input"),b.type="checkbox",b.className="leaflet-control-layers-selector",b.defaultChecked=p):b=this._createRadioElement("leaflet-base-layers_"+u(this),p),this._layerControlInputs.push(b),b.layerId=u(a.layer),tt(b,"click",this._onInputClick,this);var w=document.createElement("span");w.innerHTML=" "+a.name;var M=document.createElement("span");c.appendChild(M),M.appendChild(b),M.appendChild(w);var K=a.overlay?this._overlaysList:this._baseLayersList;return K.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var a=this._layerControlInputs,c,p,b=[],w=[];this._handlingClick=!0;for(var M=a.length-1;M>=0;M--)c=a[M],p=this._getLayer(c.layerId).layer,c.checked?b.push(p):c.checked||w.push(p);for(M=0;M<w.length;M++)this._map.hasLayer(w[M])&&this._map.removeLayer(w[M]);for(M=0;M<b.length;M++)this._map.hasLayer(b[M])||this._map.addLayer(b[M]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,c,p,b=this._map.getZoom(),w=a.length-1;w>=0;w--)c=a[w],p=this._getLayer(c.layerId).layer,c.disabled=p.options.minZoom!==void 0&&b<p.options.minZoom||p.options.maxZoom!==void 0&&b>p.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,tt(a,"click",oi),this.expand();var c=this;setTimeout(function(){At(a,"click",oi),c._preventClick=!1})}}),tp=function(a,c,p){return new Zc(a,c,p)},tu=ns.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var c="leaflet-control-zoom",p=ft("div",c+" leaflet-bar"),b=this.options;return this._zoomInButton=this._createButton(b.zoomInText,b.zoomInTitle,c+"-in",p,this._zoomIn),this._zoomOutButton=this._createButton(b.zoomOutText,b.zoomOutTitle,c+"-out",p,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),p},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,c,p,b,w){var M=ft("a",p,b);return M.innerHTML=a,M.href="#",M.title=c,M.setAttribute("role","button"),M.setAttribute("aria-label",c),Or(M),tt(M,"click",tr),tt(M,"click",w,this),tt(M,"click",this._refocusOnMap,this),M},_updateDisabled:function(){var a=this._map,c="leaflet-disabled";Xt(this._zoomInButton,c),Xt(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(st(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(st(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});ht.mergeOptions({zoomControl:!0}),ht.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new tu,this.addControl(this.zoomControl))});var ip=function(a){return new tu(a)},Yc=ns.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var c="leaflet-control-scale",p=ft("div",c),b=this.options;return this._addScales(b,c+"-line",p),a.on(b.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),p},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,c,p){a.metric&&(this._mScale=ft("div",c,p)),a.imperial&&(this._iScale=ft("div",c,p))},_update:function(){var a=this._map,c=a.getSize().y/2,p=a.distance(a.containerPointToLatLng([0,c]),a.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(p)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var c=this._getRoundNum(a),p=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,p,c/a)},_updateImperial:function(a){var c=a*3.2808399,p,b,w;c>5280?(p=c/5280,b=this._getRoundNum(p),this._updateScale(this._iScale,b+" mi",b/p)):(w=this._getRoundNum(c),this._updateScale(this._iScale,w+" ft",w/c))},_updateScale:function(a,c,p){a.style.width=Math.round(this.options.maxWidth*p)+"px",a.innerHTML=c},_getRoundNum:function(a){var c=Math.pow(10,(Math.floor(a)+"").length-1),p=a/c;return p=p>=10?10:p>=5?5:p>=3?3:p>=2?2:1,c*p}}),wa=function(a){return new Yc(a)},bo='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ir=ns.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Be.inlineSvg?bo+" ":"")+"Leaflet</a>"},initialize:function(a){x(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=ft("div","leaflet-control-attribution"),Or(this._container);for(var c in a._layers)a._layers[c].getAttribution&&this.addAttribution(a._layers[c].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var c in this._attributions)this._attributions[c]&&a.push(c);var p=[];this.options.prefix&&p.push(this.options.prefix),a.length&&p.push(a.join(", ")),this._container.innerHTML=p.join(' <span aria-hidden="true">|</span> ')}}});ht.mergeOptions({attributionControl:!0}),ht.addInitHook(function(){this.options.attributionControl&&new ir().addTo(this)});var Ea=function(a){return new ir(a)};ns.Layers=Zc,ns.Zoom=tu,ns.Scale=Yc,ns.Attribution=ir,xn.layers=tp,xn.zoom=ip,xn.scale=wa,xn.attribution=Ea;var Jt=ae.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Jt.addTo=function(a,c){return a.addHandler(c,this),this};var sn={Events:le},To=Be.touch?"touchstart mousedown":"mousedown",nn=se.extend({options:{clickTolerance:3},initialize:function(a,c,p,b){x(this,b),this._element=a,this._dragStartTarget=c||a,this._preventOutline=p},enable:function(){this._enabled||(tt(this._dragStartTarget,To,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(nn._dragging===this&&this.finishDrag(!0),At(this._dragStartTarget,To,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!Xl(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){nn._dragging===this&&this.finishDrag();return}if(!(nn._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(nn._dragging=this,this._preventOutline&&Yl(this._element),yo(),Tn(),!this._moving)){this.fire("down");var c=a.touches?a.touches[0]:a,p=vo(this._element);this._startPoint=new ee(c.clientX,c.clientY),this._startPos=Jn(this._element),this._parentScale=Sa(p);var b=a.type==="mousedown";tt(document,b?"mousemove":"touchmove",this._onMove,this),tt(document,b?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var c=a.touches&&a.touches.length===1?a.touches[0]:a,p=new ee(c.clientX,c.clientY)._subtract(this._startPoint);!p.x&&!p.y||Math.abs(p.x)+Math.abs(p.y)<this.options.clickTolerance||(p.x/=this._parentScale.x,p.y/=this._parentScale.y,oi(a),this._moved||(this.fire("dragstart"),this._moved=!0,st(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),st(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(p),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),yt(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){Xt(document.body,"leaflet-dragging"),this._lastTarget&&(Xt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),At(document,"mousemove touchmove",this._onMove,this),At(document,"mouseup touchend touchcancel",this._onUp,this),Ta(),tn();var c=this._moved&&this._moving;this._moving=!1,nn._dragging=!1,c&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function Qc(a,c,p){var b,w=[1,4,2,8],M,K,ne,de,Ce,je,Fe,et;for(M=0,je=a.length;M<je;M++)a[M]._code=Sn(a[M],c);for(ne=0;ne<4;ne++){for(Fe=w[ne],b=[],M=0,je=a.length,K=je-1;M<je;K=M++)de=a[M],Ce=a[K],de._code&Fe?Ce._code&Fe||(et=So(Ce,de,Fe,c,p),et._code=Sn(et,c),b.push(et)):(Ce._code&Fe&&(et=So(Ce,de,Fe,c,p),et._code=Sn(et,c),b.push(et)),b.push(de));a=b}return a}function Jc(a,c){var p,b,w,M,K,ne,de,Ce,je;if(!a||a.length===0)throw new Error("latlngs not passed");rs(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Fe=He([0,0]),et=Me(a),bt=et.getNorthWest().distanceTo(et.getSouthWest())*et.getNorthEast().distanceTo(et.getNorthWest());bt<1700&&(Fe=iu(a));var Dt=a.length,as=[];for(p=0;p<Dt;p++){var Ci=He(a[p]);as.push(c.project(He([Ci.lat-Fe.lat,Ci.lng-Fe.lng])))}for(ne=de=Ce=0,p=0,b=Dt-1;p<Dt;b=p++)w=as[p],M=as[b],K=w.y*M.x-M.y*w.x,de+=(w.x+M.x)*K,Ce+=(w.y+M.y)*K,ne+=K*3;ne===0?je=as[0]:je=[de/ne,Ce/ne];var Ur=c.unproject(re(je));return He([Ur.lat+Fe.lat,Ur.lng+Fe.lng])}function iu(a){for(var c=0,p=0,b=0,w=0;w<a.length;w++){var M=He(a[w]);c+=M.lat,p+=M.lng,b++}return He([c/b,p/b])}var sp={__proto__:null,clipPolygon:Qc,polygonCenter:Jc,centroid:iu};function su(a,c){if(!c||!a.length)return a.slice();var p=c*c;return a=sr(a,p),a=xo(a,p),a}function nu(a,c,p){return Math.sqrt(Co(a,c,p,!0))}function Aa(a,c,p){return Co(a,c,p)}function xo(a,c){var p=a.length,b=typeof Uint8Array<"u"?Uint8Array:Array,w=new b(p);w[0]=w[p-1]=1,Mr(a,w,c,0,p-1);var M,K=[];for(M=0;M<p;M++)w[M]&&K.push(a[M]);return K}function Mr(a,c,p,b,w){var M=0,K,ne,de;for(ne=b+1;ne<=w-1;ne++)de=Co(a[ne],a[b],a[w],!0),de>M&&(K=ne,M=de);M>p&&(c[K]=1,Mr(a,c,p,b,K),Mr(a,c,p,K,w))}function sr(a,c){for(var p=[a[0]],b=1,w=0,M=a.length;b<M;b++)np(a[b],a[w])>c&&(p.push(a[b]),w=b);return w<M-1&&p.push(a[M-1]),p}var eh;function ru(a,c,p,b,w){var M=b?eh:Sn(a,p),K=Sn(c,p),ne,de,Ce;for(eh=K;;){if(!(M|K))return[a,c];if(M&K)return!1;ne=M||K,de=So(a,c,ne,p,w),Ce=Sn(de,p),ne===M?(a=de,M=Ce):(c=de,K=Ce)}}function So(a,c,p,b,w){var M=c.x-a.x,K=c.y-a.y,ne=b.min,de=b.max,Ce,je;return p&8?(Ce=a.x+M*(de.y-a.y)/K,je=de.y):p&4?(Ce=a.x+M*(ne.y-a.y)/K,je=ne.y):p&2?(Ce=de.x,je=a.y+K*(de.x-a.x)/M):p&1&&(Ce=ne.x,je=a.y+K*(ne.x-a.x)/M),new ee(Ce,je,w)}function Sn(a,c){var p=0;return a.x<c.min.x?p|=1:a.x>c.max.x&&(p|=2),a.y<c.min.y?p|=4:a.y>c.max.y&&(p|=8),p}function np(a,c){var p=c.x-a.x,b=c.y-a.y;return p*p+b*b}function Co(a,c,p,b){var w=c.x,M=c.y,K=p.x-w,ne=p.y-M,de=K*K+ne*ne,Ce;return de>0&&(Ce=((a.x-w)*K+(a.y-M)*ne)/de,Ce>1?(w=p.x,M=p.y):Ce>0&&(w+=K*Ce,M+=ne*Ce)),K=a.x-w,ne=a.y-M,b?K*K+ne*ne:new ee(w,M)}function rs(a){return!I(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function wo(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),rs(a)}function th(a,c){var p,b,w,M,K,ne,de,Ce;if(!a||a.length===0)throw new Error("latlngs not passed");rs(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var je=He([0,0]),Fe=Me(a),et=Fe.getNorthWest().distanceTo(Fe.getSouthWest())*Fe.getNorthEast().distanceTo(Fe.getNorthWest());et<1700&&(je=iu(a));var bt=a.length,Dt=[];for(p=0;p<bt;p++){var as=He(a[p]);Dt.push(c.project(He([as.lat-je.lat,as.lng-je.lng])))}for(p=0,b=0;p<bt-1;p++)b+=Dt[p].distanceTo(Dt[p+1])/2;if(b===0)Ce=Dt[0];else for(p=0,M=0;p<bt-1;p++)if(K=Dt[p],ne=Dt[p+1],w=K.distanceTo(ne),M+=w,M>b){de=(M-b)/w,Ce=[ne.x-de*(ne.x-K.x),ne.y-de*(ne.y-K.y)];break}var Ci=c.unproject(re(Ce));return He([Ci.lat+je.lat,Ci.lng+je.lng])}var ih={__proto__:null,simplify:su,pointToSegmentDistance:nu,closestPointOnSegment:Aa,clipSegment:ru,_getEdgeIntersection:So,_getBitCode:Sn,_sqClosestPointOnSegment:Co,isFlat:rs,_flat:wo,polylineCenter:th},ou={project:function(a){return new ee(a.lng,a.lat)},unproject:function(a){return new Ee(a.y,a.x)},bounds:new ue([-180,-90],[180,90])},au={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ue([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var c=Math.PI/180,p=this.R,b=a.lat*c,w=this.R_MINOR/p,M=Math.sqrt(1-w*w),K=M*Math.sin(b),ne=Math.tan(Math.PI/4-b/2)/Math.pow((1-K)/(1+K),M/2);return b=-p*Math.log(Math.max(ne,1e-10)),new ee(a.lng*c*p,b)},unproject:function(a){for(var c=180/Math.PI,p=this.R,b=this.R_MINOR/p,w=Math.sqrt(1-b*b),M=Math.exp(-a.y/p),K=Math.PI/2-2*Math.atan(M),ne=0,de=.1,Ce;ne<15&&Math.abs(de)>1e-7;ne++)Ce=w*Math.sin(K),Ce=Math.pow((1-Ce)/(1+Ce),w/2),de=Math.PI/2-2*Math.atan(M*Ce)-K,K+=de;return new Ee(K*c,a.x*c/p)}},sh={__proto__:null,LonLat:ou,Mercator:au,SphericalMercator:qe},lu=n({},Ae,{code:"EPSG:3395",projection:au,transformation:(function(){var a=.5/(Math.PI*au.R);return H(a,.5,-a,.5)})()}),nh=n({},Ae,{code:"EPSG:4326",projection:ou,transformation:H(1/180,1,-1/180,.5)}),rp=n({},me,{projection:ou,transformation:H(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,c){var p=c.lng-a.lng,b=c.lat-a.lat;return Math.sqrt(p*p+b*b)},infinite:!0});me.Earth=Ae,me.EPSG3395=lu,me.EPSG3857=X,me.EPSG900913=ie,me.EPSG4326=nh,me.Simple=rp;var Ss=se.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[u(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[u(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var c=a.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var p=this.getEvents();c.on(p,this),this.once("remove",function(){c.off(p,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});ht.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var c=u(a);return this._layers[c]?this:(this._layers[c]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var c=u(a);return this._layers[c]?(this._loaded&&a.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return u(a)in this._layers},eachLayer:function(a,c){for(var p in this._layers)a.call(c,this._layers[p]);return this},_addLayers:function(a){a=a?I(a)?a:[a]:[];for(var c=0,p=a.length;c<p;c++)this.addLayer(a[c])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[u(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var c=u(a);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,c=-1/0,p=this._getZoomSpan();for(var b in this._zoomBoundLayers){var w=this._zoomBoundLayers[b].options;a=w.minZoom===void 0?a:Math.min(a,w.minZoom),c=w.maxZoom===void 0?c:Math.max(c,w.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=a===1/0?void 0:a,p!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Cn=Ss.extend({initialize:function(a,c){x(this,c),this._layers={};var p,b;if(a)for(p=0,b=a.length;p<b;p++)this.addLayer(a[p])},addLayer:function(a){var c=this.getLayerId(a);return this._layers[c]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var c=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(a){var c=typeof a=="number"?a:this.getLayerId(a);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var c=Array.prototype.slice.call(arguments,1),p,b;for(p in this._layers)b=this._layers[p],b[a]&&b[a].apply(b,c);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,c){for(var p in this._layers)a.call(c,this._layers[p]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return u(a)}}),op=function(a,c){return new Cn(a,c)},Us=Cn.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),Cn.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),Cn.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new ze;for(var c in this._layers){var p=this._layers[c];a.extend(p.getBounds?p.getBounds():p.getLatLng())}return a}}),ap=function(a,c){return new Us(a,c)},Rr=ae.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){x(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,c){var p=this._getIconUrl(a);if(!p){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var b=this._createImg(p,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(b,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(b.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),b},_setIconStyles:function(a,c){var p=this.options,b=p[c+"Size"];typeof b=="number"&&(b=[b,b]);var w=re(b),M=re(c==="shadow"&&p.shadowAnchor||p.iconAnchor||w&&w.divideBy(2,!0));a.className="leaflet-marker-"+c+" "+(p.className||""),M&&(a.style.marginLeft=-M.x+"px",a.style.marginTop=-M.y+"px"),w&&(a.style.width=w.x+"px",a.style.height=w.y+"px")},_createImg:function(a,c){return c=c||document.createElement("img"),c.src=a,c},_getIconUrl:function(a){return Be.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function rh(a){return new Rr(a)}var Eo=Rr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof Eo.imagePath!="string"&&(Eo.imagePath=this._detectIconPath()),(this.options.imagePath||Eo.imagePath)+Rr.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var c=function(p,b,w){var M=b.exec(p);return M&&M[w]};return a=c(a,/^url\((['"])?(.+)\1\)$/,2),a&&c(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=ft("div","leaflet-default-icon-path",document.body),c=vn(a,"background-image")||vn(a,"backgroundImage");if(document.body.removeChild(a),c=this._stripUrl(c),c)return c;var p=document.querySelector('link[href$="leaflet.css"]');return p?p.href.substring(0,p.href.length-11-1):""}}),uu=Jt.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new nn(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),st(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Xt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var c=this._marker,p=c._map,b=this._marker.options.autoPanSpeed,w=this._marker.options.autoPanPadding,M=Jn(c._icon),K=p.getPixelBounds(),ne=p.getPixelOrigin(),de=Oe(K.min._subtract(ne).add(w),K.max._subtract(ne).subtract(w));if(!de.contains(M)){var Ce=re((Math.max(de.max.x,M.x)-de.max.x)/(K.max.x-de.max.x)-(Math.min(de.min.x,M.x)-de.min.x)/(K.min.x-de.min.x),(Math.max(de.max.y,M.y)-de.max.y)/(K.max.y-de.max.y)-(Math.min(de.min.y,M.y)-de.min.y)/(K.min.y-de.min.y)).multiplyBy(b);p.panBy(Ce,{animate:!1}),this._draggable._newPos._add(Ce),this._draggable._startPos._add(Ce),yt(c._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=Y(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(Q(this._panRequest),this._panRequest=Y(this._adjustPan.bind(this,a)))},_onDrag:function(a){var c=this._marker,p=c._shadow,b=Jn(c._icon),w=c._map.layerPointToLatLng(b);p&&yt(p,b),c._latlng=w,a.latlng=w,a.oldLatLng=this._oldLatLng,c.fire("move",a).fire("drag",a)},_onDragEnd:function(a){Q(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),Ao=Ss.extend({options:{icon:new Eo,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,c){x(this,c),this._latlng=He(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var c=this._latlng;return this._latlng=He(a),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),p=a.icon.createIcon(this._icon),b=!1;p!==this._icon&&(this._icon&&this._removeIcon(),b=!0,a.title&&(p.title=a.title),p.tagName==="IMG"&&(p.alt=a.alt||"")),st(p,c),a.keyboard&&(p.tabIndex="0",p.setAttribute("role","button")),this._icon=p,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&tt(p,"focus",this._panOnFocus,this);var w=a.icon.createShadow(this._shadow),M=!1;w!==this._shadow&&(this._removeShadow(),M=!0),w&&(st(w,c),w.alt=""),this._shadow=w,a.opacity<1&&this._updateOpacity(),b&&this.getPane().appendChild(this._icon),this._initInteraction(),w&&M&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&At(this._icon,"focus",this._panOnFocus,this),Et(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Et(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&yt(this._icon,a),this._shadow&&yt(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var c=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(st(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),uu)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new uu(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&Si(this._icon,a),this._shadow&&Si(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var c=this.options.icon.options,p=c.iconSize?re(c.iconSize):re(0,0),b=c.iconAnchor?re(c.iconAnchor):re(0,0);a.panInside(this._latlng,{paddingTopLeft:b,paddingBottomRight:p.subtract(b)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function oh(a,c){return new Ao(a,c)}var wn=Ss.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return x(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Da=wn.extend({options:{fill:!0,radius:10},initialize:function(a,c){x(this,c),this._latlng=He(a),this._radius=this.options.radius},setLatLng:function(a){var c=this._latlng;return this._latlng=He(a),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var c=a&&a.radius||this._radius;return wn.prototype.setStyle.call(this,a),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,c=this._radiusY||a,p=this._clickTolerance(),b=[a+p,c+p];this._pxBounds=new ue(this._point.subtract(b),this._point.add(b))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Pa(a,c){return new Da(a,c)}var cu=Da.extend({initialize:function(a,c,p){if(typeof c=="number"&&(c=n({},p,{radius:c})),x(this,c),this._latlng=He(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new ze(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:wn.prototype.setStyle,_project:function(){var a=this._latlng.lng,c=this._latlng.lat,p=this._map,b=p.options.crs;if(b.distance===Ae.distance){var w=Math.PI/180,M=this._mRadius/Ae.R/w,K=p.project([c+M,a]),ne=p.project([c-M,a]),de=K.add(ne).divideBy(2),Ce=p.unproject(de).lat,je=Math.acos((Math.cos(M*w)-Math.sin(c*w)*Math.sin(Ce*w))/(Math.cos(c*w)*Math.cos(Ce*w)))/w;(isNaN(je)||je===0)&&(je=M/Math.cos(Math.PI/180*c)),this._point=de.subtract(p.getPixelOrigin()),this._radius=isNaN(je)?0:de.x-p.project([Ce,a-je]).x,this._radiusY=de.y-K.y}else{var Fe=b.unproject(b.project(this._latlng).subtract([this._mRadius,0]));this._point=p.latLngToLayerPoint(this._latlng),this._radius=this._point.x-p.latLngToLayerPoint(Fe).x}this._updateBounds()}});function lp(a,c,p){return new cu(a,c,p)}var rn=wn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,c){x(this,c),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var c=1/0,p=null,b=Co,w,M,K=0,ne=this._parts.length;K<ne;K++)for(var de=this._parts[K],Ce=1,je=de.length;Ce<je;Ce++){w=de[Ce-1],M=de[Ce];var Fe=b(a,w,M,!0);Fe<c&&(c=Fe,p=b(a,w,M))}return p&&(p.distance=Math.sqrt(c)),p},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return th(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,c){return c=c||this._defaultShape(),a=He(a),c.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new ze,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return rs(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var c=[],p=rs(a),b=0,w=a.length;b<w;b++)p?(c[b]=He(a[b]),this._bounds.extend(c[b])):c[b]=this._convertLatLngs(a[b]);return c},_project:function(){var a=new ue;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),c=new ee(a,a);this._rawPxBounds&&(this._pxBounds=new ue([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(a,c,p){var b=a[0]instanceof Ee,w=a.length,M,K;if(b){for(K=[],M=0;M<w;M++)K[M]=this._map.latLngToLayerPoint(a[M]),p.extend(K[M]);c.push(K)}else for(M=0;M<w;M++)this._projectLatlngs(a[M],c,p)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,p,b,w,M,K,ne,de;for(p=0,w=0,M=this._rings.length;p<M;p++)for(de=this._rings[p],b=0,K=de.length;b<K-1;b++)ne=ru(de[b],de[b+1],a,b,!0),ne&&(c[w]=c[w]||[],c[w].push(ne[0]),(ne[1]!==de[b+1]||b===K-2)&&(c[w].push(ne[1]),w++))}},_simplifyPoints:function(){for(var a=this._parts,c=this.options.smoothFactor,p=0,b=a.length;p<b;p++)a[p]=su(a[p],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,c){var p,b,w,M,K,ne,de=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(p=0,M=this._parts.length;p<M;p++)for(ne=this._parts[p],b=0,K=ne.length,w=K-1;b<K;w=b++)if(!(!c&&b===0)&&nu(a,ne[w],ne[b])<=de)return!0;return!1}});function up(a,c){return new rn(a,c)}rn._flat=wo;var nr=rn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Jc(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var c=rn.prototype._convertLatLngs.call(this,a),p=c.length;return p>=2&&c[0]instanceof Ee&&c[0].equals(c[p-1])&&c.pop(),c},_setLatLngs:function(a){rn.prototype._setLatLngs.call(this,a),rs(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return rs(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,c=this.options.weight,p=new ee(c,c);if(a=new ue(a.min.subtract(p),a.max.add(p)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var b=0,w=this._rings.length,M;b<w;b++)M=Qc(this._rings[b],a,!0),M.length&&this._parts.push(M)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var c=!1,p,b,w,M,K,ne,de,Ce;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(M=0,de=this._parts.length;M<de;M++)for(p=this._parts[M],K=0,Ce=p.length,ne=Ce-1;K<Ce;ne=K++)b=p[K],w=p[ne],b.y>a.y!=w.y>a.y&&a.x<(w.x-b.x)*(a.y-b.y)/(w.y-b.y)+b.x&&(c=!c);return c||rn.prototype._containsPoint.call(this,a,!0)}});function cp(a,c){return new nr(a,c)}var Vi=Us.extend({initialize:function(a,c){x(this,c),this._layers={},a&&this.addData(a)},addData:function(a){var c=I(a)?a:a.features,p,b,w;if(c){for(p=0,b=c.length;p<b;p++)w=c[p],(w.geometries||w.geometry||w.features||w.coordinates)&&this.addData(w);return this}var M=this.options;if(M.filter&&!M.filter(a))return this;var K=Do(a,M);return K?(K.feature=ka(a),K.defaultOptions=K.options,this.resetStyle(K),M.onEachFeature&&M.onEachFeature(a,K),this.addLayer(K)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=n({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(c){this._setLayerStyle(c,a)},this)},_setLayerStyle:function(a,c){a.setStyle&&(typeof c=="function"&&(c=c(a.feature)),a.setStyle(c))}});function Do(a,c){var p=a.type==="Feature"?a.geometry:a,b=p?p.coordinates:null,w=[],M=c&&c.pointToLayer,K=c&&c.coordsToLatLng||rr,ne,de,Ce,je;if(!b&&!p)return null;switch(p.type){case"Point":return ne=K(b),Po(M,a,ne,c);case"MultiPoint":for(Ce=0,je=b.length;Ce<je;Ce++)ne=K(b[Ce]),w.push(Po(M,a,ne,c));return new Us(w);case"LineString":case"MultiLineString":return de=Bt(b,p.type==="LineString"?0:1,K),new rn(de,c);case"Polygon":case"MultiPolygon":return de=Bt(b,p.type==="Polygon"?1:2,K),new nr(de,c);case"GeometryCollection":for(Ce=0,je=p.geometries.length;Ce<je;Ce++){var Fe=Do({geometry:p.geometries[Ce],type:"Feature",properties:a.properties},c);Fe&&w.push(Fe)}return new Us(w);case"FeatureCollection":for(Ce=0,je=p.features.length;Ce<je;Ce++){var et=Do(p.features[Ce],c);et&&w.push(et)}return new Us(w);default:throw new Error("Invalid GeoJSON object.")}}function Po(a,c,p,b){return a?a(c,p):new Ao(p,b&&b.markersInheritOptions&&b)}function rr(a){return new Ee(a[1],a[0],a[2])}function Bt(a,c,p){for(var b=[],w=0,M=a.length,K;w<M;w++)K=c?Bt(a[w],c-1,p):(p||rr)(a[w]),b.push(K);return b}function En(a,c){return a=He(a),a.alt!==void 0?[_(a.lng,c),_(a.lat,c),_(a.alt,c)]:[_(a.lng,c),_(a.lat,c)]}function Nr(a,c,p,b){for(var w=[],M=0,K=a.length;M<K;M++)w.push(c?Nr(a[M],rs(a[M])?0:c-1,p,b):En(a[M],b));return!c&&p&&w.length>0&&w.push(w[0].slice()),w}function Br(a,c){return a.feature?n({},a.feature,{geometry:c}):ka(c)}function ka(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var hu={toGeoJSON:function(a){return Br(this,{type:"Point",coordinates:En(this.getLatLng(),a)})}};Ao.include(hu),cu.include(hu),Da.include(hu),rn.include({toGeoJSON:function(a){var c=!rs(this._latlngs),p=Nr(this._latlngs,c?1:0,!1,a);return Br(this,{type:(c?"Multi":"")+"LineString",coordinates:p})}}),nr.include({toGeoJSON:function(a){var c=!rs(this._latlngs),p=c&&!rs(this._latlngs[0]),b=Nr(this._latlngs,p?2:c?1:0,!0,a);return c||(b=[b]),Br(this,{type:(p?"Multi":"")+"Polygon",coordinates:b})}}),Cn.include({toMultiPoint:function(a){var c=[];return this.eachLayer(function(p){c.push(p.toGeoJSON(a).geometry.coordinates)}),Br(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(a){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(a);var p=c==="GeometryCollection",b=[];return this.eachLayer(function(w){if(w.toGeoJSON){var M=w.toGeoJSON(a);if(p)b.push(M.geometry);else{var K=ka(M);K.type==="FeatureCollection"?b.push.apply(b,K.features):b.push(K)}}}),p?Br(this,{geometries:b,type:"GeometryCollection"}):{type:"FeatureCollection",features:b}}});function ah(a,c){return new Vi(a,c)}var lh=ah,ko=Ss.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,c,p){this._url=a,this._bounds=Me(c),x(this,p)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(st(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Et(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&Rs(this._image),this},bringToBack:function(){return this._map&&Ns(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=Me(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",c=this._image=a?this._url:ft("img");if(st(c,"leaflet-image-layer"),this._zoomAnimated&&st(c,"leaflet-zoom-animated"),this.options.className&&st(c,this.options.className),c.onselectstart=m,c.onmousemove=m,c.onload=o(this.fire,this,"load"),c.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(a){var c=this._map.getZoomScale(a.zoom),p=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;en(this._image,p,c)},_reset:function(){var a=this._image,c=new ue(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),p=c.getSize();yt(a,c.min),a.style.width=p.x+"px",a.style.height=p.y+"px"},_updateOpacity:function(){Si(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),uh=function(a,c,p){return new ko(a,c,p)},du=ko.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",c=this._image=a?this._url:ft("video");if(st(c,"leaflet-image-layer"),this._zoomAnimated&&st(c,"leaflet-zoom-animated"),this.options.className&&st(c,this.options.className),c.onselectstart=m,c.onmousemove=m,c.onloadeddata=o(this.fire,this,"load"),a){for(var p=c.getElementsByTagName("source"),b=[],w=0;w<p.length;w++)b.push(p[w].src);this._url=p.length>0?b:[c.src];return}I(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var M=0;M<this._url.length;M++){var K=ft("source");K.src=this._url[M],c.appendChild(K)}}});function ch(a,c,p){return new du(a,c,p)}var Ia=ko.extend({_initImage:function(){var a=this._image=this._url;st(a,"leaflet-image-layer"),this._zoomAnimated&&st(a,"leaflet-zoom-animated"),this.options.className&&st(a,this.options.className),a.onselectstart=m,a.onmousemove=m}});function hh(a,c,p){return new Ia(a,c,p)}var os=Ss.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,c){a&&(a instanceof Ee||I(a))?(this._latlng=He(a),x(this,c)):(x(this,a),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&Si(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&Si(this._container,1),this.bringToFront(),this.options.interactive&&(st(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(Si(this._container,0),this._removeTimeout=setTimeout(o(Et,void 0,this._container),200)):Et(this._container),this.options.interactive&&(Xt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=He(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Rs(this._container),this},bringToBack:function(){return this._map&&Ns(this._container),this},_prepareOpen:function(a){var c=this._source;if(!c._map)return!1;if(c instanceof Us){c=null;var p=this._source._layers;for(var b in p)if(p[b]._map){c=p[b];break}if(!c)return!1;this._source=c}if(!a)if(c.getCenter)a=c.getCenter();else if(c.getLatLng)a=c.getLatLng();else if(c.getBounds)a=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")a.innerHTML=c;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),c=re(this.options.offset),p=this._getAnchor();this._zoomAnimated?yt(this._container,a.add(p)):c=c.add(a).add(p);var b=this._containerBottom=-c.y,w=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=b+"px",this._container.style.left=w+"px"}},_getAnchor:function(){return[0,0]}});ht.include({_initOverlay:function(a,c,p,b){var w=c;return w instanceof a||(w=new a(b).setContent(c)),p&&w.setLatLng(p),w}}),Ss.include({_initOverlay:function(a,c,p,b){var w=p;return w instanceof a?(x(w,b),w._source=this):(w=c&&!b?c:new a(b,this),w.setContent(p)),w}});var La=os.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,os.prototype.openOn.call(this,a)},onAdd:function(a){os.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof wn||this._source.on("preclick",er))},onRemove:function(a){os.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof wn||this._source.off("preclick",er))},getEvents:function(){var a=os.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",c=this._container=ft("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),p=this._wrapper=ft("div",a+"-content-wrapper",c);if(this._contentNode=ft("div",a+"-content",p),Or(c),Ql(this._contentNode),tt(c,"contextmenu",er),this._tipContainer=ft("div",a+"-tip-container",c),this._tip=ft("div",a+"-tip",this._tipContainer),this.options.closeButton){var b=this._closeButton=ft("a",a+"-close-button",c);b.setAttribute("role","button"),b.setAttribute("aria-label","Close popup"),b.href="#close",b.innerHTML='<span aria-hidden="true">&#215;</span>',tt(b,"click",function(w){oi(w),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,c=a.style;c.width="",c.whiteSpace="nowrap";var p=a.offsetWidth;p=Math.min(p,this.options.maxWidth),p=Math.max(p,this.options.minWidth),c.width=p+1+"px",c.whiteSpace="",c.height="";var b=a.offsetHeight,w=this.options.maxHeight,M="leaflet-popup-scrolled";w&&b>w?(c.height=w+"px",st(a,M)):Xt(a,M),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var c=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),p=this._getAnchor();yt(this._container,c.add(p))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,c=parseInt(vn(this._container,"marginBottom"),10)||0,p=this._container.offsetHeight+c,b=this._containerWidth,w=new ee(this._containerLeft,-p-this._containerBottom);w._add(Jn(this._container));var M=a.layerPointToContainerPoint(w),K=re(this.options.autoPanPadding),ne=re(this.options.autoPanPaddingTopLeft||K),de=re(this.options.autoPanPaddingBottomRight||K),Ce=a.getSize(),je=0,Fe=0;M.x+b+de.x>Ce.x&&(je=M.x+b-Ce.x+de.x),M.x-je-ne.x<0&&(je=M.x-ne.x),M.y+p+de.y>Ce.y&&(Fe=M.y+p-Ce.y+de.y),M.y-Fe-ne.y<0&&(Fe=M.y-ne.y),(je||Fe)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([je,Fe]))}},_getAnchor:function(){return re(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Io=function(a,c){return new La(a,c)};ht.mergeOptions({closePopupOnClick:!0}),ht.include({openPopup:function(a,c,p){return this._initOverlay(La,a,c,p).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),Ss.include({bindPopup:function(a,c){return this._popup=this._initOverlay(La,this._popup,a,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof Us||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){tr(a);var c=a.layer||a.target;if(this._popup._source===c&&!(c instanceof wn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=c,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var Oa=os.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){os.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){os.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=os.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",c=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ft("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+u(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var c,p,b=this._map,w=this._container,M=b.latLngToContainerPoint(b.getCenter()),K=b.layerPointToContainerPoint(a),ne=this.options.direction,de=w.offsetWidth,Ce=w.offsetHeight,je=re(this.options.offset),Fe=this._getAnchor();ne==="top"?(c=de/2,p=Ce):ne==="bottom"?(c=de/2,p=0):ne==="center"?(c=de/2,p=Ce/2):ne==="right"?(c=0,p=Ce/2):ne==="left"?(c=de,p=Ce/2):K.x<M.x?(ne="right",c=0,p=Ce/2):(ne="left",c=de+(je.x+Fe.x)*2,p=Ce/2),a=a.subtract(re(c,p,!0)).add(je).add(Fe),Xt(w,"leaflet-tooltip-right"),Xt(w,"leaflet-tooltip-left"),Xt(w,"leaflet-tooltip-top"),Xt(w,"leaflet-tooltip-bottom"),st(w,"leaflet-tooltip-"+ne),yt(w,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&Si(this._container,a)},_animateZoom:function(a){var c=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(c)},_getAnchor:function(){return re(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),dh=function(a,c){return new Oa(a,c)};ht.include({openTooltip:function(a,c,p){return this._initOverlay(Oa,a,c,p).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),Ss.include({bindTooltip:function(a,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Oa,this._tooltip,a,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var c=a?"off":"on",p={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?p.add=this._openTooltip:(p.mouseover=this._openTooltip,p.mouseout=this.closeTooltip,p.click=this._openTooltip,this._map?this._addFocusListeners():p.add=this._addFocusListeners),this._tooltip.options.sticky&&(p.mousemove=this._moveTooltip),this[c](p),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof Us||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var c=typeof a.getElement=="function"&&a.getElement();c&&(tt(c,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),tt(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var c=typeof a.getElement=="function"&&a.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(a)});return}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var c=a.latlng,p,b;this._tooltip.options.sticky&&a.originalEvent&&(p=this._map.mouseEventToContainerPoint(a.originalEvent),b=this._map.containerPointToLayerPoint(p),c=this._map.layerPointToLatLng(b)),this._tooltip.setLatLng(c)}});var fu=Rr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var c=a&&a.tagName==="DIV"?a:document.createElement("div"),p=this.options;if(p.html instanceof Element?(bn(c),c.appendChild(p.html)):c.innerHTML=p.html!==!1?p.html:"",p.bgPos){var b=re(p.bgPos);c.style.backgroundPosition=-b.x+"px "+-b.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function hp(a){return new fu(a)}Rr.Default=Eo;var Lo=Ss.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Be.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){x(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),Et(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Rs(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ns(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=h(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof ee?a:new ee(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var c=this.getPane().children,p=-a(-1/0,1/0),b=0,w=c.length,M;b<w;b++)M=c[b].style.zIndex,c[b]!==this._container&&M&&(p=a(p,+M));isFinite(p)&&(this.options.zIndex=p+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Be.ielt9){Si(this._container,this.options.opacity);var a=+new Date,c=!1,p=!1;for(var b in this._tiles){var w=this._tiles[b];if(!(!w.current||!w.loaded)){var M=Math.min(1,(a-w.loaded)/200);Si(w.el,M),M<1?c=!0:(w.active?p=!0:this._onOpaqueTile(w),w.active=!0)}}p&&!this._noPrune&&this._pruneTiles(),c&&(Q(this._fadeFrame),this._fadeFrame=Y(this._updateOpacity,this))}},_onOpaqueTile:m,_initContainer:function(){this._container||(this._container=ft("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,c=this.options.maxZoom;if(a!==void 0){for(var p in this._levels)p=Number(p),this._levels[p].el.children.length||p===a?(this._levels[p].el.style.zIndex=c-Math.abs(a-p),this._onUpdateLevel(p)):(Et(this._levels[p].el),this._removeTilesAtZoom(p),this._onRemoveLevel(p),delete this._levels[p]);var b=this._levels[a],w=this._map;return b||(b=this._levels[a]={},b.el=ft("div","leaflet-tile-container leaflet-zoom-animated",this._container),b.el.style.zIndex=c,b.origin=w.project(w.unproject(w.getPixelOrigin()),a).round(),b.zoom=a,this._setZoomTransform(b,w.getCenter(),w.getZoom()),m(b.el.offsetWidth),this._onCreateLevel(b)),this._level=b,b}},_onUpdateLevel:m,_onRemoveLevel:m,_onCreateLevel:m,_pruneTiles:function(){if(this._map){var a,c,p=this._map.getZoom();if(p>this.options.maxZoom||p<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)c=this._tiles[a],c.retain=c.current;for(a in this._tiles)if(c=this._tiles[a],c.current&&!c.active){var b=c.coords;this._retainParent(b.x,b.y,b.z,b.z-5)||this._retainChildren(b.x,b.y,b.z,b.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var c in this._tiles)this._tiles[c].coords.z===a&&this._removeTile(c)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)Et(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,c,p,b){var w=Math.floor(a/2),M=Math.floor(c/2),K=p-1,ne=new ee(+w,+M);ne.z=+K;var de=this._tileCoordsToKey(ne),Ce=this._tiles[de];return Ce&&Ce.active?(Ce.retain=!0,!0):(Ce&&Ce.loaded&&(Ce.retain=!0),K>b?this._retainParent(w,M,K,b):!1)},_retainChildren:function(a,c,p,b){for(var w=2*a;w<2*a+2;w++)for(var M=2*c;M<2*c+2;M++){var K=new ee(w,M);K.z=p+1;var ne=this._tileCoordsToKey(K),de=this._tiles[ne];if(de&&de.active){de.retain=!0;continue}else de&&de.loaded&&(de.retain=!0);p+1<b&&this._retainChildren(w,M,p+1,b)}},_resetView:function(a){var c=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var c=this.options;return c.minNativeZoom!==void 0&&a<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<a?c.maxNativeZoom:a},_setView:function(a,c,p,b){var w=Math.round(c);this.options.maxZoom!==void 0&&w>this.options.maxZoom||this.options.minZoom!==void 0&&w<this.options.minZoom?w=void 0:w=this._clampZoom(w);var M=this.options.updateWhenZooming&&w!==this._tileZoom;(!b||M)&&(this._tileZoom=w,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),w!==void 0&&this._update(a),p||this._pruneTiles(),this._noPrune=!!p),this._setZoomTransforms(a,c)},_setZoomTransforms:function(a,c){for(var p in this._levels)this._setZoomTransform(this._levels[p],a,c)},_setZoomTransform:function(a,c,p){var b=this._map.getZoomScale(p,a.zoom),w=a.origin.multiplyBy(b).subtract(this._map._getNewPixelOrigin(c,p)).round();Be.any3d?en(a.el,w,b):yt(a.el,w)},_resetGrid:function(){var a=this._map,c=a.options.crs,p=this._tileSize=this.getTileSize(),b=this._tileZoom,w=this._map.getPixelWorldBounds(this._tileZoom);w&&(this._globalTileRange=this._pxBoundsToTileRange(w)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,c.wrapLng[0]],b).x/p.x),Math.ceil(a.project([0,c.wrapLng[1]],b).x/p.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([c.wrapLat[0],0],b).y/p.x),Math.ceil(a.project([c.wrapLat[1],0],b).y/p.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var c=this._map,p=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),b=c.getZoomScale(p,this._tileZoom),w=c.project(a,this._tileZoom).floor(),M=c.getSize().divideBy(b*2);return new ue(w.subtract(M),w.add(M))},_update:function(a){var c=this._map;if(c){var p=this._clampZoom(c.getZoom());if(a===void 0&&(a=c.getCenter()),this._tileZoom!==void 0){var b=this._getTiledPixelBounds(a),w=this._pxBoundsToTileRange(b),M=w.getCenter(),K=[],ne=this.options.keepBuffer,de=new ue(w.getBottomLeft().subtract([ne,-ne]),w.getTopRight().add([ne,-ne]));if(!(isFinite(w.min.x)&&isFinite(w.min.y)&&isFinite(w.max.x)&&isFinite(w.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Ce in this._tiles){var je=this._tiles[Ce].coords;(je.z!==this._tileZoom||!de.contains(new ee(je.x,je.y)))&&(this._tiles[Ce].current=!1)}if(Math.abs(p-this._tileZoom)>1){this._setView(a,p);return}for(var Fe=w.min.y;Fe<=w.max.y;Fe++)for(var et=w.min.x;et<=w.max.x;et++){var bt=new ee(et,Fe);if(bt.z=this._tileZoom,!!this._isValidTile(bt)){var Dt=this._tiles[this._tileCoordsToKey(bt)];Dt?Dt.current=!0:K.push(bt)}}if(K.sort(function(Ci,Ur){return Ci.distanceTo(M)-Ur.distanceTo(M)}),K.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var as=document.createDocumentFragment();for(et=0;et<K.length;et++)this._addTile(K[et],as);this._level.el.appendChild(as)}}}},_isValidTile:function(a){var c=this._map.options.crs;if(!c.infinite){var p=this._globalTileRange;if(!c.wrapLng&&(a.x<p.min.x||a.x>p.max.x)||!c.wrapLat&&(a.y<p.min.y||a.y>p.max.y))return!1}if(!this.options.bounds)return!0;var b=this._tileCoordsToBounds(a);return Me(this.options.bounds).overlaps(b)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var c=this._map,p=this.getTileSize(),b=a.scaleBy(p),w=b.add(p),M=c.unproject(b,a.z),K=c.unproject(w,a.z);return[M,K]},_tileCoordsToBounds:function(a){var c=this._tileCoordsToNwSe(a),p=new ze(c[0],c[1]);return this.options.noWrap||(p=this._map.wrapLatLngBounds(p)),p},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var c=a.split(":"),p=new ee(+c[0],+c[1]);return p.z=+c[2],p},_removeTile:function(a){var c=this._tiles[a];c&&(Et(c.el),delete this._tiles[a],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){st(a,"leaflet-tile");var c=this.getTileSize();a.style.width=c.x+"px",a.style.height=c.y+"px",a.onselectstart=m,a.onmousemove=m,Be.ielt9&&this.options.opacity<1&&Si(a,this.options.opacity)},_addTile:function(a,c){var p=this._getTilePos(a),b=this._tileCoordsToKey(a),w=this.createTile(this._wrapCoords(a),o(this._tileReady,this,a));this._initTile(w),this.createTile.length<2&&Y(o(this._tileReady,this,a,null,w)),yt(w,p),this._tiles[b]={el:w,coords:a,current:!0},c.appendChild(w),this.fire("tileloadstart",{tile:w,coords:a})},_tileReady:function(a,c,p){c&&this.fire("tileerror",{error:c,tile:p,coords:a});var b=this._tileCoordsToKey(a);p=this._tiles[b],p&&(p.loaded=+new Date,this._map._fadeAnimated?(Si(p.el,0),Q(this._fadeFrame),this._fadeFrame=Y(this._updateOpacity,this)):(p.active=!0,this._pruneTiles()),c||(st(p.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:p.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Be.ielt9||!this._map._fadeAnimated?Y(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var c=new ee(this._wrapX?d(a.x,this._wrapX):a.x,this._wrapY?d(a.y,this._wrapY):a.y);return c.z=a.z,c},_pxBoundsToTileRange:function(a){var c=this.getTileSize();return new ue(a.min.unscaleBy(c).floor(),a.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function fh(a){return new Lo(a)}var Fr=Lo.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,c){this._url=a,c=x(this,c),c.detectRetina&&Be.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,c){return this._url===a&&c===void 0&&(c=!0),this._url=a,c||this.redraw(),this},createTile:function(a,c){var p=document.createElement("img");return tt(p,"load",o(this._tileOnLoad,this,c,p)),tt(p,"error",o(this._tileOnError,this,c,p)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(p.referrerPolicy=this.options.referrerPolicy),p.alt="",p.src=this.getTileUrl(a),p},getTileUrl:function(a){var c={r:Be.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var p=this._globalTileRange.max.y-a.y;this.options.tms&&(c.y=p),c["-y"]=p}return k(this._url,n(c,this.options))},_tileOnLoad:function(a,c){Be.ielt9?setTimeout(o(a,this,null,c),0):a(null,c)},_tileOnError:function(a,c,p){var b=this.options.errorTileUrl;b&&c.getAttribute("src")!==b&&(c.src=b),a(p,c)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,c=this.options.maxZoom,p=this.options.zoomReverse,b=this.options.zoomOffset;return p&&(a=c-a),a+b},_getSubdomain:function(a){var c=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var a,c;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(c=this._tiles[a].el,c.onload=m,c.onerror=m,!c.complete)){c.src=z;var p=this._tiles[a].coords;Et(c),delete this._tiles[a],this.fire("tileabort",{tile:c,coords:p})}},_removeTile:function(a){var c=this._tiles[a];if(c)return c.el.setAttribute("src",z),Lo.prototype._removeTile.call(this,a)},_tileReady:function(a,c,p){if(!(!this._map||p&&p.getAttribute("src")===z))return Lo.prototype._tileReady.call(this,a,c,p)}});function ph(a,c){return new Fr(a,c)}var Ma=Fr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,c){this._url=a;var p=n({},this.defaultWmsParams);for(var b in c)b in this.options||(p[b]=c[b]);c=x(this,c);var w=c.detectRetina&&Be.retina?2:1,M=this.getTileSize();p.width=M.x*w,p.height=M.y*w,this.wmsParams=p},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,Fr.prototype.onAdd.call(this,a)},getTileUrl:function(a){var c=this._tileCoordsToNwSe(a),p=this._crs,b=Oe(p.project(c[0]),p.project(c[1])),w=b.min,M=b.max,K=(this._wmsVersion>=1.3&&this._crs===nh?[w.y,w.x,M.y,M.x]:[w.x,w.y,M.x,M.y]).join(","),ne=Fr.prototype.getTileUrl.call(this,a);return ne+E(this.wmsParams,ne,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+K},setParams:function(a,c){return n(this.wmsParams,a),c||this.redraw(),this}});function dp(a,c){return new Ma(a,c)}Fr.WMS=Ma,ph.wms=dp;var on=Ss.extend({options:{padding:.1},initialize:function(a){x(this,a),u(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),st(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,c){var p=this._map.getZoomScale(c,this._zoom),b=this._map.getSize().multiplyBy(.5+this.options.padding),w=this._map.project(this._center,c),M=b.multiplyBy(-p).add(w).subtract(this._map._getNewPixelOrigin(a,c));Be.any3d?en(this._container,M,p):yt(this._container,M)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,c=this._map.getSize(),p=this._map.containerPointToLayerPoint(c.multiplyBy(-a)).round();this._bounds=new ue(p,p.add(c.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),mh=on.extend({options:{tolerance:0},getEvents:function(){var a=on.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){on.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");tt(a,"mousemove",this._onMouseMove,this),tt(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),tt(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){Q(this._redrawRequest),delete this._ctx,Et(this._container),At(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var c in this._layers)a=this._layers[c],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){on.prototype._update.call(this);var a=this._bounds,c=this._container,p=a.getSize(),b=Be.retina?2:1;yt(c,a.min),c.width=b*p.x,c.height=b*p.y,c.style.width=p.x+"px",c.style.height=p.y+"px",Be.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){on.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[u(a)]=a;var c=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var c=a._order,p=c.next,b=c.prev;p?p.prev=b:this._drawLast=b,b?b.next=p:this._drawFirst=p,delete a._order,delete this._layers[u(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var c=a.options.dashArray.split(/[, ]+/),p=[],b,w;for(w=0;w<c.length;w++){if(b=Number(c[w]),isNaN(b))return;p.push(b)}a.options._dashArray=p}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||Y(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var c=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ue,this._redrawBounds.extend(a._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(a._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var c=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,c=this._redrawBounds;if(this._ctx.save(),c){var p=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,p.x,p.y),this._ctx.clip()}this._drawing=!0;for(var b=this._drawFirst;b;b=b.next)a=b.layer,(!c||a._pxBounds&&a._pxBounds.intersects(c))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,c){if(this._drawing){var p,b,w,M,K=a._parts,ne=K.length,de=this._ctx;if(ne){for(de.beginPath(),p=0;p<ne;p++){for(b=0,w=K[p].length;b<w;b++)M=K[p][b],de[b?"lineTo":"moveTo"](M.x,M.y);c&&de.closePath()}this._fillStroke(de,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var c=a._point,p=this._ctx,b=Math.max(Math.round(a._radius),1),w=(Math.max(Math.round(a._radiusY),1)||b)/b;w!==1&&(p.save(),p.scale(1,w)),p.beginPath(),p.arc(c.x,c.y/w,b,0,Math.PI*2,!1),w!==1&&p.restore(),this._fillStroke(p,a)}},_fillStroke:function(a,c){var p=c.options;p.fill&&(a.globalAlpha=p.fillOpacity,a.fillStyle=p.fillColor||p.color,a.fill(p.fillRule||"evenodd")),p.stroke&&p.weight!==0&&(a.setLineDash&&a.setLineDash(c.options&&c.options._dashArray||[]),a.globalAlpha=p.opacity,a.lineWidth=p.weight,a.strokeStyle=p.color,a.lineCap=p.lineCap,a.lineJoin=p.lineJoin,a.stroke())},_onClick:function(a){for(var c=this._map.mouseEventToLayerPoint(a),p,b,w=this._drawFirst;w;w=w.next)p=w.layer,p.options.interactive&&p._containsPoint(c)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(p))&&(b=p);this._fireEvent(b?[b]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,c)}},_handleMouseOut:function(a){var c=this._hoveredLayer;c&&(Xt(this._container,"leaflet-interactive"),this._fireEvent([c],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,c){if(!this._mouseHoverThrottled){for(var p,b,w=this._drawFirst;w;w=w.next)p=w.layer,p.options.interactive&&p._containsPoint(c)&&(b=p);b!==this._hoveredLayer&&(this._handleMouseOut(a),b&&(st(this._container,"leaflet-interactive"),this._fireEvent([b],a,"mouseover"),this._hoveredLayer=b)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,c,p){this._map._fireDOMEvent(c,p||c.type,a)},_bringToFront:function(a){var c=a._order;if(c){var p=c.next,b=c.prev;if(p)p.prev=b;else return;b?b.next=p:p&&(this._drawFirst=p),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(a)}},_bringToBack:function(a){var c=a._order;if(c){var p=c.next,b=c.prev;if(b)b.next=p;else return;p?p.prev=b:b&&(this._drawLast=b),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(a)}}});function gh(a){return Be.canvas?new mh(a):null}var Oo=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),fp={_initContainer:function(){this._container=ft("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(on.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var c=a._container=Oo("shape");st(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",a._path=Oo("path"),c.appendChild(a._path),this._updateStyle(a),this._layers[u(a)]=a},_addPath:function(a){var c=a._container;this._container.appendChild(c),a.options.interactive&&a.addInteractiveTarget(c)},_removePath:function(a){var c=a._container;Et(c),a.removeInteractiveTarget(c),delete this._layers[u(a)]},_updateStyle:function(a){var c=a._stroke,p=a._fill,b=a.options,w=a._container;w.stroked=!!b.stroke,w.filled=!!b.fill,b.stroke?(c||(c=a._stroke=Oo("stroke")),w.appendChild(c),c.weight=b.weight+"px",c.color=b.color,c.opacity=b.opacity,b.dashArray?c.dashStyle=I(b.dashArray)?b.dashArray.join(" "):b.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=b.lineCap.replace("butt","flat"),c.joinstyle=b.lineJoin):c&&(w.removeChild(c),a._stroke=null),b.fill?(p||(p=a._fill=Oo("fill")),w.appendChild(p),p.color=b.fillColor||b.color,p.opacity=b.fillOpacity):p&&(w.removeChild(p),a._fill=null)},_updateCircle:function(a){var c=a._point.round(),p=Math.round(a._radius),b=Math.round(a._radiusY||p);this._setPath(a,a._empty()?"M0 0":"AL "+c.x+","+c.y+" "+p+","+b+" 0,"+65535*360)},_setPath:function(a,c){a._path.v=c},_bringToFront:function(a){Rs(a._container)},_bringToBack:function(a){Ns(a._container)}},Ra=Be.vml?Oo:ve,Mo=on.extend({_initContainer:function(){this._container=Ra("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ra("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Et(this._container),At(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){on.prototype._update.call(this);var a=this._bounds,c=a.getSize(),p=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,p.setAttribute("width",c.x),p.setAttribute("height",c.y)),yt(p,a.min),p.setAttribute("viewBox",[a.min.x,a.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(a){var c=a._path=Ra("path");a.options.className&&st(c,a.options.className),a.options.interactive&&st(c,"leaflet-interactive"),this._updateStyle(a),this._layers[u(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){Et(a._path),a.removeInteractiveTarget(a._path),delete this._layers[u(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var c=a._path,p=a.options;c&&(p.stroke?(c.setAttribute("stroke",p.color),c.setAttribute("stroke-opacity",p.opacity),c.setAttribute("stroke-width",p.weight),c.setAttribute("stroke-linecap",p.lineCap),c.setAttribute("stroke-linejoin",p.lineJoin),p.dashArray?c.setAttribute("stroke-dasharray",p.dashArray):c.removeAttribute("stroke-dasharray"),p.dashOffset?c.setAttribute("stroke-dashoffset",p.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),p.fill?(c.setAttribute("fill",p.fillColor||p.color),c.setAttribute("fill-opacity",p.fillOpacity),c.setAttribute("fill-rule",p.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(a,c){this._setPath(a,ye(a._parts,c))},_updateCircle:function(a){var c=a._point,p=Math.max(Math.round(a._radius),1),b=Math.max(Math.round(a._radiusY),1)||p,w="a"+p+","+b+" 0 1,0 ",M=a._empty()?"M0 0":"M"+(c.x-p)+","+c.y+w+p*2+",0 "+w+-p*2+",0 ";this._setPath(a,M)},_setPath:function(a,c){a._path.setAttribute("d",c)},_bringToFront:function(a){Rs(a._path)},_bringToBack:function(a){Ns(a._path)}});Be.vml&&Mo.include(fp);function _h(a){return Be.svg||Be.vml?new Mo(a):null}ht.include({getRenderer:function(a){var c=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var c=this._paneRenderers[a];return c===void 0&&(c=this._createRenderer({pane:a}),this._paneRenderers[a]=c),c},_createRenderer:function(a){return this.options.preferCanvas&&gh(a)||_h(a)}});var yh=nr.extend({initialize:function(a,c){nr.prototype.initialize.call(this,this._boundsToLatLngs(a),c)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=Me(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function pp(a,c){return new yh(a,c)}Mo.create=Ra,Mo.pointsToPath=ye,Vi.geometryToLayer=Do,Vi.coordsToLatLng=rr,Vi.coordsToLatLngs=Bt,Vi.latLngToCoords=En,Vi.latLngsToCoords=Nr,Vi.getFeature=Br,Vi.asFeature=ka,ht.mergeOptions({boxZoom:!0});var an=Jt.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){tt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){At(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Et(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Tn(),yo(),this._startPoint=this._map.mouseEventToContainerPoint(a),tt(document,{contextmenu:tr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=ft("div","leaflet-zoom-box",this._container),st(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var c=new ue(this._point,this._startPoint),p=c.getSize();yt(this._box,c.min),this._box.style.width=p.x+"px",this._box.style.height=p.y+"px"},_finish:function(){this._moved&&(Et(this._box),Xt(this._container,"leaflet-crosshair")),tn(),Ta(),At(document,{contextmenu:tr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var c=new ze(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ht.addInitHook("addHandler","boxZoom",an),ht.mergeOptions({doubleClickZoom:!0});var vh=Jt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var c=this._map,p=c.getZoom(),b=c.options.zoomDelta,w=a.originalEvent.shiftKey?p-b:p+b;c.options.doubleClickZoom==="center"?c.setZoom(w):c.setZoomAround(a.containerPoint,w)}});ht.addInitHook("addHandler","doubleClickZoom",vh),ht.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var bh=Jt.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new nn(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}st(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Xt(this._map._container,"leaflet-grab"),Xt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=Me(this._map.options.maxBounds);this._offsetLimit=Oe(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var c=this._lastTime=+new Date,p=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(p),this._times.push(c),this._prunePositions(c)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,c){return a-(a-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;a.x<c.min.x&&(a.x=this._viscousLimit(a.x,c.min.x)),a.y<c.min.y&&(a.y=this._viscousLimit(a.y,c.min.y)),a.x>c.max.x&&(a.x=this._viscousLimit(a.x,c.max.x)),a.y>c.max.y&&(a.y=this._viscousLimit(a.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,c=Math.round(a/2),p=this._initialWorldOffset,b=this._draggable._newPos.x,w=(b-c+p)%a+c-p,M=(b+c+p)%a-c-p,K=Math.abs(w+p)<Math.abs(M+p)?w:M;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=K},_onDragEnd:function(a){var c=this._map,p=c.options,b=!p.inertia||a.noInertia||this._times.length<2;if(c.fire("dragend",a),b)c.fire("moveend");else{this._prunePositions(+new Date);var w=this._lastPos.subtract(this._positions[0]),M=(this._lastTime-this._times[0])/1e3,K=p.easeLinearity,ne=w.multiplyBy(K/M),de=ne.distanceTo([0,0]),Ce=Math.min(p.inertiaMaxSpeed,de),je=ne.multiplyBy(Ce/de),Fe=Ce/(p.inertiaDeceleration*K),et=je.multiplyBy(-Fe/2).round();!et.x&&!et.y?c.fire("moveend"):(et=c._limitOffset(et,c.options.maxBounds),Y(function(){c.panBy(et,{duration:Fe,easeLinearity:K,noMoveStart:!0,animate:!0})}))}}});ht.addInitHook("addHandler","dragging",bh),ht.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Th=Jt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),tt(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),At(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,c=document.documentElement,p=a.scrollTop||c.scrollTop,b=a.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(b,p)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var c=this._panKeys={},p=this.keyCodes,b,w;for(b=0,w=p.left.length;b<w;b++)c[p.left[b]]=[-1*a,0];for(b=0,w=p.right.length;b<w;b++)c[p.right[b]]=[a,0];for(b=0,w=p.down.length;b<w;b++)c[p.down[b]]=[0,a];for(b=0,w=p.up.length;b<w;b++)c[p.up[b]]=[0,-1*a]},_setZoomDelta:function(a){var c=this._zoomKeys={},p=this.keyCodes,b,w;for(b=0,w=p.zoomIn.length;b<w;b++)c[p.zoomIn[b]]=a;for(b=0,w=p.zoomOut.length;b<w;b++)c[p.zoomOut[b]]=-a},_addHooks:function(){tt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){At(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var c=a.keyCode,p=this._map,b;if(c in this._panKeys){if(!p._panAnim||!p._panAnim._inProgress)if(b=this._panKeys[c],a.shiftKey&&(b=re(b).multiplyBy(3)),p.options.maxBounds&&(b=p._limitOffset(re(b),p.options.maxBounds)),p.options.worldCopyJump){var w=p.wrapLatLng(p.unproject(p.project(p.getCenter()).add(b)));p.panTo(w)}else p.panBy(b)}else if(c in this._zoomKeys)p.setZoom(p.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&p._popup&&p._popup.options.closeOnEscapeKey)p.closePopup();else return;tr(a)}}});ht.addInitHook("addHandler","keyboard",Th),ht.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var mp=Jt.extend({addHooks:function(){tt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){At(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var c=Xc(a),p=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var b=Math.max(p-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),b),tr(a)},_performZoom:function(){var a=this._map,c=a.getZoom(),p=this._map.options.zoomSnap||0;a._stop();var b=this._delta/(this._map.options.wheelPxPerZoomLevel*4),w=4*Math.log(2/(1+Math.exp(-Math.abs(b))))/Math.LN2,M=p?Math.ceil(w/p)*p:w,K=a._limitZoom(c+(this._delta>0?M:-M))-c;this._delta=0,this._startTime=null,K&&(a.options.scrollWheelZoom==="center"?a.setZoom(c+K):a.setZoomAround(this._lastMousePos,c+K))}});ht.addInitHook("addHandler","scrollWheelZoom",mp);var xh=600;ht.mergeOptions({tapHold:Be.touchNative&&Be.safari&&Be.mobile,tapTolerance:15});var Na=Jt.extend({addHooks:function(){tt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){At(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var c=a.touches[0];this._startPos=this._newPos=new ee(c.clientX,c.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(tt(document,"touchend",oi),tt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),xh),tt(document,"touchend touchcancel contextmenu",this._cancel,this),tt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){At(document,"touchend",oi),At(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),At(document,"touchend touchcancel contextmenu",this._cancel,this),At(document,"touchmove",this._onMove,this)},_onMove:function(a){var c=a.touches[0];this._newPos=new ee(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,c){var p=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});p._simulated=!0,c.target.dispatchEvent(p)}});ht.addInitHook("addHandler","tapHold",Na),ht.mergeOptions({touchZoom:Be.touch,bounceAtZoomLimits:!0});var pu=Jt.extend({addHooks:function(){st(this._map._container,"leaflet-touch-zoom"),tt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Xt(this._map._container,"leaflet-touch-zoom"),At(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var c=this._map;if(!(!a.touches||a.touches.length!==2||c._animatingZoom||this._zooming)){var p=c.mouseEventToContainerPoint(a.touches[0]),b=c.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(p.add(b)._divideBy(2))),this._startDist=p.distanceTo(b),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),tt(document,"touchmove",this._onTouchMove,this),tt(document,"touchend touchcancel",this._onTouchEnd,this),oi(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var c=this._map,p=c.mouseEventToContainerPoint(a.touches[0]),b=c.mouseEventToContainerPoint(a.touches[1]),w=p.distanceTo(b)/this._startDist;if(this._zoom=c.getScaleZoom(w,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&w<1||this._zoom>c.getMaxZoom()&&w>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,w===1)return}else{var M=p._add(b)._divideBy(2)._subtract(this._centerPoint);if(w===1&&M.x===0&&M.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(M),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),Q(this._animRequest);var K=o(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Y(K,this,!0),oi(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Q(this._animRequest),At(document,"touchmove",this._onTouchMove,this),At(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ht.addInitHook("addHandler","touchZoom",pu),ht.BoxZoom=an,ht.DoubleClickZoom=vh,ht.Drag=bh,ht.Keyboard=Th,ht.ScrollWheelZoom=mp,ht.TapHold=Na,ht.TouchZoom=pu,i.Bounds=ue,i.Browser=Be,i.CRS=me,i.Canvas=mh,i.Circle=cu,i.CircleMarker=Da,i.Class=ae,i.Control=ns,i.DivIcon=fu,i.DivOverlay=os,i.DomEvent=Jf,i.DomUtil=Yf,i.Draggable=nn,i.Evented=se,i.FeatureGroup=Us,i.GeoJSON=Vi,i.GridLayer=Lo,i.Handler=Jt,i.Icon=Rr,i.ImageOverlay=ko,i.LatLng=Ee,i.LatLngBounds=ze,i.Layer=Ss,i.LayerGroup=Cn,i.LineUtil=ih,i.Map=ht,i.Marker=Ao,i.Mixin=sn,i.Path=wn,i.Point=ee,i.PolyUtil=sp,i.Polygon=nr,i.Polyline=rn,i.Popup=La,i.PosAnimation=Kc,i.Projection=sh,i.Rectangle=yh,i.Renderer=on,i.SVG=Mo,i.SVGOverlay=Ia,i.TileLayer=Fr,i.Tooltip=Oa,i.Transformation=We,i.Util=J,i.VideoOverlay=du,i.bind=o,i.bounds=Oe,i.canvas=gh,i.circle=lp,i.circleMarker=Pa,i.control=xn,i.divIcon=hp,i.extend=n,i.featureGroup=ap,i.geoJSON=ah,i.geoJson=lh,i.gridLayer=fh,i.icon=rh,i.imageOverlay=uh,i.latLng=He,i.latLngBounds=Me,i.layerGroup=op,i.map=ep,i.marker=oh,i.point=re,i.polygon=cp,i.polyline=up,i.popup=Io,i.rectangle=pp,i.setOptions=x,i.stamp=u,i.svg=_h,i.svgOverlay=hh,i.tileLayer=ph,i.tooltip=dh,i.transformation=H,i.version=s,i.videoOverlay=ch;var Ba=window.L;i.noConflict=function(){return window.L=Ba,this},window.L=i}))})(Fu,Fu.exports)),Fu.exports}var SS=JP();const CS=ho(SS),ek=Aw({__proto__:null,default:CS},[SS]);L.Control.Fullscreen=L.Control.extend({options:{position:"topleft",title:{false:"View Fullscreen",true:"Exit Fullscreen"}},onAdd:function(t){var e=L.DomUtil.create("div","leaflet-control-fullscreen leaflet-bar leaflet-control");return this.link=L.DomUtil.create("a","leaflet-control-fullscreen-button leaflet-bar-part",e),this.link.href="#",this._map=t,this._map.on("fullscreenchange",this._toggleTitle,this),this._toggleTitle(),L.DomEvent.on(this.link,"click",this._click,this),e},_click:function(t){L.DomEvent.stopPropagation(t),L.DomEvent.preventDefault(t),this._map.toggleFullscreen(this.options)},_toggleTitle:function(){this.link.title=this.options.title[this._map.isFullscreen()]}});L.Map.include({isFullscreen:function(){return this._isFullscreen||!1},toggleFullscreen:function(t){var e=this.getContainer();this.isFullscreen()?t&&t.pseudoFullscreen?this._disablePseudoFullscreen(e):document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():this._disablePseudoFullscreen(e):t&&t.pseudoFullscreen?this._enablePseudoFullscreen(e):e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):e.msRequestFullscreen?e.msRequestFullscreen():this._enablePseudoFullscreen(e)},_enablePseudoFullscreen:function(t){L.DomUtil.addClass(t,"leaflet-pseudo-fullscreen"),this._setFullscreen(!0),this.fire("fullscreenchange")},_disablePseudoFullscreen:function(t){L.DomUtil.removeClass(t,"leaflet-pseudo-fullscreen"),this._setFullscreen(!1),this.fire("fullscreenchange")},_setFullscreen:function(t){this._isFullscreen=t;var e=this.getContainer();t?L.DomUtil.addClass(e,"leaflet-fullscreen-on"):L.DomUtil.removeClass(e,"leaflet-fullscreen-on"),this.invalidateSize()},_onFullscreenChange:function(t){var e=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;e===this.getContainer()&&!this._isFullscreen?(this._setFullscreen(!0),this.fire("fullscreenchange")):e!==this.getContainer()&&this._isFullscreen&&(this._setFullscreen(!1),this.fire("fullscreenchange"))}});L.Map.mergeOptions({fullscreenControl:!1});L.Map.addInitHook(function(){this.options.fullscreenControl&&(this.fullscreenControl=new L.Control.Fullscreen(this.options.fullscreenControl),this.addControl(this.fullscreenControl));var t;if("onfullscreenchange"in document?t="fullscreenchange":"onmozfullscreenchange"in document?t="mozfullscreenchange":"onwebkitfullscreenchange"in document?t="webkitfullscreenchange":"onmsfullscreenchange"in document&&(t="MSFullscreenChange"),t){var e=L.bind(this._onFullscreenChange,this);this.whenReady(function(){L.DomEvent.on(document,t,e)}),this.on("unload",function(){L.DomEvent.off(document,t,e)})}});L.control.fullscreen=function(t){return new L.Control.Fullscreen(t)};function wS(t,e){return function(){return t.apply(e,arguments)}}const{toString:tk}=Object.prototype,{getPrototypeOf:g_}=Object,{iterator:gf,toStringTag:ES}=Symbol,_f=(t=>e=>{const i=tk.call(e);return t[i]||(t[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),gn=t=>(t=t.toLowerCase(),e=>_f(e)===t),yf=t=>e=>typeof e===t,{isArray:Ol}=Array,yl=yf("undefined");function Oc(t){return t!==null&&!yl(t)&&t.constructor!==null&&!yl(t.constructor)&&_s(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const AS=gn("ArrayBuffer");function ik(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&AS(t.buffer),e}const sk=yf("string"),_s=yf("function"),DS=yf("number"),Mc=t=>t!==null&&typeof t=="object",nk=t=>t===!0||t===!1,id=t=>{if(_f(t)!=="object")return!1;const e=g_(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(ES in t)&&!(gf in t)},rk=t=>{if(!Mc(t)||Oc(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},ok=gn("Date"),ak=gn("File"),lk=gn("Blob"),uk=gn("FileList"),ck=t=>Mc(t)&&_s(t.pipe),hk=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||_s(t.append)&&((e=_f(t))==="formdata"||e==="object"&&_s(t.toString)&&t.toString()==="[object FormData]"))},dk=gn("URLSearchParams"),[fk,pk,mk,gk]=["ReadableStream","Request","Response","Headers"].map(gn),_k=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Rc(t,e,{allOwnKeys:i=!1}={}){if(t===null||typeof t>"u")return;let s,n;if(typeof t!="object"&&(t=[t]),Ol(t))for(s=0,n=t.length;s<n;s++)e.call(null,t[s],s,t);else{if(Oc(t))return;const r=i?Object.getOwnPropertyNames(t):Object.keys(t),o=r.length;let l;for(s=0;s<o;s++)l=r[s],e.call(null,t[l],l,t)}}function PS(t,e){if(Oc(t))return null;e=e.toLowerCase();const i=Object.keys(t);let s=i.length,n;for(;s-- >0;)if(n=i[s],e===n.toLowerCase())return n;return null}const Go=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,kS=t=>!yl(t)&&t!==Go;function ag(){const{caseless:t,skipUndefined:e}=kS(this)&&this||{},i={},s=(n,r)=>{const o=t&&PS(i,r)||r;id(i[o])&&id(n)?i[o]=ag(i[o],n):id(n)?i[o]=ag({},n):Ol(n)?i[o]=n.slice():(!e||!yl(n))&&(i[o]=n)};for(let n=0,r=arguments.length;n<r;n++)arguments[n]&&Rc(arguments[n],s);return i}const yk=(t,e,i,{allOwnKeys:s}={})=>(Rc(e,(n,r)=>{i&&_s(n)?t[r]=wS(n,i):t[r]=n},{allOwnKeys:s}),t),vk=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),bk=(t,e,i,s)=>{t.prototype=Object.create(e.prototype,s),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),i&&Object.assign(t.prototype,i)},Tk=(t,e,i,s)=>{let n,r,o;const l={};if(e=e||{},t==null)return e;do{for(n=Object.getOwnPropertyNames(t),r=n.length;r-- >0;)o=n[r],(!s||s(o,t,e))&&!l[o]&&(e[o]=t[o],l[o]=!0);t=i!==!1&&g_(t)}while(t&&(!i||i(t,e))&&t!==Object.prototype);return e},xk=(t,e,i)=>{t=String(t),(i===void 0||i>t.length)&&(i=t.length),i-=e.length;const s=t.indexOf(e,i);return s!==-1&&s===i},Sk=t=>{if(!t)return null;if(Ol(t))return t;let e=t.length;if(!DS(e))return null;const i=new Array(e);for(;e-- >0;)i[e]=t[e];return i},Ck=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&g_(Uint8Array)),wk=(t,e)=>{const s=(t&&t[gf]).call(t);let n;for(;(n=s.next())&&!n.done;){const r=n.value;e.call(t,r[0],r[1])}},Ek=(t,e)=>{let i;const s=[];for(;(i=t.exec(e))!==null;)s.push(i);return s},Ak=gn("HTMLFormElement"),Dk=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,s,n){return s.toUpperCase()+n}),xy=(({hasOwnProperty:t})=>(e,i)=>t.call(e,i))(Object.prototype),Pk=gn("RegExp"),IS=(t,e)=>{const i=Object.getOwnPropertyDescriptors(t),s={};Rc(i,(n,r)=>{let o;(o=e(n,r,t))!==!1&&(s[r]=o||n)}),Object.defineProperties(t,s)},kk=t=>{IS(t,(e,i)=>{if(_s(t)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const s=t[i];if(_s(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},Ik=(t,e)=>{const i={},s=n=>{n.forEach(r=>{i[r]=!0})};return Ol(t)?s(t):s(String(t).split(e)),i},Lk=()=>{},Ok=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function Mk(t){return!!(t&&_s(t.append)&&t[ES]==="FormData"&&t[gf])}const Rk=t=>{const e=new Array(10),i=(s,n)=>{if(Mc(s)){if(e.indexOf(s)>=0)return;if(Oc(s))return s;if(!("toJSON"in s)){e[n]=s;const r=Ol(s)?[]:{};return Rc(s,(o,l)=>{const u=i(o,n+1);!yl(u)&&(r[l]=u)}),e[n]=void 0,r}}return s};return i(t,0)},Nk=gn("AsyncFunction"),Bk=t=>t&&(Mc(t)||_s(t))&&_s(t.then)&&_s(t.catch),LS=((t,e)=>t?setImmediate:e?((i,s)=>(Go.addEventListener("message",({source:n,data:r})=>{n===Go&&r===i&&s.length&&s.shift()()},!1),n=>{s.push(n),Go.postMessage(i,"*")}))(`axios@${Math.random()}`,[]):i=>setTimeout(i))(typeof setImmediate=="function",_s(Go.postMessage)),Fk=typeof queueMicrotask<"u"?queueMicrotask.bind(Go):typeof process<"u"&&process.nextTick||LS,Uk=t=>t!=null&&_s(t[gf]),pe={isArray:Ol,isArrayBuffer:AS,isBuffer:Oc,isFormData:hk,isArrayBufferView:ik,isString:sk,isNumber:DS,isBoolean:nk,isObject:Mc,isPlainObject:id,isEmptyObject:rk,isReadableStream:fk,isRequest:pk,isResponse:mk,isHeaders:gk,isUndefined:yl,isDate:ok,isFile:ak,isBlob:lk,isRegExp:Pk,isFunction:_s,isStream:ck,isURLSearchParams:dk,isTypedArray:Ck,isFileList:uk,forEach:Rc,merge:ag,extend:yk,trim:_k,stripBOM:vk,inherits:bk,toFlatObject:Tk,kindOf:_f,kindOfTest:gn,endsWith:xk,toArray:Sk,forEachEntry:wk,matchAll:Ek,isHTMLForm:Ak,hasOwnProperty:xy,hasOwnProp:xy,reduceDescriptors:IS,freezeMethods:kk,toObjectSet:Ik,toCamelCase:Dk,noop:Lk,toFiniteNumber:Ok,findKey:PS,global:Go,isContextDefined:kS,isSpecCompliantForm:Mk,toJSONObject:Rk,isAsyncFn:Nk,isThenable:Bk,setImmediate:LS,asap:Fk,isIterable:Uk};function ot(t,e,i,s,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),i&&(this.config=i),s&&(this.request=s),n&&(this.response=n,this.status=n.status?n.status:null)}pe.inherits(ot,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:pe.toJSONObject(this.config),code:this.code,status:this.status}}});const OS=ot.prototype,MS={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{MS[t]={value:t}});Object.defineProperties(ot,MS);Object.defineProperty(OS,"isAxiosError",{value:!0});ot.from=(t,e,i,s,n,r)=>{const o=Object.create(OS);pe.toFlatObject(t,o,function(d){return d!==Error.prototype},h=>h!=="isAxiosError");const l=t&&t.message?t.message:"Error",u=e==null&&t?t.code:e;return ot.call(o,l,u,i,s,n),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",r&&Object.assign(o,r),o};const jk=null;function lg(t){return pe.isPlainObject(t)||pe.isArray(t)}function RS(t){return pe.endsWith(t,"[]")?t.slice(0,-2):t}function Sy(t,e,i){return t?t.concat(e).map(function(n,r){return n=RS(n),!i&&r?"["+n+"]":n}).join(i?".":""):e}function zk(t){return pe.isArray(t)&&!t.some(lg)}const Hk=pe.toFlatObject(pe,{},null,function(e){return/^is[A-Z]/.test(e)});function vf(t,e,i){if(!pe.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,i=pe.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,E){return!pe.isUndefined(E[x])});const s=i.metaTokens,n=i.visitor||d,r=i.dots,o=i.indexes,u=(i.Blob||typeof Blob<"u"&&Blob)&&pe.isSpecCompliantForm(e);if(!pe.isFunction(n))throw new TypeError("visitor must be a function");function h(C){if(C===null)return"";if(pe.isDate(C))return C.toISOString();if(pe.isBoolean(C))return C.toString();if(!u&&pe.isBlob(C))throw new ot("Blob is not supported. Use a Buffer instead.");return pe.isArrayBuffer(C)||pe.isTypedArray(C)?u&&typeof Blob=="function"?new Blob([C]):Buffer.from(C):C}function d(C,x,E){let P=C;if(C&&!E&&typeof C=="object"){if(pe.endsWith(x,"{}"))x=s?x:x.slice(0,-2),C=JSON.stringify(C);else if(pe.isArray(C)&&zk(C)||(pe.isFileList(C)||pe.endsWith(x,"[]"))&&(P=pe.toArray(C)))return x=RS(x),P.forEach(function(I,F){!(pe.isUndefined(I)||I===null)&&e.append(o===!0?Sy([x],F,r):o===null?x:x+"[]",h(I))}),!1}return lg(C)?!0:(e.append(Sy(E,x,r),h(C)),!1)}const m=[],_=Object.assign(Hk,{defaultVisitor:d,convertValue:h,isVisitable:lg});function T(C,x){if(!pe.isUndefined(C)){if(m.indexOf(C)!==-1)throw Error("Circular reference detected in "+x.join("."));m.push(C),pe.forEach(C,function(P,k){(!(pe.isUndefined(P)||P===null)&&n.call(e,P,pe.isString(k)?k.trim():k,x,_))===!0&&T(P,x?x.concat(k):[k])}),m.pop()}}if(!pe.isObject(t))throw new TypeError("data must be an object");return T(t),e}function Cy(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function __(t,e){this._pairs=[],t&&vf(t,this,e)}const NS=__.prototype;NS.append=function(e,i){this._pairs.push([e,i])};NS.toString=function(e){const i=e?function(s){return e.call(this,s,Cy)}:Cy;return this._pairs.map(function(n){return i(n[0])+"="+i(n[1])},"").join("&")};function Vk(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function BS(t,e,i){if(!e)return t;const s=i&&i.encode||Vk;pe.isFunction(i)&&(i={serialize:i});const n=i&&i.serialize;let r;if(n?r=n(e,i):r=pe.isURLSearchParams(e)?e.toString():new __(e,i).toString(s),r){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+r}return t}class wy{constructor(){this.handlers=[]}use(e,i,s){return this.handlers.push({fulfilled:e,rejected:i,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){pe.forEach(this.handlers,function(s){s!==null&&e(s)})}}const FS={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},qk=typeof URLSearchParams<"u"?URLSearchParams:__,$k=typeof FormData<"u"?FormData:null,Wk=typeof Blob<"u"?Blob:null,Gk={isBrowser:!0,classes:{URLSearchParams:qk,FormData:$k,Blob:Wk},protocols:["http","https","file","blob","url","data"]},y_=typeof window<"u"&&typeof document<"u",ug=typeof navigator=="object"&&navigator||void 0,Xk=y_&&(!ug||["ReactNative","NativeScript","NS"].indexOf(ug.product)<0),Kk=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Zk=y_&&window.location.href||"http://localhost",Yk=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:y_,hasStandardBrowserEnv:Xk,hasStandardBrowserWebWorkerEnv:Kk,navigator:ug,origin:Zk},Symbol.toStringTag,{value:"Module"})),Ii={...Yk,...Gk};function Qk(t,e){return vf(t,new Ii.classes.URLSearchParams,{visitor:function(i,s,n,r){return Ii.isNode&&pe.isBuffer(i)?(this.append(s,i.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)},...e})}function Jk(t){return pe.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function eI(t){const e={},i=Object.keys(t);let s;const n=i.length;let r;for(s=0;s<n;s++)r=i[s],e[r]=t[r];return e}function US(t){function e(i,s,n,r){let o=i[r++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),u=r>=i.length;return o=!o&&pe.isArray(n)?n.length:o,u?(pe.hasOwnProp(n,o)?n[o]=[n[o],s]:n[o]=s,!l):((!n[o]||!pe.isObject(n[o]))&&(n[o]=[]),e(i,s,n[o],r)&&pe.isArray(n[o])&&(n[o]=eI(n[o])),!l)}if(pe.isFormData(t)&&pe.isFunction(t.entries)){const i={};return pe.forEachEntry(t,(s,n)=>{e(Jk(s),n,i,0)}),i}return null}function tI(t,e,i){if(pe.isString(t))try{return(e||JSON.parse)(t),pe.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(i||JSON.stringify)(t)}const Nc={transitional:FS,adapter:["xhr","http","fetch"],transformRequest:[function(e,i){const s=i.getContentType()||"",n=s.indexOf("application/json")>-1,r=pe.isObject(e);if(r&&pe.isHTMLForm(e)&&(e=new FormData(e)),pe.isFormData(e))return n?JSON.stringify(US(e)):e;if(pe.isArrayBuffer(e)||pe.isBuffer(e)||pe.isStream(e)||pe.isFile(e)||pe.isBlob(e)||pe.isReadableStream(e))return e;if(pe.isArrayBufferView(e))return e.buffer;if(pe.isURLSearchParams(e))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(r){if(s.indexOf("application/x-www-form-urlencoded")>-1)return Qk(e,this.formSerializer).toString();if((l=pe.isFileList(e))||s.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return vf(l?{"files[]":e}:e,u&&new u,this.formSerializer)}}return r||n?(i.setContentType("application/json",!1),tI(e)):e}],transformResponse:[function(e){const i=this.transitional||Nc.transitional,s=i&&i.forcedJSONParsing,n=this.responseType==="json";if(pe.isResponse(e)||pe.isReadableStream(e))return e;if(e&&pe.isString(e)&&(s&&!this.responseType||n)){const o=!(i&&i.silentJSONParsing)&&n;try{return JSON.parse(e,this.parseReviver)}catch(l){if(o)throw l.name==="SyntaxError"?ot.from(l,ot.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ii.classes.FormData,Blob:Ii.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};pe.forEach(["delete","get","head","post","put","patch"],t=>{Nc.headers[t]={}});const iI=pe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),sI=t=>{const e={};let i,s,n;return t&&t.split(`
`).forEach(function(o){n=o.indexOf(":"),i=o.substring(0,n).trim().toLowerCase(),s=o.substring(n+1).trim(),!(!i||e[i]&&iI[i])&&(i==="set-cookie"?e[i]?e[i].push(s):e[i]=[s]:e[i]=e[i]?e[i]+", "+s:s)}),e},Ey=Symbol("internals");function wu(t){return t&&String(t).trim().toLowerCase()}function sd(t){return t===!1||t==null?t:pe.isArray(t)?t.map(sd):String(t)}function nI(t){const e=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=i.exec(t);)e[s[1]]=s[2];return e}const rI=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Rp(t,e,i,s,n){if(pe.isFunction(s))return s.call(this,e,i);if(n&&(e=i),!!pe.isString(e)){if(pe.isString(s))return e.indexOf(s)!==-1;if(pe.isRegExp(s))return s.test(e)}}function oI(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,i,s)=>i.toUpperCase()+s)}function aI(t,e){const i=pe.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(t,s+i,{value:function(n,r,o){return this[s].call(this,e,n,r,o)},configurable:!0})})}let ys=class{constructor(e){e&&this.set(e)}set(e,i,s){const n=this;function r(l,u,h){const d=wu(u);if(!d)throw new Error("header name must be a non-empty string");const m=pe.findKey(n,d);(!m||n[m]===void 0||h===!0||h===void 0&&n[m]!==!1)&&(n[m||u]=sd(l))}const o=(l,u)=>pe.forEach(l,(h,d)=>r(h,d,u));if(pe.isPlainObject(e)||e instanceof this.constructor)o(e,i);else if(pe.isString(e)&&(e=e.trim())&&!rI(e))o(sI(e),i);else if(pe.isObject(e)&&pe.isIterable(e)){let l={},u,h;for(const d of e){if(!pe.isArray(d))throw TypeError("Object iterator must return a key-value pair");l[h=d[0]]=(u=l[h])?pe.isArray(u)?[...u,d[1]]:[u,d[1]]:d[1]}o(l,i)}else e!=null&&r(i,e,s);return this}get(e,i){if(e=wu(e),e){const s=pe.findKey(this,e);if(s){const n=this[s];if(!i)return n;if(i===!0)return nI(n);if(pe.isFunction(i))return i.call(this,n,s);if(pe.isRegExp(i))return i.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,i){if(e=wu(e),e){const s=pe.findKey(this,e);return!!(s&&this[s]!==void 0&&(!i||Rp(this,this[s],s,i)))}return!1}delete(e,i){const s=this;let n=!1;function r(o){if(o=wu(o),o){const l=pe.findKey(s,o);l&&(!i||Rp(s,s[l],l,i))&&(delete s[l],n=!0)}}return pe.isArray(e)?e.forEach(r):r(e),n}clear(e){const i=Object.keys(this);let s=i.length,n=!1;for(;s--;){const r=i[s];(!e||Rp(this,this[r],r,e,!0))&&(delete this[r],n=!0)}return n}normalize(e){const i=this,s={};return pe.forEach(this,(n,r)=>{const o=pe.findKey(s,r);if(o){i[o]=sd(n),delete i[r];return}const l=e?oI(r):String(r).trim();l!==r&&delete i[r],i[l]=sd(n),s[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const i=Object.create(null);return pe.forEach(this,(s,n)=>{s!=null&&s!==!1&&(i[n]=e&&pe.isArray(s)?s.join(", "):s)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,i])=>e+": "+i).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...i){const s=new this(e);return i.forEach(n=>s.set(n)),s}static accessor(e){const s=(this[Ey]=this[Ey]={accessors:{}}).accessors,n=this.prototype;function r(o){const l=wu(o);s[l]||(aI(n,o),s[l]=!0)}return pe.isArray(e)?e.forEach(r):r(e),this}};ys.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);pe.reduceDescriptors(ys.prototype,({value:t},e)=>{let i=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(s){this[i]=s}}});pe.freezeMethods(ys);function Np(t,e){const i=this||Nc,s=e||i,n=ys.from(s.headers);let r=s.data;return pe.forEach(t,function(l){r=l.call(i,r,n.normalize(),e?e.status:void 0)}),n.normalize(),r}function jS(t){return!!(t&&t.__CANCEL__)}function Ml(t,e,i){ot.call(this,t??"canceled",ot.ERR_CANCELED,e,i),this.name="CanceledError"}pe.inherits(Ml,ot,{__CANCEL__:!0});function zS(t,e,i){const s=i.config.validateStatus;!i.status||!s||s(i.status)?t(i):e(new ot("Request failed with status code "+i.status,[ot.ERR_BAD_REQUEST,ot.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}function lI(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function uI(t,e){t=t||10;const i=new Array(t),s=new Array(t);let n=0,r=0,o;return e=e!==void 0?e:1e3,function(u){const h=Date.now(),d=s[r];o||(o=h),i[n]=u,s[n]=h;let m=r,_=0;for(;m!==n;)_+=i[m++],m=m%t;if(n=(n+1)%t,n===r&&(r=(r+1)%t),h-o<e)return;const T=d&&h-d;return T?Math.round(_*1e3/T):void 0}}function cI(t,e){let i=0,s=1e3/e,n,r;const o=(h,d=Date.now())=>{i=d,n=null,r&&(clearTimeout(r),r=null),t(...h)};return[(...h)=>{const d=Date.now(),m=d-i;m>=s?o(h,d):(n=h,r||(r=setTimeout(()=>{r=null,o(n)},s-m)))},()=>n&&o(n)]}const Td=(t,e,i=3)=>{let s=0;const n=uI(50,250);return cI(r=>{const o=r.loaded,l=r.lengthComputable?r.total:void 0,u=o-s,h=n(u),d=o<=l;s=o;const m={loaded:o,total:l,progress:l?o/l:void 0,bytes:u,rate:h||void 0,estimated:h&&l&&d?(l-o)/h:void 0,event:r,lengthComputable:l!=null,[e?"download":"upload"]:!0};t(m)},i)},Ay=(t,e)=>{const i=t!=null;return[s=>e[0]({lengthComputable:i,total:t,loaded:s}),e[1]]},Dy=t=>(...e)=>pe.asap(()=>t(...e)),hI=Ii.hasStandardBrowserEnv?((t,e)=>i=>(i=new URL(i,Ii.origin),t.protocol===i.protocol&&t.host===i.host&&(e||t.port===i.port)))(new URL(Ii.origin),Ii.navigator&&/(msie|trident)/i.test(Ii.navigator.userAgent)):()=>!0,dI=Ii.hasStandardBrowserEnv?{write(t,e,i,s,n,r,o){if(typeof document>"u")return;const l=[`${t}=${encodeURIComponent(e)}`];pe.isNumber(i)&&l.push(`expires=${new Date(i).toUTCString()}`),pe.isString(s)&&l.push(`path=${s}`),pe.isString(n)&&l.push(`domain=${n}`),r===!0&&l.push("secure"),pe.isString(o)&&l.push(`SameSite=${o}`),document.cookie=l.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function fI(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function pI(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function HS(t,e,i){let s=!fI(e);return t&&(s||i==!1)?pI(t,e):e}const Py=t=>t instanceof ys?{...t}:t;function la(t,e){e=e||{};const i={};function s(h,d,m,_){return pe.isPlainObject(h)&&pe.isPlainObject(d)?pe.merge.call({caseless:_},h,d):pe.isPlainObject(d)?pe.merge({},d):pe.isArray(d)?d.slice():d}function n(h,d,m,_){if(pe.isUndefined(d)){if(!pe.isUndefined(h))return s(void 0,h,m,_)}else return s(h,d,m,_)}function r(h,d){if(!pe.isUndefined(d))return s(void 0,d)}function o(h,d){if(pe.isUndefined(d)){if(!pe.isUndefined(h))return s(void 0,h)}else return s(void 0,d)}function l(h,d,m){if(m in e)return s(h,d);if(m in t)return s(void 0,h)}const u={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(h,d,m)=>n(Py(h),Py(d),m,!0)};return pe.forEach(Object.keys({...t,...e}),function(d){const m=u[d]||n,_=m(t[d],e[d],d);pe.isUndefined(_)&&m!==l||(i[d]=_)}),i}const VS=t=>{const e=la({},t);let{data:i,withXSRFToken:s,xsrfHeaderName:n,xsrfCookieName:r,headers:o,auth:l}=e;if(e.headers=o=ys.from(o),e.url=BS(HS(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),pe.isFormData(i)){if(Ii.hasStandardBrowserEnv||Ii.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(pe.isFunction(i.getHeaders)){const u=i.getHeaders(),h=["content-type","content-length"];Object.entries(u).forEach(([d,m])=>{h.includes(d.toLowerCase())&&o.set(d,m)})}}if(Ii.hasStandardBrowserEnv&&(s&&pe.isFunction(s)&&(s=s(e)),s||s!==!1&&hI(e.url))){const u=n&&r&&dI.read(r);u&&o.set(n,u)}return e},mI=typeof XMLHttpRequest<"u",gI=mI&&function(t){return new Promise(function(i,s){const n=VS(t);let r=n.data;const o=ys.from(n.headers).normalize();let{responseType:l,onUploadProgress:u,onDownloadProgress:h}=n,d,m,_,T,C;function x(){T&&T(),C&&C(),n.cancelToken&&n.cancelToken.unsubscribe(d),n.signal&&n.signal.removeEventListener("abort",d)}let E=new XMLHttpRequest;E.open(n.method.toUpperCase(),n.url,!0),E.timeout=n.timeout;function P(){if(!E)return;const I=ys.from("getAllResponseHeaders"in E&&E.getAllResponseHeaders()),z={data:!l||l==="text"||l==="json"?E.responseText:E.response,status:E.status,statusText:E.statusText,headers:I,config:t,request:E};zS(function(U){i(U),x()},function(U){s(U),x()},z),E=null}"onloadend"in E?E.onloadend=P:E.onreadystatechange=function(){!E||E.readyState!==4||E.status===0&&!(E.responseURL&&E.responseURL.indexOf("file:")===0)||setTimeout(P)},E.onabort=function(){E&&(s(new ot("Request aborted",ot.ECONNABORTED,t,E)),E=null)},E.onerror=function(F){const z=F&&F.message?F.message:"Network Error",q=new ot(z,ot.ERR_NETWORK,t,E);q.event=F||null,s(q),E=null},E.ontimeout=function(){let F=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const z=n.transitional||FS;n.timeoutErrorMessage&&(F=n.timeoutErrorMessage),s(new ot(F,z.clarifyTimeoutError?ot.ETIMEDOUT:ot.ECONNABORTED,t,E)),E=null},r===void 0&&o.setContentType(null),"setRequestHeader"in E&&pe.forEach(o.toJSON(),function(F,z){E.setRequestHeader(z,F)}),pe.isUndefined(n.withCredentials)||(E.withCredentials=!!n.withCredentials),l&&l!=="json"&&(E.responseType=n.responseType),h&&([_,C]=Td(h,!0),E.addEventListener("progress",_)),u&&E.upload&&([m,T]=Td(u),E.upload.addEventListener("progress",m),E.upload.addEventListener("loadend",T)),(n.cancelToken||n.signal)&&(d=I=>{E&&(s(!I||I.type?new Ml(null,t,E):I),E.abort(),E=null)},n.cancelToken&&n.cancelToken.subscribe(d),n.signal&&(n.signal.aborted?d():n.signal.addEventListener("abort",d)));const k=lI(n.url);if(k&&Ii.protocols.indexOf(k)===-1){s(new ot("Unsupported protocol "+k+":",ot.ERR_BAD_REQUEST,t));return}E.send(r||null)})},_I=(t,e)=>{const{length:i}=t=t?t.filter(Boolean):[];if(e||i){let s=new AbortController,n;const r=function(h){if(!n){n=!0,l();const d=h instanceof Error?h:this.reason;s.abort(d instanceof ot?d:new Ml(d instanceof Error?d.message:d))}};let o=e&&setTimeout(()=>{o=null,r(new ot(`timeout ${e} of ms exceeded`,ot.ETIMEDOUT))},e);const l=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(h=>{h.unsubscribe?h.unsubscribe(r):h.removeEventListener("abort",r)}),t=null)};t.forEach(h=>h.addEventListener("abort",r));const{signal:u}=s;return u.unsubscribe=()=>pe.asap(l),u}},yI=function*(t,e){let i=t.byteLength;if(i<e){yield t;return}let s=0,n;for(;s<i;)n=s+e,yield t.slice(s,n),s=n},vI=async function*(t,e){for await(const i of bI(t))yield*yI(i,e)},bI=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:i,value:s}=await e.read();if(i)break;yield s}}finally{await e.cancel()}},ky=(t,e,i,s)=>{const n=vI(t,e);let r=0,o,l=u=>{o||(o=!0,s&&s(u))};return new ReadableStream({async pull(u){try{const{done:h,value:d}=await n.next();if(h){l(),u.close();return}let m=d.byteLength;if(i){let _=r+=m;i(_)}u.enqueue(new Uint8Array(d))}catch(h){throw l(h),h}},cancel(u){return l(u),n.return()}},{highWaterMark:2})},Iy=64*1024,{isFunction:Ih}=pe,TI=(({Request:t,Response:e})=>({Request:t,Response:e}))(pe.global),{ReadableStream:Ly,TextEncoder:Oy}=pe.global,My=(t,...e)=>{try{return!!t(...e)}catch{return!1}},xI=t=>{t=pe.merge.call({skipUndefined:!0},TI,t);const{fetch:e,Request:i,Response:s}=t,n=e?Ih(e):typeof fetch=="function",r=Ih(i),o=Ih(s);if(!n)return!1;const l=n&&Ih(Ly),u=n&&(typeof Oy=="function"?(C=>x=>C.encode(x))(new Oy):async C=>new Uint8Array(await new i(C).arrayBuffer())),h=r&&l&&My(()=>{let C=!1;const x=new i(Ii.origin,{body:new Ly,method:"POST",get duplex(){return C=!0,"half"}}).headers.has("Content-Type");return C&&!x}),d=o&&l&&My(()=>pe.isReadableStream(new s("").body)),m={stream:d&&(C=>C.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(C=>{!m[C]&&(m[C]=(x,E)=>{let P=x&&x[C];if(P)return P.call(x);throw new ot(`Response type '${C}' is not supported`,ot.ERR_NOT_SUPPORT,E)})});const _=async C=>{if(C==null)return 0;if(pe.isBlob(C))return C.size;if(pe.isSpecCompliantForm(C))return(await new i(Ii.origin,{method:"POST",body:C}).arrayBuffer()).byteLength;if(pe.isArrayBufferView(C)||pe.isArrayBuffer(C))return C.byteLength;if(pe.isURLSearchParams(C)&&(C=C+""),pe.isString(C))return(await u(C)).byteLength},T=async(C,x)=>{const E=pe.toFiniteNumber(C.getContentLength());return E??_(x)};return async C=>{let{url:x,method:E,data:P,signal:k,cancelToken:I,timeout:F,onDownloadProgress:z,onUploadProgress:q,responseType:U,headers:Z,withCredentials:D="same-origin",fetchOptions:R}=VS(C),Y=e||fetch;U=U?(U+"").toLowerCase():"text";let Q=_I([k,I&&I.toAbortSignal()],F),J=null;const ae=Q&&Q.unsubscribe&&(()=>{Q.unsubscribe()});let ce;try{if(q&&h&&E!=="get"&&E!=="head"&&(ce=await T(Z,P))!==0){let ue=new i(x,{method:"POST",body:P,duplex:"half"}),Oe;if(pe.isFormData(P)&&(Oe=ue.headers.get("content-type"))&&Z.setContentType(Oe),ue.body){const[ze,Me]=Ay(ce,Td(Dy(q)));P=ky(ue.body,Iy,ze,Me)}}pe.isString(D)||(D=D?"include":"omit");const le=r&&"credentials"in i.prototype,se={...R,signal:Q,method:E.toUpperCase(),headers:Z.normalize().toJSON(),body:P,duplex:"half",credentials:le?D:void 0};J=r&&new i(x,se);let ee=await(r?Y(J,R):Y(x,se));const fe=d&&(U==="stream"||U==="response");if(d&&(z||fe&&ae)){const ue={};["status","statusText","headers"].forEach(Ee=>{ue[Ee]=ee[Ee]});const Oe=pe.toFiniteNumber(ee.headers.get("content-length")),[ze,Me]=z&&Ay(Oe,Td(Dy(z),!0))||[];ee=new s(ky(ee.body,Iy,ze,()=>{Me&&Me(),ae&&ae()}),ue)}U=U||"text";let re=await m[pe.findKey(m,U)||"text"](ee,C);return!fe&&ae&&ae(),await new Promise((ue,Oe)=>{zS(ue,Oe,{data:re,headers:ys.from(ee.headers),status:ee.status,statusText:ee.statusText,config:C,request:J})})}catch(le){throw ae&&ae(),le&&le.name==="TypeError"&&/Load failed|fetch/i.test(le.message)?Object.assign(new ot("Network Error",ot.ERR_NETWORK,C,J),{cause:le.cause||le}):ot.from(le,le&&le.code,C,J)}}},SI=new Map,qS=t=>{let e=t&&t.env||{};const{fetch:i,Request:s,Response:n}=e,r=[s,n,i];let o=r.length,l=o,u,h,d=SI;for(;l--;)u=r[l],h=d.get(u),h===void 0&&d.set(u,h=l?new Map:xI(e)),d=h;return h};qS();const v_={http:jk,xhr:gI,fetch:{get:qS}};pe.forEach(v_,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Ry=t=>`- ${t}`,CI=t=>pe.isFunction(t)||t===null||t===!1;function wI(t,e){t=pe.isArray(t)?t:[t];const{length:i}=t;let s,n;const r={};for(let o=0;o<i;o++){s=t[o];let l;if(n=s,!CI(s)&&(n=v_[(l=String(s)).toLowerCase()],n===void 0))throw new ot(`Unknown adapter '${l}'`);if(n&&(pe.isFunction(n)||(n=n.get(e))))break;r[l||"#"+o]=n}if(!n){const o=Object.entries(r).map(([u,h])=>`adapter ${u} `+(h===!1?"is not supported by the environment":"is not available in the build"));let l=i?o.length>1?`since :
`+o.map(Ry).join(`
`):" "+Ry(o[0]):"as no adapter specified";throw new ot("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return n}const $S={getAdapter:wI,adapters:v_};function Bp(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ml(null,t)}function Ny(t){return Bp(t),t.headers=ys.from(t.headers),t.data=Np.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),$S.getAdapter(t.adapter||Nc.adapter,t)(t).then(function(s){return Bp(t),s.data=Np.call(t,t.transformResponse,s),s.headers=ys.from(s.headers),s},function(s){return jS(s)||(Bp(t),s&&s.response&&(s.response.data=Np.call(t,t.transformResponse,s.response),s.response.headers=ys.from(s.response.headers))),Promise.reject(s)})}const WS="1.13.2",bf={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{bf[t]=function(s){return typeof s===t||"a"+(e<1?"n ":" ")+t}});const By={};bf.transitional=function(e,i,s){function n(r,o){return"[Axios v"+WS+"] Transitional option '"+r+"'"+o+(s?". "+s:"")}return(r,o,l)=>{if(e===!1)throw new ot(n(o," has been removed"+(i?" in "+i:"")),ot.ERR_DEPRECATED);return i&&!By[o]&&(By[o]=!0,console.warn(n(o," has been deprecated since v"+i+" and will be removed in the near future"))),e?e(r,o,l):!0}};bf.spelling=function(e){return(i,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};function EI(t,e,i){if(typeof t!="object")throw new ot("options must be an object",ot.ERR_BAD_OPTION_VALUE);const s=Object.keys(t);let n=s.length;for(;n-- >0;){const r=s[n],o=e[r];if(o){const l=t[r],u=l===void 0||o(l,r,t);if(u!==!0)throw new ot("option "+r+" must be "+u,ot.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new ot("Unknown option "+r,ot.ERR_BAD_OPTION)}}const nd={assertOptions:EI,validators:bf},Dn=nd.validators;let ta=class{constructor(e){this.defaults=e||{},this.interceptors={request:new wy,response:new wy}}async request(e,i){try{return await this._request(e,i)}catch(s){if(s instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const r=n.stack?n.stack.replace(/^.+\n/,""):"";try{s.stack?r&&!String(s.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+r):s.stack=r}catch{}}throw s}}_request(e,i){typeof e=="string"?(i=i||{},i.url=e):i=e||{},i=la(this.defaults,i);const{transitional:s,paramsSerializer:n,headers:r}=i;s!==void 0&&nd.assertOptions(s,{silentJSONParsing:Dn.transitional(Dn.boolean),forcedJSONParsing:Dn.transitional(Dn.boolean),clarifyTimeoutError:Dn.transitional(Dn.boolean)},!1),n!=null&&(pe.isFunction(n)?i.paramsSerializer={serialize:n}:nd.assertOptions(n,{encode:Dn.function,serialize:Dn.function},!0)),i.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?i.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:i.allowAbsoluteUrls=!0),nd.assertOptions(i,{baseUrl:Dn.spelling("baseURL"),withXsrfToken:Dn.spelling("withXSRFToken")},!0),i.method=(i.method||this.defaults.method||"get").toLowerCase();let o=r&&pe.merge(r.common,r[i.method]);r&&pe.forEach(["delete","get","head","post","put","patch","common"],C=>{delete r[C]}),i.headers=ys.concat(o,r);const l=[];let u=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(i)===!1||(u=u&&x.synchronous,l.unshift(x.fulfilled,x.rejected))});const h=[];this.interceptors.response.forEach(function(x){h.push(x.fulfilled,x.rejected)});let d,m=0,_;if(!u){const C=[Ny.bind(this),void 0];for(C.unshift(...l),C.push(...h),_=C.length,d=Promise.resolve(i);m<_;)d=d.then(C[m++],C[m++]);return d}_=l.length;let T=i;for(;m<_;){const C=l[m++],x=l[m++];try{T=C(T)}catch(E){x.call(this,E);break}}try{d=Ny.call(this,T)}catch(C){return Promise.reject(C)}for(m=0,_=h.length;m<_;)d=d.then(h[m++],h[m++]);return d}getUri(e){e=la(this.defaults,e);const i=HS(e.baseURL,e.url,e.allowAbsoluteUrls);return BS(i,e.params,e.paramsSerializer)}};pe.forEach(["delete","get","head","options"],function(e){ta.prototype[e]=function(i,s){return this.request(la(s||{},{method:e,url:i,data:(s||{}).data}))}});pe.forEach(["post","put","patch"],function(e){function i(s){return function(r,o,l){return this.request(la(l||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}ta.prototype[e]=i(),ta.prototype[e+"Form"]=i(!0)});let AI=class GS{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(r){i=r});const s=this;this.promise.then(n=>{if(!s._listeners)return;let r=s._listeners.length;for(;r-- >0;)s._listeners[r](n);s._listeners=null}),this.promise.then=n=>{let r;const o=new Promise(l=>{s.subscribe(l),r=l}).then(n);return o.cancel=function(){s.unsubscribe(r)},o},e(function(r,o,l){s.reason||(s.reason=new Ml(r,o,l),i(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const i=this._listeners.indexOf(e);i!==-1&&this._listeners.splice(i,1)}toAbortSignal(){const e=new AbortController,i=s=>{e.abort(s)};return this.subscribe(i),e.signal.unsubscribe=()=>this.unsubscribe(i),e.signal}static source(){let e;return{token:new GS(function(n){e=n}),cancel:e}}};function DI(t){return function(i){return t.apply(null,i)}}function PI(t){return pe.isObject(t)&&t.isAxiosError===!0}const cg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(cg).forEach(([t,e])=>{cg[e]=t});function XS(t){const e=new ta(t),i=wS(ta.prototype.request,e);return pe.extend(i,ta.prototype,e,{allOwnKeys:!0}),pe.extend(i,e,null,{allOwnKeys:!0}),i.create=function(n){return XS(la(t,n))},i}const jt=XS(Nc);jt.Axios=ta;jt.CanceledError=Ml;jt.CancelToken=AI;jt.isCancel=jS;jt.VERSION=WS;jt.toFormData=vf;jt.AxiosError=ot;jt.Cancel=jt.CanceledError;jt.all=function(e){return Promise.all(e)};jt.spread=DI;jt.isAxiosError=PI;jt.mergeConfig=la;jt.AxiosHeaders=ys;jt.formToJSON=t=>US(pe.isHTMLForm(t)?new FormData(t):t);jt.getAdapter=$S.getAdapter;jt.HttpStatusCode=cg;jt.default=jt;const{Axios:LU,AxiosError:OU,CanceledError:MU,isCancel:RU,CancelToken:NU,VERSION:BU,all:FU,Cancel:UU,isAxiosError:jU,spread:zU,toFormData:HU,AxiosHeaders:VU,HttpStatusCode:qU,formToJSON:$U,getAdapter:WU,mergeConfig:GU}=jt;var Fp,Fy;function KS(){if(Fy)return Fp;Fy=1;function t(e){var i=typeof e;return e!=null&&(i=="object"||i=="function")}return Fp=t,Fp}var Up,Uy;function kI(){if(Uy)return Up;Uy=1;var t=typeof eo=="object"&&eo&&eo.Object===Object&&eo;return Up=t,Up}var jp,jy;function ZS(){if(jy)return jp;jy=1;var t=kI(),e=typeof self=="object"&&self&&self.Object===Object&&self,i=t||e||Function("return this")();return jp=i,jp}var zp,zy;function II(){if(zy)return zp;zy=1;var t=ZS(),e=function(){return t.Date.now()};return zp=e,zp}var Hp,Hy;function LI(){if(Hy)return Hp;Hy=1;var t=/\s/;function e(i){for(var s=i.length;s--&&t.test(i.charAt(s)););return s}return Hp=e,Hp}var Vp,Vy;function OI(){if(Vy)return Vp;Vy=1;var t=LI(),e=/^\s+/;function i(s){return s&&s.slice(0,t(s)+1).replace(e,"")}return Vp=i,Vp}var qp,qy;function YS(){if(qy)return qp;qy=1;var t=ZS(),e=t.Symbol;return qp=e,qp}var $p,$y;function MI(){if($y)return $p;$y=1;var t=YS(),e=Object.prototype,i=e.hasOwnProperty,s=e.toString,n=t?t.toStringTag:void 0;function r(o){var l=i.call(o,n),u=o[n];try{o[n]=void 0;var h=!0}catch{}var d=s.call(o);return h&&(l?o[n]=u:delete o[n]),d}return $p=r,$p}var Wp,Wy;function RI(){if(Wy)return Wp;Wy=1;var t=Object.prototype,e=t.toString;function i(s){return e.call(s)}return Wp=i,Wp}var Gp,Gy;function NI(){if(Gy)return Gp;Gy=1;var t=YS(),e=MI(),i=RI(),s="[object Null]",n="[object Undefined]",r=t?t.toStringTag:void 0;function o(l){return l==null?l===void 0?n:s:r&&r in Object(l)?e(l):i(l)}return Gp=o,Gp}var Xp,Xy;function BI(){if(Xy)return Xp;Xy=1;function t(e){return e!=null&&typeof e=="object"}return Xp=t,Xp}var Kp,Ky;function FI(){if(Ky)return Kp;Ky=1;var t=NI(),e=BI(),i="[object Symbol]";function s(n){return typeof n=="symbol"||e(n)&&t(n)==i}return Kp=s,Kp}var Zp,Zy;function UI(){if(Zy)return Zp;Zy=1;var t=OI(),e=KS(),i=FI(),s=NaN,n=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function u(h){if(typeof h=="number")return h;if(i(h))return s;if(e(h)){var d=typeof h.valueOf=="function"?h.valueOf():h;h=e(d)?d+"":d}if(typeof h!="string")return h===0?h:+h;h=t(h);var m=r.test(h);return m||o.test(h)?l(h.slice(2),m?2:8):n.test(h)?s:+h}return Zp=u,Zp}var Yp,Yy;function jI(){if(Yy)return Yp;Yy=1;var t=KS(),e=II(),i=UI(),s="Expected a function",n=Math.max,r=Math.min;function o(l,u,h){var d,m,_,T,C,x,E=0,P=!1,k=!1,I=!0;if(typeof l!="function")throw new TypeError(s);u=i(u)||0,t(h)&&(P=!!h.leading,k="maxWait"in h,_=k?n(i(h.maxWait)||0,u):_,I="trailing"in h?!!h.trailing:I);function F(J){var ae=d,ce=m;return d=m=void 0,E=J,T=l.apply(ce,ae),T}function z(J){return E=J,C=setTimeout(Z,u),P?F(J):T}function q(J){var ae=J-x,ce=J-E,le=u-ae;return k?r(le,_-ce):le}function U(J){var ae=J-x,ce=J-E;return x===void 0||ae>=u||ae<0||k&&ce>=_}function Z(){var J=e();if(U(J))return D(J);C=setTimeout(Z,q(J))}function D(J){return C=void 0,I&&d?F(J):(d=m=void 0,T)}function R(){C!==void 0&&clearTimeout(C),E=0,d=x=m=C=void 0}function Y(){return C===void 0?T:D(e())}function Q(){var J=e(),ae=U(J);if(d=arguments,m=this,x=J,ae){if(C===void 0)return z(x);if(k)return clearTimeout(C),C=setTimeout(Z,u),F(x)}return C===void 0&&(C=setTimeout(Z,u)),T}return Q.cancel=R,Q.flush=Y,Q}return Yp=o,Yp}var zI=jI();const Ga=ho(zI),Qy="static";function Jy(t,e,i=!1){let s="#3aa637";return i?e===!1?s="#9467BD":t===!1?s="#FF7F0E":t===!0&&(s="#2CA02C"):e===!1?s="#DC20E9":t===!1?s="#e96020":t===!0&&(s="#3aa637"),s}function HI(t=!1){return t?{level1:"#d73027",level2:"#fc8d59",level3:"#fee090",level4:"#4575b4",level5:"#91bfdb"}:{level1:"#0000e8",level2:"#6060e8",level3:"#b0b0e8",level4:"#578817",level5:"#57ee17"}}function VI(t){return t===!1?{densiteMin:25,densiteMax:45,p25:8,p50:17}:{densiteMin:10,densiteMax:12,p25:3,p50:6}}function xd(t,e,i=!1){let s="#959595";if(e===null||e==="N/A"||e==="")return s;const n=parseFloat((""+e).replace(",",".")),{level1:r,level2:o,level3:l,level4:u,level5:h}=HI(i),{densiteMin:d,densiteMax:m,p25:_,p50:T}=VI(t);return t===!1||t===!0?n>=m?h:n>=d?u:n<_?r:n<T?o:l:s}function Qp(t,e=!1){const i=["0","3","7","10","12"],s=["0","8","17","25","45"],n=[];let r,o,l=[];t?(n.push("&nbsp; accessibles  300 m maxi"),n.push("&nbsp;<b>Zone dense</b>"),l=i):(n.push("&nbsp; accessibles  1200 m maxi"),n.push("&nbsp;<b>Zone priurbaine</b>"),l=s),n.push(`<i style="background:${xd(!0,null,e)}"></i> non calcul`);for(let u=0;u<l.length;u++){r=l[u],o=l[u+1];let h=`${r}${o?`&ndash;${o}`:"+"}`,d=`<i style="opacity:0.4;background:${xd(t,r,e)}"></i> `;n.push(d+h)}return n.join("<br>")}const qI={name:"Isochrone",props:{msg:String,location:Object},components:{LMap:jP,LGeoJson:BP,LPolygon:KP,LIcon:UP,LMarker:WP,LTileLayer:YP,LControl:kP,LControlScale:MP,LControlLayers:LP},setup(){return{leafletMap:ui(null)}},created(){this.htmlLegend=Qp(!0,this.colorblindMode),console.log("Isochrone created - colorblindMode:",this.colorblindMode)},data(){const t=localStorage.getItem("colorblindMode");return{htmlLegend:null,leafletMap:null,loading:!1,showIsochrones:!1,showCarre:!0,showParcs:!1,showCadastre:!1,colorblindMode:t!==null?t==="true":!1,refreshKey:0,legendeDense:!0,zoom:14,minZoom:10,maxZoom:18,center:[50.6349747,3.046428],bounds:null,boundSwLat:0,boundSwLng:0,boundNeLat:0,boundNeLng:0,geojsonCadastre:null,geojsonCarre:null,geojsonIsochrone:null,geojsonParcs:null,annee:"2019",region:"9",com2co:"1",shareableUrl:null,fillColor:"#A0DCA0",tileProviders:[{name:"Carte OpenStreetMap",visible:!0,attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",maxZoom:19,minZoom:10},{name:"Carte WorldStreetMap",visible:!1,url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",attribution:"ArcGIS World Street Map (Esri)",maxZoom:19,minZoom:10},{name:"Satellite ArcGisOnline",visible:!1,url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attribution:'&copy; <a href="https://www.arcgis.com/">ArcGisOnline</a>',maxZoom:19,minZoom:10},{name:"Vues Arienne IGN",visible:!1,url:"https://data.geopf.fr/wmts?REQUEST=GetTile&SERVICE=WMTS&VERSION=1.0.0&STYLE=normal&TILEMATRIXSET=PM&FORMAT=image/jpeg&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}&LAYER=ORTHOIMAGERY.ORTHOPHOTOS",attribution:'&copy; <a href="https://geoservices.ign.fr/services-geoplateforme-diffusion">IGN GeoPortail</a> ',tileSize:256,maxZoom:18,minZoom:10}],addressIcon:CS.icon({iconUrl:"../assets/location.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34]})}},watch:{location:{handler(t){t&&(this.updateCenterAndZoom(t),this.updateRegionIfChanged(t),this.updateCom2coIfChanged(t))},immediate:!0,deep:!0},showParcs(t){this.$emit("parcs-visibility-changed",t)}},methods:{updateCenterAndZoom(t){t.lonX&&t.latY&&(this.center=[t.latY,t.lonX],t.locType==="city"?this.zoom=14:t.locType==="address"&&(this.zoom=17),this.debouncedFetchCommune(t.latY,t.lonX))},updateRegionIfChanged(t){t.regionId&&this.region!==t.regionId&&(this.region=t.regionId)},updateCom2coIfChanged(t){t.com2coId&&this.com2co!==t.com2coId&&(this.com2co=t.com2coId,this.callGeoJsonParcs(),this.callGeoJsonIsochrones(),this.callGeoJsonCarres(),this.callGeoJsonCadastre(),this.updateShareableUrl())},isFullscreen(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},requestFullscreen(t){const e=t.requestFullscreen||t.webkitRequestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen;e&&e.call(t)},exitFullscreen(){const t=document,e=t.exitFullscreen||t.webkitExitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen;e&&e.call(t)},toggleFullscreen(){const t=this.$refs.leafletMap.$el;this.isFullscreen()?this.exitFullscreen():this.requestFullscreen(t)},onColorModeChange(){localStorage.setItem("colorblindMode",this.colorblindMode.toString()),this.htmlLegend=Qp(this.legendeDense,this.colorblindMode),this.updateLayerStylesForColorMode(),this.$emit("colorblind-mode-changed",this.colorblindMode)},computeParcStyle(t){const e=Jy(t?.properties?.oms,t?.properties?.actif,this.colorblindMode);return{weight:1,color:e,fillColor:e,opacity:.6,fillOpacity:.5}},computeCarreStyle(t){return{weight:1,color:"#24216a",opacity:.2,fillColor:xd(t?.properties?.isDense,t?.properties?.squareMtePerCapitaOms,this.colorblindMode),fillOpacity:.4}},updateLayerStylesForColorMode(){try{const t=this.$refs.parcsLayer?.leafletObject;t&&typeof t.setStyle=="function"&&t.setStyle(i=>this.computeParcStyle(i));const e=this.$refs.carreLayer?.leafletObject;e&&typeof e.setStyle=="function"&&e.setStyle(i=>this.computeCarreStyle(i))}catch(t){console.warn("updateLayerStylesForColorMode error",t)}},getRootUrl(){const t="https://raw.githubusercontent.com/autmel/geoservice-data/refs/heads/main";return console.log("mode: "+Qy),t},isDynamic(){return Qy==="dynamic"},addTemporaryMarker(t,e){},onAnnee(){const t="?swLat="+this.boundSwLat+"&swLng="+this.boundSwLng+"&neLat="+this.boundNeLng+"&annee="+this.annee;this.callGeoJsonIsochrones(t),this.callGeoJsonCarres(t)},boundsUpdated(t){if(this.bounds=t,t._southWest.lat<this.boundSwLat||t._southWest.lng<this.boundSwLng||t._northEast.lat>this.boundNeLat||t._northEast.lng>this.boundNeLng){this.boundSwLat=t._southWest.lat,this.boundSwLng=t._southWest.lng,this.boundNeLat=t._northEast.lat,this.boundNeLng=t._northEast.lng;const e="?swLat="+this.boundSwLat+"&swLng="+this.boundSwLng+"&neLat="+this.boundNeLat+"&neLng="+this.boundNeLng+"&annee="+this.annee;console.log("boundsUpdated :"+e),this.callGeoJsonParcs(e),this.callGeoJsonIsochrones(e),this.callGeoJsonCarres(e),this.callGeoJsonCadastre(e);const i=(t._northEast.lat+t._southWest.lat)/2,s=(t._northEast.lng+t._southWest.lng)/2;this.debouncedFetchCommune(i,s)}},async fetchCommune(t,e){try{const i=this.legendeDense,n=(await jt.get("https://geo.api.gouv.fr/communes?fields=nom,code&format=json&lat="+t+"&lon="+e,{timeout:5e3})).data;if(!n||!n.length)return;const r=n[0].code,u=(await jt.get("https://raw.githubusercontent.com/autmel/geoservice-data/refs/heads/main/data/cities/densite.json",{timeout:5e3})).data.find(h=>h[r]!==void 0);if(u){const h=u[r];this.legendeDense=h==="1"||h==="2",i!==this.legendeDense&&(this.htmlLegend=Qp(this.legendeDense,this.colorblindMode))}}catch(i){console.error("Error fetching addresses:",i)}},debouncedFetchCommune:Ga(async function(t,e){await this.fetchCommune(t,e)},400),async fetchGeoJson(t){return await(await fetch(t)).json()},debouncedFetchIsochrone:Ga(async function(t,e){try{console.log("debouncedFetchIsochrone: "+t);const i=await this.fetchGeoJson(t);e(i)}catch(i){console.error("Error fetching GeoJSON:",i)}},380),async callGeoJsonIsochrones(t){const e=this.getRootUrl();let i="";this.isDynamic()?i=`${e}/map/park/area${t}`:i=`${e}/geojson/isochrones/${this.com2co}/isochrone_${this.annee}_${this.com2co}.json`,this.debouncedFetchIsochrone(i,s=>{this.geojsonIsochrone=s})},debouncedFetchParcs:Ga(async function(t,e){try{console.log("debouncedFetchParc: "+t);const i=await this.fetchGeoJson(t);e(i)}catch(i){console.error("Error fetching GeoJSON:",i)}},380),async callGeoJsonParcs(t){const e=this.getRootUrl();let i="";this.isDynamic()?i=`${e}/map/park/area${t}`:i=`${e}/geojson/parkOutline/${this.com2co}/parkOutline_${this.annee}_${this.com2co}.json`,console.log("callGeoJsonParcs URL: "+i),this.debouncedFetchParcs(i,s=>{this.geojsonParcs=s})},debouncedFetchCarre:Ga(async function(t,e){try{console.log("debouncedFetchCarre: "+t);const i=await this.fetchGeoJson(t);e(i)}catch(i){console.error("Error fetching GeoJSON:",i)}},400),async callGeoJsonCarres(t){const e=this.getRootUrl();let i="";this.isDynamic()?i=`${e}/map/insee/carre200m/area${t}`:i=`${e}/geojson/carres/${this.com2co}/carre_${this.annee}_${this.com2co}.json`,this.debouncedFetchCarre(i,s=>{this.geojsonCarre=s})},debouncedFetchCadastre:Ga(async function(t,e){try{console.log("debouncedFetchCadastre: "+t);const i=await this.fetchGeoJson(t);e(i)}catch(i){console.error("Error fetching GeoJSON:",i)}},450),async callGeoJsonCadastre(t){const e=this.getRootUrl();let i="";this.isDynamic()?i=`${e}/map/cadastre/area${t}`:i=`${e}/data/cadastres/${this.region}/cadastre_c2c_${this.com2co}.json`,this.debouncedFetchCadastre(i,s=>{this.geojsonCadastre=s})},onDetailPark(t,e){try{const i=this.colorblindMode;if(console.log("onDetailPark - colorblindMode:",i),!t||!t.properties){console.warn("onDetailPark: feature or feature.properties is missing",t);return}let s=t.properties.oms,n="";s===!1&&(n="");let r=t.properties.surface,o=" m";if(t.properties.surface)if(t.properties.surface>1e3&&s!==!1&&(n=""),t.properties.surface>1e4){const d=t.properties.surface/1e4;r=new Intl.NumberFormat("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(d),o=" ha"}else r=new Intl.NumberFormat("fr-FR").format(Math.round(t.properties.surface));const l=t.properties.name||"N/A",u=t.properties.city||"N/A";e.bindTooltip("<div>Nom: "+n+" "+l+"</div><div>Surface: "+r+o+"</div><div>Ville: "+u+"</div>",{permanent:!1,sticky:!0});const h=Jy(t.properties.oms,t.properties.actif,i);e.setStyle&&typeof e.setStyle=="function"&&e.setStyle({fillColor:h,color:h})}catch(i){console.error("Error in onDetailPark:",i,t)}}},mounted(){const t=document.getElementById("customControl");t&&(t.innerHTML="<p>Custom HTML content loaded on map load</p>"),this.$emit("colorblind-mode-changed",this.colorblindMode)},computed:{detailParcs(){return{onEachFeature:(t,e)=>this.onDetailPark(t,e)}},detailIsochrone(){return{onEachFeature:this.onDetailIsochrone}},detailCadastre(){return{onEachFeature:this.onDetailCadastre}},detailCarre(){return{onEachFeature:this.onDetailCarre}},styleIsochroneFunction(){const t=this.fillColor;return()=>({weight:2,color:"#305C30",opacity:.05,fillColor:t,fillOpacity:.01})},styleParcFunction(){return t=>this.computeParcStyle(t)},styleCarreFunction(){return t=>this.computeCarreStyle(t)},styleCadastreFunction(){return()=>({weight:3,color:"#9B6800",opacity:.95,fillColor:"#FFFFBB",fillOpacity:.07})},onDetailIsochrone(){return(t,e)=>{e.bindTooltip("<div>Quartier:"+t.properties.quartier+"</div><div>"+t.properties.name+" (id:"+t.properties.id+")</div><div>"+t.properties.people+" hab. pour "+t.properties.area+" m</div>",{permanent:!1,sticky:!0}),e.setStyle&&typeof e.setStyle=="function"&&(t.properties.oms?e.setStyle({weight:2,color:"#8eac8e",opacity:.7,fillColor:t.properties.fillColor,fillOpacity:.09}):e.setStyle({fillColor:t.properties.fillColor,opacity:0,fillOpacity:0}))}},onDetailCarre(){const t=this.refreshKey,e=this.colorblindMode;return console.log("onDetailCarre computed - colorblindMode:",e,"refreshKey:",t),(i,s)=>{s.on("mouseover",function(n){const r=n.target.feature,o="<h4>Donnes carroyes</h4><div><b>id Inspire</b>:"+r.properties.idInspire+"</div><div><br/><b>"+r.properties.commune+"</b></br><b>"+r.properties.people+"</b> habitants</div>";let l="";r.properties.surfaceTotalParkOms===null||r.properties.surfaceTotalParkOms===""?l="<div style='text-align: center'><b><i>Non calcul</i></b></div>":(l="<div><b> "+r.properties.popParkIncludedOms+"</b> ont accs et <b> "+r.properties.popParkExcludedOms+"</b> sans</div><div>Surface accessible: <b>"+r.properties.surfaceTotalParkOms+" m</b></div><div>partags avec :<b> "+r.properties.popSquareShareOms+"  </b>hab.</div><div>Soit : <b>"+r.properties.squareMtePerCapitaOms+" m/hab</b></div><div style='padding-top: 1em;'><i><u>Parcs accessibles:</u><br />",r.properties.commentParks!==""?l+=r.properties.commentParks+"</i></div>":l+="Aucun</i></div>"),n.target.setStyle&&typeof n.target.setStyle=="function"&&n.target.setStyle({weight:5}),document.getElementById("dataDetail").innerHTML=o+l}),s.on("mouseout",function(n){n.target.setStyle&&typeof n.target.setStyle=="function"&&n.target.setStyle({weight:2})}),s.setStyle&&typeof s.setStyle=="function"&&s.setStyle({fillColor:xd(i.properties.isDense,i.properties.squareMtePerCapitaOms,e),fillOpacity:.4})}},onDetailCadastre(){return(t,e)=>{e.bindTooltip("<div>INSEE: "+t.properties.idInsee+"</div><div>Commune: "+t.properties.nom+"</div>")}}},beforeMount(){const t=this;t.loading=!0,Promise.all([this.callGeoJsonParcs(""),this.callGeoJsonCarres(""),this.callGeoJsonIsochrones(""),this.callGeoJsonCadastre("")]).then(e=>{t.loading=!1})},updateShareableUrl(){const t=localStorage.getItem("location-selected");if(t)try{const e=JSON.parse(t);this.shareableUrl=Kx(e)}catch(e){console.error("Erreur lors de la cration du lien shareable:",e),this.shareableUrl=null}},copyShareableUrl(){this.shareableUrl&&navigator.clipboard.writeText(this.shareableUrl).then(()=>{console.log("Lien copi dans le presse-papiers:",this.shareableUrl)}).catch(t=>{console.error("Erreur lors de la copie:",t)})}},$I={class:"leaflet-control leaflet-bar"},WI={id:"customControl",class:"dataDetail"},GI={id:"legend",class:"legend"},XI=["innerHTML"];function KI(t,e,i,s,n,r){const o=Pi("l-tile-layer"),l=Pi("l-control-layers"),u=Pi("l-control"),h=Pi("l-control-scale"),d=Pi("l-geo-json"),m=Pi("l-map");return St(),Lt("div",null,[e[16]||(e[16]=we("label",{for:"annee"},"Anne",-1)),Ds(we("select",{id:"annee",onChange:e[0]||(e[0]=(..._)=>r.onAnnee&&r.onAnnee(..._)),class:"compact-select","onUpdate:modelValue":e[1]||(e[1]=_=>n.annee=_)},[...e[14]||(e[14]=[we("option",{value:"2019",selected:"selected"},"2019",-1),we("option",{value:"2017"},"2017",-1),we("option",{value:"2015"},"2015",-1)])],544),[[td,n.annee]]),e[17]||(e[17]=we("label",{for:"checkbox",title:"Affiche les contours des parcs."}," | Parcs ",-1)),Ds(we("input",{id:"checkbox","onUpdate:modelValue":e[2]||(e[2]=_=>n.showParcs=_),type:"checkbox"},null,512),[[Su,n.showParcs]]),e[18]||(e[18]=we("label",{for:"checkbox",title:"Affiche les isochrones pour visualiser les zones d'accessibilit aux parcs."}," | Isochrones ",-1)),Ds(we("input",{id:"checkbox","onUpdate:modelValue":e[3]||(e[3]=_=>n.showIsochrones=_),type:"checkbox"},null,512),[[Su,n.showIsochrones]]),e[19]||(e[19]=we("label",{for:"cbCarre",title:"Affiche les donnes carroyes (grille de 200 m) pour visualiser la surface de parcs accessible par habitant."}," | Carrs INSEE ",-1)),Ds(we("input",{id:"cbCarre","onUpdate:modelValue":e[4]||(e[4]=_=>n.showCarre=_),type:"checkbox"},null,512),[[Su,n.showCarre]]),e[20]||(e[20]=we("label",{for:"cbCadastre",title:"Affiche les limites communales issues du cadastre."}," | Cadastre",-1)),Ds(we("input",{id:"cbCadastre","onUpdate:modelValue":e[5]||(e[5]=_=>n.showCadastre=_),type:"checkbox"},null,512),[[Su,n.showCadastre]]),e[21]||(e[21]=we("label",{for:"cbColorblind",title:"Adapte les couleurs pour amliorer la lisibilit pour les personnes atteintes de daltonisme."}," | Mode daltonien ",-1)),Ds(we("input",{id:"cbColorblind","onUpdate:modelValue":e[6]||(e[6]=_=>n.colorblindMode=_),type:"checkbox",onChange:e[7]||(e[7]=(..._)=>r.onColorModeChange&&r.onColorModeChange(..._))},null,544),[[Su,n.colorblindMode]]),e[22]||(e[22]=we("br",null,null,-1)),dt(m,{ref:"leafletMap",zoom:n.zoom,center:n.center,"min-zoom":n.minZoom,"max-zoom":n.maxZoom,style:{height:"700px",width:"95%"},"onUpdate:bounds":r.boundsUpdated},{default:yr(()=>[(St(!0),Lt(vi,null,ea(n.tileProviders,_=>(St(),r_(o,{key:_.name,name:_.name,visible:_.visible,url:_.url,attribution:_.attribution,"layer-type":"base"},null,8,["name","visible","url","attribution"]))),128)),dt(l,{position:"topright"}),dt(u,{position:"topleft"},{default:yr(()=>[we("div",$I,[we("a",{href:"#",class:"leaflet-control-fullscreen-button leaflet-bar-part",title:"Afficher en plein cran",onClick:e[8]||(e[8]=zA((..._)=>r.toggleFullscreen&&r.toggleFullscreen(..._),["prevent"])),style:{width:"36px",height:"36px",display:"flex","align-items":"center","justify-content":"center","font-size":"20px"}},"  ")])]),_:1}),dt(u,{position:"bottomright"},{default:yr(()=>[...e[15]||(e[15]=[we("div",{id:"dataDetail",class:"dataDetail"},[we("h4",null,"Dtail des donnes"),Hs(" "),we("br"),Hs(" ")],-1)])]),_:1}),dt(h,{position:"bottomleft",imperial:!1,metric:!0}),dt(u,{position:"bottomleft"},{default:yr(()=>[we("div",WI,[we("h4",{onDblclick:e[9]||(e[9]=(..._)=>t.copyShareableUrl&&t.copyShareableUrl(..._)),style:{cursor:"pointer"}},"m/habitant de parcs",32),we("div",GI,[we("div",{id:"legendContent",innerHTML:n.htmlLegend},null,8,XI)])])]),_:1}),dt(d,{visible:n.showParcs,"onUpdate:visible":e[10]||(e[10]=_=>n.showParcs=_),"layer-type":"overlay",name:"Parcs",ref:"parcsLayer",geojson:n.geojsonParcs,options:r.detailParcs,"options-style":r.styleParcFunction},null,8,["visible","geojson","options","options-style"]),dt(d,{visible:n.showIsochrones,"onUpdate:visible":e[11]||(e[11]=_=>n.showIsochrones=_),"layer-type":"overlay",name:"Isochrones",geojson:n.geojsonIsochrone,options:r.detailIsochrone,"options-style":r.styleIsochroneFunction},null,8,["visible","geojson","options","options-style"]),dt(d,{visible:n.showCarre,"onUpdate:visible":e[12]||(e[12]=_=>n.showCarre=_),"layer-type":"overlay",name:"Donnes carroyes",ref:"carreLayer",geojson:n.geojsonCarre,options:r.detailCarre,"options-style":r.styleCarreFunction},null,8,["visible","geojson","options","options-style"]),dt(d,{visible:n.showCadastre,"onUpdate:visible":e[13]||(e[13]=_=>n.showCadastre=_),"layer-type":"overlay",name:"Cadastre",geojson:n.geojsonCadastre,options:r.detailCadastre,"options-style":r.styleCadastreFunction},null,8,["visible","geojson","options","options-style"])]),_:1},8,["zoom","center","min-zoom","max-zoom","onUpdate:bounds"])])}const ZI=Kn(qI,[["render",KI]]),YI={props:{modelValue:[String,Number],fetchItems:Function,placeholder:String,disabled:Boolean,displaySearchAddress:{type:Boolean,default:!0}},data(){return{search:"",items:[],showDropdown:!1}},computed:{filteredItems(){return this.items.filter(t=>t.label.toLowerCase().includes(this.search.toLowerCase()))}},watch:{modelValue(t){const e=this.items.find(i=>i.id===t);this.search=e?e.label:""}},methods:{async onInput(){this.showDropdown=!0;const t=await this.fetchItems(this.search);this.items=t||[],this.$emit("update:modelValue",null)},selectItem(t){this.search=t.label,this.showDropdown=!1,this.$emit("update:modelValue",t.id);const e=t.id.split(", "),i={locType:"address",lonX:e[0],latY:e[1]};this.$emit("location-selected",i)}}},QI={key:0,class:"relative flex-1"},JI=["placeholder","disabled"],eL={key:0,class:"absolute bg-white border border-gray-300 rounded-md shadow-lg mt-1 w-full max-h-[200px] overflow-y-auto z-[10000] list-none m-0 p-0"},tL=["onClick"],iL={class:"flex-1"},sL={key:0,class:"text-xs text-gray-600 bg-gray-100 px-2 py-1 rounded font-medium whitespace-nowrap"};function nL(t,e,i,s,n,r){return i.displaySearchAddress?(St(),Lt("div",QI,[Ds(we("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>n.search=o),onInput:e[1]||(e[1]=(...o)=>r.onInput&&r.onInput(...o)),placeholder:i.placeholder,disabled:i.disabled,class:"input-field text-sm disabled:bg-gray-100 disabled:cursor-not-allowed disabled:opacity-60"},null,40,JI),[[FA,n.search]]),r.filteredItems.length&&n.showDropdown?(St(),Lt("ul",eL,[(St(!0),Lt(vi,null,ea(r.filteredItems,o=>(St(),Lt("li",{key:o.id,onClick:l=>r.selectItem(o),class:"px-3 py-2 cursor-pointer flex justify-between items-center gap-3 hover:bg-gray-100 transition-colors"},[we("span",iL,Ps(o.label),1),o.score?(St(),Lt("span",sL,Ps(Math.round(o.score*100))+"% ",1)):Qu("",!0)],8,tL))),128))])):Qu("",!0)])):Qu("",!0)}const rL=Kn(YI,[["render",nL]]),oL={props:{displaySearchAddress:{type:Boolean,default:!0}},components:{Autocomplete:rL},data(){return{fromLocalStorage:!1,regions:[],com2cos:[],cities:[],addresses:[],selectedRegion:null,selectedCom2co:null,selectedCom2coName:null,selectedCity:null,selectedCityName:null,selectedCityInseeCode:null,locX:null,locY:null,selectedAddress:null}},async mounted(){const t=localStorage.getItem("location-selected");let e=null;t&&t!=="{}"?(this.fromLocalStorage=!0,e=JSON.parse(t),this.selectedRegion=e.regionId,this.selectedCom2co=e.com2coId,this.selectedCity=e.cityId,this.selectedCityName=e.cityName,this.selectedCityInseeCode=e.cityInsee,this.locX=e.lonX,this.locY=e.latY):(this.selectedRegion="9",this.selectedCom2co="1",this.selectedCity="2878"),await this.fetchRegions(),await this.fetchCom2cos(),e&&this.$emit("update-location",e)},computed:{selectedCityInsee(){return this.cities.find(t=>t.id===this.selectedCityId)||{}},selectedAddressCoordinates(){return this.selectedAddress.coordinates}},methods:{async fetchRegions(){try{const t=await jt.get("https://raw.githubusercontent.com/autmel/geoservice-data/refs/heads/main/data/regions.json");if(this.regions=t.data,await this.$nextTick(),this.selectedRegion){const e=this.regions.find(i=>i.id===this.selectedRegion);if(e){const i={target:{options:[{text:e.name}],selectedIndex:0}};await this.fetchCom2cos(i)}}else this.com2cos=[],this.selectedCom2co=null,this.cities=[],this.selectedCity=null}catch(t){this.regions=[],this.selectedRegion=null,console.error("Error fetching regions:",t)}},async fetchCom2cos(){if(this.selectedRegion)try{const t=await jt.get(`https://raw.githubusercontent.com/autmel/geoservice-data/refs/heads/main/data/com2cos/${this.selectedRegion}/com2cos_${this.selectedRegion}.json`);if(this.com2cos=t.data,await this.$nextTick(),this.selectedCom2co){const e=this.com2cos.find(i=>i.id===this.selectedCom2co);e&&(this.selectedCom2coName=e.name),await this.fetchCities(null)}else this.cities=[],this.selectedCity=null}catch(t){this.com2cos=[],this.selectedCom2co=null,console.error("Error fetching com2cos:",t)}},async fetchCities(t){if(this.selectedCom2co)try{if(t&&t.target&&t.target.options){const i=t.target.options[t.target.selectedIndex];this.selectedCom2coName=i.text}else if(!this.selectedCom2coName){const i=this.com2cos.find(s=>s.id===this.selectedCom2co);i&&(this.selectedCom2coName=i.name)}const e=await jt.get(`https://raw.githubusercontent.com/autmel/geoservice-data/refs/heads/main/data/cities/com2co/cities_${this.selectedCom2co}.json`);if(this.cities=e.data,await this.$nextTick(),console.log("fetchCities - selectedCity:",this.selectedCity,"type:",typeof this.selectedCity),console.log("First city in data:",this.cities[0]),this.selectedCity){const i=this.cities.find(s=>String(s.id)===String(this.selectedCity));if(console.log("City found:",i),i){this.selectedCityName=`${i.name} (${i.inseeCode})`,this.selectedCityInseeCode=i.inseeCode,this.locX=i.lonX,this.locY=i.latY,console.log("City loaded:",{selectedCityInseeCode:this.selectedCityInseeCode,selectedCityName:this.selectedCityName,locX:this.locX,locY:this.locY});const s={locType:"city",regionId:this.selectedRegion,com2coId:this.selectedCom2co,com2coName:this.selectedCom2coName,cityId:this.selectedCity,cityName:this.selectedCityName,cityInsee:this.selectedCityInseeCode,lonX:this.locX,latY:this.locY};localStorage.setItem("location-selected",JSON.stringify(s)),this.$emit("update-location",s),this.fromLocalStorage&&(await this.fetchAddresses(""),this.fromLocalStorage=!1)}}}catch(e){this.cities=[],this.selectedCity=null,this.selectedCityInseeCode=null,console.error("Error fetching cities:",e)}},fetchAddresses:Ga(async function(t){if(!t||t.length<3)return[];if(!this.selectedCity&&!this.selectedCityInseeCode)return[];try{const i=(await jt.get(`https://api-adresse.data.gouv.fr/search/?citycode=${this.selectedCityInseeCode}&q=`+encodeURI(t),{timeout:5e3})).data;return this.addresses=i.features.map(s=>({id:s.geometry.coordinates.join(", "),label:s.properties.label,score:s.properties.score})),this.addresses}catch(e){return console.error("Error fetching addresses:",e),[]}},350),handleCityChange(t){const e=t.target.options[t.target.selectedIndex];this.selectedCityName=e.text,this.selectedCityInseeCode=e.getAttribute("data-insee-code"),this.locX=e.getAttribute("data-longitude-x"),this.locY=e.getAttribute("data-latitude-y");const i={locType:"city",regionId:this.selectedRegion,com2coId:this.selectedCom2co,com2coName:this.selectedCom2coName,cityId:this.selectedCity,cityName:this.selectedCityName,cityInsee:this.selectedCityInseeCode,lonX:this.locX,latY:this.locY};localStorage.setItem("location-selected",JSON.stringify(i)),this.$emit("update-location",i)},handleLocationSelected(t){const e={...t,regionId:this.selectedRegion,com2coId:this.selectedCom2co,com2coName:this.selectedCom2coName,cityId:this.selectedCity,cityName:this.selectedCityName,cityInsee:this.selectedCityInseeCode};this.$emit("update-location",e)}}},aL={class:"grid grid-cols-1 md:grid-cols-4 gap-2 p-2 bg-gray-50 rounded-md"},lL=["value"],uL=["disabled"],cL=["value"],hL=["disabled"],dL=["value","data-insee-code","data-longitude-x","data-latitude-y"];function fL(t,e,i,s,n,r){const o=Pi("Autocomplete");return St(),Lt("div",aL,[Ds(we("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>n.selectedRegion=l),onChange:e[1]||(e[1]=(...l)=>r.fetchCom2cos&&r.fetchCom2cos(...l)),tabindex:"1",class:"select-field"},[(St(!0),Lt(vi,null,ea(n.regions,l=>(St(),Lt("option",{key:l.id,value:l.id},Ps(l.name),9,lL))),128))],544),[[td,n.selectedRegion]]),Ds(we("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>n.selectedCom2co=l),onChange:e[3]||(e[3]=(...l)=>r.fetchCities&&r.fetchCities(...l)),disabled:!n.selectedRegion,tabindex:"2",class:"select-field disabled:bg-gray-100 disabled:cursor-not-allowed disabled:opacity-60"},[(St(!0),Lt(vi,null,ea(n.com2cos,l=>(St(),Lt("option",{key:l.id,value:l.id},Ps(l.name),9,cL))),128))],40,uL),[[td,n.selectedCom2co]]),Ds(we("select",{"onUpdate:modelValue":e[4]||(e[4]=l=>n.selectedCity=l),onChange:e[5]||(e[5]=(...l)=>r.handleCityChange&&r.handleCityChange(...l)),disabled:!n.selectedCom2co,tabindex:"3",class:"select-field disabled:bg-gray-100 disabled:cursor-not-allowed disabled:opacity-60"},[(St(!0),Lt(vi,null,ea(n.cities,l=>(St(),Lt("option",{key:l.id,value:l.id,"data-insee-code":l.inseeCode,"data-longitude-x":l.lonX,"data-latitude-y":l.latY},Ps(l.name)+" ("+Ps(l.inseeCode)+") ",9,dL))),128))],40,hL),[[td,n.selectedCity]]),dt(o,{modelValue:n.selectedAddress,"onUpdate:modelValue":e[6]||(e[6]=l=>n.selectedAddress=l),"fetch-items":r.fetchAddresses,placeholder:"Aller  une adresse",displaySearchAddress:i.displaySearchAddress,disabled:!n.selectedCity,tabindex:"4",onLocationSelected:r.handleLocationSelected,class:"w-full"},null,8,["modelValue","fetch-items","displaySearchAddress","disabled","onLocationSelected"])])}const QS=Kn(oL,[["render",fL]]),pL={name:"AppCarte",components:{SearchLocation:QS,Isochrone:ZI},data(){return{location:null,colorblindMode:!1,showParcsLegend:!1}},computed:{getLowColor1(){return this.colorblindMode?"#d73027":"#0000e8"},getLowColor2(){return this.colorblindMode?"#fc8d59":"#6060e8"},getLowColor3(){return this.colorblindMode?"#fee090":"#b0b0e8"},getHighColor1(){return this.colorblindMode?"#91bfdb":"#57ee17"},getHighColor2(){return this.colorblindMode?"#4575b4":"#578817"},getParcComptabiliseColor(){return this.colorblindMode?"#2CA02C":"#3aa637"},getParcNonComptabiliseColor(){return this.colorblindMode?"#FF7F0E":"#e96020"},getParcFuturOuDetruitColor(){return this.colorblindMode?"#9467BD":"#DC20E9"}},methods:{updateLocation(t){this.location=t},updateColorblindMode(t){this.colorblindMode=t},updateParcsLegend(t){this.showParcsLegend=t}}},mL={class:"text-left align-top"},gL={class:"border-2 border-transparent mt-4"},_L={class:"text-center relative z-10"},yL={class:"mt-4"},vL={class:"border-2 border-transparent"},bL={class:"text-left"},TL={class:"px-1"},xL={class:"px-1"},SL={class:"px-1"},CL={class:"px-1"},wL={class:"px-1"},EL={id:"legend-parks-1"},AL={class:"px-1",colspan:"3"},DL={id:"legend-parks-2"},PL={class:"px-1",colspan:"3"},kL={id:"legend-parks-3"},IL={class:"px-1",colspan:"3"};function LL(t,e,i,s,n,r){const o=Pi("SearchLocation"),l=Pi("Isochrone");return St(),Lt(vi,null,[we("div",mL,[dt(o,{onUpdateLocation:r.updateLocation,onLocationSelected:r.updateLocation,displaySearchAddress:!0},null,8,["onUpdateLocation","onLocationSelected"]),we("div",gL,[we("div",_L,[dt(l,{msg:"Cartographie des parcs",location:n.location,onColorblindModeChanged:r.updateColorblindMode,onParcsVisibilityChanged:r.updateParcsLegend},null,8,["location","onColorblindModeChanged","onParcsVisibilityChanged"])])])]),we("div",yL,[we("div",vL,[we("table",bL,[we("tbody",null,[we("tr",null,[e[0]||(e[0]=we("td",{class:"pr-2"},"Prconisations OMS non respectes :",-1)),we("td",TL,[we("div",{class:"w-5 aspect-square opacity-40",style:un(`background-color: ${r.getLowColor1};`)},null,4)]),we("td",xL,[we("div",{class:"w-5 aspect-square opacity-40",style:un(`background-color: ${r.getLowColor2};`)},null,4)]),we("td",SL,[we("div",{class:"w-5 aspect-square opacity-40",style:un(`background-color: ${r.getLowColor3};`)},null,4)])]),we("tr",null,[e[1]||(e[1]=we("td",{class:"pr-2"},"Prconisations OMS respectes :",-1)),we("td",CL,[we("div",{class:"w-5 aspect-square opacity-40",style:un(`background-color: ${r.getHighColor1};`)},null,4)]),we("td",wL,[we("div",{class:"w-5 aspect-square opacity-40",style:un(`background-color: ${r.getHighColor2};`)},null,4)]),e[2]||(e[2]=we("td",null,"",-1))]),e[6]||(e[6]=we("tr",null,[we("td",{colspan:"4"}," : plus de 1000 m")],-1)),e[7]||(e[7]=we("tr",null,[we("td",{colspan:"4"}," : non comptabilis comme un parc")],-1)),Ds(we("tr",EL,[e[3]||(e[3]=we("td",{class:"pr-2"},"Parcs comptabilis :",-1)),we("td",AL,[we("div",{class:"w-5 aspect-square opacity-40",style:un(`background-color: ${r.getParcComptabiliseColor}`)},null,4)])],512),[[Ap,n.showParcsLegend]]),Ds(we("tr",DL,[e[4]||(e[4]=we("td",{class:"pr-2"},"Parcs non comptabilis :",-1)),we("td",PL,[we("div",{class:"w-5 aspect-square opacity-40",style:un(`background-color: ${r.getParcNonComptabiliseColor}`)},null,4)])],512),[[Ap,n.showParcsLegend]]),Ds(we("tr",kL,[e[5]||(e[5]=we("td",{class:"pr-2"},"Parcs futur ou dtruit :",-1)),we("td",IL,[we("div",{class:"w-5 aspect-square opacity-40",style:un(`background-color: ${r.getParcFuturOuDetruitColor}`)},null,4)])],512),[[Ap,n.showParcsLegend]])])])])])],64)}const OL=Kn(pL,[["render",LL]]);/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function Bc(t){return t+.5|0}const to=(t,e,i)=>Math.max(Math.min(t,i),e);function Uu(t){return to(Bc(t*2.55),0,255)}function ro(t){return to(Bc(t*255),0,255)}function fr(t){return to(Bc(t/2.55)/100,0,1)}function ev(t){return to(Bc(t*100),0,100)}const js={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},hg=[..."0123456789ABCDEF"],ML=t=>hg[t&15],RL=t=>hg[(t&240)>>4]+hg[t&15],Lh=t=>(t&240)>>4===(t&15),NL=t=>Lh(t.r)&&Lh(t.g)&&Lh(t.b)&&Lh(t.a);function BL(t){var e=t.length,i;return t[0]==="#"&&(e===4||e===5?i={r:255&js[t[1]]*17,g:255&js[t[2]]*17,b:255&js[t[3]]*17,a:e===5?js[t[4]]*17:255}:(e===7||e===9)&&(i={r:js[t[1]]<<4|js[t[2]],g:js[t[3]]<<4|js[t[4]],b:js[t[5]]<<4|js[t[6]],a:e===9?js[t[7]]<<4|js[t[8]]:255})),i}const FL=(t,e)=>t<255?e(t):"";function UL(t){var e=NL(t)?ML:RL;return t?"#"+e(t.r)+e(t.g)+e(t.b)+FL(t.a,e):void 0}const jL=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function JS(t,e,i){const s=e*Math.min(i,1-i),n=(r,o=(r+t/30)%12)=>i-s*Math.max(Math.min(o-3,9-o,1),-1);return[n(0),n(8),n(4)]}function zL(t,e,i){const s=(n,r=(n+t/60)%6)=>i-i*e*Math.max(Math.min(r,4-r,1),0);return[s(5),s(3),s(1)]}function HL(t,e,i){const s=JS(t,1,.5);let n;for(e+i>1&&(n=1/(e+i),e*=n,i*=n),n=0;n<3;n++)s[n]*=1-e-i,s[n]+=e;return s}function VL(t,e,i,s,n){return t===n?(e-i)/s+(e<i?6:0):e===n?(i-t)/s+2:(t-e)/s+4}function b_(t){const i=t.r/255,s=t.g/255,n=t.b/255,r=Math.max(i,s,n),o=Math.min(i,s,n),l=(r+o)/2;let u,h,d;return r!==o&&(d=r-o,h=l>.5?d/(2-r-o):d/(r+o),u=VL(i,s,n,d,r),u=u*60+.5),[u|0,h||0,l]}function T_(t,e,i,s){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,i,s)).map(ro)}function x_(t,e,i){return T_(JS,t,e,i)}function qL(t,e,i){return T_(HL,t,e,i)}function $L(t,e,i){return T_(zL,t,e,i)}function e2(t){return(t%360+360)%360}function WL(t){const e=jL.exec(t);let i=255,s;if(!e)return;e[5]!==s&&(i=e[6]?Uu(+e[5]):ro(+e[5]));const n=e2(+e[2]),r=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?s=qL(n,r,o):e[1]==="hsv"?s=$L(n,r,o):s=x_(n,r,o),{r:s[0],g:s[1],b:s[2],a:i}}function GL(t,e){var i=b_(t);i[0]=e2(i[0]+e),i=x_(i),t.r=i[0],t.g=i[1],t.b=i[2]}function XL(t){if(!t)return;const e=b_(t),i=e[0],s=ev(e[1]),n=ev(e[2]);return t.a<255?`hsla(${i}, ${s}%, ${n}%, ${fr(t.a)})`:`hsl(${i}, ${s}%, ${n}%)`}const tv={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},iv={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function KL(){const t={},e=Object.keys(iv),i=Object.keys(tv);let s,n,r,o,l;for(s=0;s<e.length;s++){for(o=l=e[s],n=0;n<i.length;n++)r=i[n],l=l.replace(r,tv[r]);r=parseInt(iv[o],16),t[l]=[r>>16&255,r>>8&255,r&255]}return t}let Oh;function ZL(t){Oh||(Oh=KL(),Oh.transparent=[0,0,0,0]);const e=Oh[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const YL=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function QL(t){const e=YL.exec(t);let i=255,s,n,r;if(e){if(e[7]!==s){const o=+e[7];i=e[8]?Uu(o):to(o*255,0,255)}return s=+e[1],n=+e[3],r=+e[5],s=255&(e[2]?Uu(s):to(s,0,255)),n=255&(e[4]?Uu(n):to(n,0,255)),r=255&(e[6]?Uu(r):to(r,0,255)),{r:s,g:n,b:r,a:i}}}function JL(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${fr(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Jp=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Ua=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function eO(t,e,i){const s=Ua(fr(t.r)),n=Ua(fr(t.g)),r=Ua(fr(t.b));return{r:ro(Jp(s+i*(Ua(fr(e.r))-s))),g:ro(Jp(n+i*(Ua(fr(e.g))-n))),b:ro(Jp(r+i*(Ua(fr(e.b))-r))),a:t.a+i*(e.a-t.a)}}function Mh(t,e,i){if(t){let s=b_(t);s[e]=Math.max(0,Math.min(s[e]+s[e]*i,e===0?360:1)),s=x_(s),t.r=s[0],t.g=s[1],t.b=s[2]}}function t2(t,e){return t&&Object.assign(e||{},t)}function sv(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=ro(t[3]))):(e=t2(t,{r:0,g:0,b:0,a:1}),e.a=ro(e.a)),e}function tO(t){return t.charAt(0)==="r"?QL(t):WL(t)}class gc{constructor(e){if(e instanceof gc)return e;const i=typeof e;let s;i==="object"?s=sv(e):i==="string"&&(s=BL(e)||ZL(e)||tO(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=t2(this._rgb);return e&&(e.a=fr(e.a)),e}set rgb(e){this._rgb=sv(e)}rgbString(){return this._valid?JL(this._rgb):void 0}hexString(){return this._valid?UL(this._rgb):void 0}hslString(){return this._valid?XL(this._rgb):void 0}mix(e,i){if(e){const s=this.rgb,n=e.rgb;let r;const o=i===r?.5:i,l=2*o-1,u=s.a-n.a,h=((l*u===-1?l:(l+u)/(1+l*u))+1)/2;r=1-h,s.r=255&h*s.r+r*n.r+.5,s.g=255&h*s.g+r*n.g+.5,s.b=255&h*s.b+r*n.b+.5,s.a=o*s.a+(1-o)*n.a,this.rgb=s}return this}interpolate(e,i){return e&&(this._rgb=eO(this._rgb,e._rgb,i)),this}clone(){return new gc(this.rgb)}alpha(e){return this._rgb.a=ro(e),this}clearer(e){const i=this._rgb;return i.a*=1-e,this}greyscale(){const e=this._rgb,i=Bc(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=i,this}opaquer(e){const i=this._rgb;return i.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Mh(this._rgb,2,e),this}darken(e){return Mh(this._rgb,2,-e),this}saturate(e){return Mh(this._rgb,1,e),this}desaturate(e){return Mh(this._rgb,1,-e),this}rotate(e){return GL(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function lr(){}const iO=(()=>{let t=0;return()=>t++})();function Mt(t){return t==null}function di(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function _t(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Xs(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Pn(t,e){return Xs(t)?t:e}function gt(t,e){return typeof t>"u"?e:t}const sO=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,i2=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Vt(t,e,i){if(t&&typeof t.call=="function")return t.apply(i,e)}function Pt(t,e,i,s){let n,r,o;if(di(t))for(r=t.length,n=0;n<r;n++)e.call(i,t[n],n);else if(_t(t))for(o=Object.keys(t),r=o.length,n=0;n<r;n++)e.call(i,t[o[n]],o[n])}function Sd(t,e){let i,s,n,r;if(!t||!e||t.length!==e.length)return!1;for(i=0,s=t.length;i<s;++i)if(n=t[i],r=e[i],n.datasetIndex!==r.datasetIndex||n.index!==r.index)return!1;return!0}function Cd(t){if(di(t))return t.map(Cd);if(_t(t)){const e=Object.create(null),i=Object.keys(t),s=i.length;let n=0;for(;n<s;++n)e[i[n]]=Cd(t[i[n]]);return e}return t}function s2(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function nO(t,e,i,s){if(!s2(t))return;const n=e[t],r=i[t];_t(n)&&_t(r)?_c(n,r,s):e[t]=Cd(r)}function _c(t,e,i){const s=di(e)?e:[e],n=s.length;if(!_t(t))return t;i=i||{};const r=i.merger||nO;let o;for(let l=0;l<n;++l){if(o=s[l],!_t(o))continue;const u=Object.keys(o);for(let h=0,d=u.length;h<d;++h)r(u[h],t,o,i)}return t}function ec(t,e){return _c(t,e,{merger:rO})}function rO(t,e,i){if(!s2(t))return;const s=e[t],n=i[t];_t(s)&&_t(n)?ec(s,n):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Cd(n))}const nv={"":t=>t,x:t=>t.x,y:t=>t.y};function oO(t){const e=t.split("."),i=[];let s="";for(const n of e)s+=n,s.endsWith("\\")?s=s.slice(0,-1)+".":(i.push(s),s="");return i}function aO(t){const e=oO(t);return i=>{for(const s of e){if(s==="")break;i=i&&i[s]}return i}}function ua(t,e){return(nv[e]||(nv[e]=aO(e)))(t)}function S_(t){return t.charAt(0).toUpperCase()+t.slice(1)}const yc=t=>typeof t<"u",lo=t=>typeof t=="function",rv=(t,e)=>{if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0};function lO(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Ot=Math.PI,li=2*Ot,wd=Number.POSITIVE_INFINITY,uO=Ot/180,fi=Ot/2,Bo=Ot/4,ov=Ot*2/3,n2=Math.log10,oo=Math.sign;function rd(t,e,i){return Math.abs(t-e)<i}function av(t){const e=Math.round(t);t=rd(t,e,t/1e3)?e:t;const i=Math.pow(10,Math.floor(n2(t))),s=t/i;return(s<=1?1:s<=2?2:s<=5?5:10)*i}function cO(t){const e=[],i=Math.sqrt(t);let s;for(s=1;s<i;s++)t%s===0&&(e.push(s),e.push(t/s));return i===(i|0)&&e.push(i),e.sort((n,r)=>n-r).pop(),e}function hO(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Ed(t){return!hO(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function dO(t,e){const i=Math.round(t);return i-e<=t&&i+e>=t}function fO(t,e,i){let s,n,r;for(s=0,n=t.length;s<n;s++)r=t[s][i],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function vr(t){return t*(Ot/180)}function pO(t){return t*(180/Ot)}function lv(t){if(!Xs(t))return;let e=1,i=0;for(;Math.round(t*e)/e!==t;)e*=10,i++;return i}function r2(t,e){const i=e.x-t.x,s=e.y-t.y,n=Math.sqrt(i*i+s*s);let r=Math.atan2(s,i);return r<-.5*Ot&&(r+=li),{angle:r,distance:n}}function mO(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Mn(t){return(t%li+li)%li}function Ad(t,e,i,s){const n=Mn(t),r=Mn(e),o=Mn(i),l=Mn(r-n),u=Mn(o-n),h=Mn(n-r),d=Mn(n-o);return n===r||n===o||s&&r===o||l>u&&h<d}function ps(t,e,i){return Math.max(e,Math.min(i,t))}function gO(t){return ps(t,-32768,32767)}function Xo(t,e,i,s=1e-6){return t>=Math.min(e,i)-s&&t<=Math.max(e,i)+s}function C_(t,e,i){i=i||(o=>t[o]<e);let s=t.length-1,n=0,r;for(;s-n>1;)r=n+s>>1,i(r)?n=r:s=r;return{lo:n,hi:s}}const dg=(t,e,i,s)=>C_(t,i,s?n=>{const r=t[n][e];return r<i||r===i&&t[n+1][e]===i}:n=>t[n][e]<i),_O=(t,e,i)=>C_(t,i,s=>t[s][e]>=i);function yO(t,e,i){let s=0,n=t.length;for(;s<n&&t[s]<e;)s++;for(;n>s&&t[n-1]>i;)n--;return s>0||n<t.length?t.slice(s,n):t}const o2=["push","pop","shift","splice","unshift"];function vO(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),o2.forEach(i=>{const s="_onData"+S_(i),n=t[i];Object.defineProperty(t,i,{configurable:!0,enumerable:!1,value(...r){const o=n.apply(this,r);return t._chartjs.listeners.forEach(l=>{typeof l[s]=="function"&&l[s](...r)}),o}})})}function uv(t,e){const i=t._chartjs;if(!i)return;const s=i.listeners,n=s.indexOf(e);n!==-1&&s.splice(n,1),!(s.length>0)&&(o2.forEach(r=>{delete t[r]}),delete t._chartjs)}function a2(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const l2=(function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame})();function u2(t,e){let i=[],s=!1;return function(...n){i=n,s||(s=!0,l2.call(window,()=>{s=!1,t.apply(e,i)}))}}function bO(t,e){let i;return function(...s){return e?(clearTimeout(i),i=setTimeout(t,e,s)):t.apply(this,s),e}}const w_=t=>t==="start"?"left":t==="end"?"right":"center",Ai=(t,e,i)=>t==="start"?e:t==="end"?i:(e+i)/2,TO=(t,e,i,s)=>t===(s?"left":"right")?i:t==="center"?(e+i)/2:e,Rh=t=>t===0||t===1,cv=(t,e,i)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*li/i)),hv=(t,e,i)=>Math.pow(2,-10*t)*Math.sin((t-e)*li/i)+1,tc={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*fi)+1,easeOutSine:t=>Math.sin(t*fi),easeInOutSine:t=>-.5*(Math.cos(Ot*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Rh(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Rh(t)?t:cv(t,.075,.3),easeOutElastic:t=>Rh(t)?t:hv(t,.075,.3),easeInOutElastic(t){return Rh(t)?t:t<.5?.5*cv(t*2,.1125,.45):.5+.5*hv(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-tc.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?tc.easeInBounce(t*2)*.5:tc.easeOutBounce(t*2-1)*.5+.5};function c2(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function dv(t){return c2(t)?t:new gc(t)}function em(t){return c2(t)?t:new gc(t).saturate(.5).darken(.1).hexString()}const xO=["x","y","borderWidth","radius","tension"],SO=["color","borderColor","backgroundColor"];function CO(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:SO},numbers:{type:"number",properties:xO}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function wO(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const fv=new Map;function EO(t,e){e=e||{};const i=t+JSON.stringify(e);let s=fv.get(i);return s||(s=new Intl.NumberFormat(t,e),fv.set(i,s)),s}function E_(t,e,i){return EO(e,i).format(t)}const AO={values(t){return di(t)?t:""+t},numeric(t,e,i){if(t===0)return"0";const s=this.chart.options.locale;let n,r=t;if(i.length>1){const h=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(h<1e-4||h>1e15)&&(n="scientific"),r=DO(t,i)}const o=n2(Math.abs(r)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),u={notation:n,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(u,this.options.ticks.format),E_(t,s,u)}};function DO(t,e){let i=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(i)>=1&&t!==Math.floor(t)&&(i=t-Math.floor(t)),i}var h2={formatters:AO};function PO(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,i)=>i.lineWidth,tickColor:(e,i)=>i.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:h2.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const ca=Object.create(null),fg=Object.create(null);function ic(t,e){if(!e)return t;const i=e.split(".");for(let s=0,n=i.length;s<n;++s){const r=i[s];t=t[r]||(t[r]=Object.create(null))}return t}function tm(t,e,i){return typeof e=="string"?_c(ic(t,e),i):_c(ic(t,""),e)}class kO{constructor(e,i){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,n)=>em(n.backgroundColor),this.hoverBorderColor=(s,n)=>em(n.borderColor),this.hoverColor=(s,n)=>em(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(i)}set(e,i){return tm(this,e,i)}get(e){return ic(this,e)}describe(e,i){return tm(fg,e,i)}override(e,i){return tm(ca,e,i)}route(e,i,s,n){const r=ic(this,e),o=ic(this,s),l="_"+i;Object.defineProperties(r,{[l]:{value:r[i],writable:!0},[i]:{enumerable:!0,get(){const u=this[l],h=o[n];return _t(u)?Object.assign({},h,u):gt(u,h)},set(u){this[l]=u}}})}apply(e){e.forEach(i=>i(this))}}var ni=new kO({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[CO,wO,PO]);function IO(t){return!t||Mt(t.size)||Mt(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function pv(t,e,i,s,n){let r=e[n];return r||(r=e[n]=t.measureText(n).width,i.push(n)),r>s&&(s=r),s}function Fo(t,e,i){const s=t.currentDevicePixelRatio,n=i!==0?Math.max(i/2,.5):0;return Math.round((e-n)*s)/s+n}function mv(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function gv(t,e,i,s){d2(t,e,i,s,null)}function d2(t,e,i,s,n){let r,o,l,u,h,d,m,_;const T=e.pointStyle,C=e.rotation,x=e.radius;let E=(C||0)*uO;if(T&&typeof T=="object"&&(r=T.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){t.save(),t.translate(i,s),t.rotate(E),t.drawImage(T,-T.width/2,-T.height/2,T.width,T.height),t.restore();return}if(!(isNaN(x)||x<=0)){switch(t.beginPath(),T){default:n?t.ellipse(i,s,n/2,x,0,0,li):t.arc(i,s,x,0,li),t.closePath();break;case"triangle":d=n?n/2:x,t.moveTo(i+Math.sin(E)*d,s-Math.cos(E)*x),E+=ov,t.lineTo(i+Math.sin(E)*d,s-Math.cos(E)*x),E+=ov,t.lineTo(i+Math.sin(E)*d,s-Math.cos(E)*x),t.closePath();break;case"rectRounded":h=x*.516,u=x-h,o=Math.cos(E+Bo)*u,m=Math.cos(E+Bo)*(n?n/2-h:u),l=Math.sin(E+Bo)*u,_=Math.sin(E+Bo)*(n?n/2-h:u),t.arc(i-m,s-l,h,E-Ot,E-fi),t.arc(i+_,s-o,h,E-fi,E),t.arc(i+m,s+l,h,E,E+fi),t.arc(i-_,s+o,h,E+fi,E+Ot),t.closePath();break;case"rect":if(!C){u=Math.SQRT1_2*x,d=n?n/2:u,t.rect(i-d,s-u,2*d,2*u);break}E+=Bo;case"rectRot":m=Math.cos(E)*(n?n/2:x),o=Math.cos(E)*x,l=Math.sin(E)*x,_=Math.sin(E)*(n?n/2:x),t.moveTo(i-m,s-l),t.lineTo(i+_,s-o),t.lineTo(i+m,s+l),t.lineTo(i-_,s+o),t.closePath();break;case"crossRot":E+=Bo;case"cross":m=Math.cos(E)*(n?n/2:x),o=Math.cos(E)*x,l=Math.sin(E)*x,_=Math.sin(E)*(n?n/2:x),t.moveTo(i-m,s-l),t.lineTo(i+m,s+l),t.moveTo(i+_,s-o),t.lineTo(i-_,s+o);break;case"star":m=Math.cos(E)*(n?n/2:x),o=Math.cos(E)*x,l=Math.sin(E)*x,_=Math.sin(E)*(n?n/2:x),t.moveTo(i-m,s-l),t.lineTo(i+m,s+l),t.moveTo(i+_,s-o),t.lineTo(i-_,s+o),E+=Bo,m=Math.cos(E)*(n?n/2:x),o=Math.cos(E)*x,l=Math.sin(E)*x,_=Math.sin(E)*(n?n/2:x),t.moveTo(i-m,s-l),t.lineTo(i+m,s+l),t.moveTo(i+_,s-o),t.lineTo(i-_,s+o);break;case"line":o=n?n/2:Math.cos(E)*x,l=Math.sin(E)*x,t.moveTo(i-o,s-l),t.lineTo(i+o,s+l);break;case"dash":t.moveTo(i,s),t.lineTo(i+Math.cos(E)*(n?n/2:x),s+Math.sin(E)*x);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function f2(t,e,i){return i=i||.5,!e||t&&t.x>e.left-i&&t.x<e.right+i&&t.y>e.top-i&&t.y<e.bottom+i}function A_(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function D_(t){t.restore()}function LO(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Mt(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function OO(t,e,i,s,n){if(n.strikethrough||n.underline){const r=t.measureText(s),o=e-r.actualBoundingBoxLeft,l=e+r.actualBoundingBoxRight,u=i-r.actualBoundingBoxAscent,h=i+r.actualBoundingBoxDescent,d=n.strikethrough?(u+h)/2:h;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=n.decorationWidth||2,t.moveTo(o,d),t.lineTo(l,d),t.stroke()}}function MO(t,e){const i=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=i}function vc(t,e,i,s,n,r={}){const o=di(e)?e:[e],l=r.strokeWidth>0&&r.strokeColor!=="";let u,h;for(t.save(),t.font=n.string,LO(t,r),u=0;u<o.length;++u)h=o[u],r.backdrop&&MO(t,r.backdrop),l&&(r.strokeColor&&(t.strokeStyle=r.strokeColor),Mt(r.strokeWidth)||(t.lineWidth=r.strokeWidth),t.strokeText(h,i,s,r.maxWidth)),t.fillText(h,i,s,r.maxWidth),OO(t,i,s,h,r),s+=Number(n.lineHeight);t.restore()}function Dd(t,e){const{x:i,y:s,w:n,h:r,radius:o}=e;t.arc(i+o.topLeft,s+o.topLeft,o.topLeft,1.5*Ot,Ot,!0),t.lineTo(i,s+r-o.bottomLeft),t.arc(i+o.bottomLeft,s+r-o.bottomLeft,o.bottomLeft,Ot,fi,!0),t.lineTo(i+n-o.bottomRight,s+r),t.arc(i+n-o.bottomRight,s+r-o.bottomRight,o.bottomRight,fi,0,!0),t.lineTo(i+n,s+o.topRight),t.arc(i+n-o.topRight,s+o.topRight,o.topRight,0,-fi,!0),t.lineTo(i+o.topLeft,s)}const RO=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,NO=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function BO(t,e){const i=(""+t).match(RO);if(!i||i[1]==="normal")return e*1.2;switch(t=+i[2],i[3]){case"px":return t;case"%":t/=100;break}return e*t}const FO=t=>+t||0;function P_(t,e){const i={},s=_t(e),n=s?Object.keys(e):e,r=_t(t)?s?o=>gt(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of n)i[o]=FO(r(o));return i}function p2(t){return P_(t,{top:"y",right:"x",bottom:"y",left:"x"})}function il(t){return P_(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Ks(t){const e=p2(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Li(t,e){t=t||{},e=e||ni.font;let i=gt(t.size,e.size);typeof i=="string"&&(i=parseInt(i,10));let s=gt(t.style,e.style);s&&!(""+s).match(NO)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const n={family:gt(t.family,e.family),lineHeight:BO(gt(t.lineHeight,e.lineHeight),i),size:i,style:s,weight:gt(t.weight,e.weight),string:""};return n.string=IO(n),n}function Nh(t,e,i,s){let n,r,o;for(n=0,r=t.length;n<r;++n)if(o=t[n],o!==void 0&&o!==void 0)return o}function UO(t,e,i){const{min:s,max:n}=t,r=i2(e,(n-s)/2),o=(l,u)=>i&&l===0?0:l+u;return{min:o(s,-Math.abs(r)),max:o(n,r)}}function Rl(t,e){return Object.assign(Object.create(t),e)}function k_(t,e=[""],i,s,n=()=>t[0]){const r=i||t;typeof s>"u"&&(s=y2("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:r,_fallback:s,_getTarget:n,override:l=>k_([l,...t],e,r,s)};return new Proxy(o,{deleteProperty(l,u){return delete l[u],delete l._keys,delete t[0][u],!0},get(l,u){return g2(l,u,()=>GO(u,e,t,l))},getOwnPropertyDescriptor(l,u){return Reflect.getOwnPropertyDescriptor(l._scopes[0],u)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(l,u){return yv(l).includes(u)},ownKeys(l){return yv(l)},set(l,u,h){const d=l._storage||(l._storage=n());return l[u]=d[u]=h,delete l._keys,!0}})}function vl(t,e,i,s){const n={_cacheable:!1,_proxy:t,_context:e,_subProxy:i,_stack:new Set,_descriptors:m2(t,s),setContext:r=>vl(t,r,i,s),override:r=>vl(t.override(r),e,i,s)};return new Proxy(n,{deleteProperty(r,o){return delete r[o],delete t[o],!0},get(r,o,l){return g2(r,o,()=>zO(r,o,l))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(r,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(r,o,l){return t[o]=l,delete r[o],!0}})}function m2(t,e={scriptable:!0,indexable:!0}){const{_scriptable:i=e.scriptable,_indexable:s=e.indexable,_allKeys:n=e.allKeys}=t;return{allKeys:n,scriptable:i,indexable:s,isScriptable:lo(i)?i:()=>i,isIndexable:lo(s)?s:()=>s}}const jO=(t,e)=>t?t+S_(e):e,I_=(t,e)=>_t(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function g2(t,e,i){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const s=i();return t[e]=s,s}function zO(t,e,i){const{_proxy:s,_context:n,_subProxy:r,_descriptors:o}=t;let l=s[e];return lo(l)&&o.isScriptable(e)&&(l=HO(e,l,t,i)),di(l)&&l.length&&(l=VO(e,l,t,o.isIndexable)),I_(e,l)&&(l=vl(l,n,r&&r[e],o)),l}function HO(t,e,i,s){const{_proxy:n,_context:r,_subProxy:o,_stack:l}=i;if(l.has(t))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+t);l.add(t);let u=e(r,o||s);return l.delete(t),I_(t,u)&&(u=L_(n._scopes,n,t,u)),u}function VO(t,e,i,s){const{_proxy:n,_context:r,_subProxy:o,_descriptors:l}=i;if(typeof r.index<"u"&&s(t))return e[r.index%e.length];if(_t(e[0])){const u=e,h=n._scopes.filter(d=>d!==u);e=[];for(const d of u){const m=L_(h,n,t,d);e.push(vl(m,r,o&&o[t],l))}}return e}function _2(t,e,i){return lo(t)?t(e,i):t}const qO=(t,e)=>t===!0?e:typeof t=="string"?ua(e,t):void 0;function $O(t,e,i,s,n){for(const r of e){const o=qO(i,r);if(o){t.add(o);const l=_2(o._fallback,i,n);if(typeof l<"u"&&l!==i&&l!==s)return l}else if(o===!1&&typeof s<"u"&&i!==s)return null}return!1}function L_(t,e,i,s){const n=e._rootScopes,r=_2(e._fallback,i,s),o=[...t,...n],l=new Set;l.add(s);let u=_v(l,o,i,r||i,s);return u===null||typeof r<"u"&&r!==i&&(u=_v(l,o,r,u,s),u===null)?!1:k_(Array.from(l),[""],n,r,()=>WO(e,i,s))}function _v(t,e,i,s,n){for(;i;)i=$O(t,e,i,s,n);return i}function WO(t,e,i){const s=t._getTarget();e in s||(s[e]={});const n=s[e];return di(n)&&_t(i)?i:n||{}}function GO(t,e,i,s){let n;for(const r of e)if(n=y2(jO(r,t),i),typeof n<"u")return I_(t,n)?L_(i,s,t,n):n}function y2(t,e){for(const i of e){if(!i)continue;const s=i[t];if(typeof s<"u")return s}}function yv(t){let e=t._keys;return e||(e=t._keys=XO(t._scopes)),e}function XO(t){const e=new Set;for(const i of t)for(const s of Object.keys(i).filter(n=>!n.startsWith("_")))e.add(s);return Array.from(e)}function O_(){return typeof window<"u"&&typeof document<"u"}function M_(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Pd(t,e,i){let s;return typeof t=="string"?(s=parseInt(t,10),t.indexOf("%")!==-1&&(s=s/100*e.parentNode[i])):s=t,s}const Tf=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function KO(t,e){return Tf(t).getPropertyValue(e)}const ZO=["top","right","bottom","left"];function ia(t,e,i){const s={};i=i?"-"+i:"";for(let n=0;n<4;n++){const r=ZO[n];s[r]=parseFloat(t[e+"-"+r+i])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const YO=(t,e,i)=>(t>0||e>0)&&(!i||!i.shadowRoot);function QO(t,e){const i=t.touches,s=i&&i.length?i[0]:t,{offsetX:n,offsetY:r}=s;let o=!1,l,u;if(YO(n,r,t.target))l=n,u=r;else{const h=e.getBoundingClientRect();l=s.clientX-h.left,u=s.clientY-h.top,o=!0}return{x:l,y:u,box:o}}function Vo(t,e){if("native"in t)return t;const{canvas:i,currentDevicePixelRatio:s}=e,n=Tf(i),r=n.boxSizing==="border-box",o=ia(n,"padding"),l=ia(n,"border","width"),{x:u,y:h,box:d}=QO(t,i),m=o.left+(d&&l.left),_=o.top+(d&&l.top);let{width:T,height:C}=e;return r&&(T-=o.width+l.width,C-=o.height+l.height),{x:Math.round((u-m)/T*i.width/s),y:Math.round((h-_)/C*i.height/s)}}function JO(t,e,i){let s,n;if(e===void 0||i===void 0){const r=t&&M_(t);if(!r)e=t.clientWidth,i=t.clientHeight;else{const o=r.getBoundingClientRect(),l=Tf(r),u=ia(l,"border","width"),h=ia(l,"padding");e=o.width-h.width-u.width,i=o.height-h.height-u.height,s=Pd(l.maxWidth,r,"clientWidth"),n=Pd(l.maxHeight,r,"clientHeight")}}return{width:e,height:i,maxWidth:s||wd,maxHeight:n||wd}}const io=t=>Math.round(t*10)/10;function eM(t,e,i,s){const n=Tf(t),r=ia(n,"margin"),o=Pd(n.maxWidth,t,"clientWidth")||wd,l=Pd(n.maxHeight,t,"clientHeight")||wd,u=JO(t,e,i);let{width:h,height:d}=u;if(n.boxSizing==="content-box"){const _=ia(n,"border","width"),T=ia(n,"padding");h-=T.width+_.width,d-=T.height+_.height}return h=Math.max(0,h-r.width),d=Math.max(0,s?h/s:d-r.height),h=io(Math.min(h,o,u.maxWidth)),d=io(Math.min(d,l,u.maxHeight)),h&&!d&&(d=io(h/2)),(e!==void 0||i!==void 0)&&s&&u.height&&d>u.height&&(d=u.height,h=io(Math.floor(d*s))),{width:h,height:d}}function vv(t,e,i){const s=e||1,n=io(t.height*s),r=io(t.width*s);t.height=io(t.height),t.width=io(t.width);const o=t.canvas;return o.style&&(i||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==s||o.height!==n||o.width!==r?(t.currentDevicePixelRatio=s,o.height=n,o.width=r,t.ctx.setTransform(s,0,0,s,0,0),!0):!1}const tM=(function(){let t=!1;try{const e={get passive(){return t=!0,!1}};O_()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t})();function bv(t,e){const i=KO(t,e),s=i&&i.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}const iM=function(t,e){return{x(i){return t+t+e-i},setWidth(i){e=i},textAlign(i){return i==="center"?i:i==="right"?"left":"right"},xPlus(i,s){return i-s},leftForLtr(i,s){return i-s}}},sM=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function sl(t,e,i){return t?iM(e,i):sM()}function v2(t,e){let i,s;(e==="ltr"||e==="rtl")&&(i=t.canvas.style,s=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",e,"important"),t.prevTextDirection=s)}function b2(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Bh(t,e,i){return t.options.clip?t[i]:e[i]}function nM(t,e){const{xScale:i,yScale:s}=t;return i&&s?{left:Bh(i,e,"left"),right:Bh(i,e,"right"),top:Bh(s,e,"top"),bottom:Bh(s,e,"bottom")}:e}function rM(t,e){const i=e._clip;if(i.disabled)return!1;const s=nM(e,t.chartArea);return{left:i.left===!1?0:s.left-(i.left===!0?0:i.left),right:i.right===!1?t.width:s.right+(i.right===!0?0:i.right),top:i.top===!1?0:s.top-(i.top===!0?0:i.top),bottom:i.bottom===!1?t.height:s.bottom+(i.bottom===!0?0:i.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class oM{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,i,s,n){const r=i.listeners[n],o=i.duration;r.forEach(l=>l({chart:e,initial:i.initial,numSteps:o,currentStep:Math.min(s-i.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=l2.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let i=0;this._charts.forEach((s,n)=>{if(!s.running||!s.items.length)return;const r=s.items;let o=r.length-1,l=!1,u;for(;o>=0;--o)u=r[o],u._active?(u._total>s.duration&&(s.duration=u._total),u.tick(e),l=!0):(r[o]=r[r.length-1],r.pop());l&&(n.draw(),this._notify(n,s,e,"progress")),r.length||(s.running=!1,this._notify(n,s,e,"complete"),s.initial=!1),i+=r.length}),this._lastDate=e,i===0&&(this._running=!1)}_getAnims(e){const i=this._charts;let s=i.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},i.set(e,s)),s}listen(e,i,s){this._getAnims(e).listeners[i].push(s)}add(e,i){!i||!i.length||this._getAnims(e).items.push(...i)}has(e){return this._getAnims(e).items.length>0}start(e){const i=this._charts.get(e);i&&(i.running=!0,i.start=Date.now(),i.duration=i.items.reduce((s,n)=>Math.max(s,n._duration),0),this._refresh())}running(e){if(!this._running)return!1;const i=this._charts.get(e);return!(!i||!i.running||!i.items.length)}stop(e){const i=this._charts.get(e);if(!i||!i.items.length)return;const s=i.items;let n=s.length-1;for(;n>=0;--n)s[n].cancel();i.items=[],this._notify(e,i,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var cr=new oM;const Tv="transparent",aM={boolean(t,e,i){return i>.5?e:t},color(t,e,i){const s=dv(t||Tv),n=s.valid&&dv(e||Tv);return n&&n.valid?n.mix(s,i).hexString():e},number(t,e,i){return t+(e-t)*i}};class lM{constructor(e,i,s,n){const r=i[s];n=Nh([e.to,n,r,e.from]);const o=Nh([e.from,r,n]);this._active=!0,this._fn=e.fn||aM[e.type||typeof o],this._easing=tc[e.easing]||tc.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=i,this._prop=s,this._from=o,this._to=n,this._promises=void 0}active(){return this._active}update(e,i,s){if(this._active){this._notify(!1);const n=this._target[this._prop],r=s-this._start,o=this._duration-r;this._start=s,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=Nh([e.to,i,n,e.from]),this._from=Nh([e.from,n,i])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const i=e-this._start,s=this._duration,n=this._prop,r=this._from,o=this._loop,l=this._to;let u;if(this._active=r!==l&&(o||i<s),!this._active){this._target[n]=l,this._notify(!0);return}if(i<0){this._target[n]=r;return}u=i/s%2,u=o&&u>1?2-u:u,u=this._easing(Math.min(1,Math.max(0,u))),this._target[n]=this._fn(r,l,u)}wait(){const e=this._promises||(this._promises=[]);return new Promise((i,s)=>{e.push({res:i,rej:s})})}_notify(e){const i=e?"res":"rej",s=this._promises||[];for(let n=0;n<s.length;n++)s[n][i]()}}class T2{constructor(e,i){this._chart=e,this._properties=new Map,this.configure(i)}configure(e){if(!_t(e))return;const i=Object.keys(ni.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(n=>{const r=e[n];if(!_t(r))return;const o={};for(const l of i)o[l]=r[l];(di(r.properties)&&r.properties||[n]).forEach(l=>{(l===n||!s.has(l))&&s.set(l,o)})})}_animateOptions(e,i){const s=i.options,n=cM(e,s);if(!n)return[];const r=this._createAnimations(n,s);return s.$shared&&uM(e.options.$animations,s).then(()=>{e.options=s},()=>{}),r}_createAnimations(e,i){const s=this._properties,n=[],r=e.$animations||(e.$animations={}),o=Object.keys(i),l=Date.now();let u;for(u=o.length-1;u>=0;--u){const h=o[u];if(h.charAt(0)==="$")continue;if(h==="options"){n.push(...this._animateOptions(e,i));continue}const d=i[h];let m=r[h];const _=s.get(h);if(m)if(_&&m.active()){m.update(_,d,l);continue}else m.cancel();if(!_||!_.duration){e[h]=d;continue}r[h]=m=new lM(_,e,h,d),n.push(m)}return n}update(e,i){if(this._properties.size===0){Object.assign(e,i);return}const s=this._createAnimations(e,i);if(s.length)return cr.add(this._chart,s),!0}}function uM(t,e){const i=[],s=Object.keys(e);for(let n=0;n<s.length;n++){const r=t[s[n]];r&&r.active()&&i.push(r.wait())}return Promise.all(i)}function cM(t,e){if(!e)return;let i=t.options;if(!i){t.options=e;return}return i.$shared&&(t.options=i=Object.assign({},i,{$shared:!1,$animations:{}})),i}function xv(t,e){const i=t&&t.options||{},s=i.reverse,n=i.min===void 0?e:0,r=i.max===void 0?e:0;return{start:s?r:n,end:s?n:r}}function hM(t,e,i){if(i===!1)return!1;const s=xv(t,i),n=xv(e,i);return{top:n.end,right:s.end,bottom:n.start,left:s.start}}function dM(t){let e,i,s,n;return _t(t)?(e=t.top,i=t.right,s=t.bottom,n=t.left):e=i=s=n=t,{top:e,right:i,bottom:s,left:n,disabled:t===!1}}function x2(t,e){const i=[],s=t._getSortedDatasetMetas(e);let n,r;for(n=0,r=s.length;n<r;++n)i.push(s[n].index);return i}function Sv(t,e,i,s={}){const n=t.keys,r=s.mode==="single";let o,l,u,h;if(e===null)return;let d=!1;for(o=0,l=n.length;o<l;++o){if(u=+n[o],u===i){if(d=!0,s.all)continue;break}h=t.values[u],Xs(h)&&(r||e===0||oo(e)===oo(h))&&(e+=h)}return!d&&!s.all?0:e}function fM(t,e){const{iScale:i,vScale:s}=e,n=i.axis==="x"?"x":"y",r=s.axis==="x"?"x":"y",o=Object.keys(t),l=new Array(o.length);let u,h,d;for(u=0,h=o.length;u<h;++u)d=o[u],l[u]={[n]:d,[r]:t[d]};return l}function im(t,e){const i=t&&t.options.stacked;return i||i===void 0&&e.stack!==void 0}function pM(t,e,i){return`${t.id}.${e.id}.${i.stack||i.type}`}function mM(t){const{min:e,max:i,minDefined:s,maxDefined:n}=t.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:n?i:Number.POSITIVE_INFINITY}}function gM(t,e,i){const s=t[e]||(t[e]={});return s[i]||(s[i]={})}function Cv(t,e,i,s){for(const n of e.getMatchingVisibleMetas(s).reverse()){const r=t[n.index];if(i&&r>0||!i&&r<0)return n.index}return null}function wv(t,e){const{chart:i,_cachedMeta:s}=t,n=i._stacks||(i._stacks={}),{iScale:r,vScale:o,index:l}=s,u=r.axis,h=o.axis,d=pM(r,o,s),m=e.length;let _;for(let T=0;T<m;++T){const C=e[T],{[u]:x,[h]:E}=C,P=C._stacks||(C._stacks={});_=P[h]=gM(n,d,x),_[l]=E,_._top=Cv(_,o,!0,s.type),_._bottom=Cv(_,o,!1,s.type);const k=_._visualValues||(_._visualValues={});k[l]=E}}function sm(t,e){const i=t.scales;return Object.keys(i).filter(s=>i[s].axis===e).shift()}function _M(t,e){return Rl(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function yM(t,e,i){return Rl(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:i,index:e,mode:"default",type:"data"})}function Eu(t,e){const i=t.controller.index,s=t.vScale&&t.vScale.axis;if(s){e=e||t._parsed;for(const n of e){const r=n._stacks;if(!r||r[s]===void 0||r[s][i]===void 0)return;delete r[s][i],r[s]._visualValues!==void 0&&r[s]._visualValues[i]!==void 0&&delete r[s]._visualValues[i]}}}const nm=t=>t==="reset"||t==="none",Ev=(t,e)=>e?t:Object.assign({},t),vM=(t,e,i)=>t&&!e.hidden&&e._stacked&&{keys:x2(i,!0),values:null};class R_{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,i){this.chart=e,this._ctx=e.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=im(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Eu(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,i=this._cachedMeta,s=this.getDataset(),n=(m,_,T,C)=>m==="x"?_:m==="r"?C:T,r=i.xAxisID=gt(s.xAxisID,sm(e,"x")),o=i.yAxisID=gt(s.yAxisID,sm(e,"y")),l=i.rAxisID=gt(s.rAxisID,sm(e,"r")),u=i.indexAxis,h=i.iAxisID=n(u,r,o,l),d=i.vAxisID=n(u,o,r,l);i.xScale=this.getScaleForId(r),i.yScale=this.getScaleForId(o),i.rScale=this.getScaleForId(l),i.iScale=this.getScaleForId(h),i.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const i=this._cachedMeta;return e===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&uv(this._data,this),e._stacked&&Eu(e)}_dataCheck(){const e=this.getDataset(),i=e.data||(e.data=[]),s=this._data;if(_t(i)){const n=this._cachedMeta;this._data=fM(i,n)}else if(s!==i){if(s){uv(s,this);const n=this._cachedMeta;Eu(n),n._parsed=[]}i&&Object.isExtensible(i)&&vO(i,this),this._syncList=[],this._data=i}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const i=this._cachedMeta,s=this.getDataset();let n=!1;this._dataCheck();const r=i._stacked;i._stacked=im(i.vScale,i),i.stack!==s.stack&&(n=!0,Eu(i),i.stack=s.stack),this._resyncElements(e),(n||r!==i._stacked)&&(wv(this,i._parsed),i._stacked=im(i.vScale,i))}configure(){const e=this.chart.config,i=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),i,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,i){const{_cachedMeta:s,_data:n}=this,{iScale:r,_stacked:o}=s,l=r.axis;let u=e===0&&i===n.length?!0:s._sorted,h=e>0&&s._parsed[e-1],d,m,_;if(this._parsing===!1)s._parsed=n,s._sorted=!0,_=n;else{di(n[e])?_=this.parseArrayData(s,n,e,i):_t(n[e])?_=this.parseObjectData(s,n,e,i):_=this.parsePrimitiveData(s,n,e,i);const T=()=>m[l]===null||h&&m[l]<h[l];for(d=0;d<i;++d)s._parsed[d+e]=m=_[d],u&&(T()&&(u=!1),h=m);s._sorted=u}o&&wv(this,_)}parsePrimitiveData(e,i,s,n){const{iScale:r,vScale:o}=e,l=r.axis,u=o.axis,h=r.getLabels(),d=r===o,m=new Array(n);let _,T,C;for(_=0,T=n;_<T;++_)C=_+s,m[_]={[l]:d||r.parse(h[C],C),[u]:o.parse(i[C],C)};return m}parseArrayData(e,i,s,n){const{xScale:r,yScale:o}=e,l=new Array(n);let u,h,d,m;for(u=0,h=n;u<h;++u)d=u+s,m=i[d],l[u]={x:r.parse(m[0],d),y:o.parse(m[1],d)};return l}parseObjectData(e,i,s,n){const{xScale:r,yScale:o}=e,{xAxisKey:l="x",yAxisKey:u="y"}=this._parsing,h=new Array(n);let d,m,_,T;for(d=0,m=n;d<m;++d)_=d+s,T=i[_],h[d]={x:r.parse(ua(T,l),_),y:o.parse(ua(T,u),_)};return h}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,i,s){const n=this.chart,r=this._cachedMeta,o=i[e.axis],l={keys:x2(n,!0),values:i._stacks[e.axis]._visualValues};return Sv(l,o,r.index,{mode:s})}updateRangeFromParsed(e,i,s,n){const r=s[i.axis];let o=r===null?NaN:r;const l=n&&s._stacks[i.axis];n&&l&&(n.values=l,o=Sv(n,r,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,i){const s=this._cachedMeta,n=s._parsed,r=s._sorted&&e===s.iScale,o=n.length,l=this._getOtherScale(e),u=vM(i,s,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:m}=mM(l);let _,T;function C(){T=n[_];const x=T[l.axis];return!Xs(T[e.axis])||d>x||m<x}for(_=0;_<o&&!(!C()&&(this.updateRangeFromParsed(h,e,T,u),r));++_);if(r){for(_=o-1;_>=0;--_)if(!C()){this.updateRangeFromParsed(h,e,T,u);break}}return h}getAllParsedValues(e){const i=this._cachedMeta._parsed,s=[];let n,r,o;for(n=0,r=i.length;n<r;++n)o=i[n][e.axis],Xs(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const i=this._cachedMeta,s=i.iScale,n=i.vScale,r=this.getParsed(e);return{label:s?""+s.getLabelForValue(r[s.axis]):"",value:n?""+n.getLabelForValue(r[n.axis]):""}}_update(e){const i=this._cachedMeta;this.update(e||"default"),i._clip=dM(gt(this.options.clip,hM(i.xScale,i.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,i=this.chart,s=this._cachedMeta,n=s.data||[],r=i.chartArea,o=[],l=this._drawStart||0,u=this._drawCount||n.length-l,h=this.options.drawActiveElementsOnTop;let d;for(s.dataset&&s.dataset.draw(e,r,l,u),d=l;d<l+u;++d){const m=n[d];m.hidden||(m.active&&h?o.push(m):m.draw(e,r))}for(d=0;d<o.length;++d)o[d].draw(e,r)}getStyle(e,i){const s=i?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,i,s){const n=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];r=o.$context||(o.$context=yM(this.getContext(),e,o)),r.parsed=this.getParsed(e),r.raw=n.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=_M(this.chart.getContext(),this.index)),r.dataset=n,r.index=r.datasetIndex=this.index;return r.active=!!i,r.mode=s,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,i){return this._resolveElementOptions(this.dataElementType.id,i,e)}_resolveElementOptions(e,i="default",s){const n=i==="active",r=this._cachedDataOpts,o=e+"-"+i,l=r[o],u=this.enableOptionSharing&&yc(s);if(l)return Ev(l,u);const h=this.chart.config,d=h.datasetElementScopeKeys(this._type,e),m=n?[`${e}Hover`,"hover",e,""]:[e,""],_=h.getOptionScopes(this.getDataset(),d),T=Object.keys(ni.elements[e]),C=()=>this.getContext(s,n,i),x=h.resolveNamedOptions(_,T,C,m);return x.$shared&&(x.$shared=u,r[o]=Object.freeze(Ev(x,u))),x}_resolveAnimations(e,i,s){const n=this.chart,r=this._cachedDataOpts,o=`animation-${i}`,l=r[o];if(l)return l;let u;if(n.options.animation!==!1){const d=this.chart.config,m=d.datasetAnimationScopeKeys(this._type,i),_=d.getOptionScopes(this.getDataset(),m);u=d.createResolver(_,this.getContext(e,s,i))}const h=new T2(n,u&&u.animations);return u&&u._cacheable&&(r[o]=Object.freeze(h)),h}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,i){return!i||nm(e)||this.chart._animationsDisabled}_getSharedOptions(e,i){const s=this.resolveDataElementOptions(e,i),n=this._sharedOptions,r=this.getSharedOptions(s),o=this.includeOptions(i,r)||r!==n;return this.updateSharedOptions(r,i,s),{sharedOptions:r,includeOptions:o}}updateElement(e,i,s,n){nm(n)?Object.assign(e,s):this._resolveAnimations(i,n).update(e,s)}updateSharedOptions(e,i,s){e&&!nm(i)&&this._resolveAnimations(void 0,i).update(e,s)}_setStyle(e,i,s,n){e.active=n;const r=this.getStyle(i,n);this._resolveAnimations(i,s,n).update(e,{options:!n&&this.getSharedOptions(r)||r})}removeHoverStyle(e,i,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,i,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const i=this._data,s=this._cachedMeta.data;for(const[l,u,h]of this._syncList)this[l](u,h);this._syncList=[];const n=s.length,r=i.length,o=Math.min(r,n);o&&this.parse(0,o),r>n?this._insertElements(n,r-n,e):r<n&&this._removeElements(r,n-r)}_insertElements(e,i,s=!0){const n=this._cachedMeta,r=n.data,o=e+i;let l;const u=h=>{for(h.length+=i,l=h.length-1;l>=o;l--)h[l]=h[l-i]};for(u(r),l=e;l<o;++l)r[l]=new this.dataElementType;this._parsing&&u(n._parsed),this.parse(e,i),s&&this.updateElements(r,e,i,"reset")}updateElements(e,i,s,n){}_removeElements(e,i){const s=this._cachedMeta;if(this._parsing){const n=s._parsed.splice(e,i);s._stacked&&Eu(s,n)}s.data.splice(e,i)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[i,s,n]=e;this[i](s,n)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,i){i&&this._sync(["_removeElements",e,i]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function bM(t,e){if(!t._cache.$bar){const i=t.getMatchingVisibleMetas(e);let s=[];for(let n=0,r=i.length;n<r;n++)s=s.concat(i[n].controller.getAllParsedValues(t));t._cache.$bar=a2(s.sort((n,r)=>n-r))}return t._cache.$bar}function TM(t){const e=t.iScale,i=bM(e,t.type);let s=e._length,n,r,o,l;const u=()=>{o===32767||o===-32768||(yc(l)&&(s=Math.min(s,Math.abs(o-l)||s)),l=o)};for(n=0,r=i.length;n<r;++n)o=e.getPixelForValue(i[n]),u();for(l=void 0,n=0,r=e.ticks.length;n<r;++n)o=e.getPixelForTick(n),u();return s}function xM(t,e,i,s){const n=i.barThickness;let r,o;return Mt(n)?(r=e.min*i.categoryPercentage,o=i.barPercentage):(r=n*s,o=1),{chunk:r/s,ratio:o,start:e.pixels[t]-r/2}}function SM(t,e,i,s){const n=e.pixels,r=n[t];let o=t>0?n[t-1]:null,l=t<n.length-1?n[t+1]:null;const u=i.categoryPercentage;o===null&&(o=r-(l===null?e.end-e.start:l-r)),l===null&&(l=r+r-o);const h=r-(r-Math.min(o,l))/2*u;return{chunk:Math.abs(l-o)/2*u/s,ratio:i.barPercentage,start:h}}function CM(t,e,i,s){const n=i.parse(t[0],s),r=i.parse(t[1],s),o=Math.min(n,r),l=Math.max(n,r);let u=o,h=l;Math.abs(o)>Math.abs(l)&&(u=l,h=o),e[i.axis]=h,e._custom={barStart:u,barEnd:h,start:n,end:r,min:o,max:l}}function S2(t,e,i,s){return di(t)?CM(t,e,i,s):e[i.axis]=i.parse(t,s),e}function Av(t,e,i,s){const n=t.iScale,r=t.vScale,o=n.getLabels(),l=n===r,u=[];let h,d,m,_;for(h=i,d=i+s;h<d;++h)_=e[h],m={},m[n.axis]=l||n.parse(o[h],h),u.push(S2(_,m,r,h));return u}function rm(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function wM(t,e,i){return t!==0?oo(t):(e.isHorizontal()?1:-1)*(e.min>=i?1:-1)}function EM(t){let e,i,s,n,r;return t.horizontal?(e=t.base>t.x,i="left",s="right"):(e=t.base<t.y,i="bottom",s="top"),e?(n="end",r="start"):(n="start",r="end"),{start:i,end:s,reverse:e,top:n,bottom:r}}function AM(t,e,i,s){let n=e.borderSkipped;const r={};if(!n){t.borderSkipped=r;return}if(n===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:l,reverse:u,top:h,bottom:d}=EM(t);n==="middle"&&i&&(t.enableBorderRadius=!0,(i._top||0)===s?n=h:(i._bottom||0)===s?n=d:(r[Dv(d,o,l,u)]=!0,n=h)),r[Dv(n,o,l,u)]=!0,t.borderSkipped=r}function Dv(t,e,i,s){return s?(t=DM(t,e,i),t=Pv(t,i,e)):t=Pv(t,e,i),t}function DM(t,e,i){return t===e?i:t===i?e:t}function Pv(t,e,i){return t==="start"?e:t==="end"?i:t}function PM(t,{inflateAmount:e},i){t.inflateAmount=e==="auto"?i===1?.33:0:e}class kM extends R_{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,i,s,n){return Av(e,i,s,n)}parseArrayData(e,i,s,n){return Av(e,i,s,n)}parseObjectData(e,i,s,n){const{iScale:r,vScale:o}=e,{xAxisKey:l="x",yAxisKey:u="y"}=this._parsing,h=r.axis==="x"?l:u,d=o.axis==="x"?l:u,m=[];let _,T,C,x;for(_=s,T=s+n;_<T;++_)x=i[_],C={},C[r.axis]=r.parse(ua(x,h),_),m.push(S2(ua(x,d),C,o,_));return m}updateRangeFromParsed(e,i,s,n){super.updateRangeFromParsed(e,i,s,n);const r=s._custom;r&&i===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const i=this._cachedMeta,{iScale:s,vScale:n}=i,r=this.getParsed(e),o=r._custom,l=rm(o)?"["+o.start+", "+o.end+"]":""+n.getLabelForValue(r[n.axis]);return{label:""+s.getLabelForValue(r[s.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,e)}updateElements(e,i,s,n){const r=n==="reset",{index:o,_cachedMeta:{vScale:l}}=this,u=l.getBasePixel(),h=l.isHorizontal(),d=this._getRuler(),{sharedOptions:m,includeOptions:_}=this._getSharedOptions(i,n);for(let T=i;T<i+s;T++){const C=this.getParsed(T),x=r||Mt(C[l.axis])?{base:u,head:u}:this._calculateBarValuePixels(T),E=this._calculateBarIndexPixels(T,d),P=(C._stacks||{})[l.axis],k={horizontal:h,base:x.base,enableBorderRadius:!P||rm(C._custom)||o===P._top||o===P._bottom,x:h?x.head:E.center,y:h?E.center:x.head,height:h?E.size:Math.abs(x.size),width:h?Math.abs(x.size):E.size};_&&(k.options=m||this.resolveDataElementOptions(T,e[T].active?"active":n));const I=k.options||e[T].options;AM(k,I,P,o),PM(k,I,d.ratio),this.updateElement(e[T],T,k,n)}}_getStacks(e,i){const{iScale:s}=this._cachedMeta,n=s.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),r=s.options.stacked,o=[],l=this._cachedMeta.controller.getParsed(i),u=l&&l[s.axis],h=d=>{const m=d._parsed.find(T=>T[s.axis]===u),_=m&&m[d.vScale.axis];if(Mt(_)||isNaN(_))return!0};for(const d of n)if(!(i!==void 0&&h(d))&&((r===!1||o.indexOf(d.stack)===-1||r===void 0&&d.stack===void 0)&&o.push(d.stack),d.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,i=this.chart.options.indexAxis;return Object.keys(e).filter(s=>e[s].axis===i).shift()}_getAxis(){const e={},i=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)e[gt(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,i)]=!0;return Object.keys(e)}_getStackIndex(e,i,s){const n=this._getStacks(e,s),r=i!==void 0?n.indexOf(i):-1;return r===-1?n.length-1:r}_getRuler(){const e=this.options,i=this._cachedMeta,s=i.iScale,n=[];let r,o;for(r=0,o=i.data.length;r<o;++r)n.push(s.getPixelForValue(this.getParsed(r)[s.axis],r));const l=e.barThickness;return{min:l||TM(i),pixels:n,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:e.grouped,ratio:l?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:i,_stacked:s,index:n},options:{base:r,minBarLength:o}}=this,l=r||0,u=this.getParsed(e),h=u._custom,d=rm(h);let m=u[i.axis],_=0,T=s?this.applyStack(i,u,s):m,C,x;T!==m&&(_=T-m,T=m),d&&(m=h.barStart,T=h.barEnd-h.barStart,m!==0&&oo(m)!==oo(h.barEnd)&&(_=0),_+=m);const E=!Mt(r)&&!d?r:_;let P=i.getPixelForValue(E);if(this.chart.getDataVisibility(e)?C=i.getPixelForValue(_+T):C=P,x=C-P,Math.abs(x)<o){x=wM(x,i,l)*o,m===l&&(P-=x/2);const k=i.getPixelForDecimal(0),I=i.getPixelForDecimal(1),F=Math.min(k,I),z=Math.max(k,I);P=Math.max(Math.min(P,z),F),C=P+x,s&&!d&&(u._stacks[i.axis]._visualValues[n]=i.getValueForPixel(C)-i.getValueForPixel(P))}if(P===i.getPixelForValue(l)){const k=oo(x)*i.getLineWidthForValue(l)/2;P+=k,x-=k}return{size:x,base:P,head:C,center:C+x/2}}_calculateBarIndexPixels(e,i){const s=i.scale,n=this.options,r=n.skipNull,o=gt(n.maxBarThickness,1/0);let l,u;const h=this._getAxisCount();if(i.grouped){const d=r?this._getStackCount(e):i.stackCount,m=n.barThickness==="flex"?SM(e,i,n,d*h):xM(e,i,n,d*h),_=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,T=this._getAxis().indexOf(gt(_,this.getFirstScaleIdForIndexAxis())),C=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0)+T;l=m.start+m.chunk*C+m.chunk/2,u=Math.min(o,m.chunk*m.ratio)}else l=s.getPixelForValue(this.getParsed(e)[s.axis],e),u=Math.min(o,i.min*i.ratio);return{base:l-u/2,head:l+u/2,center:l,size:u}}draw(){const e=this._cachedMeta,i=e.vScale,s=e.data,n=s.length;let r=0;for(;r<n;++r)this.getParsed(r)[i.axis]!==null&&!s[r].hidden&&s[r].draw(this._ctx)}}function IM(t,e,i){let s=1,n=1,r=0,o=0;if(e<li){const l=t,u=l+e,h=Math.cos(l),d=Math.sin(l),m=Math.cos(u),_=Math.sin(u),T=(I,F,z)=>Ad(I,l,u,!0)?1:Math.max(F,F*i,z,z*i),C=(I,F,z)=>Ad(I,l,u,!0)?-1:Math.min(F,F*i,z,z*i),x=T(0,h,m),E=T(fi,d,_),P=C(Ot,h,m),k=C(Ot+fi,d,_);s=(x-P)/2,n=(E-k)/2,r=-(x+P)/2,o=-(E+k)/2}return{ratioX:s,ratioY:n,offsetX:r,offsetY:o}}class LM extends R_{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const i=e.data,{labels:{pointStyle:s,textAlign:n,color:r,useBorderRadius:o,borderRadius:l}}=e.legend.options;return i.labels.length&&i.datasets.length?i.labels.map((u,h)=>{const m=e.getDatasetMeta(0).controller.getStyle(h);return{text:u,fillStyle:m.backgroundColor,fontColor:r,hidden:!e.getDataVisibility(h),lineDash:m.borderDash,lineDashOffset:m.borderDashOffset,lineJoin:m.borderJoinStyle,lineWidth:m.borderWidth,strokeStyle:m.borderColor,textAlign:n,pointStyle:s,borderRadius:o&&(l||m.borderRadius),index:h}}):[]}},onClick(e,i,s){s.chart.toggleDataVisibility(i.index),s.chart.update()}}}};constructor(e,i){super(e,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,i){const s=this.getDataset().data,n=this._cachedMeta;if(this._parsing===!1)n._parsed=s;else{let r=u=>+s[u];if(_t(s[e])){const{key:u="value"}=this._parsing;r=h=>+ua(s[h],u)}let o,l;for(o=e,l=e+i;o<l;++o)n._parsed[o]=r(o)}}_getRotation(){return vr(this.options.rotation-90)}_getCircumference(){return vr(this.options.circumference)}_getRotationExtents(){let e=li,i=-li;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const n=this.chart.getDatasetMeta(s).controller,r=n._getRotation(),o=n._getCircumference();e=Math.min(e,r),i=Math.max(i,r+o)}return{rotation:e,circumference:i-e}}update(e){const i=this.chart,{chartArea:s}=i,n=this._cachedMeta,r=n.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,l=Math.max((Math.min(s.width,s.height)-o)/2,0),u=Math.min(sO(this.options.cutout,l),1),h=this._getRingWeight(this.index),{circumference:d,rotation:m}=this._getRotationExtents(),{ratioX:_,ratioY:T,offsetX:C,offsetY:x}=IM(m,d,u),E=(s.width-o)/_,P=(s.height-o)/T,k=Math.max(Math.min(E,P)/2,0),I=i2(this.options.radius,k),F=Math.max(I*u,0),z=(I-F)/this._getVisibleDatasetWeightTotal();this.offsetX=C*I,this.offsetY=x*I,n.total=this.calculateTotal(),this.outerRadius=I-z*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-z*h,0),this.updateElements(r,0,r.length,e)}_circumference(e,i){const s=this.options,n=this._cachedMeta,r=this._getCircumference();return i&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||n._parsed[e]===null||n.data[e].hidden?0:this.calculateCircumference(n._parsed[e]*r/li)}updateElements(e,i,s,n){const r=n==="reset",o=this.chart,l=o.chartArea,h=o.options.animation,d=(l.left+l.right)/2,m=(l.top+l.bottom)/2,_=r&&h.animateScale,T=_?0:this.innerRadius,C=_?0:this.outerRadius,{sharedOptions:x,includeOptions:E}=this._getSharedOptions(i,n);let P=this._getRotation(),k;for(k=0;k<i;++k)P+=this._circumference(k,r);for(k=i;k<i+s;++k){const I=this._circumference(k,r),F=e[k],z={x:d+this.offsetX,y:m+this.offsetY,startAngle:P,endAngle:P+I,circumference:I,outerRadius:C,innerRadius:T};E&&(z.options=x||this.resolveDataElementOptions(k,F.active?"active":n)),P+=I,this.updateElement(F,k,z,n)}}calculateTotal(){const e=this._cachedMeta,i=e.data;let s=0,n;for(n=0;n<i.length;n++){const r=e._parsed[n];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(n)&&!i[n].hidden&&(s+=Math.abs(r))}return s}calculateCircumference(e){const i=this._cachedMeta.total;return i>0&&!isNaN(e)?li*(Math.abs(e)/i):0}getLabelAndValue(e){const i=this._cachedMeta,s=this.chart,n=s.data.labels||[],r=E_(i._parsed[e],s.options.locale);return{label:n[e]||"",value:r}}getMaxBorderWidth(e){let i=0;const s=this.chart;let n,r,o,l,u;if(!e){for(n=0,r=s.data.datasets.length;n<r;++n)if(s.isDatasetVisible(n)){o=s.getDatasetMeta(n),e=o.data,l=o.controller;break}}if(!e)return 0;for(n=0,r=e.length;n<r;++n)u=l.resolveDataElementOptions(n),u.borderAlign!=="inner"&&(i=Math.max(i,u.borderWidth||0,u.hoverBorderWidth||0));return i}getMaxOffset(e){let i=0;for(let s=0,n=e.length;s<n;++s){const r=this.resolveDataElementOptions(s);i=Math.max(i,r.offset||0,r.hoverOffset||0)}return i}_getRingWeightOffset(e){let i=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(i+=this._getRingWeight(s));return i}_getRingWeight(e){return Math.max(gt(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class OM extends LM{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}function Uo(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class N_{static override(e){Object.assign(N_.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Uo()}parse(){return Uo()}format(){return Uo()}add(){return Uo()}diff(){return Uo()}startOf(){return Uo()}endOf(){return Uo()}}var MM={_date:N_};function RM(t,e,i,s){const{controller:n,data:r,_sorted:o}=t,l=n._cachedMeta.iScale,u=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(l&&e===l.axis&&e!=="r"&&o&&r.length){const h=l._reversePixels?_O:dg;if(s){if(n._sharedOptions){const d=r[0],m=typeof d.getRange=="function"&&d.getRange(e);if(m){const _=h(r,e,i-m),T=h(r,e,i+m);return{lo:_.lo,hi:T.hi}}}}else{const d=h(r,e,i);if(u){const{vScale:m}=n._cachedMeta,{_parsed:_}=t,T=_.slice(0,d.lo+1).reverse().findIndex(x=>!Mt(x[m.axis]));d.lo-=Math.max(0,T);const C=_.slice(d.hi).findIndex(x=>!Mt(x[m.axis]));d.hi+=Math.max(0,C)}return d}}return{lo:0,hi:r.length-1}}function xf(t,e,i,s,n){const r=t.getSortedVisibleDatasetMetas(),o=i[e];for(let l=0,u=r.length;l<u;++l){const{index:h,data:d}=r[l],{lo:m,hi:_}=RM(r[l],e,o,n);for(let T=m;T<=_;++T){const C=d[T];C.skip||s(C,h,T)}}}function NM(t){const e=t.indexOf("x")!==-1,i=t.indexOf("y")!==-1;return function(s,n){const r=e?Math.abs(s.x-n.x):0,o=i?Math.abs(s.y-n.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function om(t,e,i,s,n){const r=[];return!n&&!t.isPointInArea(e)||xf(t,i,e,function(l,u,h){!n&&!f2(l,t.chartArea,0)||l.inRange(e.x,e.y,s)&&r.push({element:l,datasetIndex:u,index:h})},!0),r}function BM(t,e,i,s){let n=[];function r(o,l,u){const{startAngle:h,endAngle:d}=o.getProps(["startAngle","endAngle"],s),{angle:m}=r2(o,{x:e.x,y:e.y});Ad(m,h,d)&&n.push({element:o,datasetIndex:l,index:u})}return xf(t,i,e,r),n}function FM(t,e,i,s,n,r){let o=[];const l=NM(i);let u=Number.POSITIVE_INFINITY;function h(d,m,_){const T=d.inRange(e.x,e.y,n);if(s&&!T)return;const C=d.getCenterPoint(n);if(!(!!r||t.isPointInArea(C))&&!T)return;const E=l(e,C);E<u?(o=[{element:d,datasetIndex:m,index:_}],u=E):E===u&&o.push({element:d,datasetIndex:m,index:_})}return xf(t,i,e,h),o}function am(t,e,i,s,n,r){return!r&&!t.isPointInArea(e)?[]:i==="r"&&!s?BM(t,e,i,n):FM(t,e,i,s,n,r)}function kv(t,e,i,s,n){const r=[],o=i==="x"?"inXRange":"inYRange";let l=!1;return xf(t,i,e,(u,h,d)=>{u[o]&&u[o](e[i],n)&&(r.push({element:u,datasetIndex:h,index:d}),l=l||u.inRange(e.x,e.y,n))}),s&&!l?[]:r}var UM={modes:{index(t,e,i,s){const n=Vo(e,t),r=i.axis||"x",o=i.includeInvisible||!1,l=i.intersect?om(t,n,r,s,o):am(t,n,r,!1,s,o),u=[];return l.length?(t.getSortedVisibleDatasetMetas().forEach(h=>{const d=l[0].index,m=h.data[d];m&&!m.skip&&u.push({element:m,datasetIndex:h.index,index:d})}),u):[]},dataset(t,e,i,s){const n=Vo(e,t),r=i.axis||"xy",o=i.includeInvisible||!1;let l=i.intersect?om(t,n,r,s,o):am(t,n,r,!1,s,o);if(l.length>0){const u=l[0].datasetIndex,h=t.getDatasetMeta(u).data;l=[];for(let d=0;d<h.length;++d)l.push({element:h[d],datasetIndex:u,index:d})}return l},point(t,e,i,s){const n=Vo(e,t),r=i.axis||"xy",o=i.includeInvisible||!1;return om(t,n,r,s,o)},nearest(t,e,i,s){const n=Vo(e,t),r=i.axis||"xy",o=i.includeInvisible||!1;return am(t,n,r,i.intersect,s,o)},x(t,e,i,s){const n=Vo(e,t);return kv(t,n,"x",i.intersect,s)},y(t,e,i,s){const n=Vo(e,t);return kv(t,n,"y",i.intersect,s)}}};const C2=["left","top","right","bottom"];function Au(t,e){return t.filter(i=>i.pos===e)}function Iv(t,e){return t.filter(i=>C2.indexOf(i.pos)===-1&&i.box.axis===e)}function Du(t,e){return t.sort((i,s)=>{const n=e?s:i,r=e?i:s;return n.weight===r.weight?n.index-r.index:n.weight-r.weight})}function jM(t){const e=[];let i,s,n,r,o,l;for(i=0,s=(t||[]).length;i<s;++i)n=t[i],{position:r,options:{stack:o,stackWeight:l=1}}=n,e.push({index:i,box:n,pos:r,horizontal:n.isHorizontal(),weight:n.weight,stack:o&&r+o,stackWeight:l});return e}function zM(t){const e={};for(const i of t){const{stack:s,pos:n,stackWeight:r}=i;if(!s||!C2.includes(n))continue;const o=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return e}function HM(t,e){const i=zM(t),{vBoxMaxWidth:s,hBoxMaxHeight:n}=e;let r,o,l;for(r=0,o=t.length;r<o;++r){l=t[r];const{fullSize:u}=l.box,h=i[l.stack],d=h&&l.stackWeight/h.weight;l.horizontal?(l.width=d?d*s:u&&e.availableWidth,l.height=n):(l.width=s,l.height=d?d*n:u&&e.availableHeight)}return i}function VM(t){const e=jM(t),i=Du(e.filter(h=>h.box.fullSize),!0),s=Du(Au(e,"left"),!0),n=Du(Au(e,"right")),r=Du(Au(e,"top"),!0),o=Du(Au(e,"bottom")),l=Iv(e,"x"),u=Iv(e,"y");return{fullSize:i,leftAndTop:s.concat(r),rightAndBottom:n.concat(u).concat(o).concat(l),chartArea:Au(e,"chartArea"),vertical:s.concat(n).concat(u),horizontal:r.concat(o).concat(l)}}function Lv(t,e,i,s){return Math.max(t[i],e[i])+Math.max(t[s],e[s])}function w2(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function qM(t,e,i,s){const{pos:n,box:r}=i,o=t.maxPadding;if(!_t(n)){i.size&&(t[n]-=i.size);const m=s[i.stack]||{size:0,count:1};m.size=Math.max(m.size,i.horizontal?r.height:r.width),i.size=m.size/m.count,t[n]+=i.size}r.getPadding&&w2(o,r.getPadding());const l=Math.max(0,e.outerWidth-Lv(o,t,"left","right")),u=Math.max(0,e.outerHeight-Lv(o,t,"top","bottom")),h=l!==t.w,d=u!==t.h;return t.w=l,t.h=u,i.horizontal?{same:h,other:d}:{same:d,other:h}}function $M(t){const e=t.maxPadding;function i(s){const n=Math.max(e[s]-t[s],0);return t[s]+=n,n}t.y+=i("top"),t.x+=i("left"),i("right"),i("bottom")}function WM(t,e){const i=e.maxPadding;function s(n){const r={left:0,top:0,right:0,bottom:0};return n.forEach(o=>{r[o]=Math.max(e[o],i[o])}),r}return s(t?["left","right"]:["top","bottom"])}function ju(t,e,i,s){const n=[];let r,o,l,u,h,d;for(r=0,o=t.length,h=0;r<o;++r){l=t[r],u=l.box,u.update(l.width||e.w,l.height||e.h,WM(l.horizontal,e));const{same:m,other:_}=qM(e,i,l,s);h|=m&&n.length,d=d||_,u.fullSize||n.push(l)}return h&&ju(n,e,i,s)||d}function Fh(t,e,i,s,n){t.top=i,t.left=e,t.right=e+s,t.bottom=i+n,t.width=s,t.height=n}function Ov(t,e,i,s){const n=i.padding;let{x:r,y:o}=e;for(const l of t){const u=l.box,h=s[l.stack]||{placed:0,weight:1},d=l.stackWeight/h.weight||1;if(l.horizontal){const m=e.w*d,_=h.size||u.height;yc(h.start)&&(o=h.start),u.fullSize?Fh(u,n.left,o,i.outerWidth-n.right-n.left,_):Fh(u,e.left+h.placed,o,m,_),h.start=o,h.placed+=m,o=u.bottom}else{const m=e.h*d,_=h.size||u.width;yc(h.start)&&(r=h.start),u.fullSize?Fh(u,r,n.top,_,i.outerHeight-n.bottom-n.top):Fh(u,r,e.top+h.placed,_,m),h.start=r,h.placed+=m,r=u.right}}e.x=r,e.y=o}var Vs={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(i){e.draw(i)}}]},t.boxes.push(e)},removeBox(t,e){const i=t.boxes?t.boxes.indexOf(e):-1;i!==-1&&t.boxes.splice(i,1)},configure(t,e,i){e.fullSize=i.fullSize,e.position=i.position,e.weight=i.weight},update(t,e,i,s){if(!t)return;const n=Ks(t.options.layout.padding),r=Math.max(e-n.width,0),o=Math.max(i-n.height,0),l=VM(t.boxes),u=l.vertical,h=l.horizontal;Pt(t.boxes,x=>{typeof x.beforeLayout=="function"&&x.beforeLayout()});const d=u.reduce((x,E)=>E.box.options&&E.box.options.display===!1?x:x+1,0)||1,m=Object.freeze({outerWidth:e,outerHeight:i,padding:n,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/d,hBoxMaxHeight:o/2}),_=Object.assign({},n);w2(_,Ks(s));const T=Object.assign({maxPadding:_,w:r,h:o,x:n.left,y:n.top},n),C=HM(u.concat(h),m);ju(l.fullSize,T,m,C),ju(u,T,m,C),ju(h,T,m,C)&&ju(u,T,m,C),$M(T),Ov(l.leftAndTop,T,m,C),T.x+=T.w,T.y+=T.h,Ov(l.rightAndBottom,T,m,C),t.chartArea={left:T.left,top:T.top,right:T.left+T.w,bottom:T.top+T.h,height:T.h,width:T.w},Pt(l.chartArea,x=>{const E=x.box;Object.assign(E,t.chartArea),E.update(T.w,T.h,{left:0,top:0,right:0,bottom:0})})}};class E2{acquireContext(e,i){}releaseContext(e){return!1}addEventListener(e,i,s){}removeEventListener(e,i,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,i,s,n){return i=Math.max(0,i||e.width),s=s||e.height,{width:i,height:Math.max(0,n?Math.floor(i/n):s)}}isAttached(e){return!0}updateConfig(e){}}class GM extends E2{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const od="$chartjs",XM={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Mv=t=>t===null||t==="";function KM(t,e){const i=t.style,s=t.getAttribute("height"),n=t.getAttribute("width");if(t[od]={initial:{height:s,width:n,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",Mv(n)){const r=bv(t,"width");r!==void 0&&(t.width=r)}if(Mv(s))if(t.style.height==="")t.height=t.width/(e||2);else{const r=bv(t,"height");r!==void 0&&(t.height=r)}return t}const A2=tM?{passive:!0}:!1;function ZM(t,e,i){t&&t.addEventListener(e,i,A2)}function YM(t,e,i){t&&t.canvas&&t.canvas.removeEventListener(e,i,A2)}function QM(t,e){const i=XM[t.type]||t.type,{x:s,y:n}=Vo(t,e);return{type:i,chart:e,native:t,x:s!==void 0?s:null,y:n!==void 0?n:null}}function kd(t,e){for(const i of t)if(i===e||i.contains(e))return!0}function JM(t,e,i){const s=t.canvas,n=new MutationObserver(r=>{let o=!1;for(const l of r)o=o||kd(l.addedNodes,s),o=o&&!kd(l.removedNodes,s);o&&i()});return n.observe(document,{childList:!0,subtree:!0}),n}function eR(t,e,i){const s=t.canvas,n=new MutationObserver(r=>{let o=!1;for(const l of r)o=o||kd(l.removedNodes,s),o=o&&!kd(l.addedNodes,s);o&&i()});return n.observe(document,{childList:!0,subtree:!0}),n}const bc=new Map;let Rv=0;function D2(){const t=window.devicePixelRatio;t!==Rv&&(Rv=t,bc.forEach((e,i)=>{i.currentDevicePixelRatio!==t&&e()}))}function tR(t,e){bc.size||window.addEventListener("resize",D2),bc.set(t,e)}function iR(t){bc.delete(t),bc.size||window.removeEventListener("resize",D2)}function sR(t,e,i){const s=t.canvas,n=s&&M_(s);if(!n)return;const r=u2((l,u)=>{const h=n.clientWidth;i(l,u),h<n.clientWidth&&i()},window),o=new ResizeObserver(l=>{const u=l[0],h=u.contentRect.width,d=u.contentRect.height;h===0&&d===0||r(h,d)});return o.observe(n),tR(t,r),o}function lm(t,e,i){i&&i.disconnect(),e==="resize"&&iR(t)}function nR(t,e,i){const s=t.canvas,n=u2(r=>{t.ctx!==null&&i(QM(r,t))},t);return ZM(s,e,n),n}class rR extends E2{acquireContext(e,i){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(KM(e,i),s):null}releaseContext(e){const i=e.canvas;if(!i[od])return!1;const s=i[od].initial;["height","width"].forEach(r=>{const o=s[r];Mt(o)?i.removeAttribute(r):i.setAttribute(r,o)});const n=s.style||{};return Object.keys(n).forEach(r=>{i.style[r]=n[r]}),i.width=i.width,delete i[od],!0}addEventListener(e,i,s){this.removeEventListener(e,i);const n=e.$proxies||(e.$proxies={}),o={attach:JM,detach:eR,resize:sR}[i]||nR;n[i]=o(e,i,s)}removeEventListener(e,i){const s=e.$proxies||(e.$proxies={}),n=s[i];if(!n)return;({attach:lm,detach:lm,resize:lm}[i]||YM)(e,i,n),s[i]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,i,s,n){return eM(e,i,s,n)}isAttached(e){const i=e&&M_(e);return!!(i&&i.isConnected)}}function oR(t){return!O_()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?GM:rR}let ma=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:i,y:s}=this.getProps(["x","y"],e);return{x:i,y:s}}hasValue(){return Ed(this.x)&&Ed(this.y)}getProps(e,i){const s=this.$animations;if(!i||!s)return this;const n={};return e.forEach(r=>{n[r]=s[r]&&s[r].active()?s[r]._to:this[r]}),n}};function aR(t,e){const i=t.options.ticks,s=lR(t),n=Math.min(i.maxTicksLimit||s,s),r=i.major.enabled?cR(e):[],o=r.length,l=r[0],u=r[o-1],h=[];if(o>n)return hR(e,h,r,o/n),h;const d=uR(r,e,n);if(o>0){let m,_;const T=o>1?Math.round((u-l)/(o-1)):null;for(Uh(e,h,d,Mt(T)?0:l-T,l),m=0,_=o-1;m<_;m++)Uh(e,h,d,r[m],r[m+1]);return Uh(e,h,d,u,Mt(T)?e.length:u+T),h}return Uh(e,h,d),h}function lR(t){const e=t.options.offset,i=t._tickSize(),s=t._length/i+(e?0:1),n=t._maxLength/i;return Math.floor(Math.min(s,n))}function uR(t,e,i){const s=dR(t),n=e.length/i;if(!s)return Math.max(n,1);const r=cO(s);for(let o=0,l=r.length-1;o<l;o++){const u=r[o];if(u>n)return u}return Math.max(n,1)}function cR(t){const e=[];let i,s;for(i=0,s=t.length;i<s;i++)t[i].major&&e.push(i);return e}function hR(t,e,i,s){let n=0,r=i[0],o;for(s=Math.ceil(s),o=0;o<t.length;o++)o===r&&(e.push(t[o]),n++,r=i[n*s])}function Uh(t,e,i,s,n){const r=gt(s,0),o=Math.min(gt(n,t.length),t.length);let l=0,u,h,d;for(i=Math.ceil(i),n&&(u=n-s,i=u/Math.floor(u/i)),d=r;d<0;)l++,d=Math.round(r+l*i);for(h=Math.max(r,0);h<o;h++)h===d&&(e.push(t[h]),l++,d=Math.round(r+l*i))}function dR(t){const e=t.length;let i,s;if(e<2)return!1;for(s=t[0],i=1;i<e;++i)if(t[i]-t[i-1]!==s)return!1;return s}const fR=t=>t==="left"?"right":t==="right"?"left":t,Nv=(t,e,i)=>e==="top"||e==="left"?t[e]+i:t[e]-i,Bv=(t,e)=>Math.min(e||t,t);function Fv(t,e){const i=[],s=t.length/e,n=t.length;let r=0;for(;r<n;r+=s)i.push(t[Math.floor(r)]);return i}function pR(t,e,i){const s=t.ticks.length,n=Math.min(e,s-1),r=t._startPixel,o=t._endPixel,l=1e-6;let u=t.getPixelForTick(n),h;if(!(i&&(s===1?h=Math.max(u-r,o-u):e===0?h=(t.getPixelForTick(1)-u)/2:h=(u-t.getPixelForTick(n-1))/2,u+=n<e?h:-h,u<r-l||u>o+l)))return u}function mR(t,e){Pt(t,i=>{const s=i.gc,n=s.length/2;let r;if(n>e){for(r=0;r<n;++r)delete i.data[s[r]];s.splice(0,n)}})}function Pu(t){return t.drawTicks?t.tickLength:0}function Uv(t,e){if(!t.display)return 0;const i=Li(t.font,e),s=Ks(t.padding);return(di(t.text)?t.text.length:1)*i.lineHeight+s.height}function gR(t,e){return Rl(t,{scale:e,type:"scale"})}function _R(t,e,i){return Rl(t,{tick:i,index:e,type:"tick"})}function yR(t,e,i){let s=w_(t);return(i&&e!=="right"||!i&&e==="right")&&(s=fR(s)),s}function vR(t,e,i,s){const{top:n,left:r,bottom:o,right:l,chart:u}=t,{chartArea:h,scales:d}=u;let m=0,_,T,C;const x=o-n,E=l-r;if(t.isHorizontal()){if(T=Ai(s,r,l),_t(i)){const P=Object.keys(i)[0],k=i[P];C=d[P].getPixelForValue(k)+x-e}else i==="center"?C=(h.bottom+h.top)/2+x-e:C=Nv(t,i,e);_=l-r}else{if(_t(i)){const P=Object.keys(i)[0],k=i[P];T=d[P].getPixelForValue(k)-E+e}else i==="center"?T=(h.left+h.right)/2-E+e:T=Nv(t,i,e);C=Ai(s,o,n),m=i==="left"?-fi:fi}return{titleX:T,titleY:C,maxWidth:_,rotation:m}}class Nl extends ma{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,i){return e}getUserBounds(){let{_userMin:e,_userMax:i,_suggestedMin:s,_suggestedMax:n}=this;return e=Pn(e,Number.POSITIVE_INFINITY),i=Pn(i,Number.NEGATIVE_INFINITY),s=Pn(s,Number.POSITIVE_INFINITY),n=Pn(n,Number.NEGATIVE_INFINITY),{min:Pn(e,s),max:Pn(i,n),minDefined:Xs(e),maxDefined:Xs(i)}}getMinMax(e){let{min:i,max:s,minDefined:n,maxDefined:r}=this.getUserBounds(),o;if(n&&r)return{min:i,max:s};const l=this.getMatchingVisibleMetas();for(let u=0,h=l.length;u<h;++u)o=l[u].controller.getMinMax(this,e),n||(i=Math.min(i,o.min)),r||(s=Math.max(s,o.max));return i=r&&i>s?s:i,s=n&&i>s?i:s,{min:Pn(i,Pn(s,i)),max:Pn(s,Pn(i,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Vt(this.options.beforeUpdate,[this])}update(e,i,s){const{beginAtZero:n,grace:r,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=i,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=UO(this,r,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const u=l<this.ticks.length;this._convertTicksToLabels(u?Fv(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=aR(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),u&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,i,s;this.isHorizontal()?(i=this.left,s=this.right):(i=this.top,s=this.bottom,e=!e),this._startPixel=i,this._endPixel=s,this._reversePixels=e,this._length=s-i,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Vt(this.options.afterUpdate,[this])}beforeSetDimensions(){Vt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Vt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Vt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Vt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const i=this.options.ticks;let s,n,r;for(s=0,n=e.length;s<n;s++)r=e[s],r.label=Vt(i.callback,[r.value,s,e],this)}afterTickToLabelConversion(){Vt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Vt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,i=e.ticks,s=Bv(this.ticks.length,e.ticks.maxTicksLimit),n=i.minRotation||0,r=i.maxRotation;let o=n,l,u,h;if(!this._isVisible()||!i.display||n>=r||s<=1||!this.isHorizontal()){this.labelRotation=n;return}const d=this._getLabelSizes(),m=d.widest.width,_=d.highest.height,T=ps(this.chart.width-m,0,this.maxWidth);l=e.offset?this.maxWidth/s:T/(s-1),m+6>l&&(l=T/(s-(e.offset?.5:1)),u=this.maxHeight-Pu(e.grid)-i.padding-Uv(e.title,this.chart.options.font),h=Math.sqrt(m*m+_*_),o=pO(Math.min(Math.asin(ps((d.highest.height+6)/l,-1,1)),Math.asin(ps(u/h,-1,1))-Math.asin(ps(_/h,-1,1)))),o=Math.max(n,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){Vt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Vt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:i,options:{ticks:s,title:n,grid:r}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const u=Uv(n,i.options.font);if(l?(e.width=this.maxWidth,e.height=Pu(r)+u):(e.height=this.maxHeight,e.width=Pu(r)+u),s.display&&this.ticks.length){const{first:h,last:d,widest:m,highest:_}=this._getLabelSizes(),T=s.padding*2,C=vr(this.labelRotation),x=Math.cos(C),E=Math.sin(C);if(l){const P=s.mirror?0:E*m.width+x*_.height;e.height=Math.min(this.maxHeight,e.height+P+T)}else{const P=s.mirror?0:x*m.width+E*_.height;e.width=Math.min(this.maxWidth,e.width+P+T)}this._calculatePadding(h,d,E,x)}}this._handleMargins(),l?(this.width=this._length=i.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=i.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,i,s,n){const{ticks:{align:r,padding:o},position:l}=this.options,u=this.labelRotation!==0,h=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,m=this.right-this.getPixelForTick(this.ticks.length-1);let _=0,T=0;u?h?(_=n*e.width,T=s*i.height):(_=s*e.height,T=n*i.width):r==="start"?T=i.width:r==="end"?_=e.width:r!=="inner"&&(_=e.width/2,T=i.width/2),this.paddingLeft=Math.max((_-d+o)*this.width/(this.width-d),0),this.paddingRight=Math.max((T-m+o)*this.width/(this.width-m),0)}else{let d=i.height/2,m=e.height/2;r==="start"?(d=0,m=e.height):r==="end"&&(d=i.height,m=0),this.paddingTop=d+o,this.paddingBottom=m+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Vt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:i}=this.options;return i==="top"||i==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let i,s;for(i=0,s=e.length;i<s;i++)Mt(e[i].label)&&(e.splice(i,1),s--,i--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const i=this.options.ticks.sampleSize;let s=this.ticks;i<s.length&&(s=Fv(s,i)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,i,s){const{ctx:n,_longestTextCache:r}=this,o=[],l=[],u=Math.floor(i/Bv(i,s));let h=0,d=0,m,_,T,C,x,E,P,k,I,F,z;for(m=0;m<i;m+=u){if(C=e[m].label,x=this._resolveTickFontOptions(m),n.font=E=x.string,P=r[E]=r[E]||{data:{},gc:[]},k=x.lineHeight,I=F=0,!Mt(C)&&!di(C))I=pv(n,P.data,P.gc,I,C),F=k;else if(di(C))for(_=0,T=C.length;_<T;++_)z=C[_],!Mt(z)&&!di(z)&&(I=pv(n,P.data,P.gc,I,z),F+=k);o.push(I),l.push(F),h=Math.max(I,h),d=Math.max(F,d)}mR(r,i);const q=o.indexOf(h),U=l.indexOf(d),Z=D=>({width:o[D]||0,height:l[D]||0});return{first:Z(0),last:Z(i-1),widest:Z(q),highest:Z(U),widths:o,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,i){return NaN}getValueForPixel(e){}getPixelForTick(e){const i=this.ticks;return e<0||e>i.length-1?null:this.getPixelForValue(i[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const i=this._startPixel+e*this._length;return gO(this._alignToPixels?Fo(this.chart,i,0):i)}getDecimalForPixel(e){const i=(e-this._startPixel)/this._length;return this._reversePixels?1-i:i}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:i}=this;return e<0&&i<0?i:e>0&&i>0?e:0}getContext(e){const i=this.ticks||[];if(e>=0&&e<i.length){const s=i[e];return s.$context||(s.$context=_R(this.getContext(),e,s))}return this.$context||(this.$context=gR(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,i=vr(this.labelRotation),s=Math.abs(Math.cos(i)),n=Math.abs(Math.sin(i)),r=this._getLabelSizes(),o=e.autoSkipPadding||0,l=r?r.widest.width+o:0,u=r?r.highest.height+o:0;return this.isHorizontal()?u*s>l*n?l/s:u/n:u*n<l*s?u/s:l/n}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const i=this.axis,s=this.chart,n=this.options,{grid:r,position:o,border:l}=n,u=r.offset,h=this.isHorizontal(),m=this.ticks.length+(u?1:0),_=Pu(r),T=[],C=l.setContext(this.getContext()),x=C.display?C.width:0,E=x/2,P=function(le){return Fo(s,le,x)};let k,I,F,z,q,U,Z,D,R,Y,Q,J;if(o==="top")k=P(this.bottom),U=this.bottom-_,D=k-E,Y=P(e.top)+E,J=e.bottom;else if(o==="bottom")k=P(this.top),Y=e.top,J=P(e.bottom)-E,U=k+E,D=this.top+_;else if(o==="left")k=P(this.right),q=this.right-_,Z=k-E,R=P(e.left)+E,Q=e.right;else if(o==="right")k=P(this.left),R=e.left,Q=P(e.right)-E,q=k+E,Z=this.left+_;else if(i==="x"){if(o==="center")k=P((e.top+e.bottom)/2+.5);else if(_t(o)){const le=Object.keys(o)[0],se=o[le];k=P(this.chart.scales[le].getPixelForValue(se))}Y=e.top,J=e.bottom,U=k+E,D=U+_}else if(i==="y"){if(o==="center")k=P((e.left+e.right)/2);else if(_t(o)){const le=Object.keys(o)[0],se=o[le];k=P(this.chart.scales[le].getPixelForValue(se))}q=k-E,Z=q-_,R=e.left,Q=e.right}const ae=gt(n.ticks.maxTicksLimit,m),ce=Math.max(1,Math.ceil(m/ae));for(I=0;I<m;I+=ce){const le=this.getContext(I),se=r.setContext(le),ee=l.setContext(le),fe=se.lineWidth,re=se.color,ue=ee.dash||[],Oe=ee.dashOffset,ze=se.tickWidth,Me=se.tickColor,Ee=se.tickBorderDash||[],He=se.tickBorderDashOffset;F=pR(this,I,u),F!==void 0&&(z=Fo(s,F,fe),h?q=Z=R=Q=z:U=D=Y=J=z,T.push({tx1:q,ty1:U,tx2:Z,ty2:D,x1:R,y1:Y,x2:Q,y2:J,width:fe,color:re,borderDash:ue,borderDashOffset:Oe,tickWidth:ze,tickColor:Me,tickBorderDash:Ee,tickBorderDashOffset:He}))}return this._ticksLength=m,this._borderValue=k,T}_computeLabelItems(e){const i=this.axis,s=this.options,{position:n,ticks:r}=s,o=this.isHorizontal(),l=this.ticks,{align:u,crossAlign:h,padding:d,mirror:m}=r,_=Pu(s.grid),T=_+d,C=m?-d:T,x=-vr(this.labelRotation),E=[];let P,k,I,F,z,q,U,Z,D,R,Y,Q,J="middle";if(n==="top")q=this.bottom-C,U=this._getXAxisLabelAlignment();else if(n==="bottom")q=this.top+C,U=this._getXAxisLabelAlignment();else if(n==="left"){const ce=this._getYAxisLabelAlignment(_);U=ce.textAlign,z=ce.x}else if(n==="right"){const ce=this._getYAxisLabelAlignment(_);U=ce.textAlign,z=ce.x}else if(i==="x"){if(n==="center")q=(e.top+e.bottom)/2+T;else if(_t(n)){const ce=Object.keys(n)[0],le=n[ce];q=this.chart.scales[ce].getPixelForValue(le)+T}U=this._getXAxisLabelAlignment()}else if(i==="y"){if(n==="center")z=(e.left+e.right)/2-T;else if(_t(n)){const ce=Object.keys(n)[0],le=n[ce];z=this.chart.scales[ce].getPixelForValue(le)}U=this._getYAxisLabelAlignment(_).textAlign}i==="y"&&(u==="start"?J="top":u==="end"&&(J="bottom"));const ae=this._getLabelSizes();for(P=0,k=l.length;P<k;++P){I=l[P],F=I.label;const ce=r.setContext(this.getContext(P));Z=this.getPixelForTick(P)+r.labelOffset,D=this._resolveTickFontOptions(P),R=D.lineHeight,Y=di(F)?F.length:1;const le=Y/2,se=ce.color,ee=ce.textStrokeColor,fe=ce.textStrokeWidth;let re=U;o?(z=Z,U==="inner"&&(P===k-1?re=this.options.reverse?"left":"right":P===0?re=this.options.reverse?"right":"left":re="center"),n==="top"?h==="near"||x!==0?Q=-Y*R+R/2:h==="center"?Q=-ae.highest.height/2-le*R+R:Q=-ae.highest.height+R/2:h==="near"||x!==0?Q=R/2:h==="center"?Q=ae.highest.height/2-le*R:Q=ae.highest.height-Y*R,m&&(Q*=-1),x!==0&&!ce.showLabelBackdrop&&(z+=R/2*Math.sin(x))):(q=Z,Q=(1-Y)*R/2);let ue;if(ce.showLabelBackdrop){const Oe=Ks(ce.backdropPadding),ze=ae.heights[P],Me=ae.widths[P];let Ee=Q-Oe.top,He=0-Oe.left;switch(J){case"middle":Ee-=ze/2;break;case"bottom":Ee-=ze;break}switch(U){case"center":He-=Me/2;break;case"right":He-=Me;break;case"inner":P===k-1?He-=Me:P>0&&(He-=Me/2);break}ue={left:He,top:Ee,width:Me+Oe.width,height:ze+Oe.height,color:ce.backdropColor}}E.push({label:F,font:D,textOffset:Q,options:{rotation:x,color:se,strokeColor:ee,strokeWidth:fe,textAlign:re,textBaseline:J,translation:[z,q],backdrop:ue}})}return E}_getXAxisLabelAlignment(){const{position:e,ticks:i}=this.options;if(-vr(this.labelRotation))return e==="top"?"left":"right";let n="center";return i.align==="start"?n="left":i.align==="end"?n="right":i.align==="inner"&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:i,ticks:{crossAlign:s,mirror:n,padding:r}}=this.options,o=this._getLabelSizes(),l=e+r,u=o.widest.width;let h,d;return i==="left"?n?(d=this.right+r,s==="near"?h="left":s==="center"?(h="center",d+=u/2):(h="right",d+=u)):(d=this.right-l,s==="near"?h="right":s==="center"?(h="center",d-=u/2):(h="left",d=this.left)):i==="right"?n?(d=this.left+r,s==="near"?h="right":s==="center"?(h="center",d-=u/2):(h="left",d-=u)):(d=this.left+l,s==="near"?h="left":s==="center"?(h="center",d+=u/2):(h="right",d=this.right)):h="right",{textAlign:h,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,i=this.options.position;if(i==="left"||i==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(i==="top"||i==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:i},left:s,top:n,width:r,height:o}=this;i&&(e.save(),e.fillStyle=i,e.fillRect(s,n,r,o),e.restore())}getLineWidthForValue(e){const i=this.options.grid;if(!this._isVisible()||!i.display)return 0;const n=this.ticks.findIndex(r=>r.value===e);return n>=0?i.setContext(this.getContext(n)).lineWidth:0}drawGrid(e){const i=this.options.grid,s=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,o;const l=(u,h,d)=>{!d.width||!d.color||(s.save(),s.lineWidth=d.width,s.strokeStyle=d.color,s.setLineDash(d.borderDash||[]),s.lineDashOffset=d.borderDashOffset,s.beginPath(),s.moveTo(u.x,u.y),s.lineTo(h.x,h.y),s.stroke(),s.restore())};if(i.display)for(r=0,o=n.length;r<o;++r){const u=n[r];i.drawOnChartArea&&l({x:u.x1,y:u.y1},{x:u.x2,y:u.y2},u),i.drawTicks&&l({x:u.tx1,y:u.ty1},{x:u.tx2,y:u.ty2},{color:u.tickColor,width:u.tickWidth,borderDash:u.tickBorderDash,borderDashOffset:u.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:i,options:{border:s,grid:n}}=this,r=s.setContext(this.getContext()),o=s.display?r.width:0;if(!o)return;const l=n.setContext(this.getContext(0)).lineWidth,u=this._borderValue;let h,d,m,_;this.isHorizontal()?(h=Fo(e,this.left,o)-o/2,d=Fo(e,this.right,l)+l/2,m=_=u):(m=Fo(e,this.top,o)-o/2,_=Fo(e,this.bottom,l)+l/2,h=d=u),i.save(),i.lineWidth=r.width,i.strokeStyle=r.color,i.beginPath(),i.moveTo(h,m),i.lineTo(d,_),i.stroke(),i.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,n=this._computeLabelArea();n&&A_(s,n);const r=this.getLabelItems(e);for(const o of r){const l=o.options,u=o.font,h=o.label,d=o.textOffset;vc(s,h,0,d,u,l)}n&&D_(s)}drawTitle(){const{ctx:e,options:{position:i,title:s,reverse:n}}=this;if(!s.display)return;const r=Li(s.font),o=Ks(s.padding),l=s.align;let u=r.lineHeight/2;i==="bottom"||i==="center"||_t(i)?(u+=o.bottom,di(s.text)&&(u+=r.lineHeight*(s.text.length-1))):u+=o.top;const{titleX:h,titleY:d,maxWidth:m,rotation:_}=vR(this,u,i,l);vc(e,s.text,0,0,r,{color:s.color,maxWidth:m,rotation:_,textAlign:yR(l,i,n),textBaseline:"middle",translation:[h,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,i=e.ticks&&e.ticks.z||0,s=gt(e.grid&&e.grid.z,-1),n=gt(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Nl.prototype.draw?[{z:i,draw:r=>{this.draw(r)}}]:[{z:s,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:i,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(e){const i=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",n=[];let r,o;for(r=0,o=i.length;r<o;++r){const l=i[r];l[s]===this.id&&(!e||l.type===e)&&n.push(l)}return n}_resolveTickFontOptions(e){const i=this.options.ticks.setContext(this.getContext(e));return Li(i.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class jh{constructor(e,i,s){this.type=e,this.scope=i,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const i=Object.getPrototypeOf(e);let s;xR(i)&&(s=this.register(i));const n=this.items,r=e.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in n||(n[r]=e,bR(e,o,s),this.override&&ni.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const i=this.items,s=e.id,n=this.scope;s in i&&delete i[s],n&&s in ni[n]&&(delete ni[n][s],this.override&&delete ca[s])}}function bR(t,e,i){const s=_c(Object.create(null),[i?ni.get(i):{},ni.get(e),t.defaults]);ni.set(e,s),t.defaultRoutes&&TR(e,t.defaultRoutes),t.descriptors&&ni.describe(e,t.descriptors)}function TR(t,e){Object.keys(e).forEach(i=>{const s=i.split("."),n=s.pop(),r=[t].concat(s).join("."),o=e[i].split("."),l=o.pop(),u=o.join(".");ni.route(r,n,u,l)})}function xR(t){return"id"in t&&"defaults"in t}class SR{constructor(){this.controllers=new jh(R_,"datasets",!0),this.elements=new jh(ma,"elements"),this.plugins=new jh(Object,"plugins"),this.scales=new jh(Nl,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,i,s){[...i].forEach(n=>{const r=s||this._getRegistryForType(n);s||r.isForType(n)||r===this.plugins&&n.id?this._exec(e,r,n):Pt(n,o=>{const l=s||this._getRegistryForType(o);this._exec(e,l,o)})})}_exec(e,i,s){const n=S_(e);Vt(s["before"+n],[],s),i[e](s),Vt(s["after"+n],[],s)}_getRegistryForType(e){for(let i=0;i<this._typedRegistries.length;i++){const s=this._typedRegistries[i];if(s.isForType(e))return s}return this.plugins}_get(e,i,s){const n=i.get(e);if(n===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return n}}var On=new SR;class CR{constructor(){this._init=void 0}notify(e,i,s,n){if(i==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const r=n?this._descriptors(e).filter(n):this._descriptors(e),o=this._notify(r,e,i,s);return i==="afterDestroy"&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,i,s,n){n=n||{};for(const r of e){const o=r.plugin,l=o[s],u=[i,n,r.options];if(Vt(l,u,o)===!1&&n.cancelable)return!1}return!0}invalidate(){Mt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const i=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),i}_createDescriptors(e,i){const s=e&&e.config,n=gt(s.options&&s.options.plugins,{}),r=wR(s);return n===!1&&!i?[]:AR(e,r,n,i)}_notifyStateChanges(e){const i=this._oldCache||[],s=this._cache,n=(r,o)=>r.filter(l=>!o.some(u=>l.plugin.id===u.plugin.id));this._notify(n(i,s),e,"stop"),this._notify(n(s,i),e,"start")}}function wR(t){const e={},i=[],s=Object.keys(On.plugins.items);for(let r=0;r<s.length;r++)i.push(On.getPlugin(s[r]));const n=t.plugins||[];for(let r=0;r<n.length;r++){const o=n[r];i.indexOf(o)===-1&&(i.push(o),e[o.id]=!0)}return{plugins:i,localIds:e}}function ER(t,e){return!e&&t===!1?null:t===!0?{}:t}function AR(t,{plugins:e,localIds:i},s,n){const r=[],o=t.getContext();for(const l of e){const u=l.id,h=ER(s[u],n);h!==null&&r.push({plugin:l,options:DR(t.config,{plugin:l,local:i[u]},h,o)})}return r}function DR(t,{plugin:e,local:i},s,n){const r=t.pluginScopeKeys(e),o=t.getOptionScopes(s,r);return i&&e.defaults&&o.push(e.defaults),t.createResolver(o,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function pg(t,e){const i=ni.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||i.indexAxis||"x"}function PR(t,e){let i=t;return t==="_index_"?i=e:t==="_value_"&&(i=e==="x"?"y":"x"),i}function kR(t,e){return t===e?"_index_":"_value_"}function jv(t){if(t==="x"||t==="y"||t==="r")return t}function IR(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function mg(t,...e){if(jv(t))return t;for(const i of e){const s=i.axis||IR(i.position)||t.length>1&&jv(t[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function zv(t,e,i){if(i[e+"AxisID"]===t)return{axis:e}}function LR(t,e){if(e.data&&e.data.datasets){const i=e.data.datasets.filter(s=>s.xAxisID===t||s.yAxisID===t);if(i.length)return zv(t,"x",i[0])||zv(t,"y",i[0])}return{}}function OR(t,e){const i=ca[t.type]||{scales:{}},s=e.scales||{},n=pg(t.type,e),r=Object.create(null);return Object.keys(s).forEach(o=>{const l=s[o];if(!_t(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const u=mg(o,l,LR(o,t),ni.scales[l.type]),h=kR(u,n),d=i.scales||{};r[o]=ec(Object.create(null),[{axis:u},l,d[u],d[h]])}),t.data.datasets.forEach(o=>{const l=o.type||t.type,u=o.indexAxis||pg(l,e),d=(ca[l]||{}).scales||{};Object.keys(d).forEach(m=>{const _=PR(m,u),T=o[_+"AxisID"]||_;r[T]=r[T]||Object.create(null),ec(r[T],[{axis:_},s[T],d[m]])})}),Object.keys(r).forEach(o=>{const l=r[o];ec(l,[ni.scales[l.type],ni.scale])}),r}function P2(t){const e=t.options||(t.options={});e.plugins=gt(e.plugins,{}),e.scales=OR(t,e)}function k2(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function MR(t){return t=t||{},t.data=k2(t.data),P2(t),t}const Hv=new Map,I2=new Set;function zh(t,e){let i=Hv.get(t);return i||(i=e(),Hv.set(t,i),I2.add(i)),i}const ku=(t,e,i)=>{const s=ua(e,i);s!==void 0&&t.add(s)};let RR=class{constructor(e){this._config=MR(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=k2(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),P2(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return zh(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,i){return zh(`${e}.transition.${i}`,()=>[[`datasets.${e}.transitions.${i}`,`transitions.${i}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,i){return zh(`${e}-${i}`,()=>[[`datasets.${e}.elements.${i}`,`datasets.${e}`,`elements.${i}`,""]])}pluginScopeKeys(e){const i=e.id,s=this.type;return zh(`${s}-plugin-${i}`,()=>[[`plugins.${i}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,i){const s=this._scopeCache;let n=s.get(e);return(!n||i)&&(n=new Map,s.set(e,n)),n}getOptionScopes(e,i,s){const{options:n,type:r}=this,o=this._cachedScopes(e,s),l=o.get(i);if(l)return l;const u=new Set;i.forEach(d=>{e&&(u.add(e),d.forEach(m=>ku(u,e,m))),d.forEach(m=>ku(u,n,m)),d.forEach(m=>ku(u,ca[r]||{},m)),d.forEach(m=>ku(u,ni,m)),d.forEach(m=>ku(u,fg,m))});const h=Array.from(u);return h.length===0&&h.push(Object.create(null)),I2.has(i)&&o.set(i,h),h}chartOptionScopes(){const{options:e,type:i}=this;return[e,ca[i]||{},ni.datasets[i]||{},{type:i},ni,fg]}resolveNamedOptions(e,i,s,n=[""]){const r={$shared:!0},{resolver:o,subPrefixes:l}=Vv(this._resolverCache,e,n);let u=o;if(BR(o,i)){r.$shared=!1,s=lo(s)?s():s;const h=this.createResolver(e,s,l);u=vl(o,s,h)}for(const h of i)r[h]=u[h];return r}createResolver(e,i,s=[""],n){const{resolver:r}=Vv(this._resolverCache,e,s);return _t(i)?vl(r,i,void 0,n):r}};function Vv(t,e,i){let s=t.get(e);s||(s=new Map,t.set(e,s));const n=i.join();let r=s.get(n);return r||(r={resolver:k_(e,i),subPrefixes:i.filter(l=>!l.toLowerCase().includes("hover"))},s.set(n,r)),r}const NR=t=>_t(t)&&Object.getOwnPropertyNames(t).some(e=>lo(t[e]));function BR(t,e){const{isScriptable:i,isIndexable:s}=m2(t);for(const n of e){const r=i(n),o=s(n),l=(o||r)&&t[n];if(r&&(lo(l)||NR(l))||o&&di(l))return!0}return!1}var FR="4.5.1";const UR=["top","bottom","left","right","chartArea"];function qv(t,e){return t==="top"||t==="bottom"||UR.indexOf(t)===-1&&e==="x"}function $v(t,e){return function(i,s){return i[t]===s[t]?i[e]-s[e]:i[t]-s[t]}}function Wv(t){const e=t.chart,i=e.options.animation;e.notifyPlugins("afterRender"),Vt(i&&i.onComplete,[t],e)}function jR(t){const e=t.chart,i=e.options.animation;Vt(i&&i.onProgress,[t],e)}function L2(t){return O_()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const ad={},Gv=t=>{const e=L2(t);return Object.values(ad).filter(i=>i.canvas===e).pop()};function zR(t,e,i){const s=Object.keys(t);for(const n of s){const r=+n;if(r>=e){const o=t[n];delete t[n],(i>0||r>e)&&(t[r+i]=o)}}}function HR(t,e,i,s){return!i||t.type==="mouseout"?null:s?e:t}let Sf=class{static defaults=ni;static instances=ad;static overrides=ca;static registry=On;static version=FR;static getChart=Gv;static register(...e){On.add(...e),Xv()}static unregister(...e){On.remove(...e),Xv()}constructor(e,i){const s=this.config=new RR(i),n=L2(e),r=Gv(n);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||oR(n)),this.platform.updateConfig(s);const l=this.platform.acquireContext(n,o.aspectRatio),u=l&&l.canvas,h=u&&u.height,d=u&&u.width;if(this.id=iO(),this.ctx=l,this.canvas=u,this.width=d,this.height=h,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new CR,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=bO(m=>this.update(m),o.resizeDelay||0),this._dataChanges=[],ad[this.id]=this,!l||!u){console.error("Failed to create chart: can't acquire context from the given item");return}cr.listen(this,"complete",Wv),cr.listen(this,"progress",jR),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:i},width:s,height:n,_aspectRatio:r}=this;return Mt(e)?i&&r?r:n?s/n:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return On}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():vv(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return mv(this.canvas,this.ctx),this}stop(){return cr.stop(this),this}resize(e,i){cr.running(this)?this._resizeBeforeDraw={width:e,height:i}:this._resize(e,i)}_resize(e,i){const s=this.options,n=this.canvas,r=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(n,e,i,r),l=s.devicePixelRatio||this.platform.getDevicePixelRatio(),u=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,vv(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),Vt(s.onResize,[this,o],this),this.attached&&this._doResize(u)&&this.render())}ensureScalesHaveIDs(){const i=this.options.scales||{};Pt(i,(s,n)=>{s.id=n})}buildOrUpdateScales(){const e=this.options,i=e.scales,s=this.scales,n=Object.keys(s).reduce((o,l)=>(o[l]=!1,o),{});let r=[];i&&(r=r.concat(Object.keys(i).map(o=>{const l=i[o],u=mg(o,l),h=u==="r",d=u==="x";return{options:l,dposition:h?"chartArea":d?"bottom":"left",dtype:h?"radialLinear":d?"category":"linear"}}))),Pt(r,o=>{const l=o.options,u=l.id,h=mg(u,l),d=gt(l.type,o.dtype);(l.position===void 0||qv(l.position,h)!==qv(o.dposition))&&(l.position=o.dposition),n[u]=!0;let m=null;if(u in s&&s[u].type===d)m=s[u];else{const _=On.getScale(d);m=new _({id:u,type:d,ctx:this.ctx,chart:this}),s[m.id]=m}m.init(l,e)}),Pt(n,(o,l)=>{o||delete s[l]}),Pt(s,o=>{Vs.configure(this,o,o.options),Vs.addBox(this,o)})}_updateMetasets(){const e=this._metasets,i=this.data.datasets.length,s=e.length;if(e.sort((n,r)=>n.index-r.index),s>i){for(let n=i;n<s;++n)this._destroyDatasetMeta(n);e.splice(i,s-i)}this._sortedMetasets=e.slice(0).sort($v("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:i}}=this;e.length>i.length&&delete this._stacks,e.forEach((s,n)=>{i.filter(r=>r===s._dataset).length===0&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],i=this.data.datasets;let s,n;for(this._removeUnreferencedMetasets(),s=0,n=i.length;s<n;s++){const r=i[s];let o=this.getDatasetMeta(s);const l=r.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=l,o.indexAxis=r.indexAxis||pg(l,this.options),o.order=r.order||0,o.index=s,o.label=""+r.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const u=On.getController(l),{datasetElementType:h,dataElementType:d}=ni.datasets[l];Object.assign(u,{dataElementType:On.getElement(d),datasetElementType:h&&On.getElement(h)}),o.controller=new u(this,s),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Pt(this.data.datasets,(e,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const i=this.config;i.update();const s=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let h=0,d=this.data.datasets.length;h<d;h++){const{controller:m}=this.getDatasetMeta(h),_=!n&&r.indexOf(m)===-1;m.buildOrUpdateElements(_),o=Math.max(+m.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),n||Pt(r,h=>{h.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort($v("z","_idx"));const{_active:l,_lastEvent:u}=this;u?this._eventHandler(u,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){Pt(this.scales,e=>{Vs.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,i=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!rv(i,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,i=this._getUniformDataChanges()||[];for(const{method:s,start:n,count:r}of i){const o=s==="_removeElements"?-r:r;zR(e,n,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const i=this.data.datasets.length,s=r=>new Set(e.filter(o=>o[0]===r).map((o,l)=>l+","+o.splice(1).join(","))),n=s(0);for(let r=1;r<i;r++)if(!rv(n,s(r)))return;return Array.from(n).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Vs.update(this,this.width,this.height,e);const i=this.chartArea,s=i.width<=0||i.height<=0;this._layers=[],Pt(this.boxes,n=>{s&&n.position==="chartArea"||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,r)=>{n._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let i=0,s=this.data.datasets.length;i<s;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,s=this.data.datasets.length;i<s;++i)this._updateDataset(i,lo(e)?e({datasetIndex:i}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,i){const s=this.getDatasetMeta(e),n={meta:s,index:e,mode:i,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",n)!==!1&&(s.controller._update(i),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(cr.has(this)?this.attached&&!cr.running(this)&&cr.start(this):(this.draw(),Wv({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:n}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,n)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const i=this._layers;for(e=0;e<i.length&&i[e].z<=0;++e)i[e].draw(this.chartArea);for(this._drawDatasets();e<i.length;++e)i[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const i=this._sortedMetasets,s=[];let n,r;for(n=0,r=i.length;n<r;++n){const o=i[n];(!e||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let i=e.length-1;i>=0;--i)this._drawDataset(e[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const i=this.ctx,s={meta:e,index:e.index,cancelable:!0},n=rM(this,e);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(n&&A_(i,n),e.controller.draw(),n&&D_(i),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return f2(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,i,s,n){const r=UM.modes[i];return typeof r=="function"?r(this,e,s,n):[]}getDatasetMeta(e){const i=this.data.datasets[e],s=this._metasets;let n=s.filter(r=>r&&r._dataset===i).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:e,_dataset:i,_parsed:[],_sorted:!1},s.push(n)),n}getContext(){return this.$context||(this.$context=Rl(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const i=this.data.datasets[e];if(!i)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!i.hidden}setDatasetVisibility(e,i){const s=this.getDatasetMeta(e);s.hidden=!i}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,i,s){const n=s?"show":"hide",r=this.getDatasetMeta(e),o=r.controller._resolveAnimations(void 0,n);yc(i)?(r.data[i].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),o.update(r,{visible:s}),this.update(l=>l.datasetIndex===e?n:void 0))}hide(e,i){this._updateVisibility(e,i,!1)}show(e,i){this._updateVisibility(e,i,!0)}_destroyDatasetMeta(e){const i=this._metasets[e];i&&i.controller&&i.controller._destroy(),delete this._metasets[e]}_stop(){let e,i;for(this.stop(),cr.remove(this),e=0,i=this.data.datasets.length;e<i;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:i}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),mv(e,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete ad[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,i=this.platform,s=(r,o)=>{i.addEventListener(this,r,o),e[r]=o},n=(r,o,l)=>{r.offsetX=o,r.offsetY=l,this._eventHandler(r)};Pt(this.options.events,r=>s(r,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,i=this.platform,s=(u,h)=>{i.addEventListener(this,u,h),e[u]=h},n=(u,h)=>{e[u]&&(i.removeEventListener(this,u,h),delete e[u])},r=(u,h)=>{this.canvas&&this.resize(u,h)};let o;const l=()=>{n("attach",l),this.attached=!0,this.resize(),s("resize",r),s("detach",o)};o=()=>{this.attached=!1,n("resize",r),this._stop(),this._resize(0,0),s("attach",l)},i.isAttached(this.canvas)?l():o()}unbindEvents(){Pt(this._listeners,(e,i)=>{this.platform.removeEventListener(this,i,e)}),this._listeners={},Pt(this._responsiveListeners,(e,i)=>{this.platform.removeEventListener(this,i,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,i,s){const n=s?"set":"remove";let r,o,l,u;for(i==="dataset"&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+n+"DatasetHoverStyle"]()),l=0,u=e.length;l<u;++l){o=e[l];const h=o&&this.getDatasetMeta(o.datasetIndex).controller;h&&h[n+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const i=this._active||[],s=e.map(({datasetIndex:r,index:o})=>{const l=this.getDatasetMeta(r);if(!l)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:l.data[o],index:o}});!Sd(s,i)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,i))}notifyPlugins(e,i,s){return this._plugins.notify(this,e,i,s)}isPluginEnabled(e){return this._plugins._cache.filter(i=>i.plugin.id===e).length===1}_updateHoverStyles(e,i,s){const n=this.options.hover,r=(u,h)=>u.filter(d=>!h.some(m=>d.datasetIndex===m.datasetIndex&&d.index===m.index)),o=r(i,e),l=s?e:r(e,i);o.length&&this.updateHoverStyle(o,n.mode,!1),l.length&&n.mode&&this.updateHoverStyle(l,n.mode,!0)}_eventHandler(e,i){const s={event:e,replay:i,cancelable:!0,inChartArea:this.isPointInArea(e)},n=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,n)===!1)return;const r=this._handleEvent(e,i,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,n),(r||s.changed)&&this.render(),this}_handleEvent(e,i,s){const{_active:n=[],options:r}=this,o=i,l=this._getActiveElements(e,n,s,o),u=lO(e),h=HR(e,this._lastEvent,s,u);s&&(this._lastEvent=null,Vt(r.onHover,[e,l,this],this),u&&Vt(r.onClick,[e,l,this],this));const d=!Sd(l,n);return(d||i)&&(this._active=l,this._updateHoverStyles(l,n,i)),this._lastEvent=h,d}_getActiveElements(e,i,s,n){if(e.type==="mouseout")return[];if(!s)return i;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,n)}};function Xv(){return Pt(Sf.instances,t=>t._plugins.invalidate())}function VR(t,e,i){const{startAngle:s,x:n,y:r,outerRadius:o,innerRadius:l,options:u}=e,{borderWidth:h,borderJoinStyle:d}=u,m=Math.min(h/o,Mn(s-i));if(t.beginPath(),t.arc(n,r,o-h/2,s+m/2,i-m/2),l>0){const _=Math.min(h/l,Mn(s-i));t.arc(n,r,l+h/2,i-_/2,s+_/2,!0)}else{const _=Math.min(h/2,o*Mn(s-i));if(d==="round")t.arc(n,r,_,i-Ot/2,s+Ot/2,!0);else if(d==="bevel"){const T=2*_*_,C=-T*Math.cos(i+Ot/2)+n,x=-T*Math.sin(i+Ot/2)+r,E=T*Math.cos(s+Ot/2)+n,P=T*Math.sin(s+Ot/2)+r;t.lineTo(C,x),t.lineTo(E,P)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function qR(t,e,i){const{startAngle:s,pixelMargin:n,x:r,y:o,outerRadius:l,innerRadius:u}=e;let h=n/l;t.beginPath(),t.arc(r,o,l,s-h,i+h),u>n?(h=n/u,t.arc(r,o,u,i+h,s-h,!0)):t.arc(r,o,n,i+fi,s-fi),t.closePath(),t.clip()}function $R(t){return P_(t,["outerStart","outerEnd","innerStart","innerEnd"])}function WR(t,e,i,s){const n=$R(t.options.borderRadius),r=(i-e)/2,o=Math.min(r,s*e/2),l=u=>{const h=(i-Math.min(r,u))*s/2;return ps(u,0,Math.min(r,h))};return{outerStart:l(n.outerStart),outerEnd:l(n.outerEnd),innerStart:ps(n.innerStart,0,o),innerEnd:ps(n.innerEnd,0,o)}}function ja(t,e,i,s){return{x:i+t*Math.cos(e),y:s+t*Math.sin(e)}}function Id(t,e,i,s,n,r){const{x:o,y:l,startAngle:u,pixelMargin:h,innerRadius:d}=e,m=Math.max(e.outerRadius+s+i-h,0),_=d>0?d+s+i+h:0;let T=0;const C=n-u;if(s){const ce=d>0?d-s:0,le=m>0?m-s:0,se=(ce+le)/2,ee=se!==0?C*se/(se+s):C;T=(C-ee)/2}const x=Math.max(.001,C*m-i/Ot)/m,E=(C-x)/2,P=u+E+T,k=n-E-T,{outerStart:I,outerEnd:F,innerStart:z,innerEnd:q}=WR(e,_,m,k-P),U=m-I,Z=m-F,D=P+I/U,R=k-F/Z,Y=_+z,Q=_+q,J=P+z/Y,ae=k-q/Q;if(t.beginPath(),r){const ce=(D+R)/2;if(t.arc(o,l,m,D,ce),t.arc(o,l,m,ce,R),F>0){const fe=ja(Z,R,o,l);t.arc(fe.x,fe.y,F,R,k+fi)}const le=ja(Q,k,o,l);if(t.lineTo(le.x,le.y),q>0){const fe=ja(Q,ae,o,l);t.arc(fe.x,fe.y,q,k+fi,ae+Math.PI)}const se=(k-q/_+(P+z/_))/2;if(t.arc(o,l,_,k-q/_,se,!0),t.arc(o,l,_,se,P+z/_,!0),z>0){const fe=ja(Y,J,o,l);t.arc(fe.x,fe.y,z,J+Math.PI,P-fi)}const ee=ja(U,P,o,l);if(t.lineTo(ee.x,ee.y),I>0){const fe=ja(U,D,o,l);t.arc(fe.x,fe.y,I,P-fi,D)}}else{t.moveTo(o,l);const ce=Math.cos(D)*m+o,le=Math.sin(D)*m+l;t.lineTo(ce,le);const se=Math.cos(R)*m+o,ee=Math.sin(R)*m+l;t.lineTo(se,ee)}t.closePath()}function GR(t,e,i,s,n){const{fullCircles:r,startAngle:o,circumference:l}=e;let u=e.endAngle;if(r){Id(t,e,i,s,u,n);for(let h=0;h<r;++h)t.fill();isNaN(l)||(u=o+(l%li||li))}return Id(t,e,i,s,u,n),t.fill(),u}function XR(t,e,i,s,n){const{fullCircles:r,startAngle:o,circumference:l,options:u}=e,{borderWidth:h,borderJoinStyle:d,borderDash:m,borderDashOffset:_,borderRadius:T}=u,C=u.borderAlign==="inner";if(!h)return;t.setLineDash(m||[]),t.lineDashOffset=_,C?(t.lineWidth=h*2,t.lineJoin=d||"round"):(t.lineWidth=h,t.lineJoin=d||"bevel");let x=e.endAngle;if(r){Id(t,e,i,s,x,n);for(let E=0;E<r;++E)t.stroke();isNaN(l)||(x=o+(l%li||li))}C&&qR(t,e,x),u.selfJoin&&x-o>=Ot&&T===0&&d!=="miter"&&VR(t,e,x),r||(Id(t,e,i,s,x,n),t.stroke())}class KR extends ma{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,i,s){const n=this.getProps(["x","y"],s),{angle:r,distance:o}=r2(n,{x:e,y:i}),{startAngle:l,endAngle:u,innerRadius:h,outerRadius:d,circumference:m}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),_=(this.options.spacing+this.options.borderWidth)/2,T=gt(m,u-l),C=Ad(r,l,u)&&l!==u,x=T>=li||C,E=Xo(o,h+_,d+_);return x&&E}getCenterPoint(e){const{x:i,y:s,startAngle:n,endAngle:r,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:u,spacing:h}=this.options,d=(n+r)/2,m=(o+l+h+u)/2;return{x:i+Math.cos(d)*m,y:s+Math.sin(d)*m}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:i,circumference:s}=this,n=(i.offset||0)/4,r=(i.spacing||0)/2,o=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=s>li?Math.floor(s/li):0,s===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const l=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(l)*n,Math.sin(l)*n);const u=1-Math.sin(Math.min(Ot,s||0)),h=n*u;e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,GR(e,this,h,r,o),XR(e,this,h,r,o),e.restore()}}function O2(t,e){const{x:i,y:s,base:n,width:r,height:o}=t.getProps(["x","y","base","width","height"],e);let l,u,h,d,m;return t.horizontal?(m=o/2,l=Math.min(i,n),u=Math.max(i,n),h=s-m,d=s+m):(m=r/2,l=i-m,u=i+m,h=Math.min(s,n),d=Math.max(s,n)),{left:l,top:h,right:u,bottom:d}}function so(t,e,i,s){return t?0:ps(e,i,s)}function ZR(t,e,i){const s=t.options.borderWidth,n=t.borderSkipped,r=p2(s);return{t:so(n.top,r.top,0,i),r:so(n.right,r.right,0,e),b:so(n.bottom,r.bottom,0,i),l:so(n.left,r.left,0,e)}}function YR(t,e,i){const{enableBorderRadius:s}=t.getProps(["enableBorderRadius"]),n=t.options.borderRadius,r=il(n),o=Math.min(e,i),l=t.borderSkipped,u=s||_t(n);return{topLeft:so(!u||l.top||l.left,r.topLeft,0,o),topRight:so(!u||l.top||l.right,r.topRight,0,o),bottomLeft:so(!u||l.bottom||l.left,r.bottomLeft,0,o),bottomRight:so(!u||l.bottom||l.right,r.bottomRight,0,o)}}function QR(t){const e=O2(t),i=e.right-e.left,s=e.bottom-e.top,n=ZR(t,i/2,s/2),r=YR(t,i/2,s/2);return{outer:{x:e.left,y:e.top,w:i,h:s,radius:r},inner:{x:e.left+n.l,y:e.top+n.t,w:i-n.l-n.r,h:s-n.t-n.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,r.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(n.b,n.r))}}}}function um(t,e,i,s){const n=e===null,r=i===null,l=t&&!(n&&r)&&O2(t,s);return l&&(n||Xo(e,l.left,l.right))&&(r||Xo(i,l.top,l.bottom))}function JR(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function eN(t,e){t.rect(e.x,e.y,e.w,e.h)}function cm(t,e,i={}){const s=t.x!==i.x?-e:0,n=t.y!==i.y?-e:0,r=(t.x+t.w!==i.x+i.w?e:0)-s,o=(t.y+t.h!==i.y+i.h?e:0)-n;return{x:t.x+s,y:t.y+n,w:t.w+r,h:t.h+o,radius:t.radius}}class tN extends ma{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:i,options:{borderColor:s,backgroundColor:n}}=this,{inner:r,outer:o}=QR(this),l=JR(o.radius)?Dd:eN;e.save(),(o.w!==r.w||o.h!==r.h)&&(e.beginPath(),l(e,cm(o,i,r)),e.clip(),l(e,cm(r,-i,o)),e.fillStyle=s,e.fill("evenodd")),e.beginPath(),l(e,cm(r,i)),e.fillStyle=n,e.fill(),e.restore()}inRange(e,i,s){return um(this,e,i,s)}inXRange(e,i){return um(this,e,null,i)}inYRange(e,i){return um(this,null,e,i)}getCenterPoint(e){const{x:i,y:s,base:n,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(i+n)/2:i,y:r?s:(s+n)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}const Kv=(t,e)=>{let{boxHeight:i=e,boxWidth:s=e}=t;return t.usePointStyle&&(i=Math.min(i,e),s=t.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:i,itemHeight:Math.max(e,i)}},iN=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Zv extends ma{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,i,s){this.maxWidth=e,this.maxHeight=i,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let i=Vt(e.generateLabels,[this.chart],this)||[];e.filter&&(i=i.filter(s=>e.filter(s,this.chart.data))),e.sort&&(i=i.sort((s,n)=>e.sort(s,n,this.chart.data))),this.options.reverse&&i.reverse(),this.legendItems=i}fit(){const{options:e,ctx:i}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,n=Li(s.font),r=n.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:u}=Kv(s,r);let h,d;i.font=n.string,this.isHorizontal()?(h=this.maxWidth,d=this._fitRows(o,r,l,u)+10):(d=this.maxHeight,h=this._fitCols(o,n,l,u)+10),this.width=Math.min(h,e.maxWidth||this.maxWidth),this.height=Math.min(d,e.maxHeight||this.maxHeight)}_fitRows(e,i,s,n){const{ctx:r,maxWidth:o,options:{labels:{padding:l}}}=this,u=this.legendHitBoxes=[],h=this.lineWidths=[0],d=n+l;let m=e;r.textAlign="left",r.textBaseline="middle";let _=-1,T=-d;return this.legendItems.forEach((C,x)=>{const E=s+i/2+r.measureText(C.text).width;(x===0||h[h.length-1]+E+2*l>o)&&(m+=d,h[h.length-(x>0?0:1)]=0,T+=d,_++),u[x]={left:0,top:T,row:_,width:E,height:n},h[h.length-1]+=E+l}),m}_fitCols(e,i,s,n){const{ctx:r,maxHeight:o,options:{labels:{padding:l}}}=this,u=this.legendHitBoxes=[],h=this.columnSizes=[],d=o-e;let m=l,_=0,T=0,C=0,x=0;return this.legendItems.forEach((E,P)=>{const{itemWidth:k,itemHeight:I}=sN(s,i,r,E,n);P>0&&T+I+2*l>d&&(m+=_+l,h.push({width:_,height:T}),C+=_+l,x++,_=T=0),u[P]={left:C,top:T,col:x,width:k,height:I},_=Math.max(_,k),T+=I+l}),m+=_,h.push({width:_,height:T}),m}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:i,options:{align:s,labels:{padding:n},rtl:r}}=this,o=sl(r,this.left,this.width);if(this.isHorizontal()){let l=0,u=Ai(s,this.left+n,this.right-this.lineWidths[l]);for(const h of i)l!==h.row&&(l=h.row,u=Ai(s,this.left+n,this.right-this.lineWidths[l])),h.top+=this.top+e+n,h.left=o.leftForLtr(o.x(u),h.width),u+=h.width+n}else{let l=0,u=Ai(s,this.top+e+n,this.bottom-this.columnSizes[l].height);for(const h of i)h.col!==l&&(l=h.col,u=Ai(s,this.top+e+n,this.bottom-this.columnSizes[l].height)),h.top=u,h.left+=this.left+n,h.left=o.leftForLtr(o.x(h.left),h.width),u+=h.height+n}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;A_(e,this),this._draw(),D_(e)}}_draw(){const{options:e,columnSizes:i,lineWidths:s,ctx:n}=this,{align:r,labels:o}=e,l=ni.color,u=sl(e.rtl,this.left,this.width),h=Li(o.font),{padding:d}=o,m=h.size,_=m/2;let T;this.drawTitle(),n.textAlign=u.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=h.string;const{boxWidth:C,boxHeight:x,itemHeight:E}=Kv(o,m),P=function(q,U,Z){if(isNaN(C)||C<=0||isNaN(x)||x<0)return;n.save();const D=gt(Z.lineWidth,1);if(n.fillStyle=gt(Z.fillStyle,l),n.lineCap=gt(Z.lineCap,"butt"),n.lineDashOffset=gt(Z.lineDashOffset,0),n.lineJoin=gt(Z.lineJoin,"miter"),n.lineWidth=D,n.strokeStyle=gt(Z.strokeStyle,l),n.setLineDash(gt(Z.lineDash,[])),o.usePointStyle){const R={radius:x*Math.SQRT2/2,pointStyle:Z.pointStyle,rotation:Z.rotation,borderWidth:D},Y=u.xPlus(q,C/2),Q=U+_;d2(n,R,Y,Q,o.pointStyleWidth&&C)}else{const R=U+Math.max((m-x)/2,0),Y=u.leftForLtr(q,C),Q=il(Z.borderRadius);n.beginPath(),Object.values(Q).some(J=>J!==0)?Dd(n,{x:Y,y:R,w:C,h:x,radius:Q}):n.rect(Y,R,C,x),n.fill(),D!==0&&n.stroke()}n.restore()},k=function(q,U,Z){vc(n,Z.text,q,U+E/2,h,{strikethrough:Z.hidden,textAlign:u.textAlign(Z.textAlign)})},I=this.isHorizontal(),F=this._computeTitleHeight();I?T={x:Ai(r,this.left+d,this.right-s[0]),y:this.top+d+F,line:0}:T={x:this.left+d,y:Ai(r,this.top+F+d,this.bottom-i[0].height),line:0},v2(this.ctx,e.textDirection);const z=E+d;this.legendItems.forEach((q,U)=>{n.strokeStyle=q.fontColor,n.fillStyle=q.fontColor;const Z=n.measureText(q.text).width,D=u.textAlign(q.textAlign||(q.textAlign=o.textAlign)),R=C+_+Z;let Y=T.x,Q=T.y;u.setWidth(this.width),I?U>0&&Y+R+d>this.right&&(Q=T.y+=z,T.line++,Y=T.x=Ai(r,this.left+d,this.right-s[T.line])):U>0&&Q+z>this.bottom&&(Y=T.x=Y+i[T.line].width+d,T.line++,Q=T.y=Ai(r,this.top+F+d,this.bottom-i[T.line].height));const J=u.x(Y);if(P(J,Q,q),Y=TO(D,Y+C+_,I?Y+R:this.right,e.rtl),k(u.x(Y),Q,q),I)T.x+=R+d;else if(typeof q.text!="string"){const ae=h.lineHeight;T.y+=M2(q,ae)+d}else T.y+=z}),b2(this.ctx,e.textDirection)}drawTitle(){const e=this.options,i=e.title,s=Li(i.font),n=Ks(i.padding);if(!i.display)return;const r=sl(e.rtl,this.left,this.width),o=this.ctx,l=i.position,u=s.size/2,h=n.top+u;let d,m=this.left,_=this.width;if(this.isHorizontal())_=Math.max(...this.lineWidths),d=this.top+h,m=Ai(e.align,m,this.right-_);else{const C=this.columnSizes.reduce((x,E)=>Math.max(x,E.height),0);d=h+Ai(e.align,this.top,this.bottom-C-e.labels.padding-this._computeTitleHeight())}const T=Ai(l,m,m+_);o.textAlign=r.textAlign(w_(l)),o.textBaseline="middle",o.strokeStyle=i.color,o.fillStyle=i.color,o.font=s.string,vc(o,i.text,T,d,s)}_computeTitleHeight(){const e=this.options.title,i=Li(e.font),s=Ks(e.padding);return e.display?i.lineHeight+s.height:0}_getLegendItemAt(e,i){let s,n,r;if(Xo(e,this.left,this.right)&&Xo(i,this.top,this.bottom)){for(r=this.legendHitBoxes,s=0;s<r.length;++s)if(n=r[s],Xo(e,n.left,n.left+n.width)&&Xo(i,n.top,n.top+n.height))return this.legendItems[s]}return null}handleEvent(e){const i=this.options;if(!oN(e.type,i))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const n=this._hoveredItem,r=iN(n,s);n&&!r&&Vt(i.onLeave,[e,n,this],this),this._hoveredItem=s,s&&!r&&Vt(i.onHover,[e,s,this],this)}else s&&Vt(i.onClick,[e,s,this],this)}}function sN(t,e,i,s,n){const r=nN(s,t,e,i),o=rN(n,s,e.lineHeight);return{itemWidth:r,itemHeight:o}}function nN(t,e,i,s){let n=t.text;return n&&typeof n!="string"&&(n=n.reduce((r,o)=>r.length>o.length?r:o)),e+i.size/2+s.measureText(n).width}function rN(t,e,i){let s=t;return typeof e.text!="string"&&(s=M2(e,i)),s}function M2(t,e){const i=t.text?t.text.length:0;return e*i}function oN(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var aN={id:"legend",_element:Zv,start(t,e,i){const s=t.legend=new Zv({ctx:t.ctx,options:i,chart:t});Vs.configure(t,s,i),Vs.addBox(t,s)},stop(t){Vs.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,i){const s=t.legend;Vs.configure(t,s,i),s.options=i},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,i){const s=e.datasetIndex,n=i.chart;n.isDatasetVisible(s)?(n.hide(s),e.hidden=!0):(n.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:i,pointStyle:s,textAlign:n,color:r,useBorderRadius:o,borderRadius:l}}=t.legend.options;return t._getSortedDatasetMetas().map(u=>{const h=u.controller.getStyle(i?0:void 0),d=Ks(h.borderWidth);return{text:e[u.index].label,fillStyle:h.backgroundColor,fontColor:r,hidden:!u.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:h.borderColor,pointStyle:s||h.pointStyle,rotation:h.rotation,textAlign:n||h.textAlign,borderRadius:o&&(l||h.borderRadius),datasetIndex:u.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class R2 extends ma{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,i){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=i;const n=di(s.text)?s.text.length:1;this._padding=Ks(s.padding);const r=n*Li(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:i,left:s,bottom:n,right:r,options:o}=this,l=o.align;let u=0,h,d,m;return this.isHorizontal()?(d=Ai(l,s,r),m=i+e,h=r-s):(o.position==="left"?(d=s+e,m=Ai(l,n,i),u=Ot*-.5):(d=r-e,m=Ai(l,i,n),u=Ot*.5),h=n-i),{titleX:d,titleY:m,maxWidth:h,rotation:u}}draw(){const e=this.ctx,i=this.options;if(!i.display)return;const s=Li(i.font),r=s.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:u,rotation:h}=this._drawArgs(r);vc(e,i.text,0,0,s,{color:i.color,maxWidth:u,rotation:h,textAlign:w_(i.align),textBaseline:"middle",translation:[o,l]})}}function lN(t,e){const i=new R2({ctx:t.ctx,options:e,chart:t});Vs.configure(t,i,e),Vs.addBox(t,i),t.titleBlock=i}var uN={id:"title",_element:R2,start(t,e,i){lN(t,i)},stop(t){const e=t.titleBlock;Vs.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,i){const s=t.titleBlock;Vs.configure(t,s,i),s.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const zu={average(t){if(!t.length)return!1;let e,i,s=new Set,n=0,r=0;for(e=0,i=t.length;e<i;++e){const l=t[e].element;if(l&&l.hasValue()){const u=l.tooltipPosition();s.add(u.x),n+=u.y,++r}}return r===0||s.size===0?!1:{x:[...s].reduce((l,u)=>l+u)/s.size,y:n/r}},nearest(t,e){if(!t.length)return!1;let i=e.x,s=e.y,n=Number.POSITIVE_INFINITY,r,o,l;for(r=0,o=t.length;r<o;++r){const u=t[r].element;if(u&&u.hasValue()){const h=u.getCenterPoint(),d=mO(e,h);d<n&&(n=d,l=u)}}if(l){const u=l.tooltipPosition();i=u.x,s=u.y}return{x:i,y:s}}};function In(t,e){return e&&(di(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function hr(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function cN(t,e){const{element:i,datasetIndex:s,index:n}=e,r=t.getDatasetMeta(s).controller,{label:o,value:l}=r.getLabelAndValue(n);return{chart:t,label:o,parsed:r.getParsed(n),raw:t.data.datasets[s].data[n],formattedValue:l,dataset:r.getDataset(),dataIndex:n,datasetIndex:s,element:i}}function Yv(t,e){const i=t.chart.ctx,{body:s,footer:n,title:r}=t,{boxWidth:o,boxHeight:l}=e,u=Li(e.bodyFont),h=Li(e.titleFont),d=Li(e.footerFont),m=r.length,_=n.length,T=s.length,C=Ks(e.padding);let x=C.height,E=0,P=s.reduce((F,z)=>F+z.before.length+z.lines.length+z.after.length,0);if(P+=t.beforeBody.length+t.afterBody.length,m&&(x+=m*h.lineHeight+(m-1)*e.titleSpacing+e.titleMarginBottom),P){const F=e.displayColors?Math.max(l,u.lineHeight):u.lineHeight;x+=T*F+(P-T)*u.lineHeight+(P-1)*e.bodySpacing}_&&(x+=e.footerMarginTop+_*d.lineHeight+(_-1)*e.footerSpacing);let k=0;const I=function(F){E=Math.max(E,i.measureText(F).width+k)};return i.save(),i.font=h.string,Pt(t.title,I),i.font=u.string,Pt(t.beforeBody.concat(t.afterBody),I),k=e.displayColors?o+2+e.boxPadding:0,Pt(s,F=>{Pt(F.before,I),Pt(F.lines,I),Pt(F.after,I)}),k=0,i.font=d.string,Pt(t.footer,I),i.restore(),E+=C.width,{width:E,height:x}}function hN(t,e){const{y:i,height:s}=e;return i<s/2?"top":i>t.height-s/2?"bottom":"center"}function dN(t,e,i,s){const{x:n,width:r}=s,o=i.caretSize+i.caretPadding;if(t==="left"&&n+r+o>e.width||t==="right"&&n-r-o<0)return!0}function fN(t,e,i,s){const{x:n,width:r}=i,{width:o,chartArea:{left:l,right:u}}=t;let h="center";return s==="center"?h=n<=(l+u)/2?"left":"right":n<=r/2?h="left":n>=o-r/2&&(h="right"),dN(h,t,e,i)&&(h="center"),h}function Qv(t,e,i){const s=i.yAlign||e.yAlign||hN(t,i);return{xAlign:i.xAlign||e.xAlign||fN(t,e,i,s),yAlign:s}}function pN(t,e){let{x:i,width:s}=t;return e==="right"?i-=s:e==="center"&&(i-=s/2),i}function mN(t,e,i){let{y:s,height:n}=t;return e==="top"?s+=i:e==="bottom"?s-=n+i:s-=n/2,s}function Jv(t,e,i,s){const{caretSize:n,caretPadding:r,cornerRadius:o}=t,{xAlign:l,yAlign:u}=i,h=n+r,{topLeft:d,topRight:m,bottomLeft:_,bottomRight:T}=il(o);let C=pN(e,l);const x=mN(e,u,h);return u==="center"?l==="left"?C+=h:l==="right"&&(C-=h):l==="left"?C-=Math.max(d,_)+n:l==="right"&&(C+=Math.max(m,T)+n),{x:ps(C,0,s.width-e.width),y:ps(x,0,s.height-e.height)}}function Hh(t,e,i){const s=Ks(i.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-s.right:t.x+s.left}function eb(t){return In([],hr(t))}function gN(t,e,i){return Rl(t,{tooltip:e,tooltipItems:i,type:"tooltip"})}function tb(t,e){const i=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return i?t.override(i):t}const N2={beforeTitle:lr,title(t){if(t.length>0){const e=t[0],i=e.chart.data.labels,s=i?i.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return i[e.dataIndex]}return""},afterTitle:lr,beforeBody:lr,beforeLabel:lr,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const i=t.formattedValue;return Mt(i)||(e+=i),e},labelColor(t){const i=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:i.borderColor,backgroundColor:i.backgroundColor,borderWidth:i.borderWidth,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const i=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:i.pointStyle,rotation:i.rotation}},afterLabel:lr,afterBody:lr,beforeFooter:lr,footer:lr,afterFooter:lr};function ls(t,e,i,s){const n=t[e].call(i,s);return typeof n>"u"?N2[e].call(i,s):n}class ib extends ma{static positioners=zu;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const i=this.chart,s=this.options.setContext(this.getContext()),n=s.enabled&&i.options.animation&&s.animations,r=new T2(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=gN(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,i){const{callbacks:s}=i,n=ls(s,"beforeTitle",this,e),r=ls(s,"title",this,e),o=ls(s,"afterTitle",this,e);let l=[];return l=In(l,hr(n)),l=In(l,hr(r)),l=In(l,hr(o)),l}getBeforeBody(e,i){return eb(ls(i.callbacks,"beforeBody",this,e))}getBody(e,i){const{callbacks:s}=i,n=[];return Pt(e,r=>{const o={before:[],lines:[],after:[]},l=tb(s,r);In(o.before,hr(ls(l,"beforeLabel",this,r))),In(o.lines,ls(l,"label",this,r)),In(o.after,hr(ls(l,"afterLabel",this,r))),n.push(o)}),n}getAfterBody(e,i){return eb(ls(i.callbacks,"afterBody",this,e))}getFooter(e,i){const{callbacks:s}=i,n=ls(s,"beforeFooter",this,e),r=ls(s,"footer",this,e),o=ls(s,"afterFooter",this,e);let l=[];return l=In(l,hr(n)),l=In(l,hr(r)),l=In(l,hr(o)),l}_createItems(e){const i=this._active,s=this.chart.data,n=[],r=[],o=[];let l=[],u,h;for(u=0,h=i.length;u<h;++u)l.push(cN(this.chart,i[u]));return e.filter&&(l=l.filter((d,m,_)=>e.filter(d,m,_,s))),e.itemSort&&(l=l.sort((d,m)=>e.itemSort(d,m,s))),Pt(l,d=>{const m=tb(e.callbacks,d);n.push(ls(m,"labelColor",this,d)),r.push(ls(m,"labelPointStyle",this,d)),o.push(ls(m,"labelTextColor",this,d))}),this.labelColors=n,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=l,l}update(e,i){const s=this.options.setContext(this.getContext()),n=this._active;let r,o=[];if(!n.length)this.opacity!==0&&(r={opacity:0});else{const l=zu[s.position].call(this,n,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const u=this._size=Yv(this,s),h=Object.assign({},l,u),d=Qv(this.chart,s,h),m=Jv(s,h,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,r={opacity:1,x:m.x,y:m.y,width:u.width,height:u.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(e,i,s,n){const r=this.getCaretPosition(e,s,n);i.lineTo(r.x1,r.y1),i.lineTo(r.x2,r.y2),i.lineTo(r.x3,r.y3)}getCaretPosition(e,i,s){const{xAlign:n,yAlign:r}=this,{caretSize:o,cornerRadius:l}=s,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:m}=il(l),{x:_,y:T}=e,{width:C,height:x}=i;let E,P,k,I,F,z;return r==="center"?(F=T+x/2,n==="left"?(E=_,P=E-o,I=F+o,z=F-o):(E=_+C,P=E+o,I=F-o,z=F+o),k=E):(n==="left"?P=_+Math.max(u,d)+o:n==="right"?P=_+C-Math.max(h,m)-o:P=this.caretX,r==="top"?(I=T,F=I-o,E=P-o,k=P+o):(I=T+x,F=I+o,E=P+o,k=P-o),z=I),{x1:E,x2:P,x3:k,y1:I,y2:F,y3:z}}drawTitle(e,i,s){const n=this.title,r=n.length;let o,l,u;if(r){const h=sl(s.rtl,this.x,this.width);for(e.x=Hh(this,s.titleAlign,s),i.textAlign=h.textAlign(s.titleAlign),i.textBaseline="middle",o=Li(s.titleFont),l=s.titleSpacing,i.fillStyle=s.titleColor,i.font=o.string,u=0;u<r;++u)i.fillText(n[u],h.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+l,u+1===r&&(e.y+=s.titleMarginBottom-l)}}_drawColorBox(e,i,s,n,r){const o=this.labelColors[s],l=this.labelPointStyles[s],{boxHeight:u,boxWidth:h}=r,d=Li(r.bodyFont),m=Hh(this,"left",r),_=n.x(m),T=u<d.lineHeight?(d.lineHeight-u)/2:0,C=i.y+T;if(r.usePointStyle){const x={radius:Math.min(h,u)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},E=n.leftForLtr(_,h)+h/2,P=C+u/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,gv(e,x,E,P),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,gv(e,x,E,P)}else{e.lineWidth=_t(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const x=n.leftForLtr(_,h),E=n.leftForLtr(n.xPlus(_,1),h-2),P=il(o.borderRadius);Object.values(P).some(k=>k!==0)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,Dd(e,{x,y:C,w:h,h:u,radius:P}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Dd(e,{x:E,y:C+1,w:h-2,h:u-2,radius:P}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(x,C,h,u),e.strokeRect(x,C,h,u),e.fillStyle=o.backgroundColor,e.fillRect(E,C+1,h-2,u-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,i,s){const{body:n}=this,{bodySpacing:r,bodyAlign:o,displayColors:l,boxHeight:u,boxWidth:h,boxPadding:d}=s,m=Li(s.bodyFont);let _=m.lineHeight,T=0;const C=sl(s.rtl,this.x,this.width),x=function(Z){i.fillText(Z,C.x(e.x+T),e.y+_/2),e.y+=_+r},E=C.textAlign(o);let P,k,I,F,z,q,U;for(i.textAlign=o,i.textBaseline="middle",i.font=m.string,e.x=Hh(this,E,s),i.fillStyle=s.bodyColor,Pt(this.beforeBody,x),T=l&&E!=="right"?o==="center"?h/2+d:h+2+d:0,F=0,q=n.length;F<q;++F){for(P=n[F],k=this.labelTextColors[F],i.fillStyle=k,Pt(P.before,x),I=P.lines,l&&I.length&&(this._drawColorBox(i,e,F,C,s),_=Math.max(m.lineHeight,u)),z=0,U=I.length;z<U;++z)x(I[z]),_=m.lineHeight;Pt(P.after,x)}T=0,_=m.lineHeight,Pt(this.afterBody,x),e.y-=r}drawFooter(e,i,s){const n=this.footer,r=n.length;let o,l;if(r){const u=sl(s.rtl,this.x,this.width);for(e.x=Hh(this,s.footerAlign,s),e.y+=s.footerMarginTop,i.textAlign=u.textAlign(s.footerAlign),i.textBaseline="middle",o=Li(s.footerFont),i.fillStyle=s.footerColor,i.font=o.string,l=0;l<r;++l)i.fillText(n[l],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+s.footerSpacing}}drawBackground(e,i,s,n){const{xAlign:r,yAlign:o}=this,{x:l,y:u}=e,{width:h,height:d}=s,{topLeft:m,topRight:_,bottomLeft:T,bottomRight:C}=il(n.cornerRadius);i.fillStyle=n.backgroundColor,i.strokeStyle=n.borderColor,i.lineWidth=n.borderWidth,i.beginPath(),i.moveTo(l+m,u),o==="top"&&this.drawCaret(e,i,s,n),i.lineTo(l+h-_,u),i.quadraticCurveTo(l+h,u,l+h,u+_),o==="center"&&r==="right"&&this.drawCaret(e,i,s,n),i.lineTo(l+h,u+d-C),i.quadraticCurveTo(l+h,u+d,l+h-C,u+d),o==="bottom"&&this.drawCaret(e,i,s,n),i.lineTo(l+T,u+d),i.quadraticCurveTo(l,u+d,l,u+d-T),o==="center"&&r==="left"&&this.drawCaret(e,i,s,n),i.lineTo(l,u+m),i.quadraticCurveTo(l,u,l+m,u),i.closePath(),i.fill(),n.borderWidth>0&&i.stroke()}_updateAnimationTarget(e){const i=this.chart,s=this.$animations,n=s&&s.x,r=s&&s.y;if(n||r){const o=zu[e.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=Yv(this,e),u=Object.assign({},o,this._size),h=Qv(i,e,u),d=Jv(e,u,h,i);(n._to!==d.x||r._to!==d.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(e){const i=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(i);const n={width:this.width,height:this.height},r={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=Ks(i.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&l&&(e.save(),e.globalAlpha=s,this.drawBackground(r,e,n,i),v2(e,i.textDirection),r.y+=o.top,this.drawTitle(r,e,i),this.drawBody(r,e,i),this.drawFooter(r,e,i),b2(e,i.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,i){const s=this._active,n=e.map(({datasetIndex:l,index:u})=>{const h=this.chart.getDatasetMeta(l);if(!h)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:h.data[u],index:u}}),r=!Sd(s,n),o=this._positionChanged(n,i);(r||o)&&(this._active=n,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,i,s=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,r=this._active||[],o=this._getActiveElements(e,r,i,s),l=this._positionChanged(o,e),u=i||!Sd(o,r)||l;return u&&(this._active=o,(n.enabled||n.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,i))),u}_getActiveElements(e,i,s,n){const r=this.options;if(e.type==="mouseout")return[];if(!n)return i.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,r.mode,r,s);return r.reverse&&o.reverse(),o}_positionChanged(e,i){const{caretX:s,caretY:n,options:r}=this,o=zu[r.position].call(this,e,i);return o!==!1&&(s!==o.x||n!==o.y)}}var _N={id:"tooltip",_element:ib,positioners:zu,afterInit(t,e,i){i&&(t.tooltip=new ib({chart:t,options:i}))},beforeUpdate(t,e,i){t.tooltip&&t.tooltip.initialize(i)},reset(t,e,i){t.tooltip&&t.tooltip.initialize(i)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const i={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...i,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",i)}},afterEvent(t,e){if(t.tooltip){const i=e.replay;t.tooltip.handleEvent(e.event,i,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:N2},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const yN=(t,e,i,s)=>(typeof e=="string"?(i=t.push(e)-1,s.unshift({index:i,label:e})):isNaN(e)&&(i=null),i);function vN(t,e,i,s){const n=t.indexOf(e);if(n===-1)return yN(t,e,i,s);const r=t.lastIndexOf(e);return n!==r?i:n}const bN=(t,e)=>t===null?null:ps(Math.round(t),0,e);function sb(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class TN extends Nl{static id="category";static defaults={ticks:{callback:sb}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const i=this._addedLabels;if(i.length){const s=this.getLabels();for(const{index:n,label:r}of i)s[n]===r&&s.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,i){if(Mt(e))return null;const s=this.getLabels();return i=isFinite(i)&&s[i]===e?i:vN(s,e,gt(i,e),this._addedLabels),bN(i,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:s,max:n}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),i||(n=this.getLabels().length-1)),this.min=s,this.max=n}buildTicks(){const e=this.min,i=this.max,s=this.options.offset,n=[];let r=this.getLabels();r=e===0&&i===r.length-1?r:r.slice(e,i+1),this._valueRange=Math.max(r.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=e;o<=i;o++)n.push({value:o});return n}getLabelForValue(e){return sb.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const i=this.ticks;return e<0||e>i.length-1?null:this.getPixelForValue(i[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function xN(t,e){const i=[],{bounds:n,step:r,min:o,max:l,precision:u,count:h,maxTicks:d,maxDigits:m,includeBounds:_}=t,T=r||1,C=d-1,{min:x,max:E}=e,P=!Mt(o),k=!Mt(l),I=!Mt(h),F=(E-x)/(m+1);let z=av((E-x)/C/T)*T,q,U,Z,D;if(z<1e-14&&!P&&!k)return[{value:x},{value:E}];D=Math.ceil(E/z)-Math.floor(x/z),D>C&&(z=av(D*z/C/T)*T),Mt(u)||(q=Math.pow(10,u),z=Math.ceil(z*q)/q),n==="ticks"?(U=Math.floor(x/z)*z,Z=Math.ceil(E/z)*z):(U=x,Z=E),P&&k&&r&&dO((l-o)/r,z/1e3)?(D=Math.round(Math.min((l-o)/z,d)),z=(l-o)/D,U=o,Z=l):I?(U=P?o:U,Z=k?l:Z,D=h-1,z=(Z-U)/D):(D=(Z-U)/z,rd(D,Math.round(D),z/1e3)?D=Math.round(D):D=Math.ceil(D));const R=Math.max(lv(z),lv(U));q=Math.pow(10,Mt(u)?R:u),U=Math.round(U*q)/q,Z=Math.round(Z*q)/q;let Y=0;for(P&&(_&&U!==o?(i.push({value:o}),U<o&&Y++,rd(Math.round((U+Y*z)*q)/q,o,nb(o,F,t))&&Y++):U<o&&Y++);Y<D;++Y){const Q=Math.round((U+Y*z)*q)/q;if(k&&Q>l)break;i.push({value:Q})}return k&&_&&Z!==l?i.length&&rd(i[i.length-1].value,l,nb(l,F,t))?i[i.length-1].value=l:i.push({value:l}):(!k||Z===l)&&i.push({value:Z}),i}function nb(t,e,{horizontal:i,minRotation:s}){const n=vr(s),r=(i?Math.sin(n):Math.cos(n))||.001,o=.75*e*(""+t).length;return Math.min(e/r,o)}class SN extends Nl{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,i){return Mt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:i,maxDefined:s}=this.getUserBounds();let{min:n,max:r}=this;const o=u=>n=i?n:u,l=u=>r=s?r:u;if(e){const u=oo(n),h=oo(r);u<0&&h<0?l(0):u>0&&h>0&&o(0)}if(n===r){let u=r===0?1:Math.abs(r*.05);l(r+u),e||o(n-u)}this.min=n,this.max=r}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:i,stepSize:s}=e,n;return s?(n=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,n>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${n} ticks. Limiting to 1000.`),n=1e3)):(n=this.computeTickLimit(),i=i||11),i&&(n=Math.min(i,n)),n}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,i=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const n={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:i.precision,step:i.stepSize,count:i.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:i.minRotation||0,includeBounds:i.includeBounds!==!1},r=this._range||this,o=xN(n,r);return e.bounds==="ticks"&&fO(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let i=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const n=(s-i)/Math.max(e.length-1,1)/2;i-=n,s+=n}this._startValue=i,this._endValue=s,this._valueRange=s-i}getLabelForValue(e){return E_(e,this.chart.options.locale,this.options.ticks.format)}}class CN extends SN{static id="linear";static defaults={ticks:{callback:h2.formatters.numeric}};determineDataLimits(){const{min:e,max:i}=this.getMinMax(!0);this.min=Xs(e)?e:0,this.max=Xs(i)?i:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),i=e?this.width:this.height,s=vr(this.options.ticks.minRotation),n=(e?Math.sin(s):Math.cos(s))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(i/Math.min(40,r.lineHeight/n))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const Cf={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ds=Object.keys(Cf);function rb(t,e){return t-e}function ob(t,e){if(Mt(e))return null;const i=t._adapter,{parser:s,round:n,isoWeekday:r}=t._parseOpts;let o=e;return typeof s=="function"&&(o=s(o)),Xs(o)||(o=typeof s=="string"?i.parse(o,s):i.parse(o)),o===null?null:(n&&(o=n==="week"&&(Ed(r)||r===!0)?i.startOf(o,"isoWeek",r):i.startOf(o,n)),+o)}function ab(t,e,i,s){const n=ds.length;for(let r=ds.indexOf(t);r<n-1;++r){const o=Cf[ds[r]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((i-e)/(l*o.size))<=s)return ds[r]}return ds[n-1]}function wN(t,e,i,s,n){for(let r=ds.length-1;r>=ds.indexOf(i);r--){const o=ds[r];if(Cf[o].common&&t._adapter.diff(n,s,o)>=e-1)return o}return ds[i?ds.indexOf(i):0]}function EN(t){for(let e=ds.indexOf(t)+1,i=ds.length;e<i;++e)if(Cf[ds[e]].common)return ds[e]}function lb(t,e,i){if(!i)t[e]=!0;else if(i.length){const{lo:s,hi:n}=C_(i,e),r=i[s]>=e?i[s]:i[n];t[r]=!0}}function AN(t,e,i,s){const n=t._adapter,r=+n.startOf(e[0].value,s),o=e[e.length-1].value;let l,u;for(l=r;l<=o;l=+n.add(l,1,s))u=i[l],u>=0&&(e[u].major=!0);return e}function ub(t,e,i){const s=[],n={},r=e.length;let o,l;for(o=0;o<r;++o)l=e[o],n[l]=o,s.push({value:l,major:!1});return r===0||!i?s:AN(t,s,n,i)}class cb extends Nl{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,i={}){const s=e.time||(e.time={}),n=this._adapter=new MM._date(e.adapters.date);n.init(i),ec(s.displayFormats,n.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=i.normalized}parse(e,i){return e===void 0?null:ob(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,i=this._adapter,s=e.time.unit||"day";let{min:n,max:r,minDefined:o,maxDefined:l}=this.getUserBounds();function u(h){!o&&!isNaN(h.min)&&(n=Math.min(n,h.min)),!l&&!isNaN(h.max)&&(r=Math.max(r,h.max))}(!o||!l)&&(u(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&u(this.getMinMax(!1))),n=Xs(n)&&!isNaN(n)?n:+i.startOf(Date.now(),s),r=Xs(r)&&!isNaN(r)?r:+i.endOf(Date.now(),s)+1,this.min=Math.min(n,r-1),this.max=Math.max(n+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let i=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(i=e[0],s=e[e.length-1]),{min:i,max:s}}buildTicks(){const e=this.options,i=e.time,s=e.ticks,n=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const r=this.min,o=this.max,l=yO(n,r,o);return this._unit=i.unit||(s.autoSkip?ab(i.minUnit,this.min,this.max,this._getLabelCapacity(r)):wN(this,l.length,i.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:EN(this._unit),this.initOffsets(n),e.reverse&&l.reverse(),ub(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let i=0,s=0,n,r;this.options.offset&&e.length&&(n=this.getDecimalForValue(e[0]),e.length===1?i=1-n:i=(this.getDecimalForValue(e[1])-n)/2,r=this.getDecimalForValue(e[e.length-1]),e.length===1?s=r:s=(r-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;i=ps(i,0,o),s=ps(s,0,o),this._offsets={start:i,end:s,factor:1/(i+1+s)}}_generate(){const e=this._adapter,i=this.min,s=this.max,n=this.options,r=n.time,o=r.unit||ab(r.minUnit,i,s,this._getLabelCapacity(i)),l=gt(n.ticks.stepSize,1),u=o==="week"?r.isoWeekday:!1,h=Ed(u)||u===!0,d={};let m=i,_,T;if(h&&(m=+e.startOf(m,"isoWeek",u)),m=+e.startOf(m,h?"day":o),e.diff(s,i,o)>1e5*l)throw new Error(i+" and "+s+" are too far apart with stepSize of "+l+" "+o);const C=n.ticks.source==="data"&&this.getDataTimestamps();for(_=m,T=0;_<s;_=+e.add(_,l,o),T++)lb(d,_,C);return(_===s||n.bounds==="ticks"||T===1)&&lb(d,_,C),Object.keys(d).sort(rb).map(x=>+x)}getLabelForValue(e){const i=this._adapter,s=this.options.time;return s.tooltipFormat?i.format(e,s.tooltipFormat):i.format(e,s.displayFormats.datetime)}format(e,i){const n=this.options.time.displayFormats,r=this._unit,o=i||n[r];return this._adapter.format(e,o)}_tickFormatFunction(e,i,s,n){const r=this.options,o=r.ticks.callback;if(o)return Vt(o,[e,i,s],this);const l=r.time.displayFormats,u=this._unit,h=this._majorUnit,d=u&&l[u],m=h&&l[h],_=s[i],T=h&&m&&_&&_.major;return this._adapter.format(e,n||(T?m:d))}generateTickLabels(e){let i,s,n;for(i=0,s=e.length;i<s;++i)n=e[i],n.label=this._tickFormatFunction(n.value,i,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const i=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((i.start+s)*i.factor)}getValueForPixel(e){const i=this._offsets,s=this.getDecimalForPixel(e)/i.factor-i.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const i=this.options.ticks,s=this.ctx.measureText(e).width,n=vr(this.isHorizontal()?i.maxRotation:i.minRotation),r=Math.cos(n),o=Math.sin(n),l=this._resolveTickFontOptions(0).size;return{w:s*r+l*o,h:s*o+l*r}}_getLabelCapacity(e){const i=this.options.time,s=i.displayFormats,n=s[i.unit]||s.millisecond,r=this._tickFormatFunction(e,0,ub(this,[e],this._majorUnit),n),o=this._getLabelSize(r),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],i,s;if(e.length)return e;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(i=0,s=n.length;i<s;++i)e=e.concat(n[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let i,s;if(e.length)return e;const n=this.getLabels();for(i=0,s=n.length;i<s;++i)e.push(ob(this,n[i]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return a2(e.sort(rb))}}function Vh(t,e,i){let s=0,n=t.length-1,r,o,l,u;i?(e>=t[s].pos&&e<=t[n].pos&&({lo:s,hi:n}=dg(t,"pos",e)),{pos:r,time:l}=t[s],{pos:o,time:u}=t[n]):(e>=t[s].time&&e<=t[n].time&&({lo:s,hi:n}=dg(t,"time",e)),{time:r,pos:l}=t[s],{time:o,pos:u}=t[n]);const h=o-r;return h?l+(u-l)*(e-r)/h:l}class YU extends cb{static id="timeseries";static defaults=cb.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),i=this._table=this.buildLookupTable(e);this._minPos=Vh(i,this.min),this._tableRange=Vh(i,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:i,max:s}=this,n=[],r=[];let o,l,u,h,d;for(o=0,l=e.length;o<l;++o)h=e[o],h>=i&&h<=s&&n.push(h);if(n.length<2)return[{time:i,pos:0},{time:s,pos:1}];for(o=0,l=n.length;o<l;++o)d=n[o+1],u=n[o-1],h=n[o],Math.round((d+u)/2)!==h&&r.push({time:h,pos:o/(l-1)});return r}_generate(){const e=this.min,i=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(i)||s.length===1)&&s.push(i),s.sort((n,r)=>n-r)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const i=this.getDataTimestamps(),s=this.getLabelTimestamps();return i.length&&s.length?e=this.normalize(i.concat(s)):e=i.length?i:s,e=this._cache.all=e,e}getDecimalForValue(e){return(Vh(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const i=this._offsets,s=this.getDecimalForPixel(e)/i.factor-i.end;return Vh(this._table,s*this._tableRange+this._minPos,!0)}}const B2={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},DN={ariaLabel:{type:String},ariaDescribedby:{type:String}},PN={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...B2,...DN},kN=Vx[0]==="2"?(t,e)=>Object.assign(t,{attrs:e}):(t,e)=>Object.assign(t,e);function za(t){return Pc(t)?pt(t):t}function IN(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t;return Pc(e)?new Proxy(t,{}):t}function LN(t,e){const i=t.options;i&&e&&Object.assign(i,e)}function F2(t,e){t.labels=e}function U2(t,e,i){const s=[];t.datasets=e.map(n=>{const r=t.datasets.find(o=>o[i]===n[i]);return!r||!n.data||s.includes(r)?{...n}:(s.push(r),Object.assign(r,n),r)})}function ON(t,e){const i={labels:[],datasets:[]};return F2(i,t.labels),U2(i,t.datasets,e),i}const MN=bs({props:PN,setup(t,e){let{expose:i,slots:s}=e;const n=ui(null),r=e_(null);i({chart:r});const o=()=>{if(!n.value)return;const{type:h,data:d,options:m,plugins:_,datasetIdKey:T}=t,C=ON(d,T),x=IN(C,d);r.value=new Sf(n.value,{type:h,data:x,options:{...m},plugins:_})},l=()=>{const h=pt(r.value);h&&(t.destroyDelay>0?setTimeout(()=>{h.destroy(),r.value=null},t.destroyDelay):(h.destroy(),r.value=null))},u=h=>{h.update(t.updateMode)};return Qs(o),kl(l),Jo([()=>t.options,()=>t.data],(h,d)=>{let[m,_]=h,[T,C]=d;const x=pt(r.value);if(!x)return;let E=!1;if(m){const P=za(m),k=za(T);P&&P!==k&&(LN(x,P),E=!0)}if(_){const P=za(_.labels),k=za(C.labels),I=za(_.datasets),F=za(C.datasets);P!==k&&(F2(x.config.data,P),E=!0),I&&I!==F&&(U2(x.config.data,I,t.datasetIdKey),E=!0)}E&&Ji(()=>{u(x)})},{deep:!0}),()=>fn("canvas",{role:"img","aria-label":t.ariaLabel,"aria-describedby":t.ariaDescribedby,ref:n},[fn("p",{},[s.default?s.default():""])])}});function j2(t,e){return Sf.register(e),bs({props:B2,setup(i,s){let{expose:n}=s;const r=e_(null),o=l=>{r.value=l?.chart};return n({chart:r}),()=>fn(MN,kN({ref:o},{type:t,...i}))}})}const RN=j2("bar",kM),NN=j2("pie",OM);console.log("StatsGraph");Sf.register(TN,CN,tN,KR,uN,_N,aN);function hb(t){return localStorage.getItem("colorblindMode")==="true"&&{"#0000e8":"#d73027","#6060e8":"#fc8d59","#b0b0e8":"#fee090","#578817":"#4575b4","#57ee17":"#91bfdb","#959595":"#959595"}[t]||t}const BN={props:{location:{type:Object,required:!0}},name:"StatsGraph",components:{Bar:RN,Pie:NN},data(){return{dataBar:{},dataPie:{},annee:2019,loaded:!1,villeNom:"",locationType:null,currentGraphType:null,lastProcessedLocation:null,barOptions:{responsive:!0,maintainAspectRatio:!0,plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(t){const e=t.parsed.y,s=t.dataset.data.reduce((r,o)=>r+o,0),n=(e/s*100).toFixed(1);return`${e} habitants (${n}%)`}}}},scales:{x:{title:{display:!0,text:"Surfaces de parcs et jardins publics accessibles par habitant en m"}},y:{title:{display:!0,text:"Nombre d'habitants"}}}},myOptions:{responsive:!0,maintainAspectRatio:!0,plugins:{legend:{position:"top",display:!1},tooltip:{callbacks:{label:function(t){const e=t.parsed,s=t.dataset.data.reduce((o,l)=>o+l,0),n=(e/s*100).toFixed(1);return`${t.label||""}: ${e} habitants (${n}%)`}}}}}}},watch:{location:{async handler(t){t&&(t.cityInsee||t.locType==="com2co")&&(this.loaded=!1,await this.processLocation(pt(t)))},immediate:!0,deep:!0}},mounted(){window.addEventListener("storage",this.handleStorageChange),window.addEventListener("colorblind-mode-changed",this.handleColorblindModeChange)},beforeUnmount(){window.removeEventListener("storage",this.handleStorageChange),window.removeEventListener("colorblind-mode-changed",this.handleColorblindModeChange)},computed:{shouldDisplayBarChart(){return!(this.locationType==="com2co"&&this.currentGraphType==="all")}},methods:{handleStorageChange(t){t.key==="colorblindMode"&&this.lastProcessedLocation&&(console.log("StatsGraph: colorblindMode changed in localStorage, refreshing graphs"),this.processLocation(this.lastProcessedLocation))},handleColorblindModeChange(){this.lastProcessedLocation&&(console.log("StatsGraph: colorblindMode changed via event, refreshing graphs"),this.processLocation(this.lastProcessedLocation))},getChartData(t,e,i,s){return{labels:e,datasets:[{label:t,data:i,backgroundColor:s}]}},parseJsonBar(t){console.log("parseJsonBar.nom:",t.nom),this.villeNom=t.nom;const e=t.stats.map(n=>n.surface),i=t.stats.map(n=>hb(n.barColor)),s=t.stats.map(n=>n.habitants);this.dataBar=this.getChartData(" m par habitant de parcs",e,s,i)},parseJsonPie(t){const e=t.seuils.map(n=>n.surface),i=t.seuils.map(n=>hb(n.barColor)),s=t.seuils.map(n=>n.habitants);this.dataPie=this.getChartData(" m par habitant de parcs",e,s,i)},async processLocation(t){this.lastProcessedLocation=t;const e="https://raw.githubusercontent.com/autmel/geoservice-data/refs/heads/main";console.log("processLocation received:",JSON.stringify(t));const i=t.regionId,s=t.com2coId,n=t.locType||"city",r=t.graphType;this.locationType=n,this.currentGraphType=r,console.log("Extracted values - locType:",n,"graphType:",r);const o=this.annee;let l;if(n==="com2co")if(console.log("processLocation (com2co):",i,s,r),r)l=`${e}/data/stats/com2co/${s}/stats_c2c_${s}_${r}_${o}.json`;else{console.error("graphType is required for com2co location type"),this.loaded=!1;return}else{const u=t.cityInsee;console.log("processLocation (city):",i,s,u);const h=u.substring(0,2);l=`${e}/data/stats/${h}/${u}/stats_${u}_${o}.json`}console.log("Fetching stats from:",l),this.loaded=!1;try{const u=await fetch(l);if(!u.ok)throw new Error(`HTTP error! status: ${u.status}`);const h=await u.json();this.parseJsonBar(h),this.parseJsonPie(h),this.loaded=!0}catch(u){console.error("Error loading stats:",u),this.loaded=!1}}}},FN={key:0,class:"flex flex-col items-center w-full"},UN={class:"text-center"},jN={id:"villeId"},zN={key:0,class:"w-full max-w-4xl"},HN={class:"w-full max-w-xs mt-6"},VN={key:1,class:"text-center"};function qN(t,e,i,s,n,r){const o=Pi("Bar"),l=Pi("Pie");return n.loaded?(St(),Lt("div",FN,[we("p",UN,[we("b",jN,Ps(n.villeNom),1)]),r.shouldDisplayBarChart?(St(),Lt("div",zN,[dt(o,{data:n.dataBar,options:n.barOptions,class:"w-full h-[300px]"},null,8,["data","options"])])):Qu("",!0),we("div",HN,[dt(l,{data:n.dataPie,options:n.myOptions,class:"w-full h-[300px]"},null,8,["data","options"]),e[0]||(e[0]=we("div",{class:"text-center text-sm mt-2 mb-5"},[we("span",null,"Rpartition des habitants par seuil de surface de parc et jardin public accessible")],-1))])])):(St(),Lt("div",VN,"Chargement en cours..."))}const $N=Kn(BN,[["render",qN]]),WN={name:"Com2coQuickAccess",props:{currentLocation:{type:Object,default:null}},data(){return{selectedType:null,graphTypes:[{id:"urbans",name:"Dense",suffix:"urbans"},{id:"suburbs",name:"Priurbain",suffix:"suburbs"},{id:"all",name:"Densits confondues",suffix:"all"}]}},methods:{selectGraphType(t){this.selectedType=t.id;const e={...this.currentLocation,locType:"com2co",graphType:t.suffix};console.log("Com2coQuickAccess emitting:",JSON.stringify(e)),this.$emit("graph-type-selected",e)}}},GN={key:0,class:"p-2 bg-gray-50 rounded-md mb-2"},XN={class:"m-0 mb-2 text-base text-gray-800 font-semibold"},KN={class:"flex gap-2 flex-wrap justify-start"},ZN=["onClick"];function YN(t,e,i,s,n,r){return i.currentLocation&&i.currentLocation.com2coId?(St(),Lt("div",GN,[we("h3",XN," Accs rapide aux statistiques : "+Ps(i.currentLocation.com2coName||"Communaut de commune"),1),we("div",KN,[(St(!0),Lt(vi,null,ea(n.graphTypes,o=>(St(),Lt("button",{key:o.id,onClick:l=>r.selectGraphType(o),class:nf(["px-3 py-2 bg-emerald-600 text-white rounded border-none cursor-pointer text-sm transition-all duration-200 whitespace-nowrap hover:bg-emerald-700 hover:shadow-md active:scale-95",{"bg-emerald-800 shadow-inner":n.selectedType===o.id}])},Ps(o.name),11,ZN))),128))])])):Qu("",!0)}const QN=Kn(WN,[["render",YN]]);console.log("AppStatistics");const JN={name:"AppStatistics",components:{SearchLocation:QS,StatsGraph:$N,Com2coQuickAccess:QN},data(){return{location:null,componentKey:0}},mounted(){const t=localStorage.getItem("location-selected");if(t)try{this.location=JSON.parse(t)}catch(e){console.error("Error loading saved location:",e),this.setDefaultLocation()}else this.setDefaultLocation()},methods:{setDefaultLocation(){this.location={cityInsee:"59350",regionId:"32",com2coId:"245900410",cityName:"Lille",lat:50.62925,lng:3.057256}},async updateLocation(t){console.log("AppStatistics.updateLocation received:",JSON.stringify(t)),this.location=t,this.componentKey++}}},e3={class:"text-left align-top"},t3={class:"border-2 border-transparent"},i3={class:"text-center relative z-10"};function s3(t,e,i,s,n,r){const o=Pi("SearchLocation"),l=Pi("Com2coQuickAccess"),u=Pi("StatsGraph");return St(),Lt("div",e3,[dt(o,{onUpdateLocation:r.updateLocation,onLocationSelected:r.updateLocation,displaySearchAddress:!1},null,8,["onUpdateLocation","onLocationSelected"]),dt(l,{currentLocation:n.location,onGraphTypeSelected:r.updateLocation},null,8,["currentLocation","onGraphTypeSelected"]),we("div",t3,[we("div",i3,[(St(),r_(u,{key:n.componentKey,location:n.location},null,8,["location"]))])])])}const n3=Kn(JN,[["render",s3]]),r3={name:"AppInformation",components:{},methods:{toPlain(t){return t.map(e=>String.fromCharCode(e)).join("")},sendRequest(){const t=[77,65,73,76,84,79],e=[111,120,121,103,101,110,101,46,108,109],i=[64,103,109,97,105,108,46,99,111,109],s=this.toPlain(t),n=this.toPlain(e)+this.toPlain(i),r="Isochrone: Demande d'accs pour contribution";window.location.href=`${s}:${n}?subject=${r}`}}},o3={class:"text-left align-top"},a3={class:"border-2 border-transparent prose max-w-none"};function l3(t,e,i,s,n,r){return St(),Lt("div",o3,[we("div",a3,[e[6]||(e[6]=eg('<h1 class="text-3xl font-bold mb-4">Informations sur l&#39;application</h1><h2 class="font-bold underline my-4">Objectifs</h2><p> L&#39;objectif de cette application est de permettre aux habitants des villes et des regroupements de communes de visualiser sur une carte les parcs et jardins qui sont accessibles  pied. <br> Elle permet aussi de connatre les territoires qui respectent le nombre de m/habitant d&#39;espaces verts publics de proximit prconiss par l&#39;Organisation mondiale de la sant (OMS). </p><h2 class="font-bold underline my-4">Parcs et Jardins</h2><p> Les parcs et jardins publics sont des espaces verts accessibles qui permettent de se dtendre, de se promener, de jouer, de se reposer, de pique-niquer, de lire, de se rencontrer, de sarer... <br> Certaines villes comptabilisent les cimetires, les bosquets, des places minralises comme des parcs et jardins. Ici, l&#39;application les exclut des surfaces pour tre en cohrence avec les critres retenus par l&#39;OMS, mais les noms sont disponibles dans les dtails avec une croix. </p><p> Ils sont intgrs et golocaliss sur une carte interactive qui permet d&#39;valuer les populations qui peuvent en bnficier. <br> Nous avons intgr les recommandations de l&#39;OMS qui prconisent au minimum 10m/habitant d&#39;espaces verts publics de proximit en zone urbaine et 25 m/habitant en zone priurbaine (les surfaces conseilles sont respectivement de 12 et 45 m/habitant). De plus, la distance pour accder aux parcs est de 5 minutes  pied (soit 300m) en ville et 20 minutes  la campagne (soit 1200m). <br><br> La zone d&#39;accessibilit isochrone est tablie par l&#39;intermdiaire du service de calcul d&#39;isochrone de l&#39;IGN. Les donnes de densit des communes, des populations, des donnes carroyes sont fournies par l&#39;INSEE. Le cadastre provient du site opendata du gouvernement. <br> Certaines villes proposent galement les donnes de parc via opendata et elles ont t intgres. <br></p><h2 class="font-bold underline my-4">Les donnes utilises et l&#39;algorithme</h2><p> Nous utilisons les donnes disponibles en OpenData lorsque cela est possible auxquelles s&#39;ajoute un travail collaboratif de plusieurs associations qui a permis de recenser les entres de chaque parc.<br> Pour chaque entre, nous dterminons la zone d&#39;accessibilit &quot;isochrone&quot; grce au service de calcul d&#39;isochrone de l&#39;IGN.<br> Les donnes de densit des communes, des populations, des donnes carroyes sont fournies par l&#39;INSEE. </p><p class="font-semibold"> L&#39;algorithme de calcul de la zone d&#39;accessibilit est le suivant : </p><ol class="list-decimal list-inside space-y-2 ml-4"><li class="font-medium">Dtermination des carreaux de la commune  partir du cadastre</li><li class="font-medium">Pour chaque carreau, calcul de l&#39;accessibilit : <ul class="list-disc list-inside ml-6 mt-2 space-y-1"><li>Recherche des isochrones d&#39;accessibilit des parcs ayant une intersection avec le carreau</li><li>Fusion des polygones des isochrones identifis</li><li>Dtermination de tous les carreaux ayant une intersection avec ce polygone d&#39;accs</li></ul></li><li class="font-medium">Calcul de la population couverte : <ul class="list-disc list-inside ml-6 mt-2 space-y-1"><li>Pour les carreaux compltement recouverts par le polygone : toute la population est comptabilise</li><li>Pour les carreaux partiellement recouverts : la population est estime au prorata de la surface de recouvrement</li></ul></li><li class="font-medium">Calcul de la densit d&#39;espaces verts : <ul class="list-disc list-inside ml-6 mt-2 space-y-1"><li>La surface totale de tous les parcs accessibles est comptabilise</li><li>La densit (m/habitant) est calcule en fonction de la population ayant accs aux parcs</li></ul></li></ol><br><p> Ce calcul est ralis avec les dernires donnes de l&#39;INSEE rendues publiques. </p><h2 class="font-bold underline my-4">Code source et contribution  l&#39;application</h2><p> Le programme est disponible en opensource. Il a t ralis par des bnvoles et des associations. Il est possible de contribuer  l&#39;amlioration des donnes, des algorithmes et des fonctionnalits. <br> Pour cela, il suffit de se rendre sur le <a target="_blank" rel="noopener noreferrer" href="https://github.com/cunvoas/opendata-tools/issues">site github du projet</a> et de proposer des amliorations. <br> Le programme peut aussi tre copi en respectant la <a target="_blank" rel="noopener noreferrer" href="https://www.gnu.org/licenses/gpl-3.0.fr.html" class="text-blue-900 hover:text-black visited:text-blue-900 underline font-semibold">licence GPLv3</a>. <br> Pour plus d&#39;information, vous pouvez consulter la documentation sur le site du projet. </p><h2 class="font-bold underline my-4">Contribution  la saisie</h2>',15)),we("p",null,[e[1]||(e[1]=Hs(" Les contributions aux donnes sont ralises sur une application ddie. Pour y accder, il faut en faire la demande via ",-1)),we("a",{href:"javascript:void(0);",onClick:e[0]||(e[0]=(...o)=>r.sendRequest&&r.sendRequest(...o)),class:"text-blue-900 hover:text-black visited:text-blue-900 underline font-semibold cursor-pointer"},"email"),e[2]||(e[2]=we("br",null,null,-1)),e[3]||(e[3]=Hs(" Nous limitons le nombre de contributeurs par territoire afin de garantir la qualit des donnes et la stabilit de notre application. ",-1)),e[4]||(e[4]=we("br",null,null,-1)),e[5]||(e[5]=Hs(" Les donnes sont ensuite vrifies et intgres dans la base de donnes avant d'tre publies sur le site public. ",-1))]),e[7]||(e[7]=eg('<h2 class="font-bold underline my-4">Contributions et remerciements</h2><p> Philippe de Del&#39;Air pour le contrle des calculs. <br> Mathilde d&#39;Entrelianes pour la catgorisation des populations et la dduction des lgendes et couleurs. <br> Fabien de LM-Oxygne pour les conversions Lambert 93 vers WGS 84 (4326). <br> Christophe de LM-Oxygne pour le dveloppement des applications. <br> Les bnvoles des associations et les utilisateurs de l&#39;application pour la saisie des donnes. </p><h2 class="font-bold underline my-6">Thsaurus</h2><div class="grid gap-4 md:grid-cols-2 lg:grid-cols-3"><div class="rounded-lg border border-slate-200 bg-slate-50 p-4 shadow-sm"><h3 class="text-lg font-semibold">Isochrone</h3><p class="mt-2 text-sm leading-relaxed">Surface reprsentant la zone atteignable  pied en un temps donn depuis une entre de parc. Nous utilisons 5 minutes en zone urbaine et 20 minutes en zone rurale.</p></div><div class="rounded-lg border border-slate-200 bg-slate-50 p-4 shadow-sm"><h3 class="text-lg font-semibold">m / habitant</h3><p class="mt-2 text-sm leading-relaxed">Indicateur de densit d&#39;espaces verts publics. Il correspond au ratio entre la surface totale des parcs accessibles et la population couverte.</p></div><div class="rounded-lg border border-slate-200 bg-slate-50 p-4 shadow-sm"><h3 class="text-lg font-semibold">Carreau INSEE</h3><p class="mt-2 text-sm leading-relaxed">Maille de rfrence de 200m  200m utilise pour agrger les donnes socio-dmographiques locales et valuer la population couverte.</p></div><div class="rounded-lg border border-slate-200 bg-slate-50 p-4 shadow-sm"><h3 class="text-lg font-semibold">Espaces verts publics de proximit</h3><p class="mt-2 text-sm leading-relaxed">Espaces accessibles librement (parcs, jardins, squares)  distance pitonne. Les cimetires ou surfaces minrales ne sont pas compts dans la surface accessible.</p></div><div class="rounded-lg border border-slate-200 bg-slate-50 p-4 shadow-sm"><h3 class="text-lg font-semibold">Zone urbaine / priurbaine</h3><p class="mt-2 text-sm leading-relaxed">Catgorisation applique pour ajuster les seuils OMS : 10 m/habitant en zone urbaine et 25 m/habitant en zone priurbaine.</p></div></div>',4))])])}const u3=Kn(r3,[["render",l3]]);var hm,db;function wf(){if(db)return hm;db=1;var t;return typeof window<"u"?t=window:typeof eo<"u"?t=eo:typeof self<"u"?t=self:t={},hm=t,hm}var c3=wf();const $=ho(c3),h3={},d3=Object.freeze(Object.defineProperty({__proto__:null,default:h3},Symbol.toStringTag,{value:"Module"})),f3=GA(d3);var dm,fb;function z2(){if(fb)return dm;fb=1;var t=typeof eo<"u"?eo:typeof window<"u"?window:{},e=f3,i;return typeof document<"u"?i=document:(i=t["__GLOBAL_DOCUMENT_CACHE@4"],i||(i=t["__GLOBAL_DOCUMENT_CACHE@4"]=e)),dm=i,dm}var p3=z2();const ke=ho(p3);var qh={exports:{}},fm={exports:{}},pb;function m3(){return pb||(pb=1,(function(t){function e(){return t.exports=e=Object.assign?Object.assign.bind():function(i){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)({}).hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},t.exports.__esModule=!0,t.exports.default=t.exports,e.apply(null,arguments)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(fm)),fm.exports}var pm,mb;function g3(){if(mb)return pm;mb=1,pm=e;var t=Object.prototype.toString;function e(i){if(!i)return!1;var s=t.call(i);return s==="[object Function]"||typeof i=="function"&&s!=="[object RegExp]"||typeof window<"u"&&(i===window.setTimeout||i===window.alert||i===window.confirm||i===window.prompt)}return pm}var mm,gb;function _3(){if(gb)return mm;gb=1;function t(n,r){var o=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(o)return(o=o.call(n)).next.bind(o);if(Array.isArray(n)||(o=e(n))||r){o&&(n=o);var l=0;return function(){return l>=n.length?{done:!0}:{done:!1,value:n[l++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e(n,r){if(n){if(typeof n=="string")return i(n,r);var o=Object.prototype.toString.call(n).slice(8,-1);if(o==="Object"&&n.constructor&&(o=n.constructor.name),o==="Map"||o==="Set")return Array.from(n);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return i(n,r)}}function i(n,r){(r==null||r>n.length)&&(r=n.length);for(var o=0,l=new Array(r);o<r;o++)l[o]=n[o];return l}var s=(function(){function n(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1}var r=n.prototype;return r.getIsEnabled=function(){return this.enabled_},r.enable=function(){this.enabled_=!0},r.disable=function(){this.enabled_=!1},r.reset=function(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1},r.addInterceptor=function(l,u){this.typeToInterceptorsMap_.has(l)||this.typeToInterceptorsMap_.set(l,new Set);var h=this.typeToInterceptorsMap_.get(l);return h.has(u)?!1:(h.add(u),!0)},r.removeInterceptor=function(l,u){var h=this.typeToInterceptorsMap_.get(l);return h&&h.has(u)?(h.delete(u),!0):!1},r.clearInterceptorsByType=function(l){var u=this.typeToInterceptorsMap_.get(l);return u?(this.typeToInterceptorsMap_.delete(l),this.typeToInterceptorsMap_.set(l,new Set),!0):!1},r.clear=function(){return this.typeToInterceptorsMap_.size?(this.typeToInterceptorsMap_=new Map,!0):!1},r.getForType=function(l){return this.typeToInterceptorsMap_.get(l)||new Set},r.execute=function(l,u){for(var h=this.getForType(l),d=t(h),m;!(m=d()).done;){var _=m.value;try{u=_(u)}catch{}}return u},n})();return mm=s,mm}var gm,_b;function y3(){if(_b)return gm;_b=1;var t=(function(){function i(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1}var s=i.prototype;return s.getIsEnabled=function(){return this.enabled_},s.enable=function(){this.enabled_=!0},s.disable=function(){this.enabled_=!1},s.reset=function(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1},s.getMaxAttempts=function(){return this.maxAttempts_},s.setMaxAttempts=function(r){this.maxAttempts_=r},s.getDelayFactor=function(){return this.delayFactor_},s.setDelayFactor=function(r){this.delayFactor_=r},s.getFuzzFactor=function(){return this.fuzzFactor_},s.setFuzzFactor=function(r){this.fuzzFactor_=r},s.getInitialDelay=function(){return this.initialDelay_},s.setInitialDelay=function(r){this.initialDelay_=r},s.createRetry=function(r){var o=r===void 0?{}:r,l=o.maxAttempts,u=o.delayFactor,h=o.fuzzFactor,d=o.initialDelay;return new e({maxAttempts:l||this.maxAttempts_,delayFactor:u||this.delayFactor_,fuzzFactor:h||this.fuzzFactor_,initialDelay:d||this.initialDelay_})},i})(),e=(function(){function i(n){this.maxAttempts_=n.maxAttempts,this.delayFactor_=n.delayFactor,this.fuzzFactor_=n.fuzzFactor,this.currentDelay_=n.initialDelay,this.currentAttempt_=1}var s=i.prototype;return s.moveToNextAttempt=function(){this.currentAttempt_++;var r=this.currentDelay_*this.delayFactor_;this.currentDelay_=this.currentDelay_+r},s.shouldRetry=function(){return this.currentAttempt_<this.maxAttempts_},s.getCurrentDelay=function(){return this.currentDelay_},s.getCurrentMinPossibleDelay=function(){return(1-this.fuzzFactor_)*this.currentDelay_},s.getCurrentMaxPossibleDelay=function(){return(1+this.fuzzFactor_)*this.currentDelay_},s.getCurrentFuzzedDelay=function(){var r=this.getCurrentMinPossibleDelay(),o=this.getCurrentMaxPossibleDelay();return r+Math.random()*(o-r)},i})();return gm=t,gm}var _m,yb;function v3(){if(yb)return _m;yb=1;var t=wf(),e=function(n,r){return r===void 0&&(r=!1),function(o,l,u){if(o){n(o);return}if(l.statusCode>=400&&l.statusCode<=599){var h=u;if(r)if(t.TextDecoder){var d=i(l.headers&&l.headers["content-type"]);try{h=new TextDecoder(d).decode(u)}catch{}}else h=String.fromCharCode.apply(null,new Uint8Array(u));n({cause:h});return}n(null,u)}};function i(s){return s===void 0&&(s=""),s.toLowerCase().split(";").reduce(function(n,r){var o=r.split("="),l=o[0],u=o[1];return l.trim()==="charset"?u.trim():n},"utf-8")}return _m=e,_m}var vb;function b3(){if(vb)return qh.exports;vb=1;var t=wf(),e=m3(),i=g3(),s=_3(),n=y3();h.httpHandler=v3(),h.requestInterceptorsStorage=new s,h.responseInterceptorsStorage=new s,h.retryManager=new n;/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Bjrklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */var r=function(C){var x={};return C&&C.trim().split(`
`).forEach(function(E){var P=E.indexOf(":"),k=E.slice(0,P).trim().toLowerCase(),I=E.slice(P+1).trim();typeof x[k]>"u"?x[k]=I:Array.isArray(x[k])?x[k].push(I):x[k]=[x[k],I]}),x};qh.exports=h,qh.exports.default=h,h.XMLHttpRequest=t.XMLHttpRequest||_,h.XDomainRequest="withCredentials"in new h.XMLHttpRequest?h.XMLHttpRequest:t.XDomainRequest,o(["get","put","post","patch","head","delete"],function(T){h[T==="delete"?"del":T]=function(C,x,E){return x=u(C,x,E),x.method=T.toUpperCase(),d(x)}});function o(T,C){for(var x=0;x<T.length;x++)C(T[x])}function l(T){for(var C in T)if(T.hasOwnProperty(C))return!1;return!0}function u(T,C,x){var E=T;return i(C)?(x=C,typeof T=="string"&&(E={uri:T})):E=e({},C,{uri:T}),E.callback=x,E}function h(T,C,x){return C=u(T,C,x),d(C)}function d(T){if(typeof T.callback>"u")throw new Error("callback argument missing");if(T.requestType&&h.requestInterceptorsStorage.getIsEnabled()){var C={uri:T.uri||T.url,headers:T.headers||{},body:T.body,metadata:T.metadata||{},retry:T.retry,timeout:T.timeout},x=h.requestInterceptorsStorage.execute(T.requestType,C);T.uri=x.uri,T.headers=x.headers,T.body=x.body,T.metadata=x.metadata,T.retry=x.retry,T.timeout=x.timeout}var E=!1,P=function(ee,fe,re){E||(E=!0,T.callback(ee,fe,re))};function k(){q.readyState===4&&!h.responseInterceptorsStorage.getIsEnabled()&&setTimeout(z,0)}function I(){var se=void 0;if(q.response?se=q.response:se=q.responseText||m(q),ae)try{se=JSON.parse(se)}catch{}return se}function F(se){if(clearTimeout(ce),clearTimeout(T.retryTimeout),se instanceof Error||(se=new Error(""+(se||"Unknown XMLHttpRequest Error"))),se.statusCode=0,!Z&&h.retryManager.getIsEnabled()&&T.retry&&T.retry.shouldRetry()){T.retryTimeout=setTimeout(function(){T.retry.moveToNextAttempt(),T.xhr=q,d(T)},T.retry.getCurrentFuzzedDelay());return}if(T.requestType&&h.responseInterceptorsStorage.getIsEnabled()){var ee={headers:le.headers||{},body:le.body,responseUrl:q.responseURL,responseType:q.responseType},fe=h.responseInterceptorsStorage.execute(T.requestType,ee);le.body=fe.body,le.headers=fe.headers}return P(se,le)}function z(){if(!Z){var se;clearTimeout(ce),clearTimeout(T.retryTimeout),T.useXDR&&q.status===void 0?se=200:se=q.status===1223?204:q.status;var ee=le,fe=null;if(se!==0?(ee={body:I(),statusCode:se,method:R,headers:{},url:D,rawRequest:q},q.getAllResponseHeaders&&(ee.headers=r(q.getAllResponseHeaders()))):fe=new Error("Internal XMLHttpRequest Error"),T.requestType&&h.responseInterceptorsStorage.getIsEnabled()){var re={headers:ee.headers||{},body:ee.body,responseUrl:q.responseURL,responseType:q.responseType},ue=h.responseInterceptorsStorage.execute(T.requestType,re);ee.body=ue.body,ee.headers=ue.headers}return P(fe,ee,ee.body)}}var q=T.xhr||null;q||(T.cors||T.useXDR?q=new h.XDomainRequest:q=new h.XMLHttpRequest);var U,Z,D=q.url=T.uri||T.url,R=q.method=T.method||"GET",Y=T.body||T.data,Q=q.headers=T.headers||{},J=!!T.sync,ae=!1,ce,le={body:void 0,headers:{},statusCode:0,method:R,url:D,rawRequest:q};if("json"in T&&T.json!==!1&&(ae=!0,Q.accept||Q.Accept||(Q.Accept="application/json"),R!=="GET"&&R!=="HEAD"&&(Q["content-type"]||Q["Content-Type"]||(Q["Content-Type"]="application/json"),Y=JSON.stringify(T.json===!0?Y:T.json))),q.onreadystatechange=k,q.onload=z,q.onerror=F,q.onprogress=function(){},q.onabort=function(){Z=!0,clearTimeout(T.retryTimeout)},q.ontimeout=F,q.open(R,D,!J,T.username,T.password),J||(q.withCredentials=!!T.withCredentials),!J&&T.timeout>0&&(ce=setTimeout(function(){if(!Z){Z=!0,q.abort("timeout");var se=new Error("XMLHttpRequest timeout");se.code="ETIMEDOUT",F(se)}},T.timeout)),q.setRequestHeader)for(U in Q)Q.hasOwnProperty(U)&&q.setRequestHeader(U,Q[U]);else if(T.headers&&!l(T.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in T&&(q.responseType=T.responseType),"beforeSend"in T&&typeof T.beforeSend=="function"&&T.beforeSend(q),q.send(Y||null),q}function m(T){try{if(T.responseType==="document")return T.responseXML;var C=T.responseXML&&T.responseXML.documentElement.nodeName==="parsererror";if(T.responseType===""&&!C)return T.responseXML}catch{}return null}function _(){}return qh.exports}var T3=b3();const H2=ho(T3);var ym={exports:{}},vm,bb;function x3(){if(bb)return vm;bb=1;var t=z2(),e=Object.create||(function(){function D(){}return function(R){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return D.prototype=R,new D}})();function i(D,R){this.name="ParsingError",this.code=D.code,this.message=R||D.message}i.prototype=e(Error.prototype),i.prototype.constructor=i,i.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function s(D){function R(Q,J,ae,ce){return(Q|0)*3600+(J|0)*60+(ae|0)+(ce|0)/1e3}var Y=D.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return Y?Y[3]?R(Y[1],Y[2],Y[3].replace(":",""),Y[4]):Y[1]>59?R(Y[1],Y[2],0,Y[4]):R(0,Y[1],Y[2],Y[4]):null}function n(){this.values=e(null)}n.prototype={set:function(D,R){!this.get(D)&&R!==""&&(this.values[D]=R)},get:function(D,R,Y){return Y?this.has(D)?this.values[D]:R[Y]:this.has(D)?this.values[D]:R},has:function(D){return D in this.values},alt:function(D,R,Y){for(var Q=0;Q<Y.length;++Q)if(R===Y[Q]){this.set(D,R);break}},integer:function(D,R){/^-?\d+$/.test(R)&&this.set(D,parseInt(R,10))},percent:function(D,R){return R.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(R=parseFloat(R),R>=0&&R<=100)?(this.set(D,R),!0):!1}};function r(D,R,Y,Q){var J=Q?D.split(Q):[D];for(var ae in J)if(typeof J[ae]=="string"){var ce=J[ae].split(Y);if(ce.length===2){var le=ce[0].trim(),se=ce[1].trim();R(le,se)}}}function o(D,R,Y){var Q=D;function J(){var le=s(D);if(le===null)throw new i(i.Errors.BadTimeStamp,"Malformed timestamp: "+Q);return D=D.replace(/^[^\sa-zA-Z-]+/,""),le}function ae(le,se){var ee=new n;r(le,function(fe,re){switch(fe){case"region":for(var ue=Y.length-1;ue>=0;ue--)if(Y[ue].id===re){ee.set(fe,Y[ue].region);break}break;case"vertical":ee.alt(fe,re,["rl","lr"]);break;case"line":var Oe=re.split(","),ze=Oe[0];ee.integer(fe,ze),ee.percent(fe,ze)&&ee.set("snapToLines",!1),ee.alt(fe,ze,["auto"]),Oe.length===2&&ee.alt("lineAlign",Oe[1],["start","center","end"]);break;case"position":Oe=re.split(","),ee.percent(fe,Oe[0]),Oe.length===2&&ee.alt("positionAlign",Oe[1],["start","center","end"]);break;case"size":ee.percent(fe,re);break;case"align":ee.alt(fe,re,["start","center","end","left","right"]);break}},/:/,/\s/),se.region=ee.get("region",null),se.vertical=ee.get("vertical","");try{se.line=ee.get("line","auto")}catch{}se.lineAlign=ee.get("lineAlign","start"),se.snapToLines=ee.get("snapToLines",!0),se.size=ee.get("size",100);try{se.align=ee.get("align","center")}catch{se.align=ee.get("align","middle")}try{se.position=ee.get("position","auto")}catch{se.position=ee.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},se.align)}se.positionAlign=ee.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},se.align)}function ce(){D=D.replace(/^\s+/,"")}if(ce(),R.startTime=J(),ce(),D.substr(0,3)!=="-->")throw new i(i.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+Q);D=D.substr(3),ce(),R.endTime=J(),ce(),ae(D,R)}var l=t.createElement&&t.createElement("textarea"),u={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},h={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},d={v:"title",lang:"lang"},m={rt:"ruby"};function _(D,R){function Y(){if(!R)return null;function ze(Ee){return R=R.substr(Ee.length),Ee}var Me=R.match(/^([^<]*)(<[^>]*>?)?/);return ze(Me[1]?Me[1]:Me[2])}function Q(ze){return l.innerHTML=ze,ze=l.textContent,l.textContent="",ze}function J(ze,Me){return!m[Me.localName]||m[Me.localName]===ze.localName}function ae(ze,Me){var Ee=u[ze];if(!Ee)return null;var He=D.document.createElement(Ee),me=d[ze];return me&&Me&&(He[me]=Me.trim()),He}for(var ce=D.document.createElement("div"),le=ce,se,ee=[];(se=Y())!==null;){if(se[0]==="<"){if(se[1]==="/"){ee.length&&ee[ee.length-1]===se.substr(2).replace(">","")&&(ee.pop(),le=le.parentNode);continue}var fe=s(se.substr(1,se.length-2)),re;if(fe){re=D.document.createProcessingInstruction("timestamp",fe),le.appendChild(re);continue}var ue=se.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!ue||(re=ae(ue[1],ue[3]),!re)||!J(le,re))continue;if(ue[2]){var Oe=ue[2].split(".");Oe.forEach(function(ze){var Me=/^bg_/.test(ze),Ee=Me?ze.slice(3):ze;if(h.hasOwnProperty(Ee)){var He=Me?"background-color":"color",me=h[Ee];re.style[He]=me}}),re.className=Oe.join(" ")}ee.push(ue[1]),le.appendChild(re),le=re;continue}le.appendChild(D.document.createTextNode(Q(se)))}return ce}var T=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function C(D){for(var R=0;R<T.length;R++){var Y=T[R];if(D>=Y[0]&&D<=Y[1])return!0}return!1}function x(D){var R=[],Y="",Q;if(!D||!D.childNodes)return"ltr";function J(le,se){for(var ee=se.childNodes.length-1;ee>=0;ee--)le.push(se.childNodes[ee])}function ae(le){if(!le||!le.length)return null;var se=le.pop(),ee=se.textContent||se.innerText;if(ee){var fe=ee.match(/^.*(\n|\r)/);return fe?(le.length=0,fe[0]):ee}if(se.tagName==="ruby")return ae(le);if(se.childNodes)return J(le,se),ae(le)}for(J(R,D);Y=ae(R);)for(var ce=0;ce<Y.length;ce++)if(Q=Y.charCodeAt(ce),C(Q))return"rtl";return"ltr"}function E(D){if(typeof D.line=="number"&&(D.snapToLines||D.line>=0&&D.line<=100))return D.line;if(!D.track||!D.track.textTrackList||!D.track.textTrackList.mediaElement)return-1;for(var R=D.track,Y=R.textTrackList,Q=0,J=0;J<Y.length&&Y[J]!==R;J++)Y[J].mode==="showing"&&Q++;return++Q*-1}function P(){}P.prototype.applyStyles=function(D,R){R=R||this.div;for(var Y in D)D.hasOwnProperty(Y)&&(R.style[Y]=D[Y])},P.prototype.formatStyle=function(D,R){return D===0?0:D+R};function k(D,R,Y){P.call(this),this.cue=R,this.cueDiv=_(D,R.text);var Q={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:R.vertical===""?"horizontal-tb":R.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(Q,this.cueDiv),this.div=D.document.createElement("div"),Q={direction:x(this.cueDiv),writingMode:R.vertical===""?"horizontal-tb":R.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:R.align==="middle"?"center":R.align,font:Y.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(Q),this.div.appendChild(this.cueDiv);var J=0;switch(R.positionAlign){case"start":case"line-left":J=R.position;break;case"center":J=R.position-R.size/2;break;case"end":case"line-right":J=R.position-R.size;break}R.vertical===""?this.applyStyles({left:this.formatStyle(J,"%"),width:this.formatStyle(R.size,"%")}):this.applyStyles({top:this.formatStyle(J,"%"),height:this.formatStyle(R.size,"%")}),this.move=function(ae){this.applyStyles({top:this.formatStyle(ae.top,"px"),bottom:this.formatStyle(ae.bottom,"px"),left:this.formatStyle(ae.left,"px"),right:this.formatStyle(ae.right,"px"),height:this.formatStyle(ae.height,"px"),width:this.formatStyle(ae.width,"px")})}}k.prototype=e(P.prototype),k.prototype.constructor=k;function I(D){var R,Y,Q,J;if(D.div){Y=D.div.offsetHeight,Q=D.div.offsetWidth,J=D.div.offsetTop;var ae=(ae=D.div.childNodes)&&(ae=ae[0])&&ae.getClientRects&&ae.getClientRects();D=D.div.getBoundingClientRect(),R=ae?Math.max(ae[0]&&ae[0].height||0,D.height/ae.length):0}this.left=D.left,this.right=D.right,this.top=D.top||J,this.height=D.height||Y,this.bottom=D.bottom||J+(D.height||Y),this.width=D.width||Q,this.lineHeight=R!==void 0?R:D.lineHeight}I.prototype.move=function(D,R){switch(R=R!==void 0?R:this.lineHeight,D){case"+x":this.left+=R,this.right+=R;break;case"-x":this.left-=R,this.right-=R;break;case"+y":this.top+=R,this.bottom+=R;break;case"-y":this.top-=R,this.bottom-=R;break}},I.prototype.overlaps=function(D){return this.left<D.right&&this.right>D.left&&this.top<D.bottom&&this.bottom>D.top},I.prototype.overlapsAny=function(D){for(var R=0;R<D.length;R++)if(this.overlaps(D[R]))return!0;return!1},I.prototype.within=function(D){return this.top>=D.top&&this.bottom<=D.bottom&&this.left>=D.left&&this.right<=D.right},I.prototype.overlapsOppositeAxis=function(D,R){switch(R){case"+x":return this.left<D.left;case"-x":return this.right>D.right;case"+y":return this.top<D.top;case"-y":return this.bottom>D.bottom}},I.prototype.intersectPercentage=function(D){var R=Math.max(0,Math.min(this.right,D.right)-Math.max(this.left,D.left)),Y=Math.max(0,Math.min(this.bottom,D.bottom)-Math.max(this.top,D.top)),Q=R*Y;return Q/(this.height*this.width)},I.prototype.toCSSCompatValues=function(D){return{top:this.top-D.top,bottom:D.bottom-this.bottom,left:this.left-D.left,right:D.right-this.right,height:this.height,width:this.width}},I.getSimpleBoxPosition=function(D){var R=D.div?D.div.offsetHeight:D.tagName?D.offsetHeight:0,Y=D.div?D.div.offsetWidth:D.tagName?D.offsetWidth:0,Q=D.div?D.div.offsetTop:D.tagName?D.offsetTop:0;D=D.div?D.div.getBoundingClientRect():D.tagName?D.getBoundingClientRect():D;var J={left:D.left,right:D.right,top:D.top||Q,height:D.height||R,bottom:D.bottom||Q+(D.height||R),width:D.width||Y};return J};function F(D,R,Y,Q){function J(Ee,He){for(var me,Ae=new I(Ee),Le=1,qe=0;qe<He.length;qe++){for(;Ee.overlapsOppositeAxis(Y,He[qe])||Ee.within(Y)&&Ee.overlapsAny(Q);)Ee.move(He[qe]);if(Ee.within(Y))return Ee;var We=Ee.intersectPercentage(Y);Le>We&&(me=new I(Ee),Le=We),Ee=new I(Ae)}return me||Ae}var ae=new I(R),ce=R.cue,le=E(ce),se=[];if(ce.snapToLines){var ee;switch(ce.vertical){case"":se=["+y","-y"],ee="height";break;case"rl":se=["+x","-x"],ee="width";break;case"lr":se=["-x","+x"],ee="width";break}var fe=ae.lineHeight,re=fe*Math.round(le),ue=Y[ee]+fe,Oe=se[0];Math.abs(re)>ue&&(re=re<0?-1:1,re*=Math.ceil(ue/fe)*fe),le<0&&(re+=ce.vertical===""?Y.height:Y.width,se=se.reverse()),ae.move(Oe,re)}else{var ze=ae.lineHeight/Y.height*100;switch(ce.lineAlign){case"center":le-=ze/2;break;case"end":le-=ze;break}switch(ce.vertical){case"":R.applyStyles({top:R.formatStyle(le,"%")});break;case"rl":R.applyStyles({left:R.formatStyle(le,"%")});break;case"lr":R.applyStyles({right:R.formatStyle(le,"%")});break}se=["+y","-x","+x","-y"],ae=new I(R)}var Me=J(ae,se);R.move(Me.toCSSCompatValues(Y))}function z(){}z.StringDecoder=function(){return{decode:function(D){if(!D)return"";if(typeof D!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(D))}}},z.convertCueToDOMTree=function(D,R){return!D||!R?null:_(D,R)};var q=.05,U="sans-serif",Z="1.5%";return z.processCues=function(D,R,Y){if(!D||!R||!Y)return null;for(;Y.firstChild;)Y.removeChild(Y.firstChild);var Q=D.document.createElement("div");Q.style.position="absolute",Q.style.left="0",Q.style.right="0",Q.style.top="0",Q.style.bottom="0",Q.style.margin=Z,Y.appendChild(Q);function J(fe){for(var re=0;re<fe.length;re++)if(fe[re].hasBeenReset||!fe[re].displayState)return!0;return!1}if(!J(R)){for(var ae=0;ae<R.length;ae++)Q.appendChild(R[ae].displayState);return}var ce=[],le=I.getSimpleBoxPosition(Q),se=Math.round(le.height*q*100)/100,ee={font:se+"px "+U};(function(){for(var fe,re,ue=0;ue<R.length;ue++)re=R[ue],fe=new k(D,re,ee),Q.appendChild(fe.div),F(D,fe,le,ce),re.displayState=fe.div,ce.push(I.getSimpleBoxPosition(fe))})()},z.Parser=function(D,R,Y){Y||(Y=R,R={}),R||(R={}),this.window=D,this.vttjs=R,this.state="INITIAL",this.buffer="",this.decoder=Y||new TextDecoder("utf8"),this.regionList=[]},z.Parser.prototype={reportOrThrowError:function(D){if(D instanceof i)this.onparsingerror&&this.onparsingerror(D);else throw D},parse:function(D){var R=this;D&&(R.buffer+=R.decoder.decode(D,{stream:!0}));function Y(){for(var fe=R.buffer,re=0;re<fe.length&&fe[re]!=="\r"&&fe[re]!==`
`;)++re;var ue=fe.substr(0,re);return fe[re]==="\r"&&++re,fe[re]===`
`&&++re,R.buffer=fe.substr(re),ue}function Q(fe){var re=new n;if(r(fe,function(Oe,ze){switch(Oe){case"id":re.set(Oe,ze);break;case"width":re.percent(Oe,ze);break;case"lines":re.integer(Oe,ze);break;case"regionanchor":case"viewportanchor":var Me=ze.split(",");if(Me.length!==2)break;var Ee=new n;if(Ee.percent("x",Me[0]),Ee.percent("y",Me[1]),!Ee.has("x")||!Ee.has("y"))break;re.set(Oe+"X",Ee.get("x")),re.set(Oe+"Y",Ee.get("y"));break;case"scroll":re.alt(Oe,ze,["up"]);break}},/=/,/\s/),re.has("id")){var ue=new(R.vttjs.VTTRegion||R.window.VTTRegion);ue.width=re.get("width",100),ue.lines=re.get("lines",3),ue.regionAnchorX=re.get("regionanchorX",0),ue.regionAnchorY=re.get("regionanchorY",100),ue.viewportAnchorX=re.get("viewportanchorX",0),ue.viewportAnchorY=re.get("viewportanchorY",100),ue.scroll=re.get("scroll",""),R.onregion&&R.onregion(ue),R.regionList.push({id:re.get("id"),region:ue})}}function J(fe){var re=new n;r(fe,function(ue,Oe){switch(ue){case"MPEGT":re.integer(ue+"S",Oe);break;case"LOCA":re.set(ue+"L",s(Oe));break}},/[^\d]:/,/,/),R.ontimestampmap&&R.ontimestampmap({MPEGTS:re.get("MPEGTS"),LOCAL:re.get("LOCAL")})}function ae(fe){fe.match(/X-TIMESTAMP-MAP/)?r(fe,function(re,ue){switch(re){case"X-TIMESTAMP-MAP":J(ue);break}},/=/):r(fe,function(re,ue){switch(re){case"Region":Q(ue);break}},/:/)}try{var ce;if(R.state==="INITIAL"){if(!/\r\n|\n/.test(R.buffer))return this;ce=Y();var le=ce.match(/^WEBVTT([ \t].*)?$/);if(!le||!le[0])throw new i(i.Errors.BadSignature);R.state="HEADER"}for(var se=!1;R.buffer;){if(!/\r\n|\n/.test(R.buffer))return this;switch(se?se=!1:ce=Y(),R.state){case"HEADER":/:/.test(ce)?ae(ce):ce||(R.state="ID");continue;case"NOTE":ce||(R.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(ce)){R.state="NOTE";break}if(!ce)continue;R.cue=new(R.vttjs.VTTCue||R.window.VTTCue)(0,0,"");try{R.cue.align="center"}catch{R.cue.align="middle"}if(R.state="CUE",ce.indexOf("-->")===-1){R.cue.id=ce;continue}case"CUE":try{o(ce,R.cue,R.regionList)}catch(fe){R.reportOrThrowError(fe),R.cue=null,R.state="BADCUE";continue}R.state="CUETEXT";continue;case"CUETEXT":var ee=ce.indexOf("-->")!==-1;if(!ce||ee&&(se=!0)){R.oncue&&R.oncue(R.cue),R.cue=null,R.state="ID";continue}R.cue.text&&(R.cue.text+=`
`),R.cue.text+=ce.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":ce||(R.state="ID");continue}}}catch(fe){R.reportOrThrowError(fe),R.state==="CUETEXT"&&R.cue&&R.oncue&&R.oncue(R.cue),R.cue=null,R.state=R.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var D=this;try{if(D.buffer+=D.decoder.decode(),(D.cue||D.state==="HEADER")&&(D.buffer+=`

`,D.parse()),D.state==="INITIAL")throw new i(i.Errors.BadSignature)}catch(R){D.reportOrThrowError(R)}return D.onflush&&D.onflush(),this}},vm=z,vm}var bm,Tb;function S3(){if(Tb)return bm;Tb=1;var t="auto",e={"":1,lr:1,rl:1},i={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function s(o){if(typeof o!="string")return!1;var l=e[o.toLowerCase()];return l?o.toLowerCase():!1}function n(o){if(typeof o!="string")return!1;var l=i[o.toLowerCase()];return l?o.toLowerCase():!1}function r(o,l,u){this.hasBeenReset=!1;var h="",d=!1,m=o,_=l,T=u,C=null,x="",E=!0,P="auto",k="start",I="auto",F="auto",z=100,q="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return h},set:function(U){h=""+U}},pauseOnExit:{enumerable:!0,get:function(){return d},set:function(U){d=!!U}},startTime:{enumerable:!0,get:function(){return m},set:function(U){if(typeof U!="number")throw new TypeError("Start time must be set to a number.");m=U,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return _},set:function(U){if(typeof U!="number")throw new TypeError("End time must be set to a number.");_=U,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return T},set:function(U){T=""+U,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return C},set:function(U){C=U,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return x},set:function(U){var Z=s(U);if(Z===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");x=Z,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return E},set:function(U){E=!!U,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return P},set:function(U){if(typeof U!="number"&&U!==t)throw new SyntaxError("Line: an invalid number or illegal string was specified.");P=U,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return k},set:function(U){var Z=n(U);Z?(k=Z,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return I},set:function(U){if(U<0||U>100)throw new Error("Position must be between 0 and 100.");I=U,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return F},set:function(U){var Z=n(U);Z?(F=Z,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return z},set:function(U){if(U<0||U>100)throw new Error("Size must be between 0 and 100.");z=U,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return q},set:function(U){var Z=n(U);if(!Z)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");q=Z,this.hasBeenReset=!0}}}),this.displayState=void 0}return r.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},bm=r,bm}var Tm,xb;function C3(){if(xb)return Tm;xb=1;var t={"":!0,up:!0};function e(n){if(typeof n!="string")return!1;var r=t[n.toLowerCase()];return r?n.toLowerCase():!1}function i(n){return typeof n=="number"&&n>=0&&n<=100}function s(){var n=100,r=3,o=0,l=100,u=0,h=100,d="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return n},set:function(m){if(!i(m))throw new Error("Width must be between 0 and 100.");n=m}},lines:{enumerable:!0,get:function(){return r},set:function(m){if(typeof m!="number")throw new TypeError("Lines must be set to a number.");r=m}},regionAnchorY:{enumerable:!0,get:function(){return l},set:function(m){if(!i(m))throw new Error("RegionAnchorX must be between 0 and 100.");l=m}},regionAnchorX:{enumerable:!0,get:function(){return o},set:function(m){if(!i(m))throw new Error("RegionAnchorY must be between 0 and 100.");o=m}},viewportAnchorY:{enumerable:!0,get:function(){return h},set:function(m){if(!i(m))throw new Error("ViewportAnchorY must be between 0 and 100.");h=m}},viewportAnchorX:{enumerable:!0,get:function(){return u},set:function(m){if(!i(m))throw new Error("ViewportAnchorX must be between 0 and 100.");u=m}},scroll:{enumerable:!0,get:function(){return d},set:function(m){var _=e(m);_===!1?console.warn("Scroll: an invalid or illegal string was specified."):d=_}}})}return Tm=s,Tm}var Sb;function w3(){if(Sb)return ym.exports;Sb=1;var t=wf(),e=ym.exports={WebVTT:x3(),VTTCue:S3(),VTTRegion:C3()};t.vttjs=e,t.WebVTT=e.WebVTT;var i=e.VTTCue,s=e.VTTRegion,n=t.VTTCue,r=t.VTTRegion;return e.shim=function(){t.VTTCue=i,t.VTTRegion=s},e.restore=function(){t.VTTCue=n,t.VTTRegion=r},t.VTTCue||e.shim(),ym.exports}var E3=w3();const Cb=ho(E3);function si(){return si=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)({}).hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},si.apply(null,arguments)}var wb="https://example.com",Ef=function(e,i){if(/^[a-z]+:/i.test(i))return i;/^data:/.test(e)&&(e=$.location&&$.location.href||"");var s=/^\/\//.test(e),n=!$.location&&!/\/\//i.test(e);e=new $.URL(e,$.location||wb);var r=new URL(i,e);return n?r.href.slice(wb.length):s?r.href.slice(r.protocol.length):r.href},B_=(function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(s,n){this.listeners[s]||(this.listeners[s]=[]),this.listeners[s].push(n)},e.off=function(s,n){if(!this.listeners[s])return!1;var r=this.listeners[s].indexOf(n);return this.listeners[s]=this.listeners[s].slice(0),this.listeners[s].splice(r,1),r>-1},e.trigger=function(s){var n=this.listeners[s];if(n)if(arguments.length===2)for(var r=n.length,o=0;o<r;++o)n[o].call(this,arguments[1]);else for(var l=Array.prototype.slice.call(arguments,1),u=n.length,h=0;h<u;++h)n[h].apply(this,l)},e.dispose=function(){this.listeners={}},e.pipe=function(s){this.on("data",function(n){s.push(n)})},t})(),A3=function(e){return $.atob?$.atob(e):Buffer.from(e,"base64").toString("binary")};function V2(t){for(var e=A3(t),i=new Uint8Array(e.length),s=0;s<e.length;s++)i[s]=e.charCodeAt(s);return i}/*! @name m3u8-parser @version 7.2.0 @license Apache-2.0 */class D3 extends B_{constructor(){super(),this.buffer=""}push(e){let i;for(this.buffer+=e,i=this.buffer.indexOf(`
`);i>-1;i=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,i)),this.buffer=this.buffer.substring(i+1)}}const P3="	",xm=function(t){const e=/([0-9.]*)?@?([0-9.]*)?/.exec(t||""),i={};return e[1]&&(i.length=parseInt(e[1],10)),e[2]&&(i.offset=parseInt(e[2],10)),i},k3=function(){const i="(?:"+"[^=]*"+")=(?:"+'"[^"]*"|[^,]*'+")";return new RegExp("(?:^|,)("+i+")")},qi=function(t){const e={};if(!t)return e;const i=t.split(k3());let s=i.length,n;for(;s--;)i[s]!==""&&(n=/([^=]*)=(.*)/.exec(i[s]).slice(1),n[0]=n[0].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^['"](.*)['"]$/g,"$1"),e[n[0]]=n[1]);return e},Eb=t=>{const e=t.split("x"),i={};return e[0]&&(i.width=parseInt(e[0],10)),e[1]&&(i.height=parseInt(e[1],10)),i};class I3 extends B_{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(e){let i,s;if(e=e.trim(),e.length===0)return;if(e[0]!=="#"){this.trigger("data",{type:"uri",uri:e});return}this.tagMappers.reduce((r,o)=>{const l=o(e);return l===e?r:r.concat([l])},[e]).forEach(r=>{for(let o=0;o<this.customParsers.length;o++)if(this.customParsers[o].call(this,r))return;if(r.indexOf("#EXT")!==0){this.trigger("data",{type:"comment",text:r.slice(1)});return}if(r=r.replace("\r",""),i=/^#EXTM3U/.exec(r),i){this.trigger("data",{type:"tag",tagType:"m3u"});return}if(i=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(r),i){s={type:"tag",tagType:"inf"},i[1]&&(s.duration=parseFloat(i[1])),i[2]&&(s.title=i[2]),this.trigger("data",s);return}if(i=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(r),i){s={type:"tag",tagType:"targetduration"},i[1]&&(s.duration=parseInt(i[1],10)),this.trigger("data",s);return}if(i=/^#EXT-X-VERSION:([0-9.]*)?/.exec(r),i){s={type:"tag",tagType:"version"},i[1]&&(s.version=parseInt(i[1],10)),this.trigger("data",s);return}if(i=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(r),i){s={type:"tag",tagType:"media-sequence"},i[1]&&(s.number=parseInt(i[1],10)),this.trigger("data",s);return}if(i=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(r),i){s={type:"tag",tagType:"discontinuity-sequence"},i[1]&&(s.number=parseInt(i[1],10)),this.trigger("data",s);return}if(i=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(r),i){s={type:"tag",tagType:"playlist-type"},i[1]&&(s.playlistType=i[1]),this.trigger("data",s);return}if(i=/^#EXT-X-BYTERANGE:(.*)?$/.exec(r),i){s=si(xm(i[1]),{type:"tag",tagType:"byterange"}),this.trigger("data",s);return}if(i=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(r),i){s={type:"tag",tagType:"allow-cache"},i[1]&&(s.allowed=!/NO/.test(i[1])),this.trigger("data",s);return}if(i=/^#EXT-X-MAP:(.*)$/.exec(r),i){if(s={type:"tag",tagType:"map"},i[1]){const o=qi(i[1]);o.URI&&(s.uri=o.URI),o.BYTERANGE&&(s.byterange=xm(o.BYTERANGE))}this.trigger("data",s);return}if(i=/^#EXT-X-STREAM-INF:(.*)$/.exec(r),i){s={type:"tag",tagType:"stream-inf"},i[1]&&(s.attributes=qi(i[1]),s.attributes.RESOLUTION&&(s.attributes.RESOLUTION=Eb(s.attributes.RESOLUTION)),s.attributes.BANDWIDTH&&(s.attributes.BANDWIDTH=parseInt(s.attributes.BANDWIDTH,10)),s.attributes["FRAME-RATE"]&&(s.attributes["FRAME-RATE"]=parseFloat(s.attributes["FRAME-RATE"])),s.attributes["PROGRAM-ID"]&&(s.attributes["PROGRAM-ID"]=parseInt(s.attributes["PROGRAM-ID"],10))),this.trigger("data",s);return}if(i=/^#EXT-X-MEDIA:(.*)$/.exec(r),i){s={type:"tag",tagType:"media"},i[1]&&(s.attributes=qi(i[1])),this.trigger("data",s);return}if(i=/^#EXT-X-ENDLIST/.exec(r),i){this.trigger("data",{type:"tag",tagType:"endlist"});return}if(i=/^#EXT-X-DISCONTINUITY/.exec(r),i){this.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(i=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(r),i){s={type:"tag",tagType:"program-date-time"},i[1]&&(s.dateTimeString=i[1],s.dateTimeObject=new Date(i[1])),this.trigger("data",s);return}if(i=/^#EXT-X-KEY:(.*)$/.exec(r),i){s={type:"tag",tagType:"key"},i[1]&&(s.attributes=qi(i[1]),s.attributes.IV&&(s.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(s.attributes.IV=s.attributes.IV.substring(2)),s.attributes.IV=s.attributes.IV.match(/.{8}/g),s.attributes.IV[0]=parseInt(s.attributes.IV[0],16),s.attributes.IV[1]=parseInt(s.attributes.IV[1],16),s.attributes.IV[2]=parseInt(s.attributes.IV[2],16),s.attributes.IV[3]=parseInt(s.attributes.IV[3],16),s.attributes.IV=new Uint32Array(s.attributes.IV))),this.trigger("data",s);return}if(i=/^#EXT-X-START:(.*)$/.exec(r),i){s={type:"tag",tagType:"start"},i[1]&&(s.attributes=qi(i[1]),s.attributes["TIME-OFFSET"]=parseFloat(s.attributes["TIME-OFFSET"]),s.attributes.PRECISE=/YES/.test(s.attributes.PRECISE)),this.trigger("data",s);return}if(i=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(r),i){s={type:"tag",tagType:"cue-out-cont"},i[1]?s.data=i[1]:s.data="",this.trigger("data",s);return}if(i=/^#EXT-X-CUE-OUT:(.*)?$/.exec(r),i){s={type:"tag",tagType:"cue-out"},i[1]?s.data=i[1]:s.data="",this.trigger("data",s);return}if(i=/^#EXT-X-CUE-IN:?(.*)?$/.exec(r),i){s={type:"tag",tagType:"cue-in"},i[1]?s.data=i[1]:s.data="",this.trigger("data",s);return}if(i=/^#EXT-X-SKIP:(.*)$/.exec(r),i&&i[1]){s={type:"tag",tagType:"skip"},s.attributes=qi(i[1]),s.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(s.attributes["SKIPPED-SEGMENTS"]=parseInt(s.attributes["SKIPPED-SEGMENTS"],10)),s.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(s.attributes["RECENTLY-REMOVED-DATERANGES"]=s.attributes["RECENTLY-REMOVED-DATERANGES"].split(P3)),this.trigger("data",s);return}if(i=/^#EXT-X-PART:(.*)$/.exec(r),i&&i[1]){s={type:"tag",tagType:"part"},s.attributes=qi(i[1]),["DURATION"].forEach(function(o){s.attributes.hasOwnProperty(o)&&(s.attributes[o]=parseFloat(s.attributes[o]))}),["INDEPENDENT","GAP"].forEach(function(o){s.attributes.hasOwnProperty(o)&&(s.attributes[o]=/YES/.test(s.attributes[o]))}),s.attributes.hasOwnProperty("BYTERANGE")&&(s.attributes.byterange=xm(s.attributes.BYTERANGE)),this.trigger("data",s);return}if(i=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(r),i&&i[1]){s={type:"tag",tagType:"server-control"},s.attributes=qi(i[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(o){s.attributes.hasOwnProperty(o)&&(s.attributes[o]=parseFloat(s.attributes[o]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(o){s.attributes.hasOwnProperty(o)&&(s.attributes[o]=/YES/.test(s.attributes[o]))}),this.trigger("data",s);return}if(i=/^#EXT-X-PART-INF:(.*)$/.exec(r),i&&i[1]){s={type:"tag",tagType:"part-inf"},s.attributes=qi(i[1]),["PART-TARGET"].forEach(function(o){s.attributes.hasOwnProperty(o)&&(s.attributes[o]=parseFloat(s.attributes[o]))}),this.trigger("data",s);return}if(i=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(r),i&&i[1]){s={type:"tag",tagType:"preload-hint"},s.attributes=qi(i[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(o){if(s.attributes.hasOwnProperty(o)){s.attributes[o]=parseInt(s.attributes[o],10);const l=o==="BYTERANGE-LENGTH"?"length":"offset";s.attributes.byterange=s.attributes.byterange||{},s.attributes.byterange[l]=s.attributes[o],delete s.attributes[o]}}),this.trigger("data",s);return}if(i=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(r),i&&i[1]){s={type:"tag",tagType:"rendition-report"},s.attributes=qi(i[1]),["LAST-MSN","LAST-PART"].forEach(function(o){s.attributes.hasOwnProperty(o)&&(s.attributes[o]=parseInt(s.attributes[o],10))}),this.trigger("data",s);return}if(i=/^#EXT-X-DATERANGE:(.*)$/.exec(r),i&&i[1]){s={type:"tag",tagType:"daterange"},s.attributes=qi(i[1]),["ID","CLASS"].forEach(function(l){s.attributes.hasOwnProperty(l)&&(s.attributes[l]=String(s.attributes[l]))}),["START-DATE","END-DATE"].forEach(function(l){s.attributes.hasOwnProperty(l)&&(s.attributes[l]=new Date(s.attributes[l]))}),["DURATION","PLANNED-DURATION"].forEach(function(l){s.attributes.hasOwnProperty(l)&&(s.attributes[l]=parseFloat(s.attributes[l]))}),["END-ON-NEXT"].forEach(function(l){s.attributes.hasOwnProperty(l)&&(s.attributes[l]=/YES/i.test(s.attributes[l]))}),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(l){s.attributes.hasOwnProperty(l)&&(s.attributes[l]=s.attributes[l].toString(16))});const o=/^X-([A-Z]+-)+[A-Z]+$/;for(const l in s.attributes){if(!o.test(l))continue;const u=/[0-9A-Fa-f]{6}/g.test(s.attributes[l]),h=/^\d+(\.\d+)?$/.test(s.attributes[l]);s.attributes[l]=u?s.attributes[l].toString(16):h?parseFloat(s.attributes[l]):String(s.attributes[l])}this.trigger("data",s);return}if(i=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(r),i){this.trigger("data",{type:"tag",tagType:"independent-segments"});return}if(i=/^#EXT-X-I-FRAMES-ONLY/.exec(r),i){this.trigger("data",{type:"tag",tagType:"i-frames-only"});return}if(i=/^#EXT-X-CONTENT-STEERING:(.*)$/.exec(r),i){s={type:"tag",tagType:"content-steering"},s.attributes=qi(i[1]),this.trigger("data",s);return}if(i=/^#EXT-X-I-FRAME-STREAM-INF:(.*)$/.exec(r),i){s={type:"tag",tagType:"i-frame-playlist"},s.attributes=qi(i[1]),s.attributes.URI&&(s.uri=s.attributes.URI),s.attributes.BANDWIDTH&&(s.attributes.BANDWIDTH=parseInt(s.attributes.BANDWIDTH,10)),s.attributes.RESOLUTION&&(s.attributes.RESOLUTION=Eb(s.attributes.RESOLUTION)),s.attributes["AVERAGE-BANDWIDTH"]&&(s.attributes["AVERAGE-BANDWIDTH"]=parseInt(s.attributes["AVERAGE-BANDWIDTH"],10)),s.attributes["FRAME-RATE"]&&(s.attributes["FRAME-RATE"]=parseFloat(s.attributes["FRAME-RATE"])),this.trigger("data",s);return}if(i=/^#EXT-X-DEFINE:(.*)$/.exec(r),i){s={type:"tag",tagType:"define"},s.attributes=qi(i[1]),this.trigger("data",s);return}this.trigger("data",{type:"tag",data:r.slice(4)})})}addParser({expression:e,customType:i,dataParser:s,segment:n}){typeof s!="function"&&(s=r=>r),this.customParsers.push(r=>{if(e.exec(r))return this.trigger("data",{type:"custom",data:s(r),customType:i,segment:n}),!0})}addTagMapper({expression:e,map:i}){const s=n=>e.test(n)?i(n):n;this.tagMappers.push(s)}}const L3=t=>t.toLowerCase().replace(/-(\w)/g,e=>e[1].toUpperCase()),Hr=function(t){const e={};return Object.keys(t).forEach(function(i){e[L3(i)]=t[i]}),e},Sm=function(t){const{serverControl:e,targetDuration:i,partTargetDuration:s}=t;if(!e)return;const n="#EXT-X-SERVER-CONTROL",r="holdBack",o="partHoldBack",l=i&&i*3,u=s&&s*2;i&&!e.hasOwnProperty(r)&&(e[r]=l,this.trigger("info",{message:`${n} defaulting HOLD-BACK to targetDuration * 3 (${l}).`})),l&&e[r]<l&&(this.trigger("warn",{message:`${n} clamping HOLD-BACK (${e[r]}) to targetDuration * 3 (${l})`}),e[r]=l),s&&!e.hasOwnProperty(o)&&(e[o]=s*3,this.trigger("info",{message:`${n} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${e[o]}).`})),s&&e[o]<u&&(this.trigger("warn",{message:`${n} clamping PART-HOLD-BACK (${e[o]}) to partTargetDuration * 2 (${u}).`}),e[o]=u)};class O3 extends B_{constructor(e={}){super(),this.lineStream=new D3,this.parseStream=new I3,this.lineStream.pipe(this.parseStream),this.mainDefinitions=e.mainDefinitions||{},this.params=new URL(e.uri,"https://a.com").searchParams,this.lastProgramDateTime=null;const i=this,s=[];let n={},r,o,l=!1;const u=function(){},h={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},d="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";let m=0;this.manifest={allowCache:!0,discontinuityStarts:[],dateRanges:[],iFramePlaylists:[],segments:[]};let _=0,T=0;const C={};this.on("end",()=>{n.uri||!n.parts&&!n.preloadHints||(!n.map&&r&&(n.map=r),!n.key&&o&&(n.key=o),!n.timeline&&typeof m=="number"&&(n.timeline=m),this.manifest.preloadSegment=n)}),this.parseStream.on("data",function(x){let E,P;if(i.manifest.definitions){for(const k in i.manifest.definitions)if(x.uri&&(x.uri=x.uri.replace(`{$${k}}`,i.manifest.definitions[k])),x.attributes)for(const I in x.attributes)typeof x.attributes[I]=="string"&&(x.attributes[I]=x.attributes[I].replace(`{$${k}}`,i.manifest.definitions[k]))}({tag(){({version(){x.version&&(this.manifest.version=x.version)},"allow-cache"(){this.manifest.allowCache=x.allowed,"allowed"in x||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const k={};"length"in x&&(n.byterange=k,k.length=x.length,"offset"in x||(x.offset=_)),"offset"in x&&(n.byterange=k,k.offset=x.offset),_=k.offset+k.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),x.title&&(n.title=x.title),x.duration>0&&(n.duration=x.duration),x.duration===0&&(n.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=s},key(){if(!x.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(x.attributes.METHOD==="NONE"){o=null;return}if(!x.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(x.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:x.attributes};return}if(x.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:x.attributes.URI};return}if(x.attributes.KEYFORMAT===d){if(["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(x.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(x.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),x.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(x.attributes.KEYID&&x.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:x.attributes.KEYFORMAT,keyId:x.attributes.KEYID.substring(2)},pssh:V2(x.attributes.URI.split(",")[1])};return}x.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),o={method:x.attributes.METHOD||"AES-128",uri:x.attributes.URI},typeof x.attributes.IV<"u"&&(o.iv=x.attributes.IV)},"media-sequence"(){if(!isFinite(x.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+x.number});return}this.manifest.mediaSequence=x.number},"discontinuity-sequence"(){if(!isFinite(x.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+x.number});return}this.manifest.discontinuitySequence=x.number,m=x.number},"playlist-type"(){if(!/VOD|EVENT/.test(x.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+x.playlist});return}this.manifest.playlistType=x.playlistType},map(){r={},x.uri&&(r.uri=x.uri),x.byterange&&(r.byterange=x.byterange),o&&(r.key=o)},"stream-inf"(){if(this.manifest.playlists=s,this.manifest.mediaGroups=this.manifest.mediaGroups||h,!x.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}n.attributes||(n.attributes={}),si(n.attributes,x.attributes)},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||h,!(x.attributes&&x.attributes.TYPE&&x.attributes["GROUP-ID"]&&x.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}const k=this.manifest.mediaGroups[x.attributes.TYPE];k[x.attributes["GROUP-ID"]]=k[x.attributes["GROUP-ID"]]||{},E=k[x.attributes["GROUP-ID"]],P={default:/yes/i.test(x.attributes.DEFAULT)},P.default?P.autoselect=!0:P.autoselect=/yes/i.test(x.attributes.AUTOSELECT),x.attributes.LANGUAGE&&(P.language=x.attributes.LANGUAGE),x.attributes.URI&&(P.uri=x.attributes.URI),x.attributes["INSTREAM-ID"]&&(P.instreamId=x.attributes["INSTREAM-ID"]),x.attributes.CHARACTERISTICS&&(P.characteristics=x.attributes.CHARACTERISTICS),x.attributes.FORCED&&(P.forced=/yes/i.test(x.attributes.FORCED)),E[x.attributes.NAME]=P},discontinuity(){m+=1,n.discontinuity=!0,this.manifest.discontinuityStarts.push(s.length)},"program-date-time"(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=x.dateTimeString,this.manifest.dateTimeObject=x.dateTimeObject),n.dateTimeString=x.dateTimeString,n.dateTimeObject=x.dateTimeObject;const{lastProgramDateTime:k}=this;this.lastProgramDateTime=new Date(x.dateTimeString).getTime(),k===null&&this.manifest.segments.reduceRight((I,F)=>(F.programDateTime=I-F.duration*1e3,F.programDateTime),this.lastProgramDateTime)},targetduration(){if(!isFinite(x.duration)||x.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+x.duration});return}this.manifest.targetDuration=x.duration,Sm.call(this,this.manifest)},start(){if(!x.attributes||isNaN(x.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:x.attributes["TIME-OFFSET"],precise:x.attributes.PRECISE}},"cue-out"(){n.cueOut=x.data},"cue-out-cont"(){n.cueOutCont=x.data},"cue-in"(){n.cueIn=x.data},skip(){this.manifest.skip=Hr(x.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",x.attributes,["SKIPPED-SEGMENTS"])},part(){l=!0;const k=this.manifest.segments.length,I=Hr(x.attributes);n.parts=n.parts||[],n.parts.push(I),I.byterange&&(I.byterange.hasOwnProperty("offset")||(I.byterange.offset=T),T=I.byterange.offset+I.byterange.length);const F=n.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${F} for segment #${k}`,x.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((z,q)=>{z.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${q} lacks required attribute(s): LAST-PART`})})},"server-control"(){const k=this.manifest.serverControl=Hr(x.attributes);k.hasOwnProperty("canBlockReload")||(k.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),Sm.call(this,this.manifest),k.canSkipDateranges&&!k.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const k=this.manifest.segments.length,I=Hr(x.attributes),F=I.type&&I.type==="PART";n.preloadHints=n.preloadHints||[],n.preloadHints.push(I),I.byterange&&(I.byterange.hasOwnProperty("offset")||(I.byterange.offset=F?T:0,F&&(T=I.byterange.offset+I.byterange.length)));const z=n.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${z} for segment #${k}`,x.attributes,["TYPE","URI"]),!!I.type)for(let q=0;q<n.preloadHints.length-1;q++){const U=n.preloadHints[q];U.type&&U.type===I.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${z} for segment #${k} has the same TYPE ${I.type} as preload hint #${q}`})}},"rendition-report"(){const k=Hr(x.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(k);const I=this.manifest.renditionReports.length-1,F=["LAST-MSN","URI"];l&&F.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${I}`,x.attributes,F)},"part-inf"(){this.manifest.partInf=Hr(x.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",x.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),Sm.call(this,this.manifest)},daterange(){this.manifest.dateRanges.push(Hr(x.attributes));const k=this.manifest.dateRanges.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${k}`,x.attributes,["ID","START-DATE"]);const I=this.manifest.dateRanges[k];I.endDate&&I.startDate&&new Date(I.endDate)<new Date(I.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),I.duration&&I.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),I.plannedDuration&&I.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});const F=!!I.endOnNext;if(F&&!I.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),F&&(I.duration||I.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),I.duration&&I.endDate){const q=I.startDate.getTime()+I.duration*1e3;this.manifest.dateRanges[k].endDate=new Date(q)}if(!C[I.id])C[I.id]=I;else{for(const q in C[I.id])if(I[q]&&JSON.stringify(C[I.id][q])!==JSON.stringify(I[q])){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values"});break}const z=this.manifest.dateRanges.findIndex(q=>q.id===I.id);this.manifest.dateRanges[z]=si(this.manifest.dateRanges[z],I),C[I.id]=si(C[I.id],I),this.manifest.dateRanges.pop()}},"independent-segments"(){this.manifest.independentSegments=!0},"i-frames-only"(){this.manifest.iFramesOnly=!0,this.requiredCompatibilityversion(this.manifest.version,4)},"content-steering"(){this.manifest.contentSteering=Hr(x.attributes),this.warnOnMissingAttributes_("#EXT-X-CONTENT-STEERING",x.attributes,["SERVER-URI"])},define(){this.manifest.definitions=this.manifest.definitions||{};const k=(I,F)=>{if(I in this.manifest.definitions){this.trigger("error",{message:`EXT-X-DEFINE: Duplicate name ${I}`});return}this.manifest.definitions[I]=F};if("QUERYPARAM"in x.attributes){if("NAME"in x.attributes||"IMPORT"in x.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}const I=this.params.get(x.attributes.QUERYPARAM);if(!I){this.trigger("error",{message:`EXT-X-DEFINE: No query param ${x.attributes.QUERYPARAM}`});return}k(x.attributes.QUERYPARAM,decodeURIComponent(I));return}if("NAME"in x.attributes){if("IMPORT"in x.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}if(!("VALUE"in x.attributes)||typeof x.attributes.VALUE!="string"){this.trigger("error",{message:`EXT-X-DEFINE: No value for ${x.attributes.NAME}`});return}k(x.attributes.NAME,x.attributes.VALUE);return}if("IMPORT"in x.attributes){if(!this.mainDefinitions[x.attributes.IMPORT]){this.trigger("error",{message:`EXT-X-DEFINE: No value ${x.attributes.IMPORT} to import, or IMPORT used on main playlist`});return}k(x.attributes.IMPORT,this.mainDefinitions[x.attributes.IMPORT]);return}this.trigger("error",{message:"EXT-X-DEFINE: No attribute"})},"i-frame-playlist"(){this.manifest.iFramePlaylists.push({attributes:x.attributes,uri:x.uri,timeline:m}),this.warnOnMissingAttributes_("#EXT-X-I-FRAME-STREAM-INF",x.attributes,["BANDWIDTH","URI"])}}[x.tagType]||u).call(i)},uri(){n.uri=x.uri,s.push(n),this.manifest.targetDuration&&!("duration"in n)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),n.duration=this.manifest.targetDuration),o&&(n.key=o),n.timeline=m,r&&(n.map=r),T=0,this.lastProgramDateTime!==null&&(n.programDateTime=this.lastProgramDateTime,this.lastProgramDateTime+=n.duration*1e3),n={}},comment(){},custom(){x.segment?(n.custom=n.custom||{},n.custom[x.customType]=x.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[x.customType]=x.data)}})[x.type].call(i)})}requiredCompatibilityversion(e,i){(e<i||!e)&&this.trigger("warn",{message:`manifest must be at least version ${i}`})}warnOnMissingAttributes_(e,i,s){const n=[];s.forEach(function(r){i.hasOwnProperty(r)||n.push(r)}),n.length&&this.trigger("warn",{message:`${e} lacks required attribute(s): ${n.join(", ")}`})}push(e){this.lineStream.push(e)}end(){this.lineStream.push(`
`),this.manifest.dateRanges.length&&this.lastProgramDateTime===null&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),this.lastProgramDateTime=null,this.trigger("end")}addParser(e){this.parseStream.addParser(e)}addTagMapper(e){this.parseStream.addTagMapper(e)}}var sa={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},M3=["video","audio","text"],Ab=["Video","Audio","Text"],q2=function(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(i,s,n){var r=("00"+Number(s).toString(16)).slice(-2),o=("00"+Number(n).toString(16)).slice(-2);return"avc1."+r+"00"+o})},Rn=function(e){e===void 0&&(e="");var i=e.split(","),s=[];return i.forEach(function(n){n=n.trim();var r;M3.forEach(function(o){var l=sa[o].exec(n.toLowerCase());if(!(!l||l.length<=1)){r=o;var u=n.substring(0,l[1].length),h=n.replace(u,"");s.push({type:u,details:h,mediaType:o})}}),r||s.push({type:n,details:"",mediaType:"unknown"})}),s},R3=function(e,i){if(!e.mediaGroups.AUDIO||!i)return null;var s=e.mediaGroups.AUDIO[i];if(!s)return null;for(var n in s){var r=s[n];if(r.default&&r.playlists)return Rn(r.playlists[0].attributes.CODECS)}return null},$2=function(e){return e===void 0&&(e=""),sa.audio.test(e.trim().toLowerCase())},N3=function(e){return e===void 0&&(e=""),sa.text.test(e.trim().toLowerCase())},bl=function(e){if(!(!e||typeof e!="string")){var i=e.toLowerCase().split(",").map(function(r){return q2(r.trim())}),s="video";i.length===1&&$2(i[0])?s="audio":i.length===1&&N3(i[0])&&(s="application");var n="mp4";return i.every(function(r){return sa.mp4.test(r)})?n="mp4":i.every(function(r){return sa.webm.test(r)})?n="webm":i.every(function(r){return sa.ogg.test(r)})&&(n="ogg"),s+"/"+n+';codecs="'+e+'"'}},sc=function(e,i){return e===void 0&&(e=""),i===void 0&&(i=!1),$.MediaSource&&$.MediaSource.isTypeSupported&&$.MediaSource.isTypeSupported(bl(e))||i&&$.ManagedMediaSource&&$.ManagedMediaSource.isTypeSupported&&$.ManagedMediaSource.isTypeSupported(bl(e))||!1},Cm=function(e){return e===void 0&&(e=""),e.toLowerCase().split(",").every(function(i){i=i.trim();for(var s=0;s<Ab.length;s++){var n=Ab[s];if(sa["muxer"+n].test(i))return!0}return!1})},Db="mp4a.40.2",B3="avc1.4d400d",F3=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,U3=/^application\/dash\+xml/i,W2=function(e){return F3.test(e)?"hls":U3.test(e)?"dash":e==="application/vnd.videojs.vhs+json"?"vhs-json":null},j3=function(e){return e.toString(2).length},z3=function(e){return Math.ceil(j3(e)/8)},G2=function(e){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},H3=function(e){return G2(e)},Ke=function(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!H3(e)&&!(e instanceof ArrayBuffer)&&(typeof e!="number"||typeof e=="number"&&e!==e?e=0:e=[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},wi=$.BigInt||Number,gg=[wi("0x1"),wi("0x100"),wi("0x10000"),wi("0x1000000"),wi("0x100000000"),wi("0x10000000000"),wi("0x1000000000000"),wi("0x100000000000000"),wi("0x10000000000000000")];(function(){var t=new Uint16Array([65484]),e=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return e[0]===255?"big":e[0]===204?"little":"unknown"})();var V3=function(e,i){var s=i===void 0?{}:i,n=s.signed,r=n===void 0?!1:n,o=s.le,l=o===void 0?!1:o;e=Ke(e);var u=l?"reduce":"reduceRight",h=e[u]?e[u]:Array.prototype[u],d=h.call(e,function(_,T,C){var x=l?C:Math.abs(C+1-e.length);return _+wi(T)*gg[x]},wi(0));if(r){var m=gg[e.length]/wi(2)-wi(1);d=wi(d),d>m&&(d-=m,d-=m,d-=wi(2))}return Number(d)},q3=function(e,i){var s={},n=s.le,r=n===void 0?!1:n;(typeof e!="bigint"&&typeof e!="number"||typeof e=="number"&&e!==e)&&(e=0),e=wi(e);for(var o=z3(e),l=new Uint8Array(new ArrayBuffer(o)),u=0;u<o;u++){var h=r?u:Math.abs(u+1-l.length);l[h]=Number(e/gg[u]&wi(255)),e<0&&(l[h]=Math.abs(~l[h]),l[h]-=u===0?1:2)}return l},X2=function(e,i){if(typeof e!="string"&&e&&typeof e.toString=="function"&&(e=e.toString()),typeof e!="string")return new Uint8Array;i||(e=unescape(encodeURIComponent(e)));for(var s=new Uint8Array(e.length),n=0;n<e.length;n++)s[n]=e.charCodeAt(n);return s},$3=function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];if(i=i.filter(function(l){return l&&(l.byteLength||l.length)&&typeof l!="string"}),i.length<=1)return Ke(i[0]);var n=i.reduce(function(l,u,h){return l+(u.byteLength||u.length)},0),r=new Uint8Array(n),o=0;return i.forEach(function(l){l=Ke(l),r.set(l,o),o+=l.byteLength}),r},qt=function(e,i,s){var n=s===void 0?{}:s,r=n.offset,o=r===void 0?0:r,l=n.mask,u=l===void 0?[]:l;e=Ke(e),i=Ke(i);var h=i.every?i.every:Array.prototype.every;return i.length&&e.length-o>=i.length&&h.call(i,function(d,m){var _=u[m]?u[m]&e[o+m]:e[o+m];return d===_})},W3=function(e,i,s){i.forEach(function(n){for(var r in e.mediaGroups[n])for(var o in e.mediaGroups[n][r]){var l=e.mediaGroups[n][r][o];s(l,n,r,o)}})},Iu={},ur={},jo={},Pb;function Af(){if(Pb)return jo;Pb=1;function t(r,o,l){if(l===void 0&&(l=Array.prototype),r&&typeof l.find=="function")return l.find.call(r,o);for(var u=0;u<r.length;u++)if(Object.prototype.hasOwnProperty.call(r,u)){var h=r[u];if(o.call(void 0,h,u,r))return h}}function e(r,o){return o===void 0&&(o=Object),o&&typeof o.freeze=="function"?o.freeze(r):r}function i(r,o){if(r===null||typeof r!="object")throw new TypeError("target is not an object");for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l]);return r}var s=e({HTML:"text/html",isHTML:function(r){return r===s.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),n=e({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(r){return r===n.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return jo.assign=i,jo.find=t,jo.freeze=e,jo.MIME_TYPE=s,jo.NAMESPACE=n,jo}var kb;function K2(){if(kb)return ur;kb=1;var t=Af(),e=t.find,i=t.NAMESPACE;function s(O){return O!==""}function n(O){return O?O.split(/[\t\n\f\r ]+/).filter(s):[]}function r(O,N){return O.hasOwnProperty(N)||(O[N]=!0),O}function o(O){if(!O)return[];var N=n(O);return Object.keys(N.reduce(r,{}))}function l(O){return function(N){return O&&O.indexOf(N)!==-1}}function u(O,N){for(var G in O)Object.prototype.hasOwnProperty.call(O,G)&&(N[G]=O[G])}function h(O,N){var G=O.prototype;if(!(G instanceof N)){let De=function(){};var he=De;De.prototype=N.prototype,De=new De,u(G,De),O.prototype=G=De}G.constructor!=O&&(typeof O!="function"&&console.error("unknown Class:"+O),G.constructor=O)}var d={},m=d.ELEMENT_NODE=1,_=d.ATTRIBUTE_NODE=2,T=d.TEXT_NODE=3,C=d.CDATA_SECTION_NODE=4,x=d.ENTITY_REFERENCE_NODE=5,E=d.ENTITY_NODE=6,P=d.PROCESSING_INSTRUCTION_NODE=7,k=d.COMMENT_NODE=8,I=d.DOCUMENT_NODE=9,F=d.DOCUMENT_TYPE_NODE=10,z=d.DOCUMENT_FRAGMENT_NODE=11,q=d.NOTATION_NODE=12,U={},Z={};U.INDEX_SIZE_ERR=(Z[1]="Index size error",1),U.DOMSTRING_SIZE_ERR=(Z[2]="DOMString size error",2);var D=U.HIERARCHY_REQUEST_ERR=(Z[3]="Hierarchy request error",3);U.WRONG_DOCUMENT_ERR=(Z[4]="Wrong document",4),U.INVALID_CHARACTER_ERR=(Z[5]="Invalid character",5),U.NO_DATA_ALLOWED_ERR=(Z[6]="No data allowed",6),U.NO_MODIFICATION_ALLOWED_ERR=(Z[7]="No modification allowed",7);var R=U.NOT_FOUND_ERR=(Z[8]="Not found",8);U.NOT_SUPPORTED_ERR=(Z[9]="Not supported",9);var Y=U.INUSE_ATTRIBUTE_ERR=(Z[10]="Attribute in use",10);U.INVALID_STATE_ERR=(Z[11]="Invalid state",11),U.SYNTAX_ERR=(Z[12]="Syntax error",12),U.INVALID_MODIFICATION_ERR=(Z[13]="Invalid modification",13),U.NAMESPACE_ERR=(Z[14]="Invalid namespace",14),U.INVALID_ACCESS_ERR=(Z[15]="Invalid access",15);function Q(O,N){if(N instanceof Error)var G=N;else G=this,Error.call(this,Z[O]),this.message=Z[O],Error.captureStackTrace&&Error.captureStackTrace(this,Q);return G.code=O,N&&(this.message=this.message+": "+N),G}Q.prototype=Error.prototype,u(U,Q);function J(){}J.prototype={length:0,item:function(O){return O>=0&&O<this.length?this[O]:null},toString:function(O,N){for(var G=[],he=0;he<this.length;he++)Ts(this[he],G,O,N);return G.join("")},filter:function(O){return Array.prototype.filter.call(this,O)},indexOf:function(O){return Array.prototype.indexOf.call(this,O)}};function ae(O,N){this._node=O,this._refresh=N,ce(this)}function ce(O){var N=O._node._inc||O._node.ownerDocument._inc;if(O._inc!==N){var G=O._refresh(O._node);if(mo(O,"length",G.length),!O.$$length||G.length<O.$$length)for(var he=G.length;he in O;he++)Object.prototype.hasOwnProperty.call(O,he)&&delete O[he];u(G,O),O._inc=N}}ae.prototype.item=function(O){return ce(this),this[O]||null},h(ae,J);function le(){}function se(O,N){for(var G=O.length;G--;)if(O[G]===N)return G}function ee(O,N,G,he){if(he?N[se(N,he)]=G:N[N.length++]=G,O){G.ownerElement=O;var De=O.ownerDocument;De&&(he&&He(De,O,he),Ee(De,O,G))}}function fe(O,N,G){var he=se(N,G);if(he>=0){for(var De=N.length-1;he<De;)N[he]=N[++he];if(N.length=De,O){var Ze=O.ownerDocument;Ze&&(He(Ze,O,G),G.ownerElement=null)}}else throw new Q(R,new Error(O.tagName+"@"+G))}le.prototype={length:0,item:J.prototype.item,getNamedItem:function(O){for(var N=this.length;N--;){var G=this[N];if(G.nodeName==O)return G}},setNamedItem:function(O){var N=O.ownerElement;if(N&&N!=this._ownerElement)throw new Q(Y);var G=this.getNamedItem(O.nodeName);return ee(this._ownerElement,this,O,G),G},setNamedItemNS:function(O){var N=O.ownerElement,G;if(N&&N!=this._ownerElement)throw new Q(Y);return G=this.getNamedItemNS(O.namespaceURI,O.localName),ee(this._ownerElement,this,O,G),G},removeNamedItem:function(O){var N=this.getNamedItem(O);return fe(this._ownerElement,this,N),N},removeNamedItemNS:function(O,N){var G=this.getNamedItemNS(O,N);return fe(this._ownerElement,this,G),G},getNamedItemNS:function(O,N){for(var G=this.length;G--;){var he=this[G];if(he.localName==N&&he.namespaceURI==O)return he}return null}};function re(){}re.prototype={hasFeature:function(O,N){return!0},createDocument:function(O,N,G){var he=new Me;if(he.implementation=this,he.childNodes=new J,he.doctype=G||null,G&&he.appendChild(G),N){var De=he.createElementNS(O,N);he.appendChild(De)}return he},createDocumentType:function(O,N,G){var he=new at;return he.name=O,he.nodeName=O,he.publicId=N||"",he.systemId=G||"",he}};function ue(){}ue.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(O,N){return Pe(this,O,N)},replaceChild:function(O,N){Pe(this,O,N,Ie),N&&this.removeChild(N)},removeChild:function(O){return Ae(this,O)},appendChild:function(O){return this.insertBefore(O,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(O){return Ar(this.ownerDocument||this,this,O)},normalize:function(){for(var O=this.firstChild;O;){var N=O.nextSibling;N&&N.nodeType==T&&O.nodeType==T?(this.removeChild(N),O.appendData(N.data)):(O.normalize(),O=N)}},isSupported:function(O,N){return this.ownerDocument.implementation.hasFeature(O,N)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(O){for(var N=this;N;){var G=N._nsMap;if(G){for(var he in G)if(Object.prototype.hasOwnProperty.call(G,he)&&G[he]===O)return he}N=N.nodeType==_?N.ownerDocument:N.parentNode}return null},lookupNamespaceURI:function(O){for(var N=this;N;){var G=N._nsMap;if(G&&Object.prototype.hasOwnProperty.call(G,O))return G[O];N=N.nodeType==_?N.ownerDocument:N.parentNode}return null},isDefaultNamespace:function(O){var N=this.lookupPrefix(O);return N==null}};function Oe(O){return O=="<"&&"&lt;"||O==">"&&"&gt;"||O=="&"&&"&amp;"||O=='"'&&"&quot;"||"&#"+O.charCodeAt()+";"}u(d,ue),u(d,ue.prototype);function ze(O,N){if(N(O))return!0;if(O=O.firstChild)do if(ze(O,N))return!0;while(O=O.nextSibling)}function Me(){this.ownerDocument=this}function Ee(O,N,G){O&&O._inc++;var he=G.namespaceURI;he===i.XMLNS&&(N._nsMap[G.prefix?G.localName:""]=G.value)}function He(O,N,G,he){O&&O._inc++;var De=G.namespaceURI;De===i.XMLNS&&delete N._nsMap[G.prefix?G.localName:""]}function me(O,N,G){if(O&&O._inc){O._inc++;var he=N.childNodes;if(G)he[he.length++]=G;else{for(var De=N.firstChild,Ze=0;De;)he[Ze++]=De,De=De.nextSibling;he.length=Ze,delete he[he.length]}}}function Ae(O,N){var G=N.previousSibling,he=N.nextSibling;return G?G.nextSibling=he:O.firstChild=he,he?he.previousSibling=G:O.lastChild=G,N.parentNode=null,N.previousSibling=null,N.nextSibling=null,me(O.ownerDocument,O),N}function Le(O){return O&&(O.nodeType===ue.DOCUMENT_NODE||O.nodeType===ue.DOCUMENT_FRAGMENT_NODE||O.nodeType===ue.ELEMENT_NODE)}function qe(O){return O&&(H(O)||X(O)||We(O)||O.nodeType===ue.DOCUMENT_FRAGMENT_NODE||O.nodeType===ue.COMMENT_NODE||O.nodeType===ue.PROCESSING_INSTRUCTION_NODE)}function We(O){return O&&O.nodeType===ue.DOCUMENT_TYPE_NODE}function H(O){return O&&O.nodeType===ue.ELEMENT_NODE}function X(O){return O&&O.nodeType===ue.TEXT_NODE}function ie(O,N){var G=O.childNodes||[];if(e(G,H)||We(N))return!1;var he=e(G,We);return!(N&&he&&G.indexOf(he)>G.indexOf(N))}function ve(O,N){var G=O.childNodes||[];function he(Ze){return H(Ze)&&Ze!==N}if(e(G,he))return!1;var De=e(G,We);return!(N&&De&&G.indexOf(De)>G.indexOf(N))}function ye(O,N,G){if(!Le(O))throw new Q(D,"Unexpected parent node type "+O.nodeType);if(G&&G.parentNode!==O)throw new Q(R,"child not in parent");if(!qe(N)||We(N)&&O.nodeType!==ue.DOCUMENT_NODE)throw new Q(D,"Unexpected node type "+N.nodeType+" for parent node type "+O.nodeType)}function Te(O,N,G){var he=O.childNodes||[],De=N.childNodes||[];if(N.nodeType===ue.DOCUMENT_FRAGMENT_NODE){var Ze=De.filter(H);if(Ze.length>1||e(De,X))throw new Q(D,"More than one element or text in fragment");if(Ze.length===1&&!ie(O,G))throw new Q(D,"Element in fragment can not be inserted before doctype")}if(H(N)&&!ie(O,G))throw new Q(D,"Only one element can be added and only after doctype");if(We(N)){if(e(he,We))throw new Q(D,"Only one doctype is allowed");var vt=e(he,H);if(G&&he.indexOf(vt)<he.indexOf(G))throw new Q(D,"Doctype can only be inserted before an element");if(!G&&vt)throw new Q(D,"Doctype can not be appended since element is present")}}function Ie(O,N,G){var he=O.childNodes||[],De=N.childNodes||[];if(N.nodeType===ue.DOCUMENT_FRAGMENT_NODE){var Ze=De.filter(H);if(Ze.length>1||e(De,X))throw new Q(D,"More than one element or text in fragment");if(Ze.length===1&&!ve(O,G))throw new Q(D,"Element in fragment can not be inserted before doctype")}if(H(N)&&!ve(O,G))throw new Q(D,"Only one element can be added and only after doctype");if(We(N)){let Fi=function(Ei){return We(Ei)&&Ei!==G};var mi=Fi;if(e(he,Fi))throw new Q(D,"Only one doctype is allowed");var vt=e(he,H);if(G&&he.indexOf(vt)<he.indexOf(G))throw new Q(D,"Doctype can only be inserted before an element")}}function Pe(O,N,G,he){ye(O,N,G),O.nodeType===ue.DOCUMENT_NODE&&(he||Te)(O,N,G);var De=N.parentNode;if(De&&De.removeChild(N),N.nodeType===z){var Ze=N.firstChild;if(Ze==null)return N;var vt=N.lastChild}else Ze=vt=N;var mi=G?G.previousSibling:O.lastChild;Ze.previousSibling=mi,vt.nextSibling=G,mi?mi.nextSibling=Ze:O.firstChild=Ze,G==null?O.lastChild=vt:G.previousSibling=vt;do{Ze.parentNode=O;var Fi=O.ownerDocument||O;xe(Ze,Fi)}while(Ze!==vt&&(Ze=Ze.nextSibling));return me(O.ownerDocument||O,O),N.nodeType==z&&(N.firstChild=N.lastChild=null),N}function xe(O,N){if(O.ownerDocument!==N){if(O.ownerDocument=N,O.nodeType===m&&O.attributes)for(var G=0;G<O.attributes.length;G++){var he=O.attributes.item(G);he&&(he.ownerDocument=N)}for(var De=O.firstChild;De;)xe(De,N),De=De.nextSibling}}function be(O,N){N.parentNode&&N.parentNode.removeChild(N),N.parentNode=O,N.previousSibling=O.lastChild,N.nextSibling=null,N.previousSibling?N.previousSibling.nextSibling=N:O.firstChild=N,O.lastChild=N,me(O.ownerDocument,O,N);var G=O.ownerDocument||O;return xe(N,G),N}Me.prototype={nodeName:"#document",nodeType:I,doctype:null,documentElement:null,_inc:1,insertBefore:function(O,N){if(O.nodeType==z){for(var G=O.firstChild;G;){var he=G.nextSibling;this.insertBefore(G,N),G=he}return O}return Pe(this,O,N),xe(O,this),this.documentElement===null&&O.nodeType===m&&(this.documentElement=O),O},removeChild:function(O){return this.documentElement==O&&(this.documentElement=null),Ae(this,O)},replaceChild:function(O,N){Pe(this,O,N,Ie),xe(O,this),N&&this.removeChild(N),H(O)&&(this.documentElement=O)},importNode:function(O,N){return ga(this,O,N)},getElementById:function(O){var N=null;return ze(this.documentElement,function(G){if(G.nodeType==m&&G.getAttribute("id")==O)return N=G,!0}),N},getElementsByClassName:function(O){var N=o(O);return new ae(this,function(G){var he=[];return N.length>0&&ze(G.documentElement,function(De){if(De!==G&&De.nodeType===m){var Ze=De.getAttribute("class");if(Ze){var vt=O===Ze;if(!vt){var mi=o(Ze);vt=N.every(l(mi))}vt&&he.push(De)}}}),he})},createElement:function(O){var N=new Ue;N.ownerDocument=this,N.nodeName=O,N.tagName=O,N.localName=O,N.childNodes=new J;var G=N.attributes=new le;return G._ownerElement=N,N},createDocumentFragment:function(){var O=new it;return O.ownerDocument=this,O.childNodes=new J,O},createTextNode:function(O){var N=new Ge;return N.ownerDocument=this,N.appendData(O),N},createComment:function(O){var N=new Je;return N.ownerDocument=this,N.appendData(O),N},createCDATASection:function(O){var N=new ct;return N.ownerDocument=this,N.appendData(O),N},createProcessingInstruction:function(O,N){var G=new ts;return G.ownerDocument=this,G.tagName=G.nodeName=G.target=O,G.nodeValue=G.data=N,G},createAttribute:function(O){var N=new Re;return N.ownerDocument=this,N.name=O,N.nodeName=O,N.localName=O,N.specified=!0,N},createEntityReference:function(O){var N=new ri;return N.ownerDocument=this,N.nodeName=O,N},createElementNS:function(O,N){var G=new Ue,he=N.split(":"),De=G.attributes=new le;return G.childNodes=new J,G.ownerDocument=this,G.nodeName=N,G.tagName=N,G.namespaceURI=O,he.length==2?(G.prefix=he[0],G.localName=he[1]):G.localName=N,De._ownerElement=G,G},createAttributeNS:function(O,N){var G=new Re,he=N.split(":");return G.ownerDocument=this,G.nodeName=N,G.name=N,G.namespaceURI=O,G.specified=!0,he.length==2?(G.prefix=he[0],G.localName=he[1]):G.localName=N,G}},h(Me,ue);function Ue(){this._nsMap={}}Ue.prototype={nodeType:m,hasAttribute:function(O){return this.getAttributeNode(O)!=null},getAttribute:function(O){var N=this.getAttributeNode(O);return N&&N.value||""},getAttributeNode:function(O){return this.attributes.getNamedItem(O)},setAttribute:function(O,N){var G=this.ownerDocument.createAttribute(O);G.value=G.nodeValue=""+N,this.setAttributeNode(G)},removeAttribute:function(O){var N=this.getAttributeNode(O);N&&this.removeAttributeNode(N)},appendChild:function(O){return O.nodeType===z?this.insertBefore(O,null):be(this,O)},setAttributeNode:function(O){return this.attributes.setNamedItem(O)},setAttributeNodeNS:function(O){return this.attributes.setNamedItemNS(O)},removeAttributeNode:function(O){return this.attributes.removeNamedItem(O.nodeName)},removeAttributeNS:function(O,N){var G=this.getAttributeNodeNS(O,N);G&&this.removeAttributeNode(G)},hasAttributeNS:function(O,N){return this.getAttributeNodeNS(O,N)!=null},getAttributeNS:function(O,N){var G=this.getAttributeNodeNS(O,N);return G&&G.value||""},setAttributeNS:function(O,N,G){var he=this.ownerDocument.createAttributeNS(O,N);he.value=he.nodeValue=""+G,this.setAttributeNode(he)},getAttributeNodeNS:function(O,N){return this.attributes.getNamedItemNS(O,N)},getElementsByTagName:function(O){return new ae(this,function(N){var G=[];return ze(N,function(he){he!==N&&he.nodeType==m&&(O==="*"||he.tagName==O)&&G.push(he)}),G})},getElementsByTagNameNS:function(O,N){return new ae(this,function(G){var he=[];return ze(G,function(De){De!==G&&De.nodeType===m&&(O==="*"||De.namespaceURI===O)&&(N==="*"||De.localName==N)&&he.push(De)}),he})}},Me.prototype.getElementsByTagName=Ue.prototype.getElementsByTagName,Me.prototype.getElementsByTagNameNS=Ue.prototype.getElementsByTagNameNS,h(Ue,ue);function Re(){}Re.prototype.nodeType=_,h(Re,ue);function $e(){}$e.prototype={data:"",substringData:function(O,N){return this.data.substring(O,O+N)},appendData:function(O){O=this.data+O,this.nodeValue=this.data=O,this.length=O.length},insertData:function(O,N){this.replaceData(O,0,N)},appendChild:function(O){throw new Error(Z[D])},deleteData:function(O,N){this.replaceData(O,N,"")},replaceData:function(O,N,G){var he=this.data.substring(0,O),De=this.data.substring(O+N);G=he+G+De,this.nodeValue=this.data=G,this.length=G.length}},h($e,ue);function Ge(){}Ge.prototype={nodeName:"#text",nodeType:T,splitText:function(O){var N=this.data,G=N.substring(O);N=N.substring(0,O),this.data=this.nodeValue=N,this.length=N.length;var he=this.ownerDocument.createTextNode(G);return this.parentNode&&this.parentNode.insertBefore(he,this.nextSibling),he}},h(Ge,$e);function Je(){}Je.prototype={nodeName:"#comment",nodeType:k},h(Je,$e);function ct(){}ct.prototype={nodeName:"#cdata-section",nodeType:C},h(ct,$e);function at(){}at.prototype.nodeType=F,h(at,ue);function Qt(){}Qt.prototype.nodeType=q,h(Qt,ue);function Wt(){}Wt.prototype.nodeType=E,h(Wt,ue);function ri(){}ri.prototype.nodeType=x,h(ri,ue);function it(){}it.prototype.nodeName="#document-fragment",it.prototype.nodeType=z,h(it,ue);function ts(){}ts.prototype.nodeType=P,h(ts,ue);function is(){}is.prototype.serializeToString=function(O,N,G){return ii.call(O,N,G)},ue.prototype.toString=ii;function ii(O,N){var G=[],he=this.nodeType==9&&this.documentElement||this,De=he.prefix,Ze=he.namespaceURI;if(Ze&&De==null){var De=he.lookupPrefix(Ze);if(De==null)var vt=[{namespace:Ze,prefix:null}]}return Ts(this,G,O,N,vt),G.join("")}function xi(O,N,G){var he=O.prefix||"",De=O.namespaceURI;if(!De||he==="xml"&&De===i.XML||De===i.XMLNS)return!1;for(var Ze=G.length;Ze--;){var vt=G[Ze];if(vt.prefix===he)return vt.namespace!==De}return!0}function ss(O,N,G){O.push(" ",N,'="',G.replace(/[<>&"\t\n\r]/g,Oe),'"')}function Ts(O,N,G,he,De){if(De||(De=[]),he)if(O=he(O),O){if(typeof O=="string"){N.push(O);return}}else return;switch(O.nodeType){case m:var Ze=O.attributes,vt=Ze.length,zt=O.firstChild,mi=O.tagName;G=i.isHTML(O.namespaceURI)||G;var Fi=mi;if(!G&&!O.prefix&&O.namespaceURI){for(var Ei,Ui=0;Ui<Ze.length;Ui++)if(Ze.item(Ui).name==="xmlns"){Ei=Ze.item(Ui).value;break}if(!Ei)for(var Gt=De.length-1;Gt>=0;Gt--){var Be=De[Gt];if(Be.prefix===""&&Be.namespace===O.namespaceURI){Ei=Be.namespace;break}}if(Ei!==O.namespaceURI)for(var Gt=De.length-1;Gt>=0;Gt--){var Be=De[Gt];if(Be.namespace===O.namespaceURI){Be.prefix&&(Fi=Be.prefix+":"+mi);break}}}N.push("<",Fi);for(var Ms=0;Ms<vt;Ms++){var ji=Ze.item(Ms);ji.prefix=="xmlns"?De.push({prefix:ji.localName,namespace:ji.value}):ji.nodeName=="xmlns"&&De.push({prefix:"",namespace:ji.value})}for(var Ms=0;Ms<vt;Ms++){var ji=Ze.item(Ms);if(xi(ji,G,De)){var zi=ji.prefix||"",gi=ji.namespaceURI;ss(N,zi?"xmlns:"+zi:"xmlns",gi),De.push({prefix:zi,namespace:gi})}Ts(ji,N,G,he,De)}if(mi===Fi&&xi(O,G,De)){var zi=O.prefix||"",gi=O.namespaceURI;ss(N,zi?"xmlns:"+zi:"xmlns",gi),De.push({prefix:zi,namespace:gi})}if(zt||G&&!/^(?:meta|link|img|br|hr|input)$/i.test(mi)){if(N.push(">"),G&&/^script$/i.test(mi))for(;zt;)zt.data?N.push(zt.data):Ts(zt,N,G,he,De.slice()),zt=zt.nextSibling;else for(;zt;)Ts(zt,N,G,he,De.slice()),zt=zt.nextSibling;N.push("</",Fi,">")}else N.push("/>");return;case I:case z:for(var zt=O.firstChild;zt;)Ts(zt,N,G,he,De.slice()),zt=zt.nextSibling;return;case _:return ss(N,O.name,O.value);case T:return N.push(O.data.replace(/[<&>]/g,Oe));case C:return N.push("<![CDATA[",O.data,"]]>");case k:return N.push("<!--",O.data,"-->");case F:var mt=O.publicId,Hi=O.systemId;if(N.push("<!DOCTYPE ",O.name),mt)N.push(" PUBLIC ",mt),Hi&&Hi!="."&&N.push(" ",Hi),N.push(">");else if(Hi&&Hi!=".")N.push(" SYSTEM ",Hi,">");else{var yn=O.internalSubset;yn&&N.push(" [",yn,"]"),N.push(">")}return;case P:return N.push("<?",O.target," ",O.data,"?>");case x:return N.push("&",O.nodeName,";");default:N.push("??",O.nodeName)}}function ga(O,N,G){var he;switch(N.nodeType){case m:he=N.cloneNode(!1),he.ownerDocument=O;case z:break;case _:G=!0;break}if(he||(he=N.cloneNode(!1)),he.ownerDocument=O,he.parentNode=null,G)for(var De=N.firstChild;De;)he.appendChild(ga(O,De,G)),De=De.nextSibling;return he}function Ar(O,N,G){var he=new N.constructor;for(var De in N)if(Object.prototype.hasOwnProperty.call(N,De)){var Ze=N[De];typeof Ze!="object"&&Ze!=he[De]&&(he[De]=Ze)}switch(N.childNodes&&(he.childNodes=new J),he.ownerDocument=O,he.nodeType){case m:var vt=N.attributes,mi=he.attributes=new le,Fi=vt.length;mi._ownerElement=he;for(var Ei=0;Ei<Fi;Ei++)he.setAttributeNode(Ar(O,vt.item(Ei),!0));break;case _:G=!0}if(G)for(var Ui=N.firstChild;Ui;)he.appendChild(Ar(O,Ui,G)),Ui=Ui.nextSibling;return he}function mo(O,N,G){O[N]=G}try{if(Object.defineProperty){let O=function(N){switch(N.nodeType){case m:case z:var G=[];for(N=N.firstChild;N;)N.nodeType!==7&&N.nodeType!==8&&G.push(O(N)),N=N.nextSibling;return G.join("");default:return N.nodeValue}};var ql=O;Object.defineProperty(ae.prototype,"length",{get:function(){return ce(this),this.$$length}}),Object.defineProperty(ue.prototype,"textContent",{get:function(){return O(this)},set:function(N){switch(this.nodeType){case m:case z:for(;this.firstChild;)this.removeChild(this.firstChild);(N||String(N))&&this.appendChild(this.ownerDocument.createTextNode(N));break;default:this.data=N,this.value=N,this.nodeValue=N}}}),mo=function(N,G,he){N["$$"+G]=he}}}catch{}return ur.DocumentType=at,ur.DOMException=Q,ur.DOMImplementation=re,ur.Element=Ue,ur.Node=ue,ur.NodeList=J,ur.XMLSerializer=is,ur}var Lu={},wm={},Ib;function G3(){return Ib||(Ib=1,(function(t){var e=Af().freeze;t.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=e({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),t.entityMap=t.HTML_ENTITIES})(wm)),wm}var $h={},Lb;function X3(){if(Lb)return $h;Lb=1;var t=Af().NAMESPACE,e=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,i=new RegExp("[\\-\\.0-9"+e.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),s=new RegExp("^"+e.source+i.source+"*(?::"+e.source+i.source+"*)?$"),n=0,r=1,o=2,l=3,u=4,h=5,d=6,m=7;function _(D,R){this.message=D,this.locator=R,Error.captureStackTrace&&Error.captureStackTrace(this,_)}_.prototype=new Error,_.prototype.name=_.name;function T(){}T.prototype={parse:function(D,R,Y){var Q=this.domBuilder;Q.startDocument(),F(R,R={}),C(D,R,Y,Q,this.errorHandler),Q.endDocument()}};function C(D,R,Y,Q,J){function ae(be){if(be>65535){be-=65536;var Ue=55296+(be>>10),Re=56320+(be&1023);return String.fromCharCode(Ue,Re)}else return String.fromCharCode(be)}function ce(be){var Ue=be.slice(1,-1);return Object.hasOwnProperty.call(Y,Ue)?Y[Ue]:Ue.charAt(0)==="#"?ae(parseInt(Ue.substr(1).replace("x","0x"))):(J.error("entity not found:"+be),be)}function le(be){if(be>Me){var Ue=D.substring(Me,be).replace(/&#?\w+;/g,ce);ue&&se(Me),Q.characters(Ue,0,be-Me),Me=be}}function se(be,Ue){for(;be>=fe&&(Ue=re.exec(D));)ee=Ue.index,fe=ee+Ue[0].length,ue.lineNumber++;ue.columnNumber=be-ee+1}for(var ee=0,fe=0,re=/.*(?:\r\n?|\n)|.*$/g,ue=Q.locator,Oe=[{currentNSMap:R}],ze={},Me=0;;){try{var Ee=D.indexOf("<",Me);if(Ee<0){if(!D.substr(Me).match(/^\s*$/)){var He=Q.doc,me=He.createTextNode(D.substr(Me));He.appendChild(me),Q.currentElement=me}return}switch(Ee>Me&&le(Ee),D.charAt(Ee+1)){case"/":var ye=D.indexOf(">",Ee+3),Ae=D.substring(Ee+2,ye).replace(/[ \t\n\r]+$/g,""),Le=Oe.pop();ye<0?(Ae=D.substring(Ee+2).replace(/[\s<].*/,""),J.error("end tag name: "+Ae+" is not complete:"+Le.tagName),ye=Ee+1+Ae.length):Ae.match(/\s</)&&(Ae=Ae.replace(/[\s<].*/,""),J.error("end tag name: "+Ae+" maybe not complete"),ye=Ee+1+Ae.length);var qe=Le.localNSMap,We=Le.tagName==Ae,H=We||Le.tagName&&Le.tagName.toLowerCase()==Ae.toLowerCase();if(H){if(Q.endElement(Le.uri,Le.localName,Ae),qe)for(var X in qe)Object.prototype.hasOwnProperty.call(qe,X)&&Q.endPrefixMapping(X);We||J.fatalError("end tag name: "+Ae+" is not match the current start tagName:"+Le.tagName)}else Oe.push(Le);ye++;break;case"?":ue&&se(Ee),ye=q(D,Ee,Q);break;case"!":ue&&se(Ee),ye=z(D,Ee,Q,J);break;default:ue&&se(Ee);var ie=new U,ve=Oe[Oe.length-1].currentNSMap,ye=E(D,Ee,ie,ve,ce,J),Te=ie.length;if(!ie.closed&&I(D,ye,ie.tagName,ze)&&(ie.closed=!0,Y.nbsp||J.warning("unclosed xml attribute")),ue&&Te){for(var Ie=x(ue,{}),Pe=0;Pe<Te;Pe++){var xe=ie[Pe];se(xe.offset),xe.locator=x(ue,{})}Q.locator=Ie,P(ie,Q,ve)&&Oe.push(ie),Q.locator=ue}else P(ie,Q,ve)&&Oe.push(ie);t.isHTML(ie.uri)&&!ie.closed?ye=k(D,ye,ie.tagName,ce,Q):ye++}}catch(be){if(be instanceof _)throw be;J.error("element parse error: "+be),ye=-1}ye>Me?Me=ye:le(Math.max(Ee,Me)+1)}}function x(D,R){return R.lineNumber=D.lineNumber,R.columnNumber=D.columnNumber,R}function E(D,R,Y,Q,J,ae){function ce(ue,Oe,ze){Y.attributeNames.hasOwnProperty(ue)&&ae.fatalError("Attribute "+ue+" redefined"),Y.addValue(ue,Oe.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,J),ze)}for(var le,se,ee=++R,fe=n;;){var re=D.charAt(ee);switch(re){case"=":if(fe===r)le=D.slice(R,ee),fe=l;else if(fe===o)fe=l;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(fe===l||fe===r)if(fe===r&&(ae.warning('attribute value must after "="'),le=D.slice(R,ee)),R=ee+1,ee=D.indexOf(re,R),ee>0)se=D.slice(R,ee),ce(le,se,R-1),fe=h;else throw new Error("attribute value no end '"+re+"' match");else if(fe==u)se=D.slice(R,ee),ce(le,se,R),ae.warning('attribute "'+le+'" missed start quot('+re+")!!"),R=ee+1,fe=h;else throw new Error('attribute value must after "="');break;case"/":switch(fe){case n:Y.setTagName(D.slice(R,ee));case h:case d:case m:fe=m,Y.closed=!0;case u:case r:break;case o:Y.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return ae.error("unexpected end of input"),fe==n&&Y.setTagName(D.slice(R,ee)),ee;case">":switch(fe){case n:Y.setTagName(D.slice(R,ee));case h:case d:case m:break;case u:case r:se=D.slice(R,ee),se.slice(-1)==="/"&&(Y.closed=!0,se=se.slice(0,-1));case o:fe===o&&(se=le),fe==u?(ae.warning('attribute "'+se+'" missed quot(")!'),ce(le,se,R)):((!t.isHTML(Q[""])||!se.match(/^(?:disabled|checked|selected)$/i))&&ae.warning('attribute "'+se+'" missed value!! "'+se+'" instead!!'),ce(se,se,R));break;case l:throw new Error("attribute value missed!!")}return ee;case"":re=" ";default:if(re<=" ")switch(fe){case n:Y.setTagName(D.slice(R,ee)),fe=d;break;case r:le=D.slice(R,ee),fe=o;break;case u:var se=D.slice(R,ee);ae.warning('attribute "'+se+'" missed quot(")!!'),ce(le,se,R);case h:fe=d;break}else switch(fe){case o:Y.tagName,(!t.isHTML(Q[""])||!le.match(/^(?:disabled|checked|selected)$/i))&&ae.warning('attribute "'+le+'" missed value!! "'+le+'" instead2!!'),ce(le,le,R),R=ee,fe=r;break;case h:ae.warning('attribute space is required"'+le+'"!!');case d:fe=r,R=ee;break;case l:fe=u,R=ee;break;case m:throw new Error("elements closed character '/' and '>' must be connected to")}}ee++}}function P(D,R,Y){for(var Q=D.tagName,J=null,re=D.length;re--;){var ae=D[re],ce=ae.qName,le=ae.value,ue=ce.indexOf(":");if(ue>0)var se=ae.prefix=ce.slice(0,ue),ee=ce.slice(ue+1),fe=se==="xmlns"&&ee;else ee=ce,se=null,fe=ce==="xmlns"&&"";ae.localName=ee,fe!==!1&&(J==null&&(J={},F(Y,Y={})),Y[fe]=J[fe]=le,ae.uri=t.XMLNS,R.startPrefixMapping(fe,le))}for(var re=D.length;re--;){ae=D[re];var se=ae.prefix;se&&(se==="xml"&&(ae.uri=t.XML),se!=="xmlns"&&(ae.uri=Y[se||""]))}var ue=Q.indexOf(":");ue>0?(se=D.prefix=Q.slice(0,ue),ee=D.localName=Q.slice(ue+1)):(se=null,ee=D.localName=Q);var Oe=D.uri=Y[se||""];if(R.startElement(Oe,ee,Q,D),D.closed){if(R.endElement(Oe,ee,Q),J)for(se in J)Object.prototype.hasOwnProperty.call(J,se)&&R.endPrefixMapping(se)}else return D.currentNSMap=Y,D.localNSMap=J,!0}function k(D,R,Y,Q,J){if(/^(?:script|textarea)$/i.test(Y)){var ae=D.indexOf("</"+Y+">",R),ce=D.substring(R+1,ae);if(/[&<]/.test(ce))return/^script$/i.test(Y)?(J.characters(ce,0,ce.length),ae):(ce=ce.replace(/&#?\w+;/g,Q),J.characters(ce,0,ce.length),ae)}return R+1}function I(D,R,Y,Q){var J=Q[Y];return J==null&&(J=D.lastIndexOf("</"+Y+">"),J<R&&(J=D.lastIndexOf("</"+Y)),Q[Y]=J),J<R}function F(D,R){for(var Y in D)Object.prototype.hasOwnProperty.call(D,Y)&&(R[Y]=D[Y])}function z(D,R,Y,Q){var J=D.charAt(R+2);switch(J){case"-":if(D.charAt(R+3)==="-"){var ae=D.indexOf("-->",R+4);return ae>R?(Y.comment(D,R+4,ae-R-4),ae+3):(Q.error("Unclosed comment"),-1)}else return-1;default:if(D.substr(R+3,6)=="CDATA["){var ae=D.indexOf("]]>",R+9);return Y.startCDATA(),Y.characters(D,R+9,ae-R-9),Y.endCDATA(),ae+3}var ce=Z(D,R),le=ce.length;if(le>1&&/!doctype/i.test(ce[0][0])){var se=ce[1][0],ee=!1,fe=!1;le>3&&(/^public$/i.test(ce[2][0])?(ee=ce[3][0],fe=le>4&&ce[4][0]):/^system$/i.test(ce[2][0])&&(fe=ce[3][0]));var re=ce[le-1];return Y.startDTD(se,ee,fe),Y.endDTD(),re.index+re[0].length}}return-1}function q(D,R,Y){var Q=D.indexOf("?>",R);if(Q){var J=D.substring(R,Q).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return J?(J[0].length,Y.processingInstruction(J[1],J[2]),Q+2):-1}return-1}function U(){this.attributeNames={}}U.prototype={setTagName:function(D){if(!s.test(D))throw new Error("invalid tagName:"+D);this.tagName=D},addValue:function(D,R,Y){if(!s.test(D))throw new Error("invalid attribute:"+D);this.attributeNames[D]=this.length,this[this.length++]={qName:D,value:R,offset:Y}},length:0,getLocalName:function(D){return this[D].localName},getLocator:function(D){return this[D].locator},getQName:function(D){return this[D].qName},getURI:function(D){return this[D].uri},getValue:function(D){return this[D].value}};function Z(D,R){var Y,Q=[],J=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(J.lastIndex=R,J.exec(D);Y=J.exec(D);)if(Q.push(Y),Y[1])return Q}return $h.XMLReader=T,$h.ParseError=_,$h}var Ob;function K3(){if(Ob)return Lu;Ob=1;var t=Af(),e=K2(),i=G3(),s=X3(),n=e.DOMImplementation,r=t.NAMESPACE,o=s.ParseError,l=s.XMLReader;function u(E){return E.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function h(E){this.options=E||{locator:{}}}h.prototype.parseFromString=function(E,P){var k=this.options,I=new l,F=k.domBuilder||new m,z=k.errorHandler,q=k.locator,U=k.xmlns||{},Z=/\/x?html?$/.test(P),D=Z?i.HTML_ENTITIES:i.XML_ENTITIES;q&&F.setDocumentLocator(q),I.errorHandler=d(z,F,q),I.domBuilder=k.domBuilder||F,Z&&(U[""]=r.HTML),U.xml=U.xml||r.XML;var R=k.normalizeLineEndings||u;return E&&typeof E=="string"?I.parse(R(E),U,D):I.errorHandler.error("invalid doc source"),F.doc};function d(E,P,k){if(!E){if(P instanceof m)return P;E=P}var I={},F=E instanceof Function;k=k||{};function z(q){var U=E[q];!U&&F&&(U=E.length==2?function(Z){E(q,Z)}:E),I[q]=U&&function(Z){U("[xmldom "+q+"]	"+Z+T(k))}||function(){}}return z("warning"),z("error"),z("fatalError"),I}function m(){this.cdata=!1}function _(E,P){P.lineNumber=E.lineNumber,P.columnNumber=E.columnNumber}m.prototype={startDocument:function(){this.doc=new n().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(E,P,k,I){var F=this.doc,z=F.createElementNS(E,k||P),q=I.length;x(this,z),this.currentElement=z,this.locator&&_(this.locator,z);for(var U=0;U<q;U++){var E=I.getURI(U),Z=I.getValue(U),k=I.getQName(U),D=F.createAttributeNS(E,k);this.locator&&_(I.getLocator(U),D),D.value=D.nodeValue=Z,z.setAttributeNode(D)}},endElement:function(E,P,k){var I=this.currentElement;I.tagName,this.currentElement=I.parentNode},startPrefixMapping:function(E,P){},endPrefixMapping:function(E){},processingInstruction:function(E,P){var k=this.doc.createProcessingInstruction(E,P);this.locator&&_(this.locator,k),x(this,k)},ignorableWhitespace:function(E,P,k){},characters:function(E,P,k){if(E=C.apply(this,arguments),E){if(this.cdata)var I=this.doc.createCDATASection(E);else var I=this.doc.createTextNode(E);this.currentElement?this.currentElement.appendChild(I):/^\s*$/.test(E)&&this.doc.appendChild(I),this.locator&&_(this.locator,I)}},skippedEntity:function(E){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(E){(this.locator=E)&&(E.lineNumber=0)},comment:function(E,P,k){E=C.apply(this,arguments);var I=this.doc.createComment(E);this.locator&&_(this.locator,I),x(this,I)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(E,P,k){var I=this.doc.implementation;if(I&&I.createDocumentType){var F=I.createDocumentType(E,P,k);this.locator&&_(this.locator,F),x(this,F),this.doc.doctype=F}},warning:function(E){console.warn("[xmldom warning]	"+E,T(this.locator))},error:function(E){console.error("[xmldom error]	"+E,T(this.locator))},fatalError:function(E){throw new o(E,this.locator)}};function T(E){if(E)return`
@`+(E.systemId||"")+"#[line:"+E.lineNumber+",col:"+E.columnNumber+"]"}function C(E,P,k){return typeof E=="string"?E.substr(P,k):E.length>=P+k||P?new java.lang.String(E,P,k)+"":E}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(E){m.prototype[E]=function(){return null}});function x(E,P){E.currentElement?E.currentElement.appendChild(P):E.doc.appendChild(P)}return Lu.__DOMHandler=m,Lu.normalizeLineEndings=u,Lu.DOMParser=h,Lu}var Mb;function Z3(){if(Mb)return Iu;Mb=1;var t=K2();return Iu.DOMImplementation=t.DOMImplementation,Iu.XMLSerializer=t.XMLSerializer,Iu.DOMParser=K3().DOMParser,Iu}var Y3=Z3();/*! @name mpd-parser @version 1.3.1 @license Apache-2.0 */const Rb=t=>!!t&&typeof t=="object",bi=(...t)=>t.reduce((e,i)=>(typeof i!="object"||Object.keys(i).forEach(s=>{Array.isArray(e[s])&&Array.isArray(i[s])?e[s]=e[s].concat(i[s]):Rb(e[s])&&Rb(i[s])?e[s]=bi(e[s],i[s]):e[s]=i[s]}),e),{}),Z2=t=>Object.keys(t).map(e=>t[e]),Q3=(t,e)=>{const i=[];for(let s=t;s<e;s++)i.push(s);return i},Tl=t=>t.reduce((e,i)=>e.concat(i),[]),Y2=t=>{if(!t.length)return[];const e=[];for(let i=0;i<t.length;i++)e.push(t[i]);return e},J3=(t,e)=>t.reduce((i,s,n)=>(s[e]&&i.push(n),i),[]),e4=(t,e)=>Z2(t.reduce((i,s)=>(s.forEach(n=>{i[e(n)]=n}),i),{}));var xl={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"};const Tc=({baseUrl:t="",source:e="",range:i="",indexRange:s=""})=>{const n={uri:e,resolvedUri:Ef(t||"",e)};if(i||s){const o=(i||s).split("-");let l=$.BigInt?$.BigInt(o[0]):parseInt(o[0],10),u=$.BigInt?$.BigInt(o[1]):parseInt(o[1],10);l<Number.MAX_SAFE_INTEGER&&typeof l=="bigint"&&(l=Number(l)),u<Number.MAX_SAFE_INTEGER&&typeof u=="bigint"&&(u=Number(u));let h;typeof u=="bigint"||typeof l=="bigint"?h=$.BigInt(u)-$.BigInt(l)+$.BigInt(1):h=u-l+1,typeof h=="bigint"&&h<Number.MAX_SAFE_INTEGER&&(h=Number(h)),n.byterange={length:h,offset:l}}return n},t4=t=>{let e;return typeof t.offset=="bigint"||typeof t.length=="bigint"?e=$.BigInt(t.offset)+$.BigInt(t.length)-$.BigInt(1):e=t.offset+t.length-1,`${t.offset}-${e}`},Nb=t=>(t&&typeof t!="number"&&(t=parseInt(t,10)),isNaN(t)?null:t),i4={static(t){const{duration:e,timescale:i=1,sourceDuration:s,periodDuration:n}=t,r=Nb(t.endNumber),o=e/i;return typeof r=="number"?{start:0,end:r}:typeof n=="number"?{start:0,end:n/o}:{start:0,end:s/o}},dynamic(t){const{NOW:e,clientOffset:i,availabilityStartTime:s,timescale:n=1,duration:r,periodStart:o=0,minimumUpdatePeriod:l=0,timeShiftBufferDepth:u=1/0}=t,h=Nb(t.endNumber),d=(e+i)/1e3,m=s+o,T=d+l-m,C=Math.ceil(T*n/r),x=Math.floor((d-m-u)*n/r),E=Math.floor((d-m)*n/r);return{start:Math.max(0,x),end:typeof h=="number"?h:Math.min(C,E)}}},s4=t=>e=>{const{duration:i,timescale:s=1,periodStart:n,startNumber:r=1}=t;return{number:r+e,duration:i/s,timeline:n,time:e*i}},F_=t=>{const{type:e,duration:i,timescale:s=1,periodDuration:n,sourceDuration:r}=t,{start:o,end:l}=i4[e](t),u=Q3(o,l).map(s4(t));if(e==="static"){const h=u.length-1,d=typeof n=="number"?n:r;u[h].duration=d-i/s*h}return u},Q2=t=>{const{baseUrl:e,initialization:i={},sourceDuration:s,indexRange:n="",periodStart:r,presentationTime:o,number:l=0,duration:u}=t;if(!e)throw new Error(xl.NO_BASE_URL);const h=Tc({baseUrl:e,source:i.sourceURL,range:i.range}),d=Tc({baseUrl:e,source:e,indexRange:n});if(d.map=h,u){const m=F_(t);m.length&&(d.duration=m[0].duration,d.timeline=m[0].timeline)}else s&&(d.duration=s,d.timeline=r);return d.presentationTime=o||r,d.number=l,[d]},U_=(t,e,i)=>{const s=t.sidx.map?t.sidx.map:null,n=t.sidx.duration,r=t.timeline||0,o=t.sidx.byterange,l=o.offset+o.length,u=e.timescale,h=e.references.filter(E=>E.referenceType!==1),d=[],m=t.endList?"static":"dynamic",_=t.sidx.timeline;let T=_,C=t.mediaSequence||0,x;typeof e.firstOffset=="bigint"?x=$.BigInt(l)+e.firstOffset:x=l+e.firstOffset;for(let E=0;E<h.length;E++){const P=e.references[E],k=P.referencedSize,I=P.subsegmentDuration;let F;typeof x=="bigint"?F=x+$.BigInt(k)-$.BigInt(1):F=x+k-1;const z=`${x}-${F}`,U=Q2({baseUrl:i,timescale:u,timeline:r,periodStart:_,presentationTime:T,number:C,duration:I,sourceDuration:n,indexRange:z,type:m})[0];s&&(U.map=s),d.push(U),typeof x=="bigint"?x+=$.BigInt(k):x+=k,T+=I/u,C++}return t.segments=d,t},n4=["AUDIO","SUBTITLES"],r4=1/60,J2=t=>e4(t,({timeline:e})=>e).sort((e,i)=>e.timeline>i.timeline?1:-1),o4=(t,e)=>{for(let i=0;i<t.length;i++)if(t[i].attributes.NAME===e)return t[i];return null},Bb=t=>{let e=[];return W3(t,n4,(i,s,n,r)=>{e=e.concat(i.playlists||[])}),e},Fb=({playlist:t,mediaSequence:e})=>{t.mediaSequence=e,t.segments.forEach((i,s)=>{i.number=t.mediaSequence+s})},a4=({oldPlaylists:t,newPlaylists:e,timelineStarts:i})=>{e.forEach(s=>{s.discontinuitySequence=i.findIndex(function({timeline:u}){return u===s.timeline});const n=o4(t,s.attributes.NAME);if(!n||s.sidx)return;const r=s.segments[0],o=n.segments.findIndex(function(u){return Math.abs(u.presentationTime-r.presentationTime)<r4});if(o===-1){Fb({playlist:s,mediaSequence:n.mediaSequence+n.segments.length}),s.segments[0].discontinuity=!0,s.discontinuityStarts.unshift(0),(!n.segments.length&&s.timeline>n.timeline||n.segments.length&&s.timeline>n.segments[n.segments.length-1].timeline)&&s.discontinuitySequence--;return}n.segments[o].discontinuity&&!r.discontinuity&&(r.discontinuity=!0,s.discontinuityStarts.unshift(0),s.discontinuitySequence--),Fb({playlist:s,mediaSequence:n.segments[o].number})})},l4=({oldManifest:t,newManifest:e})=>{const i=t.playlists.concat(Bb(t)),s=e.playlists.concat(Bb(e));return e.timelineStarts=J2([t.timelineStarts,e.timelineStarts]),a4({oldPlaylists:i,newPlaylists:s,timelineStarts:e.timelineStarts}),e},Df=t=>t&&t.uri+"-"+t4(t.byterange),Em=t=>{const e=t.reduce(function(s,n){return s[n.attributes.baseUrl]||(s[n.attributes.baseUrl]=[]),s[n.attributes.baseUrl].push(n),s},{});let i=[];return Object.values(e).forEach(s=>{const n=Z2(s.reduce((r,o)=>{const l=o.attributes.id+(o.attributes.lang||"");return r[l]?(o.segments&&(o.segments[0]&&(o.segments[0].discontinuity=!0),r[l].segments.push(...o.segments)),o.attributes.contentProtection&&(r[l].attributes.contentProtection=o.attributes.contentProtection)):(r[l]=o,r[l].attributes.timelineStarts=[]),r[l].attributes.timelineStarts.push({start:o.attributes.periodStart,timeline:o.attributes.periodStart}),r},{}));i=i.concat(n)}),i.map(s=>(s.discontinuityStarts=J3(s.segments||[],"discontinuity"),s))},j_=(t,e)=>{const i=Df(t.sidx),s=i&&e[i]&&e[i].sidx;return s&&U_(t,s,t.sidx.resolvedUri),t},u4=(t,e={})=>{if(!Object.keys(e).length)return t;for(const i in t)t[i]=j_(t[i],e);return t},c4=({attributes:t,segments:e,sidx:i,mediaSequence:s,discontinuitySequence:n,discontinuityStarts:r},o)=>{const l={attributes:{NAME:t.id,BANDWIDTH:t.bandwidth,CODECS:t.codecs,"PROGRAM-ID":1},uri:"",endList:t.type==="static",timeline:t.periodStart,resolvedUri:t.baseUrl||"",targetDuration:t.duration,discontinuitySequence:n,discontinuityStarts:r,timelineStarts:t.timelineStarts,mediaSequence:s,segments:e};return t.contentProtection&&(l.contentProtection=t.contentProtection),t.serviceLocation&&(l.attributes.serviceLocation=t.serviceLocation),i&&(l.sidx=i),o&&(l.attributes.AUDIO="audio",l.attributes.SUBTITLES="subs"),l},h4=({attributes:t,segments:e,mediaSequence:i,discontinuityStarts:s,discontinuitySequence:n})=>{typeof e>"u"&&(e=[{uri:t.baseUrl,timeline:t.periodStart,resolvedUri:t.baseUrl||"",duration:t.sourceDuration,number:0}],t.duration=t.sourceDuration);const r={NAME:t.id,BANDWIDTH:t.bandwidth,"PROGRAM-ID":1};t.codecs&&(r.CODECS=t.codecs);const o={attributes:r,uri:"",endList:t.type==="static",timeline:t.periodStart,resolvedUri:t.baseUrl||"",targetDuration:t.duration,timelineStarts:t.timelineStarts,discontinuityStarts:s,discontinuitySequence:n,mediaSequence:i,segments:e};return t.serviceLocation&&(o.attributes.serviceLocation=t.serviceLocation),o},d4=(t,e={},i=!1)=>{let s;const n=t.reduce((r,o)=>{const l=o.attributes.role&&o.attributes.role.value||"",u=o.attributes.lang||"";let h=o.attributes.label||"main";if(u&&!o.attributes.label){const m=l?` (${l})`:"";h=`${o.attributes.lang}${m}`}r[h]||(r[h]={language:u,autoselect:!0,default:l==="main",playlists:[],uri:""});const d=j_(c4(o,i),e);return r[h].playlists.push(d),typeof s>"u"&&l==="main"&&(s=o,s.default=!0),r},{});if(!s){const r=Object.keys(n)[0];n[r].default=!0}return n},f4=(t,e={})=>t.reduce((i,s)=>{const n=s.attributes.label||s.attributes.lang||"text",r=s.attributes.lang||"und";return i[n]||(i[n]={language:r,default:!1,autoselect:!1,playlists:[],uri:""}),i[n].playlists.push(j_(h4(s),e)),i},{}),p4=t=>t.reduce((e,i)=>(i&&i.forEach(s=>{const{channel:n,language:r}=s;e[r]={autoselect:!1,default:!1,instreamId:n,language:r},s.hasOwnProperty("aspectRatio")&&(e[r].aspectRatio=s.aspectRatio),s.hasOwnProperty("easyReader")&&(e[r].easyReader=s.easyReader),s.hasOwnProperty("3D")&&(e[r]["3D"]=s["3D"])}),e),{}),m4=({attributes:t,segments:e,sidx:i,discontinuityStarts:s})=>{const n={attributes:{NAME:t.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:t.width,height:t.height},CODECS:t.codecs,BANDWIDTH:t.bandwidth,"PROGRAM-ID":1},uri:"",endList:t.type==="static",timeline:t.periodStart,resolvedUri:t.baseUrl||"",targetDuration:t.duration,discontinuityStarts:s,timelineStarts:t.timelineStarts,segments:e};return t.frameRate&&(n.attributes["FRAME-RATE"]=t.frameRate),t.contentProtection&&(n.contentProtection=t.contentProtection),t.serviceLocation&&(n.attributes.serviceLocation=t.serviceLocation),i&&(n.sidx=i),n},g4=({attributes:t})=>t.mimeType==="video/mp4"||t.mimeType==="video/webm"||t.contentType==="video",_4=({attributes:t})=>t.mimeType==="audio/mp4"||t.mimeType==="audio/webm"||t.contentType==="audio",y4=({attributes:t})=>t.mimeType==="text/vtt"||t.contentType==="text",v4=(t,e)=>{t.forEach(i=>{i.mediaSequence=0,i.discontinuitySequence=e.findIndex(function({timeline:s}){return s===i.timeline}),i.segments&&i.segments.forEach((s,n)=>{s.number=n})})},Ub=t=>t?Object.keys(t).reduce((e,i)=>{const s=t[i];return e.concat(s.playlists)},[]):[],b4=({dashPlaylists:t,locations:e,contentSteering:i,sidxMapping:s={},previousManifest:n,eventStream:r})=>{if(!t.length)return{};const{sourceDuration:o,type:l,suggestedPresentationDelay:u,minimumUpdatePeriod:h}=t[0].attributes,d=Em(t.filter(g4)).map(m4),m=Em(t.filter(_4)),_=Em(t.filter(y4)),T=t.map(F=>F.attributes.captionServices).filter(Boolean),C={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:"",duration:o,playlists:u4(d,s)};h>=0&&(C.minimumUpdatePeriod=h*1e3),e&&(C.locations=e),i&&(C.contentSteering=i),l==="dynamic"&&(C.suggestedPresentationDelay=u),r&&r.length>0&&(C.eventStream=r);const x=C.playlists.length===0,E=m.length?d4(m,s,x):null,P=_.length?f4(_,s):null,k=d.concat(Ub(E),Ub(P)),I=k.map(({timelineStarts:F})=>F);return C.timelineStarts=J2(I),v4(k,C.timelineStarts),E&&(C.mediaGroups.AUDIO.audio=E),P&&(C.mediaGroups.SUBTITLES.subs=P),T.length&&(C.mediaGroups["CLOSED-CAPTIONS"].cc=p4(T)),n?l4({oldManifest:n,newManifest:C}):C},T4=(t,e,i)=>{const{NOW:s,clientOffset:n,availabilityStartTime:r,timescale:o=1,periodStart:l=0,minimumUpdatePeriod:u=0}=t,h=(s+n)/1e3,d=r+l,_=h+u-d;return Math.ceil((_*o-e)/i)},e1=(t,e)=>{const{type:i,minimumUpdatePeriod:s=0,media:n="",sourceDuration:r,timescale:o=1,startNumber:l=1,periodStart:u}=t,h=[];let d=-1;for(let m=0;m<e.length;m++){const _=e[m],T=_.d,C=_.r||0,x=_.t||0;d<0&&(d=x),x&&x>d&&(d=x);let E;if(C<0){const I=m+1;I===e.length?i==="dynamic"&&s>0&&n.indexOf("$Number$")>0?E=T4(t,d,T):E=(r*o-d)/T:E=(e[I].t-d)/T}else E=C+1;const P=l+h.length+E;let k=l+h.length;for(;k<P;)h.push({number:k,duration:T/o,time:d,timeline:u}),d+=T,k++}return h},x4=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,S4=t=>(e,i,s,n)=>{if(e==="$$")return"$";if(typeof t[i]>"u")return e;const r=""+t[i];return i==="RepresentationID"||(s?n=parseInt(n,10):n=1,r.length>=n)?r:`${new Array(n-r.length+1).join("0")}${r}`},jb=(t,e)=>t.replace(x4,S4(e)),C4=(t,e)=>!t.duration&&!e?[{number:t.startNumber||1,duration:t.sourceDuration,time:0,timeline:t.periodStart}]:t.duration?F_(t):e1(t,e),w4=(t,e)=>{const i={RepresentationID:t.id,Bandwidth:t.bandwidth||0},{initialization:s={sourceURL:"",range:""}}=t,n=Tc({baseUrl:t.baseUrl,source:jb(s.sourceURL,i),range:s.range});return C4(t,e).map(o=>{i.Number=o.number,i.Time=o.time;const l=jb(t.media||"",i),u=t.timescale||1,h=t.presentationTimeOffset||0,d=t.periodStart+(o.time-h)/u;return{uri:l,timeline:o.timeline,duration:o.duration,resolvedUri:Ef(t.baseUrl||"",l),map:n,number:o.number,presentationTime:d}})},E4=(t,e)=>{const{baseUrl:i,initialization:s={}}=t,n=Tc({baseUrl:i,source:s.sourceURL,range:s.range}),r=Tc({baseUrl:i,source:e.media,range:e.mediaRange});return r.map=n,r},A4=(t,e)=>{const{duration:i,segmentUrls:s=[],periodStart:n}=t;if(!i&&!e||i&&e)throw new Error(xl.SEGMENT_TIME_UNSPECIFIED);const r=s.map(u=>E4(t,u));let o;return i&&(o=F_(t)),e&&(o=e1(t,e)),o.map((u,h)=>{if(r[h]){const d=r[h],m=t.timescale||1,_=t.presentationTimeOffset||0;return d.timeline=u.timeline,d.duration=u.duration,d.number=u.number,d.presentationTime=n+(u.time-_)/m,d}}).filter(u=>u)},D4=({attributes:t,segmentInfo:e})=>{let i,s;e.template?(s=w4,i=bi(t,e.template)):e.base?(s=Q2,i=bi(t,e.base)):e.list&&(s=A4,i=bi(t,e.list));const n={attributes:t};if(!s)return n;const r=s(i,e.segmentTimeline);if(i.duration){const{duration:o,timescale:l=1}=i;i.duration=o/l}else r.length?i.duration=r.reduce((o,l)=>Math.max(o,Math.ceil(l.duration)),0):i.duration=0;return n.attributes=i,n.segments=r,e.base&&i.indexRange&&(n.sidx=r[0],n.segments=[]),n},P4=t=>t.map(D4),$t=(t,e)=>Y2(t.childNodes).filter(({tagName:i})=>i===e),Fc=t=>t.textContent.trim(),k4=t=>parseFloat(t.split("/").reduce((e,i)=>e/i)),Ha=t=>{const l=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(t);if(!l)return 0;const[u,h,d,m,_,T]=l.slice(1);return parseFloat(u||0)*31536e3+parseFloat(h||0)*2592e3+parseFloat(d||0)*86400+parseFloat(m||0)*3600+parseFloat(_||0)*60+parseFloat(T||0)},I4=t=>(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t)&&(t+="Z"),Date.parse(t)),zb={mediaPresentationDuration(t){return Ha(t)},availabilityStartTime(t){return I4(t)/1e3},minimumUpdatePeriod(t){return Ha(t)},suggestedPresentationDelay(t){return Ha(t)},type(t){return t},timeShiftBufferDepth(t){return Ha(t)},start(t){return Ha(t)},width(t){return parseInt(t,10)},height(t){return parseInt(t,10)},bandwidth(t){return parseInt(t,10)},frameRate(t){return k4(t)},startNumber(t){return parseInt(t,10)},timescale(t){return parseInt(t,10)},presentationTimeOffset(t){return parseInt(t,10)},duration(t){const e=parseInt(t,10);return isNaN(e)?Ha(t):e},d(t){return parseInt(t,10)},t(t){return parseInt(t,10)},r(t){return parseInt(t,10)},presentationTime(t){return parseInt(t,10)},DEFAULT(t){return t}},ai=t=>t&&t.attributes?Y2(t.attributes).reduce((e,i)=>{const s=zb[i.name]||zb.DEFAULT;return e[i.name]=s(i.value),e},{}):{},L4={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime","urn:mpeg:dash:mp4protection:2011":"mp4protection"},Pf=(t,e)=>e.length?Tl(t.map(function(i){return e.map(function(s){const n=Fc(s),r=Ef(i.baseUrl,n),o=bi(ai(s),{baseUrl:r});return r!==n&&!o.serviceLocation&&i.serviceLocation&&(o.serviceLocation=i.serviceLocation),o})})):t,z_=t=>{const e=$t(t,"SegmentTemplate")[0],i=$t(t,"SegmentList")[0],s=i&&$t(i,"SegmentURL").map(m=>bi({tag:"SegmentURL"},ai(m))),n=$t(t,"SegmentBase")[0],r=i||e,o=r&&$t(r,"SegmentTimeline")[0],l=i||n||e,u=l&&$t(l,"Initialization")[0],h=e&&ai(e);h&&u?h.initialization=u&&ai(u):h&&h.initialization&&(h.initialization={sourceURL:h.initialization});const d={template:h,segmentTimeline:o&&$t(o,"S").map(m=>ai(m)),list:i&&bi(ai(i),{segmentUrls:s,initialization:ai(u)}),base:n&&bi(ai(n),{initialization:ai(u)})};return Object.keys(d).forEach(m=>{d[m]||delete d[m]}),d},O4=(t,e,i)=>s=>{const n=$t(s,"BaseURL"),r=Pf(e,n),o=bi(t,ai(s)),l=z_(s);return r.map(u=>({segmentInfo:bi(i,l),attributes:bi(o,u)}))},M4=t=>t.reduce((e,i)=>{const s=ai(i);s.schemeIdUri&&(s.schemeIdUri=s.schemeIdUri.toLowerCase());const n=L4[s.schemeIdUri];if(n){e[n]={attributes:s};const r=$t(i,"cenc:pssh")[0];if(r){const o=Fc(r);e[n].pssh=o&&V2(o)}}return e},{}),R4=t=>{if(t.schemeIdUri==="urn:scte:dash:cc:cea-608:2015")return(typeof t.value!="string"?[]:t.value.split(";")).map(i=>{let s,n;return n=i,/^CC\d=/.test(i)?[s,n]=i.split("="):/^CC\d$/.test(i)&&(s=i),{channel:s,language:n}});if(t.schemeIdUri==="urn:scte:dash:cc:cea-708:2015")return(typeof t.value!="string"?[]:t.value.split(";")).map(i=>{const s={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(i)){const[n,r=""]=i.split("=");s.channel=n,s.language=i,r.split(",").forEach(o=>{const[l,u]=o.split(":");l==="lang"?s.language=u:l==="er"?s.easyReader=Number(u):l==="war"?s.aspectRatio=Number(u):l==="3D"&&(s["3D"]=Number(u))})}else s.language=i;return s.channel&&(s.channel="SERVICE"+s.channel),s})},N4=t=>Tl($t(t.node,"EventStream").map(e=>{const i=ai(e),s=i.schemeIdUri;return $t(e,"Event").map(n=>{const r=ai(n),o=r.presentationTime||0,l=i.timescale||1,u=r.duration||0,h=o/l+t.attributes.start;return{schemeIdUri:s,value:i.value,id:r.id,start:h,end:h+u/l,messageData:Fc(n)||r.messageData,contentEncoding:i.contentEncoding,presentationTimeOffset:i.presentationTimeOffset||0}})})),B4=(t,e,i)=>s=>{const n=ai(s),r=Pf(e,$t(s,"BaseURL")),o=$t(s,"Role")[0],l={role:ai(o)};let u=bi(t,n,l);const h=$t(s,"Accessibility")[0],d=R4(ai(h));d&&(u=bi(u,{captionServices:d}));const m=$t(s,"Label")[0];if(m&&m.childNodes.length){const E=m.childNodes[0].nodeValue.trim();u=bi(u,{label:E})}const _=M4($t(s,"ContentProtection"));Object.keys(_).length&&(u=bi(u,{contentProtection:_}));const T=z_(s),C=$t(s,"Representation"),x=bi(i,T);return Tl(C.map(O4(u,r,x)))},F4=(t,e)=>(i,s)=>{const n=Pf(e,$t(i.node,"BaseURL")),r=bi(t,{periodStart:i.attributes.start});typeof i.attributes.duration=="number"&&(r.periodDuration=i.attributes.duration);const o=$t(i.node,"AdaptationSet"),l=z_(i.node);return Tl(o.map(B4(r,n,l)))},U4=(t,e)=>{if(t.length>1&&e({type:"warn",message:"The MPD manifest should contain no more than one ContentSteering tag"}),!t.length)return null;const i=bi({serverURL:Fc(t[0])},ai(t[0]));return i.queryBeforeStart=i.queryBeforeStart==="true",i},j4=({attributes:t,priorPeriodAttributes:e,mpdType:i})=>typeof t.start=="number"?t.start:e&&typeof e.start=="number"&&typeof e.duration=="number"?e.start+e.duration:!e&&i==="static"?0:null,z4=(t,e={})=>{const{manifestUri:i="",NOW:s=Date.now(),clientOffset:n=0,eventHandler:r=function(){}}=e,o=$t(t,"Period");if(!o.length)throw new Error(xl.INVALID_NUMBER_OF_PERIOD);const l=$t(t,"Location"),u=ai(t),h=Pf([{baseUrl:i}],$t(t,"BaseURL")),d=$t(t,"ContentSteering");u.type=u.type||"static",u.sourceDuration=u.mediaPresentationDuration||0,u.NOW=s,u.clientOffset=n,l.length&&(u.locations=l.map(Fc));const m=[];return o.forEach((_,T)=>{const C=ai(_),x=m[T-1];C.start=j4({attributes:C,priorPeriodAttributes:x?x.attributes:null,mpdType:u.type}),m.push({node:_,attributes:C})}),{locations:u.locations,contentSteeringInfo:U4(d,r),representationInfo:Tl(m.map(F4(u,h))),eventStream:Tl(m.map(N4))}},t1=t=>{if(t==="")throw new Error(xl.DASH_EMPTY_MANIFEST);const e=new Y3.DOMParser;let i,s;try{i=e.parseFromString(t,"application/xml"),s=i&&i.documentElement.tagName==="MPD"?i.documentElement:null}catch{}if(!s||s&&s.getElementsByTagName("parsererror").length>0)throw new Error(xl.DASH_INVALID_XML);return s},H4=t=>{const e=$t(t,"UTCTiming")[0];if(!e)return null;const i=ai(e);switch(i.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":i.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":i.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":i.method="DIRECT",i.value=Date.parse(i.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(xl.UNSUPPORTED_UTC_TIMING_SCHEME)}return i},V4=(t,e={})=>{const i=z4(t1(t),e),s=P4(i.representationInfo);return b4({dashPlaylists:s,locations:i.locations,contentSteering:i.contentSteeringInfo,sidxMapping:e.sidxMapping,previousManifest:e.previousManifest,eventStream:i.eventStream})},q4=t=>H4(t1(t));var Am,Hb;function $4(){if(Hb)return Am;Hb=1;var t=Math.pow(2,32),e=function(i){var s=new DataView(i.buffer,i.byteOffset,i.byteLength),n;return s.getBigUint64?(n=s.getBigUint64(0),n<Number.MAX_SAFE_INTEGER?Number(n):n):s.getUint32(0)*t+s.getUint32(4)};return Am={getUint64:e,MAX_UINT32:t},Am}var Dm,Vb;function W4(){if(Vb)return Dm;Vb=1;var t=$4().getUint64,e=function(i){var s=new DataView(i.buffer,i.byteOffset,i.byteLength),n={version:i[0],flags:new Uint8Array(i.subarray(1,4)),references:[],referenceId:s.getUint32(4),timescale:s.getUint32(8)},r=12;n.version===0?(n.earliestPresentationTime=s.getUint32(r),n.firstOffset=s.getUint32(r+4),r+=8):(n.earliestPresentationTime=t(i.subarray(r)),n.firstOffset=t(i.subarray(r+8)),r+=16),r+=2;var o=s.getUint16(r);for(r+=2;o>0;r+=12,o--)n.references.push({referenceType:(i[r]&128)>>>7,referencedSize:s.getUint32(r)&2147483647,subsegmentDuration:s.getUint32(r+4),startsWithSap:!!(i[r+8]&128),sapType:(i[r+8]&112)>>>4,sapDeltaTime:s.getUint32(r+8)&268435455});return n};return Dm=e,Dm}var G4=W4();const X4=ho(G4);var K4=Ke([73,68,51]),Z4=function(e,i){i===void 0&&(i=0),e=Ke(e);var s=e[i+5],n=e[i+6]<<21|e[i+7]<<14|e[i+8]<<7|e[i+9],r=(s&16)>>4;return r?n+20:n+10},Hu=function t(e,i){return i===void 0&&(i=0),e=Ke(e),e.length-i<10||!qt(e,K4,{offset:i})?i:(i+=Z4(e,i),t(e,i))},qb=function(e){return typeof e=="string"?X2(e):e},Y4=function(e){return Array.isArray(e)?e.map(function(i){return qb(i)}):[qb(e)]},Q4=function t(e,i,s){s===void 0&&(s=!1),i=Y4(i),e=Ke(e);var n=[];if(!i.length)return n;for(var r=0;r<e.length;){var o=(e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3])>>>0,l=e.subarray(r+4,r+8);if(o===0)break;var u=r+o;if(u>e.length){if(s)break;u=e.length}var h=e.subarray(r+8,u);qt(l,i[0])&&(i.length===1?n.push(h):n.push.apply(n,t(h,i.slice(1),s))),r=u}return n},Wh={EBML:Ke([26,69,223,163]),DocType:Ke([66,130]),Segment:Ke([24,83,128,103]),SegmentInfo:Ke([21,73,169,102]),Tracks:Ke([22,84,174,107]),Track:Ke([174]),TrackNumber:Ke([215]),DefaultDuration:Ke([35,227,131]),TrackEntry:Ke([174]),TrackType:Ke([131]),FlagDefault:Ke([136]),CodecID:Ke([134]),CodecPrivate:Ke([99,162]),VideoTrack:Ke([224]),AudioTrack:Ke([225]),Cluster:Ke([31,67,182,117]),Timestamp:Ke([231]),TimestampScale:Ke([42,215,177]),BlockGroup:Ke([160]),BlockDuration:Ke([155]),Block:Ke([161]),SimpleBlock:Ke([163])},_g=[128,64,32,16,8,4,2,1],J4=function(e){for(var i=1,s=0;s<_g.length&&!(e&_g[s]);s++)i++;return i},Ld=function(e,i,s,n){s===void 0&&(s=!0),n===void 0&&(n=!1);var r=J4(e[i]),o=e.subarray(i,i+r);return s&&(o=Array.prototype.slice.call(e,i,i+r),o[0]^=_g[r-1]),{length:r,value:V3(o,{signed:n}),bytes:o}},$b=function t(e){return typeof e=="string"?e.match(/.{1,2}/g).map(function(i){return t(i)}):typeof e=="number"?q3(e):e},eB=function(e){return Array.isArray(e)?e.map(function(i){return $b(i)}):[$b(e)]},tB=function t(e,i,s){if(s>=i.length)return i.length;var n=Ld(i,s,!1);if(qt(e.bytes,n.bytes))return s;var r=Ld(i,s+n.length);return t(e,i,s+r.length+r.value+n.length)},Wb=function t(e,i){i=eB(i),e=Ke(e);var s=[];if(!i.length)return s;for(var n=0;n<e.length;){var r=Ld(e,n,!1),o=Ld(e,n+r.length),l=n+r.length+o.length;o.value===127&&(o.value=tB(r,e,l),o.value!==e.length&&(o.value-=l));var u=l+o.value>e.length?e.length:l+o.value,h=e.subarray(l,u);qt(i[0],r.bytes)&&(i.length===1?s.push(h):s=s.concat(t(h,i.slice(1))));var d=r.length+o.length+h.length;n+=d}return s},iB=Ke([0,0,0,1]),sB=Ke([0,0,1]),nB=Ke([0,0,3]),rB=function(e){for(var i=[],s=1;s<e.length-2;)qt(e.subarray(s,s+3),nB)&&(i.push(s+2),s++),s++;if(i.length===0)return e;var n=e.length-i.length,r=new Uint8Array(n),o=0;for(s=0;s<n;o++,s++)o===i[0]&&(o++,i.shift()),r[s]=e[o];return r},i1=function(e,i,s,n){e=Ke(e),s=[].concat(s);for(var r=0,o,l=0;r<e.length&&(l<n||o);){var u=void 0;if(qt(e.subarray(r),iB)?u=4:qt(e.subarray(r),sB)&&(u=3),!u){r++;continue}if(l++,o)return rB(e.subarray(o,r));var h=void 0;i==="h264"?h=e[r+u]&31:i==="h265"&&(h=e[r+u]>>1&63),s.indexOf(h)!==-1&&(o=r+u),r+=u+(i==="h264"?1:2)}return e.subarray(0,0)},oB=function(e,i,s){return i1(e,"h264",i,s)},aB=function(e,i,s){return i1(e,"h265",i,s)},$i={webm:Ke([119,101,98,109]),matroska:Ke([109,97,116,114,111,115,107,97]),flac:Ke([102,76,97,67]),ogg:Ke([79,103,103,83]),ac3:Ke([11,119]),riff:Ke([82,73,70,70]),avi:Ke([65,86,73]),wav:Ke([87,65,86,69]),"3gp":Ke([102,116,121,112,51,103]),mp4:Ke([102,116,121,112]),fmp4:Ke([115,116,121,112]),mov:Ke([102,116,121,112,113,116]),moov:Ke([109,111,111,118]),moof:Ke([109,111,111,102])},Sl={aac:function(e){var i=Hu(e);return qt(e,[255,16],{offset:i,mask:[255,22]})},mp3:function(e){var i=Hu(e);return qt(e,[255,2],{offset:i,mask:[255,6]})},webm:function(e){var i=Wb(e,[Wh.EBML,Wh.DocType])[0];return qt(i,$i.webm)},mkv:function(e){var i=Wb(e,[Wh.EBML,Wh.DocType])[0];return qt(i,$i.matroska)},mp4:function(e){if(Sl["3gp"](e)||Sl.mov(e))return!1;if(qt(e,$i.mp4,{offset:4})||qt(e,$i.fmp4,{offset:4})||qt(e,$i.moof,{offset:4})||qt(e,$i.moov,{offset:4}))return!0},mov:function(e){return qt(e,$i.mov,{offset:4})},"3gp":function(e){return qt(e,$i["3gp"],{offset:4})},ac3:function(e){var i=Hu(e);return qt(e,$i.ac3,{offset:i})},ts:function(e){if(e.length<189&&e.length>=1)return e[0]===71;for(var i=0;i+188<e.length&&i<188;){if(e[i]===71&&e[i+188]===71)return!0;i+=1}return!1},flac:function(e){var i=Hu(e);return qt(e,$i.flac,{offset:i})},ogg:function(e){return qt(e,$i.ogg)},avi:function(e){return qt(e,$i.riff)&&qt(e,$i.avi,{offset:8})},wav:function(e){return qt(e,$i.riff)&&qt(e,$i.wav,{offset:8})},h264:function(e){return oB(e,7,3).length},h265:function(e){return aB(e,[32,33],3).length}},yg=Object.keys(Sl).filter(function(t){return t!=="ts"&&t!=="h264"&&t!=="h265"}).concat(["ts","h264","h265"]);yg.forEach(function(t){var e=Sl[t];Sl[t]=function(i){return e(Ke(i))}});var lB=Sl,H_=function(e){e=Ke(e);for(var i=0;i<yg.length;i++){var s=yg[i];if(lB[s](e))return s}return""},uB=function(e){return Q4(e,["moof"]).length>0},Pm,Gb;function cB(){if(Gb)return Pm;Gb=1;var t=9e4,e,i,s,n,r,o,l;return e=function(u){return u*t},i=function(u,h){return u*h},s=function(u){return u/t},n=function(u,h){return u/h},r=function(u,h){return e(n(u,h))},o=function(u,h){return i(s(u),h)},l=function(u,h,d){return s(d?u:u-h)},Pm={ONE_SECOND_IN_TS:t,secondsToVideoTs:e,secondsToAudioTs:i,videoTsToSeconds:s,audioTsToSeconds:n,audioTsToVideoTs:r,videoTsToAudioTs:o,metadataTsToSeconds:l},Pm}var Ko=cB();/**
 * @license
 * Video.js 8.23.5 <http://videojs.com/>
 * Copyright 2010-present Video.js contributors
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */var vg="8.23.5";const gr={},uo=function(t,e){return gr[t]=gr[t]||[],e&&(gr[t]=gr[t].concat(e)),gr[t]},hB=function(t,e){uo(t,e)},s1=function(t,e){const i=uo(t).indexOf(e);return i<=-1?!1:(gr[t]=gr[t].slice(),gr[t].splice(i,1),!0)},dB=function(t,e){uo(t,[].concat(e).map(i=>{const s=(...n)=>(s1(t,s),i(...n));return s}))},Od={prefixed:!0},ld=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"]],Xb=ld[0];let Vu;for(let t=0;t<ld.length;t++)if(ld[t][1]in ke){Vu=ld[t];break}if(Vu){for(let t=0;t<Vu.length;t++)Od[Xb[t]]=Vu[t];Od.prefixed=Vu[0]!==Xb[0]}let cs=[];const fB=(t,e,i)=>(s,n,r)=>{const o=e.levels[n],l=new RegExp(`^(${o})$`);let u=t;if(s!=="log"&&r.unshift(s.toUpperCase()+":"),i&&(u=`%c${t}`,r.unshift(i)),r.unshift(u+":"),cs){cs.push([].concat(r));const d=cs.length-1e3;cs.splice(0,d>0?d:0)}if(!$.console)return;let h=$.console[s];!h&&s==="debug"&&(h=$.console.info||$.console.log),!(!h||!o||!l.test(s))&&h[Array.isArray(r)?"apply":"call"]($.console,r)};function bg(t,e=":",i=""){let s="info",n;function r(...o){n("log",s,o)}return n=fB(t,r,i),r.createLogger=(o,l,u)=>{const h=l!==void 0?l:e,d=u!==void 0?u:i,m=`${t} ${h} ${o}`;return bg(m,h,d)},r.createNewLogger=(o,l,u)=>bg(o,l,u),r.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:s},r.level=o=>{if(typeof o=="string"){if(!r.levels.hasOwnProperty(o))throw new Error(`"${o}" in not a valid log level`);s=o}return s},r.history=()=>cs?[].concat(cs):[],r.history.filter=o=>(cs||[]).filter(l=>new RegExp(`.*${o}.*`).test(l[0])),r.history.clear=()=>{cs&&(cs.length=0)},r.history.disable=()=>{cs!==null&&(cs.length=0,cs=null)},r.history.enable=()=>{cs===null&&(cs=[])},r.error=(...o)=>n("error",s,o),r.warn=(...o)=>n("warn",s,o),r.debug=(...o)=>n("debug",s,o),r}const ut=bg("VIDEOJS"),n1=ut.createLogger,pB=Object.prototype.toString,r1=function(t){return $n(t)?Object.keys(t):[]};function nl(t,e){r1(t).forEach(i=>e(t[i],i))}function o1(t,e,i=0){return r1(t).reduce((s,n)=>e(s,t[n],n),i)}function $n(t){return!!t&&typeof t=="object"}function Cl(t){return $n(t)&&pB.call(t)==="[object Object]"&&t.constructor===Object}function kt(...t){const e={};return t.forEach(i=>{i&&nl(i,(s,n)=>{if(!Cl(s)){e[n]=s;return}Cl(e[n])||(e[n]={}),e[n]=kt(e[n],s)})}),e}function a1(t={}){const e=[];for(const i in t)if(t.hasOwnProperty(i)){const s=t[i];e.push(s)}return e}function kf(t,e,i,s=!0){const n=o=>Object.defineProperty(t,e,{value:o,enumerable:!0,writable:!0}),r={configurable:!0,enumerable:!0,get(){const o=i();return n(o),o}};return s&&(r.set=n),Object.defineProperty(t,e,r)}var mB=Object.freeze({__proto__:null,each:nl,reduce:o1,isObject:$n,isPlain:Cl,merge:kt,values:a1,defineLazyProperty:kf});let V_=!1,l1=null,mn=!1,u1,c1=!1,rl=!1,ol=!1,Wn=!1,q_=null,If=null;const gB=!!($.cast&&$.cast.framework&&$.cast.framework.CastReceiverContext);let h1=null,Md=!1,Lf=!1,Rd=!1,Of=!1,Nd=!1,Bd=!1,Fd=!1;const xc=!!(Bl()&&("ontouchstart"in $||$.navigator.maxTouchPoints||$.DocumentTouch&&$.document instanceof $.DocumentTouch)),Vr=$.navigator&&$.navigator.userAgentData;Vr&&Vr.platform&&Vr.brands&&(mn=Vr.platform==="Android",rl=!!Vr.brands.find(t=>t.brand==="Microsoft Edge"),ol=!!Vr.brands.find(t=>t.brand==="Chromium"),Wn=!rl&&ol,q_=If=(Vr.brands.find(t=>t.brand==="Chromium")||{}).version||null,Lf=Vr.platform==="Windows");if(!ol){const t=$.navigator&&$.navigator.userAgent||"";V_=/iPod/i.test(t),l1=(function(){const e=t.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null})(),mn=/Android/i.test(t),u1=(function(){const e=t.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;const i=e[1]&&parseFloat(e[1]),s=e[2]&&parseFloat(e[2]);return i&&s?parseFloat(e[1]+"."+e[2]):i||null})(),c1=/Firefox/i.test(t),rl=/Edg/i.test(t),ol=/Chrome/i.test(t)||/CriOS/i.test(t),Wn=!rl&&ol,q_=If=(function(){const e=t.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null})(),h1=(function(){const e=/MSIE\s(\d+)\.\d/.exec(t);let i=e&&parseFloat(e[1]);return!i&&/Trident\/7.0/i.test(t)&&/rv:11.0/.test(t)&&(i=11),i})(),Nd=/Tizen/i.test(t),Bd=/Web0S/i.test(t),Fd=Nd||Bd,Md=/Safari/i.test(t)&&!Wn&&!mn&&!rl&&!Fd,Lf=/Windows/i.test(t),Rd=/iPad/i.test(t)||Md&&xc&&!/iPhone/i.test(t),Of=/iPhone/i.test(t)&&!Rd}const Mi=Of||Rd||V_,Mf=(Md||Mi)&&!Wn;var d1=Object.freeze({__proto__:null,get IS_IPOD(){return V_},get IOS_VERSION(){return l1},get IS_ANDROID(){return mn},get ANDROID_VERSION(){return u1},get IS_FIREFOX(){return c1},get IS_EDGE(){return rl},get IS_CHROMIUM(){return ol},get IS_CHROME(){return Wn},get CHROMIUM_VERSION(){return q_},get CHROME_VERSION(){return If},IS_CHROMECAST_RECEIVER:gB,get IE_VERSION(){return h1},get IS_SAFARI(){return Md},get IS_WINDOWS(){return Lf},get IS_IPAD(){return Rd},get IS_IPHONE(){return Of},get IS_TIZEN(){return Nd},get IS_WEBOS(){return Bd},get IS_SMART_TV(){return Fd},TOUCH_ENABLED:xc,IS_IOS:Mi,IS_ANY_SAFARI:Mf});function Kb(t){return typeof t=="string"&&!!t.trim()}function _B(t){if(t.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function Bl(){return ke===$.document}function Fl(t){return $n(t)&&t.nodeType===1}function f1(){try{return $.parent!==$.self}catch{return!0}}function p1(t){return function(e,i){if(!Kb(e))return ke[t](null);Kb(i)&&(i=ke.querySelector(i));const s=Fl(i)?i:ke;return s[t]&&s[t](e)}}function Ye(t="div",e={},i={},s){const n=ke.createElement(t);return Object.getOwnPropertyNames(e).forEach(function(r){const o=e[r];r==="textContent"?po(n,o):(n[r]!==o||r==="tabIndex")&&(n[r]=o)}),Object.getOwnPropertyNames(i).forEach(function(r){n.setAttribute(r,i[r])}),s&&$_(n,s),n}function po(t,e){return typeof t.textContent>"u"?t.innerText=e:t.textContent=e,t}function Tg(t,e){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}function nc(t,e){return _B(e),t.classList.contains(e)}function na(t,...e){return t.classList.add(...e.reduce((i,s)=>i.concat(s.split(/\s+/)),[])),t}function Rf(t,...e){return t?(t.classList.remove(...e.reduce((i,s)=>i.concat(s.split(/\s+/)),[])),t):(ut.warn("removeClass was called with an element that doesn't exist"),null)}function m1(t,e,i){return typeof i=="function"&&(i=i(t,e)),typeof i!="boolean"&&(i=void 0),e.split(/\s+/).forEach(s=>t.classList.toggle(s,i)),t}function g1(t,e){Object.getOwnPropertyNames(e).forEach(function(i){const s=e[i];s===null||typeof s>"u"||s===!1?t.removeAttribute(i):t.setAttribute(i,s===!0?"":s)})}function Yr(t){const e={},i=["autoplay","controls","playsinline","loop","muted","default","defaultMuted"];if(t&&t.attributes&&t.attributes.length>0){const s=t.attributes;for(let n=s.length-1;n>=0;n--){const r=s[n].name;let o=s[n].value;i.includes(r)&&(o=o!==null),e[r]=o}}return e}function _1(t,e){return t.getAttribute(e)}function wl(t,e,i){t.setAttribute(e,i)}function Nf(t,e){t.removeAttribute(e)}function y1(){ke.body.focus(),ke.onselectstart=function(){return!1}}function v1(){ke.onselectstart=function(){return!0}}function El(t){if(t&&t.getBoundingClientRect&&t.parentNode){const e=t.getBoundingClientRect(),i={};return["bottom","height","left","right","top","width"].forEach(s=>{e[s]!==void 0&&(i[s]=e[s])}),i.height||(i.height=parseFloat(Al(t,"height"))),i.width||(i.width=parseFloat(Al(t,"width"))),i}}function Sc(t){if(!t||t&&!t.offsetParent)return{left:0,top:0,width:0,height:0};const e=t.offsetWidth,i=t.offsetHeight;let s=0,n=0;for(;t.offsetParent&&t!==ke[Od.fullscreenElement];)s+=t.offsetLeft,n+=t.offsetTop,t=t.offsetParent;return{left:s,top:n,width:e,height:i}}function Bf(t,e){const i={x:0,y:0};if(Mi){let d=t;for(;d&&d.nodeName.toLowerCase()!=="html";){const m=Al(d,"transform");if(/^matrix/.test(m)){const _=m.slice(7,-1).split(/,\s/).map(Number);i.x+=_[4],i.y+=_[5]}else if(/^matrix3d/.test(m)){const _=m.slice(9,-1).split(/,\s/).map(Number);i.x+=_[12],i.y+=_[13]}if(d.assignedSlot&&d.assignedSlot.parentElement&&$.WebKitCSSMatrix){const _=$.getComputedStyle(d.assignedSlot.parentElement).transform,T=new $.WebKitCSSMatrix(_);i.x+=T.m41,i.y+=T.m42}d=d.parentNode||d.host}}const s={},n=Sc(e.target),r=Sc(t),o=r.width,l=r.height;let u=e.offsetY-(r.top-n.top),h=e.offsetX-(r.left-n.left);return e.changedTouches&&(h=e.changedTouches[0].pageX-r.left,u=e.changedTouches[0].pageY+r.top,Mi&&(h-=i.x,u-=i.y)),s.y=1-Math.max(0,Math.min(1,u/l)),s.x=Math.max(0,Math.min(1,h/o)),s}function b1(t){return $n(t)&&t.nodeType===3}function Ff(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}function T1(t){return typeof t=="function"&&(t=t()),(Array.isArray(t)?t:[t]).map(e=>{if(typeof e=="function"&&(e=e()),Fl(e)||b1(e))return e;if(typeof e=="string"&&/\S/.test(e))return ke.createTextNode(e)}).filter(e=>e)}function $_(t,e){return T1(e).forEach(i=>t.appendChild(i)),t}function x1(t,e){return $_(Ff(t),e)}function Cc(t){return t.button===void 0&&t.buttons===void 0||t.button===0&&t.buttons===void 0||t.type==="mouseup"&&t.button===0&&t.buttons===0||t.type==="mousedown"&&t.button===0&&t.buttons===0?!0:!(t.button!==0||t.buttons!==1)}const co=p1("querySelector"),S1=p1("querySelectorAll");function Al(t,e){if(!t||!e)return"";if(typeof $.getComputedStyle=="function"){let i;try{i=$.getComputedStyle(t)}catch{return""}return i?i.getPropertyValue(e)||i[e]:""}return""}function C1(t){[...ke.styleSheets].forEach(e=>{try{const i=[...e.cssRules].map(n=>n.cssText).join(""),s=ke.createElement("style");s.textContent=i,t.document.head.appendChild(s)}catch{const s=ke.createElement("link");s.rel="stylesheet",s.type=e.type,s.media=e.media.mediaText,s.href=e.href,t.document.head.appendChild(s)}})}var w1=Object.freeze({__proto__:null,isReal:Bl,isEl:Fl,isInFrame:f1,createEl:Ye,textContent:po,prependTo:Tg,hasClass:nc,addClass:na,removeClass:Rf,toggleClass:m1,setAttributes:g1,getAttributes:Yr,getAttribute:_1,setAttribute:wl,removeAttribute:Nf,blockTextSelection:y1,unblockTextSelection:v1,getBoundingClientRect:El,findPosition:Sc,getPointerPosition:Bf,isTextNode:b1,emptyEl:Ff,normalizeContent:T1,appendContent:$_,insertContent:x1,isSingleLeftClick:Cc,$:co,$$:S1,computedStyle:Al,copyStyleSheetsToWindow:C1});let E1=!1,xg;const yB=function(){if(xg.options.autoSetup===!1)return;const t=Array.prototype.slice.call(ke.getElementsByTagName("video")),e=Array.prototype.slice.call(ke.getElementsByTagName("audio")),i=Array.prototype.slice.call(ke.getElementsByTagName("video-js")),s=t.concat(e,i);if(s&&s.length>0)for(let n=0,r=s.length;n<r;n++){const o=s[n];if(o&&o.getAttribute)o.player===void 0&&o.getAttribute("data-setup")!==null&&xg(o);else{Sg(1);break}}else E1||Sg(1)};function Sg(t,e){Bl()&&(e&&(xg=e),$.setTimeout(yB,t))}function Cg(){E1=!0,$.removeEventListener("load",Cg)}Bl()&&(ke.readyState==="complete"?Cg():$.addEventListener("load",Cg));const A1=function(t){const e=ke.createElement("style");return e.className=t,e},D1=function(t,e){t.styleSheet?t.styleSheet.cssText=e:t.textContent=e};var Yi=new WeakMap;const vB=3;let bB=vB;function Zs(){return bB++}function Zb(t,e){if(!Yi.has(t))return;const i=Yi.get(t);i.handlers[e].length===0&&(delete i.handlers[e],t.removeEventListener?t.removeEventListener(e,i.dispatcher,!1):t.detachEvent&&t.detachEvent("on"+e,i.dispatcher)),Object.getOwnPropertyNames(i.handlers).length<=0&&(delete i.handlers,delete i.dispatcher,delete i.disabled),Object.getOwnPropertyNames(i).length===0&&Yi.delete(t)}function W_(t,e,i,s){i.forEach(function(n){t(e,n,s)})}function Uf(t){if(t.fixed_)return t;function e(){return!0}function i(){return!1}if(!t||!t.isPropagationStopped||!t.isImmediatePropagationStopped){const s=t||$.event;t={};const n=["layerX","layerY","keyLocation","path","webkitMovementX","webkitMovementY","mozPressure","mozInputSource"];for(const r in s)n.includes(r)||r==="returnValue"&&s.preventDefault||(t[r]=s[r]);if(t.target||(t.target=t.srcElement||ke),t.relatedTarget||(t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement),t.preventDefault=function(){s.preventDefault&&s.preventDefault(),t.returnValue=!1,s.returnValue=!1,t.defaultPrevented=!0},t.defaultPrevented=!1,t.stopPropagation=function(){s.stopPropagation&&s.stopPropagation(),t.cancelBubble=!0,s.cancelBubble=!0,t.isPropagationStopped=e},t.isPropagationStopped=i,t.stopImmediatePropagation=function(){s.stopImmediatePropagation&&s.stopImmediatePropagation(),t.isImmediatePropagationStopped=e,t.stopPropagation()},t.isImmediatePropagationStopped=i,t.clientX!==null&&t.clientX!==void 0){const r=ke.documentElement,o=ke.body;t.pageX=t.clientX+(r&&r.scrollLeft||o&&o.scrollLeft||0)-(r&&r.clientLeft||o&&o.clientLeft||0),t.pageY=t.clientY+(r&&r.scrollTop||o&&o.scrollTop||0)-(r&&r.clientTop||o&&o.clientTop||0)}t.which=t.charCode||t.keyCode,t.button!==null&&t.button!==void 0&&(t.button=t.button&1?0:t.button&4?1:t.button&2?2:0)}return t.fixed_=!0,t}let Gh;const TB=function(){if(typeof Gh!="boolean"){Gh=!1;try{const t=Object.defineProperty({},"passive",{get(){Gh=!0}});$.addEventListener("test",null,t),$.removeEventListener("test",null,t)}catch{}}return Gh},xB=["touchstart","touchmove"];function Ls(t,e,i){if(Array.isArray(e))return W_(Ls,t,e,i);Yi.has(t)||Yi.set(t,{});const s=Yi.get(t);if(s.handlers||(s.handlers={}),s.handlers[e]||(s.handlers[e]=[]),i.guid||(i.guid=Zs()),s.handlers[e].push(i),s.dispatcher||(s.disabled=!1,s.dispatcher=function(n,r){if(s.disabled)return;n=Uf(n);const o=s.handlers[n.type];if(o){const l=o.slice(0);for(let u=0,h=l.length;u<h&&!n.isImmediatePropagationStopped();u++)try{l[u].call(t,n,r)}catch(d){ut.error(d)}}}),s.handlers[e].length===1)if(t.addEventListener){let n=!1;TB()&&xB.indexOf(e)>-1&&(n={passive:!0}),t.addEventListener(e,s.dispatcher,n)}else t.attachEvent&&t.attachEvent("on"+e,s.dispatcher)}function Ri(t,e,i){if(!Yi.has(t))return;const s=Yi.get(t);if(!s.handlers)return;if(Array.isArray(e))return W_(Ri,t,e,i);const n=function(o,l){s.handlers[l]=[],Zb(o,l)};if(e===void 0){for(const o in s.handlers)Object.prototype.hasOwnProperty.call(s.handlers||{},o)&&n(t,o);return}const r=s.handlers[e];if(r){if(!i){n(t,e);return}if(i.guid)for(let o=0;o<r.length;o++)r[o].guid===i.guid&&r.splice(o--,1);Zb(t,e)}}function Ul(t,e,i){const s=Yi.has(t)?Yi.get(t):{},n=t.parentNode||t.ownerDocument;if(typeof e=="string"?e={type:e,target:t}:e.target||(e.target=t),e=Uf(e),s.dispatcher&&s.dispatcher.call(t,e,i),n&&!e.isPropagationStopped()&&e.bubbles===!0)Ul.call(null,n,e,i);else if(!n&&!e.defaultPrevented&&e.target&&e.target[e.type]){Yi.has(e.target)||Yi.set(e.target,{});const r=Yi.get(e.target);e.target[e.type]&&(r.disabled=!0,typeof e.target[e.type]=="function"&&e.target[e.type](),r.disabled=!1)}return!e.defaultPrevented}function jf(t,e,i){if(Array.isArray(e))return W_(jf,t,e,i);const s=function(){Ri(t,e,s),i.apply(this,arguments)};s.guid=i.guid=i.guid||Zs(),Ls(t,e,s)}function G_(t,e,i){const s=function(){Ri(t,e,s),i.apply(this,arguments)};s.guid=i.guid=i.guid||Zs(),Ls(t,e,s)}var SB=Object.freeze({__proto__:null,fixEvent:Uf,on:Ls,off:Ri,trigger:Ul,one:jf,any:G_});const Ys=30,Ut=function(t,e,i){e.guid||(e.guid=Zs());const s=e.bind(t);return s.guid=i?i+"_"+e.guid:e.guid,s},Gn=function(t,e){let i=$.performance.now();return function(...n){const r=$.performance.now();r-i>=e&&(t(...n),i=r)}},P1=function(t,e,i,s=$){let n;const r=()=>{s.clearTimeout(n),n=null},o=function(){const l=this,u=arguments;let h=function(){n=null,h=null,i||t.apply(l,u)};!n&&i&&t.apply(l,u),s.clearTimeout(n),n=s.setTimeout(h,e)};return o.cancel=r,o};var CB=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:Ys,bind_:Ut,throttle:Gn,debounce:P1});let Ou;class Os{on(e,i){const s=this.addEventListener;this.addEventListener=()=>{},Ls(this,e,i),this.addEventListener=s}off(e,i){Ri(this,e,i)}one(e,i){const s=this.addEventListener;this.addEventListener=()=>{},jf(this,e,i),this.addEventListener=s}any(e,i){const s=this.addEventListener;this.addEventListener=()=>{},G_(this,e,i),this.addEventListener=s}trigger(e){const i=e.type||e;typeof e=="string"&&(e={type:i}),e=Uf(e),this.allowedEvents_[i]&&this["on"+i]&&this["on"+i](e),Ul(this,e)}queueTrigger(e){Ou||(Ou=new Map);const i=e.type||e;let s=Ou.get(this);s||(s=new Map,Ou.set(this,s));const n=s.get(i);s.delete(i),$.clearTimeout(n);const r=$.setTimeout(()=>{s.delete(i),s.size===0&&(s=null,Ou.delete(this)),this.trigger(e)},0);s.set(i,r)}}Os.prototype.allowedEvents_={};Os.prototype.addEventListener=Os.prototype.on;Os.prototype.removeEventListener=Os.prototype.off;Os.prototype.dispatchEvent=Os.prototype.trigger;const zf=t=>typeof t.name=="function"?t.name():typeof t.name=="string"?t.name:t.name_?t.name_:t.constructor&&t.constructor.name?t.constructor.name:typeof t,Tr=t=>t instanceof Os||!!t.eventBusEl_&&["on","one","off","trigger"].every(e=>typeof t[e]=="function"),wB=(t,e)=>{Tr(t)?e():(t.eventedCallbacks||(t.eventedCallbacks=[]),t.eventedCallbacks.push(e))},wg=t=>typeof t=="string"&&/\S/.test(t)||Array.isArray(t)&&!!t.length,Ud=(t,e,i)=>{if(!t||!t.nodeName&&!Tr(t))throw new Error(`Invalid target for ${zf(e)}#${i}; must be a DOM node or evented object.`)},k1=(t,e,i)=>{if(!wg(t))throw new Error(`Invalid event type for ${zf(e)}#${i}; must be a non-empty string or array.`)},I1=(t,e,i)=>{if(typeof t!="function")throw new Error(`Invalid listener for ${zf(e)}#${i}; must be a function.`)},km=(t,e,i)=>{const s=e.length<3||e[0]===t||e[0]===t.eventBusEl_;let n,r,o;return s?(n=t.eventBusEl_,e.length>=3&&e.shift(),[r,o]=e):(n=e[0],r=e[1],o=e[2]),Ud(n,t,i),k1(r,t,i),I1(o,t,i),o=Ut(t,o),{isTargetingSelf:s,target:n,type:r,listener:o}},zo=(t,e,i,s)=>{Ud(t,t,e),t.nodeName?SB[e](t,i,s):t[e](i,s)},EB={on(...t){const{isTargetingSelf:e,target:i,type:s,listener:n}=km(this,t,"on");if(zo(i,"on",s,n),!e){const r=()=>this.off(i,s,n);r.guid=n.guid;const o=()=>this.off("dispose",r);o.guid=n.guid,zo(this,"on","dispose",r),zo(i,"on","dispose",o)}},one(...t){const{isTargetingSelf:e,target:i,type:s,listener:n}=km(this,t,"one");if(e)zo(i,"one",s,n);else{const r=(...o)=>{this.off(i,s,r),n.apply(null,o)};r.guid=n.guid,zo(i,"one",s,r)}},any(...t){const{isTargetingSelf:e,target:i,type:s,listener:n}=km(this,t,"any");if(e)zo(i,"any",s,n);else{const r=(...o)=>{this.off(i,s,r),n.apply(null,o)};r.guid=n.guid,zo(i,"any",s,r)}},off(t,e,i){if(!t||wg(t))Ri(this.eventBusEl_,t,e);else{const s=t,n=e;Ud(s,this,"off"),k1(n,this,"off"),I1(i,this,"off"),i=Ut(this,i),this.off("dispose",i),s.nodeName?(Ri(s,n,i),Ri(s,"dispose",i)):Tr(s)&&(s.off(n,i),s.off("dispose",i))}},trigger(t,e){Ud(this.eventBusEl_,this,"trigger");const i=t&&typeof t!="string"?t.type:t;if(!wg(i))throw new Error(`Invalid event type for ${zf(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return Ul(this.eventBusEl_,t,e)}};function X_(t,e={}){const{eventBusKey:i}=e;if(i){if(!t[i].nodeName)throw new Error(`The eventBusKey "${i}" does not refer to an element.`);t.eventBusEl_=t[i]}else t.eventBusEl_=Ye("span",{className:"vjs-event-bus"});return Object.assign(t,EB),t.eventedCallbacks&&t.eventedCallbacks.forEach(s=>{s()}),t.on("dispose",()=>{t.off(),[t,t.el_,t.eventBusEl_].forEach(function(s){s&&Yi.has(s)&&Yi.delete(s)}),$.setTimeout(()=>{t.eventBusEl_=null},0)}),t}const AB={state:{},setState(t){typeof t=="function"&&(t=t());let e;return nl(t,(i,s)=>{this.state[s]!==i&&(e=e||{},e[s]={from:this.state[s],to:i}),this.state[s]=i}),e&&Tr(this)&&this.trigger({changes:e,type:"statechanged"}),e}};function L1(t,e){return Object.assign(t,AB),t.state=Object.assign({},t.state,e),typeof t.handleStateChanged=="function"&&Tr(t)&&t.on("statechanged",t.handleStateChanged),t}const rc=function(t){return typeof t!="string"?t:t.replace(/./,e=>e.toLowerCase())},ti=function(t){return typeof t!="string"?t:t.replace(/./,e=>e.toUpperCase())},O1=function(t,e){return ti(t)===ti(e)};var DB=Object.freeze({__proto__:null,toLowerCase:rc,toTitleCase:ti,titleCaseEquals:O1});class _e{constructor(e,i,s){if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=kt({},this.options_),i=this.options_=kt(this.options_,i),this.id_=i.id||i.el&&i.el.id,!this.id_){const n=e&&e.id&&e.id()||"no_player";this.id_=`${n}_component_${Zs()}`}this.name_=i.name||null,i.el?this.el_=i.el:i.createEl!==!1&&(this.el_=this.createEl()),i.className&&this.el_&&i.className.split(" ").forEach(n=>this.addClass(n)),["on","off","one","any","trigger"].forEach(n=>{this[n]=void 0}),i.evented!==!1&&(X_(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),L1(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,i.initChildren!==!1&&this.initChildren(),this.ready(s),i.reportTouchActivity!==!1&&this.enableTouchActivity()}dispose(e={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let i=this.children_.length-1;i>=0;i--)this.children_[i].dispose&&this.children_[i].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return!!this.isDisposed_}player(){return this.player_}options(e){return e?(this.options_=kt(this.options_,e),this.options_):this.options_}el(){return this.el_}createEl(e,i,s){return Ye(e,i,s)}localize(e,i,s=e){const n=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages(),o=r&&r[n],l=n&&n.split("-")[0],u=r&&r[l];let h=s;return o&&o[e]?h=o[e]:u&&u[e]&&(h=u[e]),i&&(h=h.replace(/\{(\d+)\}/g,function(d,m){const _=i[m-1];let T=_;return typeof _>"u"&&(T=d),T})),h}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(e){return this.childIndex_[e]}getChild(e){if(e)return this.childNameIndex_[e]}getDescendant(...e){e=e.reduce((s,n)=>s.concat(n),[]);let i=this;for(let s=0;s<e.length;s++)if(i=i.getChild(e[s]),!i||!i.getChild)return;return i}setIcon(e,i=this.el()){if(!this.player_.options_.experimentalSvgIcons)return;const s="http://www.w3.org/2000/svg",n=Ye("span",{className:"vjs-icon-placeholder vjs-svg-icon"},{"aria-hidden":"true"}),r=ke.createElementNS(s,"svg");r.setAttributeNS(null,"viewBox","0 0 512 512");const o=ke.createElementNS(s,"use");return r.appendChild(o),o.setAttributeNS(null,"href",`#vjs-icon-${e}`),n.appendChild(r),this.iconIsSet_?i.replaceChild(n,i.querySelector(".vjs-icon-placeholder")):i.appendChild(n),this.iconIsSet_=!0,n}addChild(e,i={},s=this.children_.length){let n,r;if(typeof e=="string"){r=ti(e);const o=i.componentClass||r;i.name=r;const l=_e.getComponent(o);if(!l)throw new Error(`Component ${o} does not exist`);if(typeof l!="function")return null;n=new l(this.player_||this,i)}else n=e;if(n.parentComponent_&&n.parentComponent_.removeChild(n),this.children_.splice(s,0,n),n.parentComponent_=this,typeof n.id=="function"&&(this.childIndex_[n.id()]=n),r=r||n.name&&ti(n.name()),r&&(this.childNameIndex_[r]=n,this.childNameIndex_[rc(r)]=n),typeof n.el=="function"&&n.el()){let o=null;this.children_[s+1]&&(this.children_[s+1].el_?o=this.children_[s+1].el_:Fl(this.children_[s+1])&&(o=this.children_[s+1])),this.contentEl().insertBefore(n.el(),o)}return n}removeChild(e){if(typeof e=="string"&&(e=this.getChild(e)),!e||!this.children_)return;let i=!1;for(let n=this.children_.length-1;n>=0;n--)if(this.children_[n]===e){i=!0,this.children_.splice(n,1);break}if(!i)return;e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[ti(e.name())]=null,this.childNameIndex_[rc(e.name())]=null;const s=e.el();s&&s.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}initChildren(){const e=this.options_.children;if(e){const i=this.options_,s=o=>{const l=o.name;let u=o.opts;if(i[l]!==void 0&&(u=i[l]),u===!1)return;u===!0&&(u={}),u.playerOptions=this.options_.playerOptions;const h=this.addChild(l,u);h&&(this[l]=h)};let n;const r=_e.getComponent("Tech");Array.isArray(e)?n=e:n=Object.keys(e),n.concat(Object.keys(this.options_).filter(function(o){return!n.some(function(l){return typeof l=="string"?o===l:o===l.name})})).map(o=>{let l,u;return typeof o=="string"?(l=o,u=e[l]||this.options_[l]||{}):(l=o.name,u=o),{name:l,opts:u}}).filter(o=>{const l=_e.getComponent(o.opts.componentClass||ti(o.name));return l&&!r.isTech(l)}).forEach(s)}}buildCSSClass(){return""}ready(e,i=!1){if(e){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(e);return}i?e.call(this):this.setTimeout(e,1)}}triggerReady(){this.isReady_=!0,this.setTimeout(function(){const e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(i){i.call(this)},this),this.trigger("ready")},1)}$(e,i){return co(e,i||this.contentEl())}$$(e,i){return S1(e,i||this.contentEl())}hasClass(e){return nc(this.el_,e)}addClass(...e){na(this.el_,...e)}removeClass(...e){Rf(this.el_,...e)}toggleClass(e,i){m1(this.el_,e,i)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(e){return _1(this.el_,e)}setAttribute(e,i){wl(this.el_,e,i)}removeAttribute(e){Nf(this.el_,e)}width(e,i){return this.dimension("width",e,i)}height(e,i){return this.dimension("height",e,i)}dimensions(e,i){this.width(e,!0),this.height(i)}dimension(e,i,s){if(i!==void 0){(i===null||i!==i)&&(i=0),(""+i).indexOf("%")!==-1||(""+i).indexOf("px")!==-1?this.el_.style[e]=i:i==="auto"?this.el_.style[e]="":this.el_.style[e]=i+"px",s||this.trigger("componentresize");return}if(!this.el_)return 0;const n=this.el_.style[e],r=n.indexOf("px");return parseInt(r!==-1?n.slice(0,r):this.el_["offset"+ti(e)],10)}currentDimension(e){let i=0;if(e!=="width"&&e!=="height")throw new Error("currentDimension only accepts width or height value");if(i=Al(this.el_,e),i=parseFloat(i),i===0||isNaN(i)){const s=`offset${ti(e)}`;i=this.el_[s]}return i}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}getPositions(){const e=this.el_.getBoundingClientRect(),i={x:e.x,y:e.y,width:e.width,height:e.height,top:e.top,right:e.right,bottom:e.bottom,left:e.left},s={x:e.left+e.width/2,y:e.top+e.height/2,width:0,height:0,top:e.top+e.height/2,right:e.left+e.width/2,bottom:e.top+e.height/2,left:e.left+e.width/2};return{boundingClientRect:i,center:s}}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(e){this.player_&&(e.key!=="Tab"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled)&&e.stopPropagation(),this.player_.handleKeyDown(e))}handleKeyPress(e){this.handleKeyDown(e)}emitTapEvents(){let e=0,i=null;const s=10,n=200;let r;this.on("touchstart",function(l){l.touches.length===1&&(i={pageX:l.touches[0].pageX,pageY:l.touches[0].pageY},e=$.performance.now(),r=!0)}),this.on("touchmove",function(l){if(l.touches.length>1)r=!1;else if(i){const u=l.touches[0].pageX-i.pageX,h=l.touches[0].pageY-i.pageY;Math.sqrt(u*u+h*h)>s&&(r=!1)}});const o=function(){r=!1};this.on("touchleave",o),this.on("touchcancel",o),this.on("touchend",function(l){i=null,r===!0&&$.performance.now()-e<n&&(l.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;const e=Ut(this.player(),this.player().reportUserActivity);let i;this.on("touchstart",function(){e(),this.clearInterval(i),i=this.setInterval(e,250)});const s=function(n){e(),this.clearInterval(i)};this.on("touchmove",e),this.on("touchend",s),this.on("touchcancel",s)}setTimeout(e,i){var s;return e=Ut(this,e),this.clearTimersOnDispose_(),s=$.setTimeout(()=>{this.setTimeoutIds_.has(s)&&this.setTimeoutIds_.delete(s),e()},i),this.setTimeoutIds_.add(s),s}clearTimeout(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),$.clearTimeout(e)),e}setInterval(e,i){e=Ut(this,e),this.clearTimersOnDispose_();const s=$.setInterval(e,i);return this.setIntervalIds_.add(s),s}clearInterval(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),$.clearInterval(e)),e}requestAnimationFrame(e){this.clearTimersOnDispose_();var i;return e=Ut(this,e),i=$.requestAnimationFrame(()=>{this.rafIds_.has(i)&&this.rafIds_.delete(i),e()}),this.rafIds_.add(i),i}requestNamedAnimationFrame(e,i){this.namedRafs_.has(e)&&this.cancelNamedAnimationFrame(e),this.clearTimersOnDispose_(),i=Ut(this,i);const s=this.requestAnimationFrame(()=>{i(),this.namedRafs_.has(e)&&this.namedRafs_.delete(e)});return this.namedRafs_.set(e,s),e}cancelNamedAnimationFrame(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))}cancelAnimationFrame(e){return this.rafIds_.has(e)&&(this.rafIds_.delete(e),$.cancelAnimationFrame(e)),e}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([e,i])=>{this[e].forEach((s,n)=>this[i](n))}),this.clearingTimersOnDispose_=!1}))}getIsDisabled(){return!!this.el_.disabled}getIsExpresslyInert(){return this.el_.inert&&!this.el_.ownerDocument.documentElement.inert}getIsFocusable(e){return(e||this.el_).tabIndex>=0&&!(this.getIsDisabled()||this.getIsExpresslyInert())}getIsAvailableToBeFocused(e){function i(r){const o=$.getComputedStyle(r,null),l=o.getPropertyValue("visibility");return o.getPropertyValue("display")!=="none"&&!["hidden","collapse"].includes(l)}function s(r){return!(!i(r.parentElement)||!i(r)||r.style.opacity==="0"||$.getComputedStyle(r).height==="0px"||$.getComputedStyle(r).width==="0px")}function n(r){if(r.offsetWidth+r.offsetHeight+r.getBoundingClientRect().height+r.getBoundingClientRect().width===0)return!1;const o={x:r.getBoundingClientRect().left+r.offsetWidth/2,y:r.getBoundingClientRect().top+r.offsetHeight/2};if(o.x<0||o.x>(ke.documentElement.clientWidth||$.innerWidth)||o.y<0||o.y>(ke.documentElement.clientHeight||$.innerHeight))return!1;let l=ke.elementFromPoint(o.x,o.y);for(;l;){if(l===r)return!0;if(l.parentNode)l=l.parentNode;else return!1}}return e||(e=this.el()),!!(n(e)&&s(e)&&(!e.parentElement||e.tabIndex>=0))}static registerComponent(e,i){if(typeof e!="string"||!e)throw new Error(`Illegal component name, "${e}"; must be a non-empty string.`);const s=_e.getComponent("Tech"),n=s&&s.isTech(i),r=_e===i||_e.prototype.isPrototypeOf(i.prototype);if(n||!r){let l;throw n?l="techs must be registered using Tech.registerTech()":l="must be a Component subclass",new Error(`Illegal component, "${e}"; ${l}.`)}e=ti(e),_e.components_||(_e.components_={});const o=_e.getComponent("Player");if(e==="Player"&&o&&o.players){const l=o.players,u=Object.keys(l);if(l&&u.length>0){for(let h=0;h<u.length;h++)if(l[u[h]]!==null)throw new Error("Can not register Player component after player has been created.")}}return _e.components_[e]=i,_e.components_[rc(e)]=i,i}static getComponent(e){if(!(!e||!_e.components_))return _e.components_[e]}}_e.registerComponent("Component",_e);function PB(t,e,i){if(typeof e!="number"||e<0||e>i)throw new Error(`Failed to execute '${t}' on 'TimeRanges': The index provided (${e}) is non-numeric or out of bounds (0-${i}).`)}function Yb(t,e,i,s){return PB(t,s,i.length-1),i[s][e]}function Im(t){let e;return t===void 0||t.length===0?e={length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:e={length:t.length,start:Yb.bind(null,"start",0,t),end:Yb.bind(null,"end",1,t)},$.Symbol&&$.Symbol.iterator&&(e[$.Symbol.iterator]=()=>(t||[]).values()),e}function hn(t,e){return Array.isArray(t)?Im(t):t===void 0||e===void 0?Im():Im([[t,e]])}const M1=function(t,e){t=t<0?0:t;let i=Math.floor(t%60),s=Math.floor(t/60%60),n=Math.floor(t/3600);const r=Math.floor(e/60%60),o=Math.floor(e/3600);return(isNaN(t)||t===1/0)&&(n=s=i="-"),n=n>0||o>0?n+":":"",s=((n||r>=10)&&s<10?"0"+s:s)+":",i=i<10?"0"+i:i,n+s+i};let K_=M1;function R1(t){K_=t}function N1(){K_=M1}function ha(t,e=t){return K_(t,e)}var kB=Object.freeze({__proto__:null,createTimeRanges:hn,createTimeRange:hn,setFormatTime:R1,resetFormatTime:N1,formatTime:ha});function B1(t,e){let i=0,s,n;if(!e)return 0;(!t||!t.length)&&(t=hn(0,0));for(let r=0;r<t.length;r++)s=t.start(r),n=t.end(r),n>e&&(n=e),i+=n-s;return i/e}function Yt(t){if(t instanceof Yt)return t;typeof t=="number"?this.code=t:typeof t=="string"?this.message=t:$n(t)&&(typeof t.code=="number"&&(this.code=t.code),Object.assign(this,t)),this.message||(this.message=Yt.defaultMessages[this.code]||"")}Yt.prototype.code=0;Yt.prototype.message="";Yt.prototype.status=null;Yt.prototype.metadata=null;Yt.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];Yt.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};Yt.MEDIA_ERR_CUSTOM=0;Yt.prototype.MEDIA_ERR_CUSTOM=0;Yt.MEDIA_ERR_ABORTED=1;Yt.prototype.MEDIA_ERR_ABORTED=1;Yt.MEDIA_ERR_NETWORK=2;Yt.prototype.MEDIA_ERR_NETWORK=2;Yt.MEDIA_ERR_DECODE=3;Yt.prototype.MEDIA_ERR_DECODE=3;Yt.MEDIA_ERR_SRC_NOT_SUPPORTED=4;Yt.prototype.MEDIA_ERR_SRC_NOT_SUPPORTED=4;Yt.MEDIA_ERR_ENCRYPTED=5;Yt.prototype.MEDIA_ERR_ENCRYPTED=5;function oc(t){return t!=null&&typeof t.then=="function"}function Fn(t){oc(t)&&t.then(null,e=>{})}const Eg=function(t){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((i,s,n)=>(t[s]&&(i[s]=t[s]),i),{cues:t.cues&&Array.prototype.map.call(t.cues,function(i){return{startTime:i.startTime,endTime:i.endTime,text:i.text,id:i.id}})})},IB=function(t){const e=t.$$("track"),i=Array.prototype.map.call(e,n=>n.track);return Array.prototype.map.call(e,function(n){const r=Eg(n.track);return n.src&&(r.src=n.src),r}).concat(Array.prototype.filter.call(t.textTracks(),function(n){return i.indexOf(n)===-1}).map(Eg))},LB=function(t,e){return t.forEach(function(i){const s=e.addRemoteTextTrack(i).track;!i.src&&i.cues&&i.cues.forEach(n=>s.addCue(n))}),e.textTracks()};var Ag={textTracksToJson:IB,jsonToTextTracks:LB,trackToJson:Eg};const Lm="vjs-modal-dialog";class jl extends _e{constructor(e,i){super(e,i),this.handleKeyDown_=s=>this.handleKeyDown(s),this.close_=s=>this.close(s),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=Ye("div",{className:`${Lm}-content`},{role:"document"}),this.descEl_=Ye("p",{className:`${Lm}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),po(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog","aria-live":"polite"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${Lm} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e}open(){if(this.opened_){this.options_.fillAlways&&this.fill();return}const e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}opened(e){return typeof e=="boolean"&&this[e?"open":"close"](),this.opened_}close(){if(!this.opened_)return;const e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger({type:"modalclose",bubbles:!0}),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(e){if(typeof e=="boolean"){const i=this.closeable_=!!e;let s=this.getChild("closeButton");if(i&&!s){const n=this.contentEl_;this.contentEl_=this.el_,s=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=n,this.on(s,"close",this.close_)}!i&&s&&(this.off(s,"close",this.close_),this.removeChild(s),s.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(e){const i=this.contentEl(),s=i.parentNode,n=i.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,s.removeChild(i),this.empty(),x1(i,e),this.trigger("modalfill"),n?s.insertBefore(i,n):s.appendChild(i);const r=this.getChild("closeButton");r&&s.appendChild(r.el_),this.trigger("aftermodalfill")}empty(){this.trigger("beforemodalempty"),Ff(this.contentEl()),this.trigger("modalempty")}content(e){return typeof e<"u"&&(this.content_=e),this.content_}conditionalFocus_(){const e=ke.activeElement,i=this.player_.el_;this.previouslyActiveEl_=null,(i.contains(e)||i===e)&&(this.previouslyActiveEl_=e,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(e){if(this.trigger({type:"modalKeydown",originalEvent:e,target:this,bubbles:!0}),e.stopPropagation(),e.key==="Escape"&&this.closeable()){e.preventDefault(),this.close();return}if(e.key!=="Tab")return;const i=this.focusableEls_(),s=this.el_.querySelector(":focus");let n;for(let r=0;r<i.length;r++)if(s===i[r]){n=r;break}ke.activeElement===this.el_&&(n=0),e.shiftKey&&n===0?(i[i.length-1].focus(),e.preventDefault()):!e.shiftKey&&n===i.length-1&&(i[0].focus(),e.preventDefault())}focusableEls_(){const e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,i=>(i instanceof $.HTMLAnchorElement||i instanceof $.HTMLAreaElement)&&i.hasAttribute("href")||(i instanceof $.HTMLInputElement||i instanceof $.HTMLSelectElement||i instanceof $.HTMLTextAreaElement||i instanceof $.HTMLButtonElement)&&!i.hasAttribute("disabled")||i instanceof $.HTMLIFrameElement||i instanceof $.HTMLObjectElement||i instanceof $.HTMLEmbedElement||i.hasAttribute("tabindex")&&i.getAttribute("tabindex")!==-1||i.hasAttribute("contenteditable"))}}jl.prototype.options_={pauseOnOpen:!0,temporary:!0};_e.registerComponent("ModalDialog",jl);class da extends Os{constructor(e=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let i=0;i<e.length;i++)this.addTrack(e[i])}addTrack(e){const i=this.tracks_.length;""+i in this||Object.defineProperty(this,i,{get(){return this.tracks_[i]}}),this.tracks_.indexOf(e)===-1&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=()=>{this.trigger({track:e,type:"labelchange",target:this})},Tr(e)&&e.addEventListener("labelchange",e.labelchange_)}removeTrack(e){let i;for(let s=0,n=this.length;s<n;s++)if(this[s]===e){i=this[s],i.off&&i.off(),this.tracks_.splice(s,1);break}i&&this.trigger({track:i,type:"removetrack",target:this})}getTrackById(e){let i=null;for(let s=0,n=this.length;s<n;s++){const r=this[s];if(r.id===e){i=r;break}}return i}}da.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const t in da.prototype.allowedEvents_)da.prototype["on"+t]=null;const Om=function(t,e){for(let i=0;i<t.length;i++)!Object.keys(t[i]).length||e.id===t[i].id||(t[i].enabled=!1)};class F1 extends da{constructor(e=[]){for(let i=e.length-1;i>=0;i--)if(e[i].enabled){Om(e,e[i]);break}super(e),this.changing_=!1}addTrack(e){e.enabled&&Om(this,e),super.addTrack(e),e.addEventListener&&(e.enabledChange_=()=>{this.changing_||(this.changing_=!0,Om(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)}}const Mm=function(t,e){for(let i=0;i<t.length;i++)!Object.keys(t[i]).length||e.id===t[i].id||(t[i].selected=!1)};class U1 extends da{constructor(e=[]){for(let i=e.length-1;i>=0;i--)if(e[i].selected){Mm(e,e[i]);break}super(e),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let i=0;i<this.length;i++)if(this[i].selected)return i;return-1},set(){}})}addTrack(e){e.selected&&Mm(this,e),super.addTrack(e),e.addEventListener&&(e.selectedChange_=()=>{this.changing_||(this.changing_=!0,Mm(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)}}class Z_ extends da{addTrack(e){super.addTrack(e),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),e.addEventListener("modechange",this.queueChange_),["metadata","chapters"].indexOf(e.kind)===-1&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(e){super.removeTrack(e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}toJSON(){return this.tracks_.map(e=>e.toJSON())}}class OB{constructor(e=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let i=0,s=e.length;i<s;i++)this.addTrackElement_(e[i])}addTrackElement_(e){const i=this.trackElements_.length;""+i in this||Object.defineProperty(this,i,{get(){return this.trackElements_[i]}}),this.trackElements_.indexOf(e)===-1&&this.trackElements_.push(e)}getTrackElementByTrack_(e){let i;for(let s=0,n=this.trackElements_.length;s<n;s++)if(e===this.trackElements_[s].track){i=this.trackElements_[s];break}return i}removeTrackElement_(e){for(let i=0,s=this.trackElements_.length;i<s;i++)if(e===this.trackElements_[i]){this.trackElements_[i].track&&typeof this.trackElements_[i].track.off=="function"&&this.trackElements_[i].track.off(),typeof this.trackElements_[i].off=="function"&&this.trackElements_[i].off(),this.trackElements_.splice(i,1);break}}}class jd{constructor(e){jd.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(e){const i=this.length||0;let s=0;const n=e.length;this.cues_=e,this.length_=e.length;const r=function(o){""+o in this||Object.defineProperty(this,""+o,{get(){return this.cues_[o]}})};if(i<n)for(s=i;s<n;s++)r.call(this,s)}getCueById(e){let i=null;for(let s=0,n=this.length;s<n;s++){const r=this[s];if(r.id===e){i=r;break}}return i}}const MB={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},RB={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},NB={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Qb={disabled:"disabled",hidden:"hidden",showing:"showing"};class Y_ extends Os{constructor(e={}){super();const i={id:e.id||"vjs_track_"+Zs(),kind:e.kind||"",language:e.language||""};let s=e.label||"";for(const n in i)Object.defineProperty(this,n,{get(){return i[n]},set(){}});Object.defineProperty(this,"label",{get(){return s},set(n){n!==s&&(s=n,this.trigger("labelchange"))}})}}const Q_=function(t){return new URL(t,ke.baseURI)},j1=function(t){return new URL(t,ke.baseURI).href},J_=function(t){if(typeof t=="string"){const i=t.split("?")[0].replace(/\/+$/,"").match(/\.([^.\/]+)$/);return i?i[1].toLowerCase():""}return""},Hf=function(t,e=$.location){return Q_(t).origin!==e.origin};var BB=Object.freeze({__proto__:null,parseUrl:Q_,getAbsoluteURL:j1,getFileExtension:J_,isCrossOrigin:Hf});const Jb=function(t,e){const i=new $.WebVTT.Parser($,$.vttjs,$.WebVTT.StringDecoder()),s=[];i.oncue=function(n){e.addCue(n)},i.onparsingerror=function(n){s.push(n)},i.onflush=function(){e.trigger({type:"loadeddata",target:e})},i.parse(t),s.length>0&&($.console&&$.console.groupCollapsed&&$.console.groupCollapsed(`Text Track parsing errors for ${e.src}`),s.forEach(n=>ut.error(n)),$.console&&$.console.groupEnd&&$.console.groupEnd()),i.flush()},eT=function(t,e){const i={uri:t},s=Hf(t);s&&(i.cors=s);const n=e.tech_.crossOrigin()==="use-credentials";n&&(i.withCredentials=n),H2(i,Ut(this,function(r,o,l){if(r)return ut.error(r,o);e.loaded_=!0,typeof $.WebVTT!="function"?e.tech_&&e.tech_.any(["vttjsloaded","vttjserror"],u=>{if(u.type==="vttjserror"){ut.error(`vttjs failed to load, stopping trying to process ${e.src}`);return}return Jb(l,e)}):Jb(l,e)}))};class Uc extends Y_{constructor(e={}){if(!e.tech)throw new Error("A tech was not provided.");const i=kt(e,{kind:NB[e.kind]||"subtitles",language:e.language||e.srclang||""});let s=Qb[i.mode]||"disabled";const n=i.default;(i.kind==="metadata"||i.kind==="chapters")&&(s="hidden"),super(i),this.tech_=i.tech,this.cues_=[],this.activeCues_=[],this.preload_=this.tech_.preloadTextTracks!==!1;const r=new jd(this.cues_),o=new jd(this.activeCues_);let l=!1;this.timeupdateHandler=Ut(this,function(h={}){if(!this.tech_.isDisposed()){if(!this.tech_.isReady_){h.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,l&&(this.trigger("cuechange"),l=!1),h.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});const u=()=>{this.stopTracking()};this.tech_.one("dispose",u),s!=="disabled"&&this.startTracking(),Object.defineProperties(this,{default:{get(){return n},set(){}},mode:{get(){return s},set(h){Qb[h]&&s!==h&&(s=h,!this.preload_&&s!=="disabled"&&this.cues.length===0&&eT(this.src,this),this.stopTracking(),s!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?r:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(this.cues.length===0)return o;const h=this.tech_.currentTime(),d=[];for(let m=0,_=this.cues.length;m<_;m++){const T=this.cues[m];T.startTime<=h&&T.endTime>=h&&d.push(T)}if(l=!1,d.length!==this.activeCues_.length)l=!0;else for(let m=0;m<d.length;m++)this.activeCues_.indexOf(d[m])===-1&&(l=!0);return this.activeCues_=d,o.setCues_(this.activeCues_),o},set(){}}}),i.src?(this.src=i.src,this.preload_||(this.loaded_=!0),(this.preload_||i.kind!=="subtitles"&&i.kind!=="captions")&&eT(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(e){let i=e;if(!("getCueAsHTML"in i)){i=new $.vttjs.VTTCue(e.startTime,e.endTime,e.text);for(const n in e)n in i||(i[n]=e[n]);i.id=e.id,i.originalCue_=e}const s=this.tech_.textTracks();for(let n=0;n<s.length;n++)s[n]!==this&&s[n].removeCue(i);this.cues_.push(i),this.cues.setCues_(this.cues_)}toJSON(){return Ag.trackToJson(this)}removeCue(e){let i=this.cues_.length;for(;i--;){const s=this.cues_[i];if(s===e||s.originalCue_&&s.originalCue_===e){this.cues_.splice(i,1),this.cues.setCues_(this.cues_);break}}}}Uc.prototype.allowedEvents_={cuechange:"cuechange"};class z1 extends Y_{constructor(e={}){const i=kt(e,{kind:RB[e.kind]||""});super(i);let s=!1;Object.defineProperty(this,"enabled",{get(){return s},set(n){typeof n!="boolean"||n===s||(s=n,this.trigger("enabledchange"))}}),i.enabled&&(this.enabled=i.enabled),this.loaded_=!0}}class H1 extends Y_{constructor(e={}){const i=kt(e,{kind:MB[e.kind]||""});super(i);let s=!1;Object.defineProperty(this,"selected",{get(){return s},set(n){typeof n!="boolean"||n===s||(s=n,this.trigger("selectedchange"))}}),i.selected&&(this.selected=i.selected)}}class wr extends Os{constructor(e={}){super();let i;const s=new Uc(e);this.kind=s.kind,this.src=s.src,this.srclang=s.language,this.label=s.label,this.default=s.default,Object.defineProperties(this,{readyState:{get(){return i}},track:{get(){return s}}}),i=wr.NONE,s.addEventListener("loadeddata",()=>{i=wr.LOADED,this.trigger({type:"load",target:this})})}}wr.prototype.allowedEvents_={load:"load"};wr.NONE=0;wr.LOADING=1;wr.LOADED=2;wr.ERROR=3;const Ws={audio:{ListClass:F1,TrackClass:z1,capitalName:"Audio"},video:{ListClass:U1,TrackClass:H1,capitalName:"Video"},text:{ListClass:Z_,TrackClass:Uc,capitalName:"Text"}};Object.keys(Ws).forEach(function(t){Ws[t].getterName=`${t}Tracks`,Ws[t].privateName=`${t}Tracks_`});const Dl={remoteText:{ListClass:Z_,TrackClass:Uc,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:OB,TrackClass:wr,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Ki=Object.assign({},Ws,Dl);Dl.names=Object.keys(Dl);Ws.names=Object.keys(Ws);Ki.names=[].concat(Dl.names).concat(Ws.names);function FB(t,e,i,s,n={}){const r=t.textTracks();n.kind=e,i&&(n.label=i),s&&(n.language=s),n.tech=t;const o=new Ki.text.TrackClass(n);return r.addTrack(o),o}class nt extends _e{constructor(e={},i=function(){}){e.reportTouchActivity=!1,super(null,e,i),this.onDurationChange_=s=>this.onDurationChange(s),this.trackProgress_=s=>this.trackProgress(s),this.trackCurrentTime_=s=>this.trackCurrentTime(s),this.stopTrackingCurrentTime_=s=>this.stopTrackingCurrentTime(s),this.disposeSourceHandler_=s=>this.disposeSourceHandler(s),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),Ki.names.forEach(s=>{const n=Ki[s];e&&e[n.getterName]&&(this[n.privateName]=e[n.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(s=>{e[`native${s}Tracks`]===!1&&(this[`featuresNative${s}Tracks`]=!1)}),e.nativeCaptions===!1||e.nativeTextTracks===!1?this.featuresNativeTextTracks=!1:(e.nativeCaptions===!0||e.nativeTextTracks===!0)&&(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=e.preloadTextTracks!==!1,this.autoRemoteTextTracks_=new Ki.text.ListClass,this.initTrackListeners(),e.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(e){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(e),1)),this.trigger({src:e,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Ut(this,function(){const i=this.bufferedPercent();this.bufferedPercent_!==i&&this.trigger("progress"),this.bufferedPercent_=i,i===1&&this.stopTrackingProgress()}),500)}onDurationChange(e){this.duration_=this.duration()}buffered(){return hn(0,0)}bufferedPercent(){return B1(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(Ws.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(e){e=[].concat(e),e.forEach(i=>{const s=this[`${i}Tracks`]()||[];let n=s.length;for(;n--;){const r=s[n];i==="text"&&this.removeRemoteTextTrack(r),s.removeTrack(r)}})}cleanupAutoTextTracks(){const e=this.autoRemoteTextTracks_||[];let i=e.length;for(;i--;){const s=e[i];this.removeRemoteTextTrack(s)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(e){return e!==void 0&&(this.error_=new Yt(e),this.trigger("error")),this.error_}played(){return this.hasStarted_?hn(0,0):hn()}play(){}setScrubbing(e){}scrubbing(){}setCurrentTime(e){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){Ws.names.forEach(e=>{const i=Ws[e],s=()=>{this.trigger(`${e}trackchange`)},n=this[i.getterName]();n.addEventListener("removetrack",s),n.addEventListener("addtrack",s),this.on("dispose",()=>{n.removeEventListener("removetrack",s),n.removeEventListener("addtrack",s)})})}addWebVttScript_(){if(!$.WebVTT)if(ke.body.contains(this.el())){if(!this.options_["vtt.js"]&&Cl(Cb)&&Object.keys(Cb).length>0){this.trigger("vttjsloaded");return}const e=ke.createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=()=>{this.trigger("vttjsloaded")},e.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{e.onload=null,e.onerror=null}),$.WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const e=this.textTracks(),i=this.remoteTextTracks(),s=l=>e.addTrack(l.track),n=l=>e.removeTrack(l.track);i.on("addtrack",s),i.on("removetrack",n),this.addWebVttScript_();const r=()=>this.trigger("texttrackchange"),o=()=>{r();for(let l=0;l<e.length;l++){const u=e[l];u.removeEventListener("cuechange",r),u.mode==="showing"&&u.addEventListener("cuechange",r)}};o(),e.addEventListener("change",o),e.addEventListener("addtrack",o),e.addEventListener("removetrack",o),this.on("dispose",function(){i.off("addtrack",s),i.off("removetrack",n),e.removeEventListener("change",o),e.removeEventListener("addtrack",o),e.removeEventListener("removetrack",o);for(let l=0;l<e.length;l++)e[l].removeEventListener("cuechange",r)})}addTextTrack(e,i,s){if(!e)throw new Error("TextTrack kind is required but was not provided");return FB(this,e,i,s)}createRemoteTextTrack(e){const i=kt(e,{tech:this});return new Dl.remoteTextEl.TrackClass(i)}addRemoteTextTrack(e={},i){const s=this.createRemoteTextTrack(e);return typeof i!="boolean"&&(i=!1),this.remoteTextTrackEls().addTrackElement_(s),this.remoteTextTracks().addTrack(s.track),i===!1&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(s.track)),s}removeRemoteTextTrack(e){const i=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(i),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(e){const i=Zs();return!this.isReady_||this.paused()?(this.queuedHanders_.add(i),this.one("playing",()=>{this.queuedHanders_.has(i)&&(this.queuedHanders_.delete(i),e())})):this.requestNamedAnimationFrame(i,e),i}cancelVideoFrameCallback(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(e){}overrideNativeVideoTracks(e){}canPlayType(e){return""}static canPlayType(e){return""}static canPlaySource(e,i){return nt.canPlayType(e.type)}static isTech(e){return e.prototype instanceof nt||e instanceof nt||e===nt}static registerTech(e,i){if(nt.techs_||(nt.techs_={}),!nt.isTech(i))throw new Error(`Tech ${e} must be a Tech`);if(!nt.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!nt.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=ti(e),nt.techs_[e]=i,nt.techs_[rc(e)]=i,e!=="Tech"&&nt.defaultTechOrder_.push(e),i}static getTech(e){if(e){if(nt.techs_&&nt.techs_[e])return nt.techs_[e];if(e=ti(e),$&&$.videojs&&$.videojs[e])return ut.warn(`The ${e} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),$.videojs[e]}}}Ki.names.forEach(function(t){const e=Ki[t];nt.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}});nt.prototype.featuresVolumeControl=!0;nt.prototype.featuresMuteControl=!0;nt.prototype.featuresFullscreenResize=!1;nt.prototype.featuresPlaybackRate=!1;nt.prototype.featuresProgressEvents=!1;nt.prototype.featuresSourceset=!1;nt.prototype.featuresTimeupdateEvents=!1;nt.prototype.featuresNativeTextTracks=!1;nt.prototype.featuresVideoFrameCallback=!1;nt.withSourceHandlers=function(t){t.registerSourceHandler=function(i,s){let n=t.sourceHandlers;n||(n=t.sourceHandlers=[]),s===void 0&&(s=n.length),n.splice(s,0,i)},t.canPlayType=function(i){const s=t.sourceHandlers||[];let n;for(let r=0;r<s.length;r++)if(n=s[r].canPlayType(i),n)return n;return""},t.selectSourceHandler=function(i,s){const n=t.sourceHandlers||[];let r;for(let o=0;o<n.length;o++)if(r=n[o].canHandleSource(i,s),r)return n[o];return null},t.canPlaySource=function(i,s){const n=t.selectSourceHandler(i,s);return n?n.canHandleSource(i,s):""},["seekable","seeking","duration"].forEach(function(i){const s=this[i];typeof s=="function"&&(this[i]=function(){return this.sourceHandler_&&this.sourceHandler_[i]?this.sourceHandler_[i].apply(this.sourceHandler_,arguments):s.apply(this,arguments)})},t.prototype),t.prototype.setSource=function(i){let s=t.selectSourceHandler(i,this.options_);s||(t.nativeSourceHandler?s=t.nativeSourceHandler:ut.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),s!==t.nativeSourceHandler&&(this.currentSource_=i),this.sourceHandler_=s.handleSource(i,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},t.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};_e.registerComponent("Tech",nt);nt.registerTech("Tech",nt);nt.defaultTechOrder_=[];const ra={},zd={},Hd={};function UB(t,e){ra[t]=ra[t]||[],ra[t].push(e)}function jB(t,e,i){t.setTimeout(()=>qo(e,ra[e.type],i,t),1)}function zB(t,e){t.forEach(i=>i.setTech&&i.setTech(e))}function HB(t,e,i){return t.reduceRight(e0(i),e[i]())}function VB(t,e,i,s){return e[i](t.reduce(e0(i),s))}function tT(t,e,i,s=null){const n="call"+ti(i),r=t.reduce(e0(n),s),o=r===Hd,l=o?null:e[i](r);return WB(t,i,l,o),l}const qB={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},$B={setCurrentTime:1,setMuted:1,setVolume:1},iT={play:1,pause:1};function e0(t){return(e,i)=>e===Hd?Hd:i[t]?i[t](e):e}function WB(t,e,i,s){for(let n=t.length-1;n>=0;n--){const r=t[n];r[e]&&r[e](s,i)}}function GB(t){zd.hasOwnProperty(t.id())&&delete zd[t.id()]}function XB(t,e){const i=zd[t.id()];let s=null;if(i==null)return s=e(t),zd[t.id()]=[[e,s]],s;for(let n=0;n<i.length;n++){const[r,o]=i[n];r===e&&(s=o)}return s===null&&(s=e(t),i.push([e,s])),s}function qo(t={},e=[],i,s,n=[],r=!1){const[o,...l]=e;if(typeof o=="string")qo(t,ra[o],i,s,n,r);else if(o){const u=XB(s,o);if(!u.setSource)return n.push(u),qo(t,l,i,s,n,r);u.setSource(Object.assign({},t),function(h,d){if(h)return qo(t,l,i,s,n,r);n.push(u),qo(d,t.type===d.type?l:ra[d.type],i,s,n,r)})}else l.length?qo(t,l,i,s,n,r):r?i(t,n):qo(t,ra["*"],i,s,n,!0)}const KB={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Vd=function(t=""){const e=J_(t);return KB[e.toLowerCase()]||""},ZB=(t,e)=>{if(!e)return"";if(t.cache_.source.src===e&&t.cache_.source.type)return t.cache_.source.type;const i=t.cache_.sources.filter(n=>n.src===e);if(i.length)return i[0].type;const s=t.$$("source");for(let n=0;n<s.length;n++){const r=s[n];if(r.type&&r.src&&r.src===e)return r.type}return Vd(e)},V1=function(t){if(Array.isArray(t)){let e=[];t.forEach(function(i){i=V1(i),Array.isArray(i)?e=e.concat(i):$n(i)&&e.push(i)}),t=e}else typeof t=="string"&&t.trim()?t=[sT({src:t})]:$n(t)&&typeof t.src=="string"&&t.src&&t.src.trim()?t=[sT(t)]:t=[];return t};function sT(t){if(!t.type){const e=Vd(t.src);e&&(t.type=e)}return t}var YB=`<svg xmlns="http://www.w3.org/2000/svg">
  <defs>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play">
      <path d="M16 10v28l22-14z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-pause">
      <path d="M12 38h8V10h-8v28zm16-28v28h8V10h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-audio">
      <path d="M24 2C14.06 2 6 10.06 6 20v14c0 3.31 2.69 6 6 6h6V24h-8v-4c0-7.73 6.27-14 14-14s14 6.27 14 14v4h-8v16h6c3.31 0 6-2.69 6-6V20c0-9.94-8.06-18-18-18z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-captions">
      <path d="M38 8H10c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM22 22h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2zm14 0h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-subtitles">
      <path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-enter">
      <path d="M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-exit">
      <path d="M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play-circle">
      <path d="M20 33l12-9-12-9v18zm4-29C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-mute">
      <path d="M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13a17.94 17.94 0 0 0 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-low">
      <path d="M14 18v12h8l10 10V8L22 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-medium">
      <path d="M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-high">
      <path d="M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-spinner">
      <path d="M18.8 21l9.53-16.51C26.94 4.18 25.49 4 24 4c-4.8 0-9.19 1.69-12.64 4.51l7.33 12.69.11-.2zm24.28-3c-1.84-5.85-6.3-10.52-11.99-12.68L23.77 18h19.31zm.52 2H28.62l.58 1 9.53 16.5C41.99 33.94 44 29.21 44 24c0-1.37-.14-2.71-.4-4zm-26.53 4l-7.8-13.5C6.01 14.06 4 18.79 4 24c0 1.37.14 2.71.4 4h14.98l-2.31-4zM4.92 30c1.84 5.85 6.3 10.52 11.99 12.68L24.23 30H4.92zm22.54 0l-7.8 13.51c1.4.31 2.85.49 4.34.49 4.8 0 9.19-1.69 12.64-4.51L29.31 26.8 27.46 30z"></path>
    </symbol>
    <symbol viewBox="0 0 24 24" id="vjs-icon-hd">
      <path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-chapters">
      <path d="M6 26h4v-4H6v4zm0 8h4v-4H6v4zm0-16h4v-4H6v4zm8 8h28v-4H14v4zm0 8h28v-4H14v4zm0-20v4h28v-4H14z"></path>
    </symbol>
    <symbol viewBox="0 0 40 40" id="vjs-icon-downloading">
      <path d="M18.208 36.875q-3.208-.292-5.979-1.729-2.771-1.438-4.812-3.729-2.042-2.292-3.188-5.229-1.146-2.938-1.146-6.23 0-6.583 4.334-11.416 4.333-4.834 10.833-5.5v3.166q-5.167.75-8.583 4.646Q6.25 14.75 6.25 19.958q0 5.209 3.396 9.104 3.396 3.896 8.562 4.646zM20 28.417L11.542 20l2.083-2.083 4.917 4.916v-11.25h2.916v11.25l4.875-4.916L28.417 20zm1.792 8.458v-3.167q1.833-.25 3.541-.958 1.709-.708 3.167-1.875l2.333 2.292q-1.958 1.583-4.25 2.541-2.291.959-4.791 1.167zm6.791-27.792q-1.541-1.125-3.25-1.854-1.708-.729-3.541-1.021V3.042q2.5.25 4.77 1.208 2.271.958 4.271 2.5zm4.584 21.584l-2.25-2.25q1.166-1.5 1.854-3.209.687-1.708.937-3.541h3.209q-.292 2.5-1.229 4.791-.938 2.292-2.521 4.209zm.541-12.417q-.291-1.833-.958-3.562-.667-1.73-1.833-3.188l2.375-2.208q1.541 1.916 2.458 4.208.917 2.292 1.167 4.75z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download">
      <path d="M10.8 40.55q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h26.35v-7.7h3.4v7.7q0 1.4-1 2.4t-2.4 1zM24 32.1L13.9 22.05l2.45-2.45 5.95 5.95V7.15h3.4v18.4l5.95-5.95 2.45 2.45z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-done">
      <path d="M9.8 40.5v-3.45h28.4v3.45zm9.2-9.05L7.4 19.85l2.45-2.35L19 26.65l19.2-19.2 2.4 2.4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-off">
      <path d="M4.9 4.75L43.25 43.1 41 45.3l-4.75-4.75q-.05.05-.075.025-.025-.025-.075-.025H10.8q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h22.05l-7-7-1.85 1.8L13.9 21.9l1.85-1.85L2.7 7zm26.75 14.7l2.45 2.45-3.75 3.8-2.45-2.5zM25.7 7.15V21.1l-3.4-3.45V7.15z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-share">
      <path d="M36 32.17c-1.52 0-2.89.59-3.93 1.54L17.82 25.4c.11-.45.18-.92.18-1.4s-.07-.95-.18-1.4l14.1-8.23c1.07 1 2.5 1.62 4.08 1.62 3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6c0 .48.07.95.18 1.4l-14.1 8.23c-1.07-1-2.5-1.62-4.08-1.62-3.31 0-6 2.69-6 6s2.69 6 6 6c1.58 0 3.01-.62 4.08-1.62l14.25 8.31c-.1.42-.16.86-.16 1.31A5.83 5.83 0 1 0 36 32.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cog">
      <path d="M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3a14.8 14.8 0 0 0-3.38 1.97L9.9 10.1a1 1 0 0 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3a14.8 14.8 0 0 0 3.38-1.97l4.98 2.01a1 1 0 0 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-square">
      <path d="M36 8H12c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h24c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 28H12V12h24v24z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle">
      <circle cx="24" cy="24" r="20"></circle>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-outline">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-inner-circle">
      <path d="M24 4C12.97 4 4 12.97 4 24s8.97 20 20 20 20-8.97 20-20S35.03 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16zm6-16c0 3.31-2.69 6-6 6s-6-2.69-6-6 2.69-6 6-6 6 2.69 6 6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cancel">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 27.17L31.17 34 24 26.83 16.83 34 14 31.17 21.17 24 14 16.83 16.83 14 24 21.17 31.17 14 34 16.83 26.83 24 34 31.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-replay">
      <path d="M24 10V2L14 12l10 10v-8c6.63 0 12 5.37 12 12s-5.37 12-12 12-12-5.37-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-repeat">
      <path d="M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-5">
      <path d="M17.689 98l-8.697 8.696 8.697 8.697 2.486-2.485-4.32-4.319h1.302c4.93 0 9.071 1.722 12.424 5.165 3.352 3.443 5.029 7.638 5.029 12.584h3.55c0-2.958-.553-5.73-1.658-8.313-1.104-2.583-2.622-4.841-4.555-6.774-1.932-1.932-4.19-3.45-6.773-4.555-2.584-1.104-5.355-1.657-8.313-1.657H15.5l4.615-4.615zm-8.08 21.659v13.861h11.357v5.008H9.609V143h12.7c.834 0 1.55-.298 2.146-.894.596-.597.895-1.31.895-2.145v-7.781c0-.835-.299-1.55-.895-2.147a2.929 2.929 0 0 0-2.147-.894h-8.227v-5.096H25.35v-4.384z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-10">
      <path d="M42.315 125.63c0-4.997-1.694-9.235-5.08-12.713-3.388-3.479-7.571-5.218-12.552-5.218h-1.315l4.363 4.363-2.51 2.51-8.787-8.786L25.221 97l2.45 2.45-4.662 4.663h1.375c2.988 0 5.788.557 8.397 1.673 2.61 1.116 4.892 2.65 6.844 4.602 1.953 1.953 3.487 4.234 4.602 6.844 1.116 2.61 1.674 5.41 1.674 8.398zM8.183 142v-19.657H3.176V117.8h9.643V142zm13.63 0c-1.156 0-2.127-.393-2.912-1.178-.778-.778-1.168-1.746-1.168-2.902v-16.04c0-1.156.393-2.127 1.178-2.912.779-.779 1.746-1.168 2.902-1.168h7.696c1.156 0 2.126.392 2.911 1.177.779.78 1.168 1.747 1.168 2.903v16.04c0 1.156-.392 2.127-1.177 2.912-.779.779-1.746 1.168-2.902 1.168zm.556-4.636h6.583v-15.02H22.37z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-30">
      <path d="M26.047 97l-8.733 8.732 8.733 8.733 2.496-2.494-4.336-4.338h1.307c4.95 0 9.108 1.73 12.474 5.187 3.367 3.458 5.051 7.668 5.051 12.635h3.565c0-2.97-.556-5.751-1.665-8.346-1.109-2.594-2.633-4.862-4.574-6.802-1.94-1.941-4.208-3.466-6.803-4.575-2.594-1.109-5.375-1.664-8.345-1.664H23.85l4.634-4.634zM2.555 117.531v4.688h10.297v5.25H5.873v4.687h6.979v5.156H2.555V142H13.36c1.061 0 1.95-.395 2.668-1.186.718-.79 1.076-1.772 1.076-2.94v-16.218c0-1.168-.358-2.149-1.076-2.94-.717-.79-1.607-1.185-2.668-1.185zm22.482.14c-1.149 0-2.11.39-2.885 1.165-.78.78-1.172 1.744-1.172 2.893v15.943c0 1.149.388 2.11 1.163 2.885.78.78 1.745 1.172 2.894 1.172h7.649c1.148 0 2.11-.388 2.884-1.163.78-.78 1.17-1.745 1.17-2.894v-15.943c0-1.15-.386-2.111-1.16-2.885-.78-.78-1.746-1.172-2.894-1.172zm.553 4.518h6.545v14.93H25.59z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-5">
      <path d="M29.508 97l-2.431 2.43 4.625 4.625h-1.364c-2.965 0-5.742.554-8.332 1.66-2.589 1.107-4.851 2.629-6.788 4.566-1.937 1.937-3.458 4.2-4.565 6.788-1.107 2.59-1.66 5.367-1.66 8.331h3.557c0-4.957 1.68-9.16 5.04-12.611 3.36-3.45 7.51-5.177 12.451-5.177h1.304l-4.326 4.33 2.49 2.49 8.715-8.716zm-9.783 21.61v13.89h11.382v5.018H19.725V142h12.727a2.93 2.93 0 0 0 2.15-.896 2.93 2.93 0 0 0 .896-2.15v-7.798c0-.837-.299-1.554-.896-2.152a2.93 2.93 0 0 0-2.15-.896h-8.245V123h11.29v-4.392z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-10">
      <path d="M23.119 97l-2.386 2.383 4.538 4.538h-1.339c-2.908 0-5.633.543-8.173 1.63-2.54 1.085-4.76 2.577-6.66 4.478-1.9 1.9-3.392 4.12-4.478 6.66-1.085 2.54-1.629 5.264-1.629 8.172h3.49c0-4.863 1.648-8.986 4.944-12.372 3.297-3.385 7.368-5.078 12.216-5.078h1.279l-4.245 4.247 2.443 2.442 8.55-8.55zm-9.52 21.45v4.42h4.871V142h4.513v-23.55zm18.136 0c-1.125 0-2.066.377-2.824 1.135-.764.764-1.148 1.709-1.148 2.834v15.612c0 1.124.38 2.066 1.139 2.824.764.764 1.708 1.145 2.833 1.145h7.489c1.125 0 2.066-.378 2.824-1.136.764-.764 1.145-1.709 1.145-2.833v-15.612c0-1.125-.378-2.067-1.136-2.825-.764-.764-1.708-1.145-2.833-1.145zm.54 4.42h6.408v14.617h-6.407z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-30">
      <path d="M25.549 97l-2.437 2.434 4.634 4.635H26.38c-2.97 0-5.753.555-8.347 1.664-2.594 1.109-4.861 2.633-6.802 4.574-1.94 1.94-3.465 4.207-4.574 6.802-1.109 2.594-1.664 5.377-1.664 8.347h3.565c0-4.967 1.683-9.178 5.05-12.636 3.366-3.458 7.525-5.187 12.475-5.187h1.307l-4.335 4.338 2.495 2.494 8.732-8.732zm-11.553 20.53v4.689h10.297v5.249h-6.978v4.688h6.978v5.156H13.996V142h10.808c1.06 0 1.948-.395 2.666-1.186.718-.79 1.077-1.771 1.077-2.94v-16.217c0-1.169-.36-2.15-1.077-2.94-.718-.79-1.605-1.186-2.666-1.186zm21.174.168c-1.149 0-2.11.389-2.884 1.163-.78.78-1.172 1.745-1.172 2.894v15.942c0 1.15.388 2.11 1.162 2.885.78.78 1.745 1.17 2.894 1.17h7.649c1.149 0 2.11-.386 2.885-1.16.78-.78 1.17-1.746 1.17-2.895v-15.942c0-1.15-.387-2.11-1.161-2.885-.78-.78-1.745-1.172-2.894-1.172zm.552 4.516h6.542v14.931h-6.542z"></path>
    </symbol>
    <symbol viewBox="0 0 512 512" id="vjs-icon-audio-description">
      <g fill-rule="evenodd"><path d="M227.29 381.351V162.993c50.38-1.017 89.108-3.028 117.631 17.126 27.374 19.342 48.734 56.965 44.89 105.325-4.067 51.155-41.335 94.139-89.776 98.475-24.085 2.155-71.972 0-71.972 0s-.84-1.352-.773-2.568m48.755-54.804c31.43 1.26 53.208-16.633 56.495-45.386 4.403-38.51-21.188-63.552-58.041-60.796v103.612c-.036 1.466.575 2.22 1.546 2.57"></path><path d="M383.78 381.328c13.336 3.71 17.387-11.06 23.215-21.408 12.722-22.571 22.294-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.226 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M425.154 381.328c13.336 3.71 17.384-11.061 23.215-21.408 12.721-22.571 22.291-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.511c-.586 3.874 2.226 7.315 3.866 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M466.26 381.328c13.337 3.71 17.385-11.061 23.216-21.408 12.722-22.571 22.292-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.225 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894M4.477 383.005H72.58l18.573-28.484 64.169-.135s.065 19.413.065 28.62h48.756V160.307h-58.816c-5.653 9.537-140.85 222.697-140.85 222.697zm152.667-145.282v71.158l-40.453-.27 40.453-70.888z"></path></g>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-next-item">
      <path d="M12 36l17-12-17-12v24zm20-24v24h4V12h-4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-previous-item">
      <path d="M12 12h4v24h-4zm7 12l17 12V12z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-shuffle">
      <path d="M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83zM29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29zm.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cast">
      <path d="M42 6H6c-2.21 0-4 1.79-4 4v6h4v-6h36v28H28v4h14c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4zM2 36v6h6c0-3.31-2.69-6-6-6zm0-8v4c5.52 0 10 4.48 10 10h4c0-7.73-6.27-14-14-14zm0-8v4c9.94 0 18 8.06 18 18h4c0-12.15-9.85-22-22-22z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-picture-in-picture-enter">
      <path d="M38 22H22v11.99h16V22zm8 16V9.96C46 7.76 44.2 6 42 6H6C3.8 6 2 7.76 2 9.96V38c0 2.2 1.8 4 4 4h36c2.2 0 4-1.8 4-4zm-4 .04H6V9.94h36v28.1z"></path>
    </symbol>
    <symbol viewBox="0 0 22 18" id="vjs-icon-picture-in-picture-exit">
      <path d="M18 4H4v10h14V4zm4 12V1.98C22 .88 21.1 0 20 0H2C.9 0 0 .88 0 1.98V16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H2V1.97h18v14.05z"></path>
      <path fill="none" d="M-1-3h24v24H-1z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-facebook">
      <path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759H734V905H479V609h255V391q0-186 104-288.5T1115 0q147 0 228 12z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-linkedin">
      <path d="M477 625v991H147V625h330zm21-306q1 73-50.5 122T312 490h-2q-82 0-132-49t-50-122q0-74 51.5-122.5T314 148t133 48.5T498 319zm1166 729v568h-329v-530q0-105-40.5-164.5T1168 862q-63 0-105.5 34.5T999 982q-11 30-11 81v553H659q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5T1285 602q171 0 275 113.5t104 332.5z"></path>
    </symbol>
    <symbol viewBox="0 0 1200 1227" id="vjs-icon-twitter">
      <path d="M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"/>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-tumblr">
      <path d="M1328 1329l80 237q-23 35-111 66t-177 32q-104 2-190.5-26T787 1564t-95-106-55.5-120-16.5-118V676H452V461q72-26 129-69.5t91-90 58-102 34-99T779 12q1-5 4.5-8.5T791 0h244v424h333v252h-334v518q0 30 6.5 56t22.5 52.5 49.5 41.5 81.5 14q78-2 134-29z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-pinterest">
      <path d="M1664 896q0 209-103 385.5T1281.5 1561 896 1664q-111 0-218-32 59-93 78-164 9-34 54-211 20 39 73 67.5t114 28.5q121 0 216-68.5t147-188.5 52-270q0-114-59.5-214T1180 449t-255-63q-105 0-196 29t-154.5 77-109 110.5-67 129.5T377 866q0 104 40 183t117 111q30 12 38-20 2-7 8-31t8-30q6-23-11-43-51-61-51-151 0-151 104.5-259.5T904 517q151 0 235.5 82t84.5 213q0 170-68.5 289T980 1220q-61 0-98-43.5T859 1072q8-35 26.5-93.5t30-103T927 800q0-50-27-83t-77-33q-62 0-105 57t-43 142q0 73 25 122l-99 418q-17 70-13 177-206-91-333-281T128 896q0-209 103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"></path>
    </symbol>
  </defs>
</svg>`;const nT=Nd?10009:Bd?461:8,Va={codes:{play:415,pause:19,ff:417,rw:412,back:nT},names:{415:"play",19:"pause",417:"ff",412:"rw",[nT]:"back"},isEventKey(t,e){return e=e.toLowerCase(),!!(this.names[t.keyCode]&&this.names[t.keyCode]===e)},getEventName(t){if(this.names[t.keyCode])return this.names[t.keyCode];if(this.codes[t.code]){const e=this.codes[t.code];return this.names[e]}return null}},rT=5;class QB extends Os{constructor(e){super(),this.player_=e,this.focusableComponents=[],this.isListening_=!1,this.isPaused_=!1,this.onKeyDown_=this.onKeyDown_.bind(this),this.lastFocusedComponent_=null}start(){this.isListening_||(this.player_.on("keydown",this.onKeyDown_),this.player_.on("modalKeydown",this.onKeyDown_),this.player_.on("loadedmetadata",()=>{this.focus(this.updateFocusableComponents()[0])}),this.player_.on("modalclose",()=>{this.refocusComponent()}),this.player_.on("focusin",this.handlePlayerFocus_.bind(this)),this.player_.on("focusout",this.handlePlayerBlur_.bind(this)),this.isListening_=!0,this.player_.errorDisplay&&this.player_.errorDisplay.on("aftermodalfill",()=>{this.updateFocusableComponents(),this.focusableComponents.length&&(this.focusableComponents.length>1?this.focusableComponents[1].focus():this.focusableComponents[0].focus())}))}stop(){this.player_.off("keydown",this.onKeyDown_),this.isListening_=!1}onKeyDown_(e){const i=e.originalEvent?e.originalEvent:e;if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(i.key)){if(this.isPaused_)return;i.preventDefault();const s=i.key.substring(5).toLowerCase();this.move(s)}else if(Va.isEventKey(i,"play")||Va.isEventKey(i,"pause")||Va.isEventKey(i,"ff")||Va.isEventKey(i,"rw")){i.preventDefault();const s=Va.getEventName(i);this.performMediaAction_(s)}else Va.isEventKey(i,"Back")&&e.target&&typeof e.target.closeable=="function"&&e.target.closeable()&&(i.preventDefault(),e.target.close())}performMediaAction_(e){if(this.player_)switch(e){case"play":this.player_.paused()&&this.player_.play();break;case"pause":this.player_.paused()||this.player_.pause();break;case"ff":this.userSeek_(this.player_.currentTime()+rT);break;case"rw":this.userSeek_(this.player_.currentTime()-rT);break}}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}pause(){this.isPaused_=!0}resume(){this.isPaused_=!1}handlePlayerBlur_(e){const i=e.relatedTarget;let s=null;const n=this.getCurrentComponent(e.target);i&&(s=!!i.closest(".video-js"),i.classList.contains("vjs-text-track-settings")&&!this.isPaused_&&this.searchForTrackSelect_()),(!e.currentTarget.contains(e.relatedTarget)&&!s||!i)&&(n&&n.name()==="CloseButton"?this.refocusComponent():(this.pause(),n&&n.el()&&(this.lastFocusedComponent_=n)))}handlePlayerFocus_(){this.getCurrentComponent()&&this.getCurrentComponent().getIsFocusable()&&this.resume()}updateFocusableComponents(){const e=this.player_,i=[];function s(n){for(const r of n)r.hasOwnProperty("el_")&&r.getIsFocusable()&&r.getIsAvailableToBeFocused(r.el())&&i.push(r),r.hasOwnProperty("children_")&&r.children_.length>0&&s(r.children_)}return e.children_.forEach(n=>{if(n.hasOwnProperty("el_"))if(n.getIsFocusable&&n.getIsAvailableToBeFocused&&n.getIsFocusable()&&n.getIsAvailableToBeFocused(n.el())){i.push(n);return}else n.hasOwnProperty("children_")&&n.children_.length>0?s(n.children_):n.hasOwnProperty("items")&&n.items.length>0?s(n.items):this.findSuitableDOMChild(n)&&i.push(n);if(n.name_==="ErrorDisplay"&&n.opened_){const r=n.el_.querySelector(".vjs-errors-ok-button-container");r&&r.querySelectorAll("button").forEach((l,u)=>{i.push({name:()=>"ModalButton"+(u+1),el:()=>l,getPositions:()=>{const h=l.getBoundingClientRect(),d={x:h.x,y:h.y,width:h.width,height:h.height,top:h.top,right:h.right,bottom:h.bottom,left:h.left},m={x:h.left+h.width/2,y:h.top+h.height/2,width:0,height:0,top:h.top+h.height/2,right:h.left+h.width/2,bottom:h.top+h.height/2,left:h.left+h.width/2};return{boundingClientRect:d,center:m}},getIsAvailableToBeFocused:()=>!0,getIsFocusable:h=>!0,focus:()=>l.focus()})})}}),this.focusableComponents=i,this.focusableComponents}findSuitableDOMChild(e){function i(s){if(e.getIsFocusable(s)&&e.getIsAvailableToBeFocused(s))return s;for(let n=0;n<s.children.length;n++){const r=s.children[n],o=i(r);if(o)return o}return null}return e.el()?i(e.el()):null}getCurrentComponent(e){this.updateFocusableComponents();const i=e||document.activeElement;if(this.focusableComponents.length){for(const s of this.focusableComponents)if(s.el()===i)return s}}add(e){const i=[...this.focusableComponents];e.hasOwnProperty("el_")&&e.getIsFocusable()&&e.getIsAvailableToBeFocused(e.el())&&i.push(e),this.focusableComponents=i,this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents})}remove(e){for(let i=0;i<this.focusableComponents.length;i++)if(this.focusableComponents[i].name()===e.name()){this.focusableComponents.splice(i,1),this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents});return}}clear(){this.focusableComponents.length>0&&(this.focusableComponents=[],this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents}))}move(e){const i=this.getCurrentComponent();if(!i)return;const s=i.getPositions(),n=this.focusableComponents.filter(o=>o!==i&&this.isInDirection_(s.boundingClientRect,o.getPositions().boundingClientRect,e)),r=this.findBestCandidate_(s.center,n,e);r?this.focus(r):this.trigger({type:"endOfFocusableComponents",direction:e,focusedComponent:i})}findBestCandidate_(e,i,s){let n=1/0,r=null;for(const o of i){const l=o.getPositions().center,u=this.calculateDistance_(e,l,s);u<n&&(n=u,r=o)}return r}isInDirection_(e,i,s){switch(s){case"right":return i.left>=e.right;case"left":return i.right<=e.left;case"down":return i.top>=e.bottom;case"up":return i.bottom<=e.top;default:return!1}}refocusComponent(){if(this.lastFocusedComponent_){this.player_.userActive()||this.player_.userActive(!0),this.updateFocusableComponents();for(let e=0;e<this.focusableComponents.length;e++)if(this.focusableComponents[e].name()===this.lastFocusedComponent_.name()){this.focus(this.focusableComponents[e]);return}}else this.focus(this.updateFocusableComponents()[0])}focus(e){typeof e=="object"&&(e.getIsAvailableToBeFocused(e.el())?e.focus():this.findSuitableDOMChild(e)&&this.findSuitableDOMChild(e).focus())}calculateDistance_(e,i,s){const n=Math.abs(e.x-i.x),r=Math.abs(e.y-i.y);let o;switch(s){case"right":case"left":o=n+r*100;break;case"up":o=r*2+n*.5;break;case"down":o=r*5+n;break;default:o=n+r}return o}searchForTrackSelect_(){const e=this;for(const i of e.updateFocusableComponents())if(i.constructor.name==="TextTrackSelect"){e.focus(i);break}}}class JB extends _e{constructor(e,i,s){const n=kt({createEl:!1},i);if(super(e,n,s),!i.playerOptions.sources||i.playerOptions.sources.length===0)for(let r=0,o=i.playerOptions.techOrder;r<o.length;r++){const l=ti(o[r]);let u=nt.getTech(l);if(l||(u=_e.getComponent(l)),u&&u.isSupported()){e.loadTech_(l);break}}else e.src(i.playerOptions.sources)}}_e.registerComponent("MediaLoader",JB);class Vf extends _e{constructor(e,i){super(e,i),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=s=>this.handleMouseOver(s),this.handleMouseOut_=s=>this.handleMouseOut(s),this.handleClick_=s=>this.handleClick(s),this.handleKeyDown_=s=>this.handleKeyDown(s),this.emitTapEvents(),this.enable()}createEl(e="div",i={},s={}){i=Object.assign({className:this.buildCSSClass(),tabIndex:0},i),e==="button"&&ut.error(`Creating a ClickableComponent with an HTML element of ${e} is not supported; use a Button instead.`),s=Object.assign({role:"button"},s),this.tabIndex_=i.tabIndex;const n=Ye(e,i,s);return this.player_.options_.experimentalSvgIcons||n.appendChild(Ye("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(n),n}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(e){return this.controlTextEl_=Ye("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_}controlText(e,i=this.el()){if(e===void 0)return this.controlText_||"Need Text";const s=this.localize(e);this.controlText_=e,po(this.controlTextEl_,s),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&i.setAttribute("title",s)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(e){e.key===" "||e.key==="Enter"?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}_e.registerComponent("ClickableComponent",Vf);class Dg extends Vf{constructor(e,i){super(e,i),this.update(),this.update_=s=>this.update(s),e.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return Ye("div",{className:"vjs-poster"})}crossOrigin(e){if(typeof e>"u")return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.$("img")&&(this.$("img").crossOrigin=e)}update(e){const i=this.player().poster();this.setSrc(i),i?this.show():this.hide()}setSrc(e){if(!e){this.el_.textContent="";return}this.$("img")||this.el_.appendChild(Ye("picture",{className:"vjs-poster",tabIndex:-1},{},Ye("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=e}handleClick(e){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?Fn(this.player_.play()):this.player_.pause())}}Dg.prototype.crossorigin=Dg.prototype.crossOrigin;_e.registerComponent("PosterImage",Dg);const zs="#222",oT="#ccc",eF={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function Rm(t,e){let i;if(t.length===4)i=t[1]+t[1]+t[2]+t[2]+t[3]+t[3];else if(t.length===7)i=t.slice(1);else throw new Error("Invalid color code provided, "+t+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(i.slice(0,2),16)+","+parseInt(i.slice(2,4),16)+","+parseInt(i.slice(4,6),16)+","+e+")"}function kn(t,e,i){try{t.style[e]=i}catch{return}}function aT(t){return t?`${t}px`:""}class tF extends _e{constructor(e,i,s){super(e,i,s);const n=o=>this.updateDisplay(o),r=o=>{this.updateDisplayOverlay(),this.updateDisplay(o)};e.on("loadstart",o=>this.toggleDisplay(o)),e.on("useractive",n),e.on("userinactive",n),e.on("texttrackchange",n),e.on("loadedmetadata",o=>{this.updateDisplayOverlay(),this.preselectTrack(o)}),e.ready(Ut(this,function(){if(e.tech_&&e.tech_.featuresNativeTextTracks){this.hide();return}e.on("fullscreenchange",r),e.on("playerresize",r);const o=$.screen.orientation||$,l=$.screen.orientation?"change":"orientationchange";o.addEventListener(l,r),e.on("dispose",()=>o.removeEventListener(l,r));const u=this.options_.playerOptions.tracks||[];for(let h=0;h<u.length;h++)this.player_.addRemoteTextTrack(u[h],!0);this.preselectTrack()}))}preselectTrack(){const e={captions:1,subtitles:1},i=this.player_.textTracks(),s=this.player_.cache_.selectedLanguage;let n,r,o;for(let l=0;l<i.length;l++){const u=i[l];s&&s.enabled&&s.language&&s.language===u.language&&u.kind in e?u.kind===s.kind?o=u:o||(o=u):s&&!s.enabled?(o=null,n=null,r=null):u.default&&(u.kind==="descriptions"&&!n?n=u:u.kind in e&&!r&&(r=u))}o?o.mode="showing":r?r.mode="showing":n&&(n.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){typeof $.WebVTT=="function"&&$.WebVTT.processCues($,[],this.el_)}updateDisplay(){const e=this.player_.textTracks(),i=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),i){const o=[];for(let l=0;l<e.length;++l){const u=e[l];u.mode==="showing"&&o.push(u)}this.updateForTrack(o);return}let s=null,n=null,r=e.length;for(;r--;){const o=e[r];o.mode==="showing"&&(o.kind==="descriptions"?s=o:n=o)}if(n?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(n)):s&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(s)),!$.CSS.supports("inset","10px")){const o=this.el_,l=o.querySelectorAll(".vjs-text-track-cue"),u=this.player_.controlBar.el_.getBoundingClientRect().height,h=this.player_.el_.getBoundingClientRect().height;o.style="",kn(o,"position","relative"),kn(o,"height",h-u+"px"),kn(o,"top","unset"),Fd?kn(o,"bottom",h+"px"):kn(o,"bottom","0px"),l.length>0&&l.forEach(d=>{if(d.style.inset){const m=d.style.inset.split(" ");m.length===3&&Object.assign(d.style,{top:m[0],right:m[1],bottom:m[2],left:"unset"})}})}}updateDisplayOverlay(){if(!this.player_.videoHeight()||!$.CSS.supports("inset-inline: 10px"))return;const e=this.player_.currentWidth(),i=this.player_.currentHeight(),s=e/i,n=this.player_.videoWidth()/this.player_.videoHeight();let r=0,o=0;Math.abs(s-n)>.1&&(s>n?r=Math.round((e-i*n)/2):o=Math.round((i-e/n)/2)),kn(this.el_,"insetInline",aT(r)),kn(this.el_,"insetBlock",aT(o))}updateDisplayState(e){const i=this.player_.textTrackSettings.getValues(),s=e.activeCues;let n=s.length;for(;n--;){const r=s[n];if(!r)continue;const o=r.displayState;if(i.color&&(o.firstChild.style.color=i.color),i.textOpacity&&kn(o.firstChild,"color",Rm(i.color||"#fff",i.textOpacity)),i.backgroundColor&&(o.firstChild.style.backgroundColor=i.backgroundColor),i.backgroundOpacity&&kn(o.firstChild,"backgroundColor",Rm(i.backgroundColor||"#000",i.backgroundOpacity)),i.windowColor&&(i.windowOpacity?kn(o,"backgroundColor",Rm(i.windowColor,i.windowOpacity)):o.style.backgroundColor=i.windowColor),i.edgeStyle&&(i.edgeStyle==="dropshadow"?o.firstChild.style.textShadow=`2px 2px 3px ${zs}, 2px 2px 4px ${zs}, 2px 2px 5px ${zs}`:i.edgeStyle==="raised"?o.firstChild.style.textShadow=`1px 1px ${zs}, 2px 2px ${zs}, 3px 3px ${zs}`:i.edgeStyle==="depressed"?o.firstChild.style.textShadow=`1px 1px ${oT}, 0 1px ${oT}, -1px -1px ${zs}, 0 -1px ${zs}`:i.edgeStyle==="uniform"&&(o.firstChild.style.textShadow=`0 0 4px ${zs}, 0 0 4px ${zs}, 0 0 4px ${zs}, 0 0 4px ${zs}`)),i.fontPercent&&i.fontPercent!==1){const l=$.parseFloat(o.style.fontSize);o.style.fontSize=l*i.fontPercent+"px",o.style.height="auto",o.style.top="auto"}i.fontFamily&&i.fontFamily!=="default"&&(i.fontFamily==="small-caps"?o.firstChild.style.fontVariant="small-caps":o.firstChild.style.fontFamily=eF[i.fontFamily])}}updateForTrack(e){if(Array.isArray(e)||(e=[e]),typeof $.WebVTT!="function"||e.every(s=>!s.activeCues))return;const i=[];for(let s=0;s<e.length;++s){const n=e[s];for(let r=0;r<n.activeCues.length;++r)i.push(n.activeCues[r])}$.WebVTT.processCues($,i,this.el_);for(let s=0;s<e.length;++s){const n=e[s];for(let r=0;r<n.activeCues.length;++r){const o=n.activeCues[r].displayState;na(o,"vjs-text-track-cue","vjs-text-track-cue-"+(n.language?n.language:s)),n.language&&wl(o,"lang",n.language)}this.player_.textTrackSettings&&this.updateDisplayState(n)}}}_e.registerComponent("TextTrackDisplay",tF);class iF extends _e{createEl(){const e=this.player_.isAudio(),i=this.localize(e?"Audio Player":"Video Player"),s=Ye("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[i])}),n=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return n.appendChild(s),n}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}}_e.registerComponent("LoadingSpinner",iF);class Ni extends Vf{createEl(e,i={},s={}){e="button",i=Object.assign({className:this.buildCSSClass()},i),s=Object.assign({type:"button"},s);const n=Ye(e,i,s);return this.player_.options_.experimentalSvgIcons||n.appendChild(Ye("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(n),n}addChild(e,i={}){const s=this.constructor.name;return ut.warn(`Adding an actionable (user controllable) child to a Button (${s}) is not supported; use a ClickableComponent instead.`),_e.prototype.addChild.call(this,e,i)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(e){if(e.key===" "||e.key==="Enter"){e.stopPropagation();return}super.handleKeyDown(e)}}_e.registerComponent("Button",Ni);class q1 extends Ni{constructor(e,i){super(e,i),this.mouseused_=!1,this.setIcon("play"),this.on("mousedown",s=>this.handleMouseDown(s))}buildCSSClass(){return"vjs-big-play-button"}handleClick(e){const i=this.player_.play();if(e.type==="tap"||this.mouseused_&&"clientX"in e&&"clientY"in e){Fn(i),this.player_.tech(!0)&&this.player_.tech(!0).focus();return}const s=this.player_.getChild("controlBar"),n=s&&s.getChild("playToggle");if(!n){this.player_.tech(!0).focus();return}const r=()=>n.focus();oc(i)?i.then(r,()=>{}):this.setTimeout(r,1)}handleKeyDown(e){this.mouseused_=!1,super.handleKeyDown(e)}handleMouseDown(e){this.mouseused_=!0}}q1.prototype.controlText_="Play Video";_e.registerComponent("BigPlayButton",q1);class sF extends Ni{constructor(e,i){super(e,i),this.setIcon("cancel"),this.controlText(i&&i.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(e){this.trigger({type:"close",bubbles:!1})}handleKeyDown(e){e.key==="Escape"?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}_e.registerComponent("CloseButton",sF);class $1 extends Ni{constructor(e,i={}){super(e,i),i.replay=i.replay===void 0||i.replay,this.setIcon("play"),this.on(e,"play",s=>this.handlePlay(s)),this.on(e,"pause",s=>this.handlePause(s)),i.replay&&this.on(e,"ended",s=>this.handleEnded(s))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(e){this.player_.paused()?Fn(this.player_.play()):this.player_.pause()}handleSeeked(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)}handlePlay(e){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.setIcon("pause"),this.controlText("Pause")}handlePause(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.setIcon("play"),this.controlText("Play")}handleEnded(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.setIcon("replay"),this.controlText("Replay"),this.one(this.player_,"seeked",i=>this.handleSeeked(i))}}$1.prototype.controlText_="Play";_e.registerComponent("PlayToggle",$1);class zl extends _e{constructor(e,i){super(e,i),this.on(e,["timeupdate","ended","seeking"],s=>this.update(s)),this.updateTextNode_()}createEl(){const e=this.buildCSSClass(),i=super.createEl("div",{className:`${e} vjs-time-control vjs-control`}),s=Ye("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)}`},{role:"presentation"});return i.appendChild(s),this.contentEl_=Ye("span",{className:`${e}-display`},{role:"presentation"}),i.appendChild(this.contentEl_),i}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}update(e){!this.player_.options_.enableSmoothSeeking&&e.type==="seeking"||this.updateContent(e)}updateTextNode_(e=0){e=ha(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(!this.contentEl_)return;let i=this.textNode_;i&&this.contentEl_.firstChild!==i&&(i=null,ut.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=ke.createTextNode(this.formattedTime_),this.textNode_&&(i?this.contentEl_.replaceChild(this.textNode_,i):this.contentEl_.appendChild(this.textNode_))}))}updateContent(e){}}zl.prototype.labelText_="Time";zl.prototype.controlText_="Time";_e.registerComponent("TimeDisplay",zl);class t0 extends zl{buildCSSClass(){return"vjs-current-time"}updateContent(e){let i;this.player_.ended()?i=this.player_.duration():e&&e.target&&typeof e.target.pendingSeekTime=="function"?i=e.target.pendingSeekTime():i=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(i)}}t0.prototype.labelText_="Current Time";t0.prototype.controlText_="Current Time";_e.registerComponent("CurrentTimeDisplay",t0);class i0 extends zl{constructor(e,i){super(e,i);const s=n=>this.updateContent(n);this.on(e,"durationchange",s),this.on(e,"loadstart",s),this.on(e,"loadedmetadata",s)}buildCSSClass(){return"vjs-duration"}updateContent(e){const i=this.player_.duration();this.updateTextNode_(i)}}i0.prototype.labelText_="Duration";i0.prototype.controlText_="Duration";_e.registerComponent("DurationDisplay",i0);class nF extends _e{createEl(){const e=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),i=super.createEl("div"),s=super.createEl("span",{textContent:"/"});return i.appendChild(s),e.appendChild(i),e}}_e.registerComponent("TimeDivider",nF);class s0 extends zl{constructor(e,i){super(e,i),this.on(e,"durationchange",s=>this.updateContent(s))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const e=super.createEl();return this.options_.displayNegative!==!1&&e.insertBefore(Ye("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e}updateContent(e){if(typeof this.player_.duration()!="number")return;let i;this.player_.ended()?i=0:this.player_.remainingTimeDisplay?i=this.player_.remainingTimeDisplay():i=this.player_.remainingTime(),this.updateTextNode_(i)}}s0.prototype.labelText_="Remaining Time";s0.prototype.controlText_="Remaining Time";_e.registerComponent("RemainingTimeDisplay",s0);class rF extends _e{constructor(e,i){super(e,i),this.updateShowing(),this.on(this.player(),"durationchange",s=>this.updateShowing(s))}createEl(){const e=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=Ye("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(Ye("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")}`})),this.contentEl_.appendChild(ke.createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e}dispose(){this.contentEl_=null,super.dispose()}updateShowing(e){this.player().duration()===1/0?this.show():this.hide()}}_e.registerComponent("LiveDisplay",rF);class W1 extends Ni{constructor(e,i){super(e,i),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=s=>this.updateLiveEdgeStatus(s),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const e=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.setIcon("circle",e),this.textEl_=Ye("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}}W1.prototype.controlText_="Seek to live, currently playing live";_e.registerComponent("SeekToLive",W1);function jc(t,e,i){return t=Number(t),Math.min(i,Math.max(e,isNaN(t)?e:t))}var oF=Object.freeze({__proto__:null,clamp:jc});class n0 extends _e{constructor(e,i){super(e,i),this.handleMouseDown_=s=>this.handleMouseDown(s),this.handleMouseUp_=s=>this.handleMouseUp(s),this.handleKeyDown_=s=>this.handleKeyDown(s),this.handleClick_=s=>this.handleClick(s),this.handleMouseMove_=s=>this.handleMouseMove(s),this.update_=s=>this.update(s),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(e,i={},s={}){return i.className=i.className+" vjs-slider",i=Object.assign({tabIndex:0},i),s=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},s),super.createEl(e,i,s)}handleMouseDown(e){const i=this.bar.el_.ownerDocument;e.type==="mousedown"&&e.preventDefault(),e.type==="touchstart"&&!Wn&&e.preventDefault(),y1(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(i,"mousemove",this.handleMouseMove_),this.on(i,"mouseup",this.handleMouseUp_),this.on(i,"touchmove",this.handleMouseMove_),this.on(i,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)}handleMouseMove(e){}handleMouseUp(e){const i=this.bar.el_.ownerDocument;v1(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(i,"mousemove",this.handleMouseMove_),this.off(i,"mouseup",this.handleMouseUp_),this.off(i,"touchmove",this.handleMouseMove_),this.off(i,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;const e=this.getProgress();return e===this.progress_||(this.progress_=e,this.requestNamedAnimationFrame("Slider#update",()=>{const i=this.vertical()?"height":"width";this.bar.el().style[i]=(e*100).toFixed(2)+"%"})),e}getProgress(){return Number(jc(this.getPercent(),0,1).toFixed(4))}calculateDistance(e){const i=Bf(this.el_,e);return this.vertical()?i.y:i.x}handleKeyDown(e){const i=this.options_.playerOptions.spatialNavigation,s=i&&i.enabled,n=i&&i.horizontalSeek;s?n&&e.key==="ArrowLeft"||!n&&e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepBack()):n&&e.key==="ArrowRight"||!n&&e.key==="ArrowUp"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(this.pendingSeekTime()&&(this.pendingSeekTime(null),this.userSeek_(this.player_.currentTime())),super.handleKeyDown(e)):e.key==="ArrowLeft"||e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepBack()):e.key==="ArrowUp"||e.key==="ArrowRight"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e)}handleClick(e){e.stopPropagation(),e.preventDefault()}vertical(e){if(e===void 0)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}}_e.registerComponent("Slider",n0);const Nm=(t,e)=>jc(t/e*100,0,100).toFixed(2)+"%";class aF extends _e{constructor(e,i){super(e,i),this.partEls_=[],this.on(e,"progress",s=>this.update(s))}createEl(){const e=super.createEl("div",{className:"vjs-load-progress"}),i=Ye("span",{className:"vjs-control-text"}),s=Ye("span",{textContent:this.localize("Loaded")}),n=ke.createTextNode(": ");return this.percentageEl_=Ye("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(i),i.appendChild(s),i.appendChild(n),i.appendChild(this.percentageEl_),e}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(e){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{const i=this.player_.liveTracker,s=this.player_.buffered(),n=i&&i.isLive()?i.seekableEnd():this.player_.duration(),r=this.player_.bufferedEnd(),o=this.partEls_,l=Nm(r,n);this.percent_!==l&&(this.el_.style.width=l,po(this.percentageEl_,l),this.percent_=l);for(let u=0;u<s.length;u++){const h=s.start(u),d=s.end(u);let m=o[u];m||(m=this.el_.appendChild(Ye()),o[u]=m),!(m.dataset.start===h&&m.dataset.end===d)&&(m.dataset.start=h,m.dataset.end=d,m.style.left=Nm(h,r),m.style.width=Nm(d-h,r))}for(let u=o.length;u>s.length;u--)this.el_.removeChild(o[u-1]);o.length=s.length})}}_e.registerComponent("LoadProgressBar",aF);class lF extends _e{constructor(e,i){super(e,i),this.update=Gn(Ut(this,this.update),Ys)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(e,i,s){const n=Sc(this.el_),r=El(this.player_.el()),o=e.width*i;if(!r||!n)return;let l=e.left-r.left+o,u=e.width-o+(r.right-e.right);u||(u=e.width-o,l=o);let h=n.width/2;l<h?h+=h-l:u<h&&(h=u),h<0?h=0:h>n.width&&(h=n.width),h=Math.round(h),this.el_.style.right=`-${h}px`,this.write(s)}write(e){po(this.el_,e)}updateTime(e,i,s,n){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let r;const o=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){const l=this.player_.liveTracker.liveWindow(),u=l-i*l;r=(u<1?"":"-")+ha(u,l)}else r=ha(s,o);this.update(e,i,r),n&&n()})}}_e.registerComponent("TimeTooltip",lF);class r0 extends _e{constructor(e,i){super(e,i),this.setIcon("circle"),this.update=Gn(Ut(this,this.update),Ys)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(e,i,s){const n=this.getChild("timeTooltip");if(!n)return;const r=s&&s.target&&typeof s.target.pendingSeekTime=="function"?s.target.pendingSeekTime():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();n.updateTime(e,i,r)}}r0.prototype.options_={children:[]};!Mi&&!mn&&r0.prototype.options_.children.push("timeTooltip");_e.registerComponent("PlayProgressBar",r0);class G1 extends _e{constructor(e,i){super(e,i),this.update=Gn(Ut(this,this.update),Ys)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,i){const s=i*this.player_.duration();this.getChild("timeTooltip").updateTime(e,i,s,()=>{this.el_.style.left=`${e.width*i}px`})}}G1.prototype.options_={children:["timeTooltip"]};_e.registerComponent("MouseTimeDisplay",G1);class qf extends n0{constructor(e,i){i=kt(qf.prototype.options_,i),i.children=[...i.children];const s=e.options_.disableSeekWhileScrubbingOnMobile&&(Mi||mn)||e.options_.disableSeekWhileScrubbingOnSTV;(!Mi&&!mn||s)&&i.children.splice(1,0,"mouseTimeDisplay"),super(e,i),this.shouldDisableSeekWhileScrubbing_=s,this.pendingSeekTime_=null,this.setEventHandlers_()}setEventHandlers_(){this.update_=Ut(this,this.update),this.update=Gn(this.update_,Ys),this.on(this.player_,["durationchange","timeupdate"],this.update),this.on(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=e=>this.enableInterval_(e),this.disableIntervalHandler_=e=>this.disableInterval_(e),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in ke&&"visibilityState"in ke&&this.on(ke,"visibilitychange",this.toggleVisibility_)}toggleVisibility_(e){ke.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,Ys))}disableInterval_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&e.type!=="ended"||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(e){if(ke.visibilityState==="hidden")return;const i=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{const s=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),n=this.player_.liveTracker;let r=this.player_.duration();n&&n.isLive()&&(r=this.player_.liveTracker.liveCurrentTime()),this.percent_!==i&&(this.el_.setAttribute("aria-valuenow",(i*100).toFixed(2)),this.percent_=i),(this.currentTime_!==s||this.duration_!==r)&&(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[ha(s,r),ha(r,r)],"{1} of {2}")),this.currentTime_=s,this.duration_=r),this.bar&&this.bar.update(El(this.el()),this.getProgress(),e)}),i}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}pendingSeekTime(e){if(e!==void 0)if(e!==null){const i=this.player_.duration();this.pendingSeekTime_=Math.max(0,Math.min(e,i))}else this.pendingSeekTime_=null;return this.pendingSeekTime_}getPercent(){if(this.pendingSeekTime()!==null)return this.pendingSeekTime()/this.player_.duration();const e=this.getCurrentTime_();let i;const s=this.player_.liveTracker;return s&&s.isLive()?(i=(e-s.seekableStart())/s.liveWindow(),s.atLiveEdge()&&(i=1)):i=e/this.player_.duration(),i}handleMouseDown(e){Cc(e)&&(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.shouldDisableSeekWhileScrubbing_||this.player_.pause(),super.handleMouseDown(e))}handleMouseMove(e,i=!1){if(!Cc(e)||isNaN(this.player_.duration()))return;!i&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);let s;const n=this.calculateDistance(e),r=this.player_.liveTracker;if(!r||!r.isLive())s=n*this.player_.duration(),s===this.player_.duration()&&(s=s-.1);else{if(n>=.99){r.seekToLiveEdge();return}const o=r.seekableStart(),l=r.liveCurrentTime();if(s=o+n*r.liveWindow(),s>=l&&(s=l),s<=o&&(s=o+.1),s===1/0)return}this.shouldDisableSeekWhileScrubbing_?this.pendingSeekTime(s):this.userSeek_(s),this.player_.options_.enableSmoothSeeking&&this.update()}enable(){super.enable();const e=this.getChild("mouseTimeDisplay");e&&e.show()}disable(){super.disable();const e=this.getChild("mouseTimeDisplay");e&&e.hide()}handleMouseUp(e){super.handleMouseUp(e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.pendingSeekTime()!==null&&(this.userSeek_(this.pendingSeekTime()),this.pendingSeekTime(null)),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Fn(this.player_.play()):this.update_()}handlePendingSeek_(e){this.player_.paused()||this.player_.pause();const i=this.pendingSeekTime()!==null?this.pendingSeekTime():this.player_.currentTime();this.pendingSeekTime(i+e),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}stepForward(){this.shouldDisableSeekWhileScrubbing_?this.handlePendingSeek_(this.options().stepSeconds):this.userSeek_(this.player_.currentTime()+this.options().stepSeconds)}stepBack(){this.shouldDisableSeekWhileScrubbing_?this.handlePendingSeek_(-this.options().stepSeconds):this.userSeek_(this.player_.currentTime()-this.options().stepSeconds)}handleAction(e){this.pendingSeekTime()!==null&&(this.userSeek_(this.pendingSeekTime()),this.pendingSeekTime(null)),this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(e){const i=this.player_.liveTracker;if(e.key===" "||e.key==="Enter")e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(e.key==="Home")e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(e.key==="End")e.preventDefault(),e.stopPropagation(),i&&i.isLive()?this.userSeek_(i.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(e.key)){e.preventDefault(),e.stopPropagation();const s=parseInt(e.key,10)*.1;i&&i.isLive()?this.userSeek_(i.seekableStart()+i.liveWindow()*s):this.userSeek_(this.player_.duration()*s)}else e.key==="PageDown"?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-this.options().stepSeconds*this.options().pageMultiplier)):e.key==="PageUp"?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+this.options().stepSeconds*this.options().pageMultiplier)):super.handleKeyDown(e)}dispose(){this.disableInterval_(),this.off(this.player_,["durationchange","timeupdate"],this.update),this.off(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in ke&&"visibilityState"in ke&&this.off(ke,"visibilitychange",this.toggleVisibility_),super.dispose()}}qf.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar",stepSeconds:5,pageMultiplier:12};_e.registerComponent("SeekBar",qf);class X1 extends _e{constructor(e,i){super(e,i),this.handleMouseMove=Gn(Ut(this,this.handleMouseMove),Ys),this.throttledHandleMouseSeek=Gn(Ut(this,this.handleMouseSeek),Ys),this.handleMouseUpHandler_=s=>this.handleMouseUp(s),this.handleMouseDownHandler_=s=>this.handleMouseDown(s),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(e){const i=this.getChild("seekBar");if(!i)return;const s=i.getChild("playProgressBar"),n=i.getChild("mouseTimeDisplay");if(!s&&!n)return;const r=i.el(),o=Sc(r);let l=Bf(r,e).x;l=jc(l,0,1),n&&n.update(o,l),s&&s.update(o,i.getProgress())}handleMouseSeek(e){const i=this.getChild("seekBar");i&&i.handleMouseMove(e)}enabled(){return this.enabled_}disable(){if(this.children().forEach(e=>e.disable&&e.disable()),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,["mousemove","touchmove"],this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&Fn(this.player_.play())}}enable(){this.children().forEach(e=>e.enable&&e.enable()),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,["mousemove","touchmove"],this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)}handleMouseDown(e){const i=this.el_.ownerDocument,s=this.getChild("seekBar");s&&s.handleMouseDown(e),this.on(i,"mousemove",this.throttledHandleMouseSeek),this.on(i,"touchmove",this.throttledHandleMouseSeek),this.on(i,"mouseup",this.handleMouseUpHandler_),this.on(i,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const i=this.getChild("seekBar");i&&i.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()}}X1.prototype.options_={children:["seekBar"]};_e.registerComponent("ProgressControl",X1);class K1 extends Ni{constructor(e,i){super(e,i),this.setIcon("picture-in-picture-enter"),this.on(e,["enterpictureinpicture","leavepictureinpicture"],s=>this.handlePictureInPictureChange(s)),this.on(e,["disablepictureinpicturechanged","loadedmetadata"],s=>this.handlePictureInPictureEnabledChange(s)),this.on(e,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>this.handlePictureInPictureAudioModeChange()),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control vjs-hidden ${super.buildCSSClass()}`}handlePictureInPictureAudioModeChange(){if(!(this.player_.currentType().substring(0,5)==="audio"||this.player_.audioPosterMode()||this.player_.audioOnlyMode())){this.show();return}this.player_.isInPictureInPicture()&&this.player_.exitPictureInPicture(),this.hide()}handlePictureInPictureEnabledChange(){ke.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in $?this.enable():this.disable()}handlePictureInPictureChange(e){this.player_.isInPictureInPicture()?(this.setIcon("picture-in-picture-exit"),this.controlText("Exit Picture-in-Picture")):(this.setIcon("picture-in-picture-enter"),this.controlText("Picture-in-Picture")),this.handlePictureInPictureEnabledChange()}handleClick(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}show(){typeof ke.exitPictureInPicture=="function"&&super.show()}}K1.prototype.controlText_="Picture-in-Picture";_e.registerComponent("PictureInPictureToggle",K1);class Z1 extends Ni{constructor(e,i){super(e,i),this.setIcon("fullscreen-enter"),this.on(e,"fullscreenchange",s=>this.handleFullscreenChange(s)),ke[e.fsApi_.fullscreenEnabled]===!1&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(e){this.player_.isFullscreen()?(this.controlText("Exit Fullscreen"),this.setIcon("fullscreen-exit")):(this.controlText("Fullscreen"),this.setIcon("fullscreen-enter"))}handleClick(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}Z1.prototype.controlText_="Fullscreen";_e.registerComponent("FullscreenToggle",Z1);const uF=function(t,e){e.tech_&&!e.tech_.featuresVolumeControl&&t.addClass("vjs-hidden"),t.on(e,"loadstart",function(){e.tech_.featuresVolumeControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")})};class cF extends _e{createEl(){const e=super.createEl("div",{className:"vjs-volume-level"});return this.setIcon("circle",e),e.appendChild(super.createEl("span",{className:"vjs-control-text"})),e}}_e.registerComponent("VolumeLevel",cF);class hF extends _e{constructor(e,i){super(e,i),this.update=Gn(Ut(this,this.update),Ys)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(e,i,s,n){if(!s){const r=El(this.el_),o=El(this.player_.el()),l=e.width*i;if(!o||!r)return;const u=e.left-o.left+l,h=e.width-l+(o.right-e.right);let d=r.width/2;u<d?d+=d-u:h<d&&(d=h),d<0?d=0:d>r.width&&(d=r.width),this.el_.style.right=`-${d}px`}this.write(`${n}%`)}write(e){po(this.el_,e)}updateVolume(e,i,s,n,r){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(e,i,s,n.toFixed(0)),r&&r()})}}_e.registerComponent("VolumeLevelTooltip",hF);class Y1 extends _e{constructor(e,i){super(e,i),this.update=Gn(Ut(this,this.update),Ys)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,i,s){const n=100*i;this.getChild("volumeLevelTooltip").updateVolume(e,i,s,n,()=>{s?this.el_.style.bottom=`${e.height*i}px`:this.el_.style.left=`${e.width*i}px`})}}Y1.prototype.options_={children:["volumeLevelTooltip"]};_e.registerComponent("MouseVolumeLevelDisplay",Y1);class $f extends n0{constructor(e,i){super(e,i),this.on("slideractive",s=>this.updateLastVolume_(s)),this.on(e,"volumechange",s=>this.updateARIAAttributes(s)),e.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(e){Cc(e)&&super.handleMouseDown(e)}handleMouseMove(e){const i=this.getChild("mouseVolumeLevelDisplay");if(i){const s=this.el(),n=El(s),r=this.vertical();let o=Bf(s,e);o=r?o.y:o.x,o=jc(o,0,1),i.update(n,o,r)}Cc(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(e){const i=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",i),this.el_.setAttribute("aria-valuetext",i+"%")}volumeAsPercentage_(){return Math.round(this.player_.volume()*100)}updateLastVolume_(){const e=this.player_.volume();this.one("sliderinactive",()=>{this.player_.volume()===0&&this.player_.lastVolume_(e)})}}$f.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};!Mi&&!mn&&$f.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");$f.prototype.playerEvent="volumechange";_e.registerComponent("VolumeBar",$f);class Q1 extends _e{constructor(e,i={}){i.vertical=i.vertical||!1,(typeof i.volumeBar>"u"||Cl(i.volumeBar))&&(i.volumeBar=i.volumeBar||{},i.volumeBar.vertical=i.vertical),super(e,i),uF(this,e),this.throttledHandleMouseMove=Gn(Ut(this,this.handleMouseMove),Ys),this.handleMouseUpHandler_=s=>this.handleMouseUp(s),this.on("mousedown",s=>this.handleMouseDown(s)),this.on("touchstart",s=>this.handleMouseDown(s)),this.on("mousemove",s=>this.handleMouseMove(s)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${e}`})}handleMouseDown(e){const i=this.el_.ownerDocument;this.on(i,"mousemove",this.throttledHandleMouseMove),this.on(i,"touchmove",this.throttledHandleMouseMove),this.on(i,"mouseup",this.handleMouseUpHandler_),this.on(i,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const i=this.el_.ownerDocument;this.off(i,"mousemove",this.throttledHandleMouseMove),this.off(i,"touchmove",this.throttledHandleMouseMove),this.off(i,"mouseup",this.handleMouseUpHandler_),this.off(i,"touchend",this.handleMouseUpHandler_)}handleMouseMove(e){this.volumeBar.handleMouseMove(e)}}Q1.prototype.options_={children:["volumeBar"]};_e.registerComponent("VolumeControl",Q1);const dF=function(t,e){e.tech_&&!e.tech_.featuresMuteControl&&t.addClass("vjs-hidden"),t.on(e,"loadstart",function(){e.tech_.featuresMuteControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")})};class J1 extends Ni{constructor(e,i){super(e,i),dF(this,e),this.on(e,["loadstart","volumechange"],s=>this.update(s))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(e){const i=this.player_.volume(),s=this.player_.lastVolume_();if(i===0){const n=s<.1?.1:s;this.player_.volume(n),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())}update(e){this.updateIcon_(),this.updateControlText_()}updateIcon_(){const e=this.player_.volume();let i=3;this.setIcon("volume-high"),Mi&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),e===0||this.player_.muted()?(this.setIcon("volume-mute"),i=0):e<.33?(this.setIcon("volume-low"),i=1):e<.67&&(this.setIcon("volume-medium"),i=2),Rf(this.el_,[0,1,2,3].reduce((s,n)=>s+`${n?" ":""}vjs-vol-${n}`,"")),na(this.el_,`vjs-vol-${i}`)}updateControlText_(){const i=this.player_.muted()||this.player_.volume()===0?"Unmute":"Mute";this.controlText()!==i&&this.controlText(i)}}J1.prototype.controlText_="Mute";_e.registerComponent("MuteToggle",J1);class eC extends _e{constructor(e,i={}){typeof i.inline<"u"?i.inline=i.inline:i.inline=!0,(typeof i.volumeControl>"u"||Cl(i.volumeControl))&&(i.volumeControl=i.volumeControl||{},i.volumeControl.vertical=!i.inline),super(e,i),this.handleKeyPressHandler_=s=>this.handleKeyPress(s),this.on(e,["loadstart"],s=>this.volumePanelState_(s)),this.on(this.muteToggle,"keyup",s=>this.handleKeyPress(s)),this.on(this.volumeControl,"keyup",s=>this.handleVolumeControlKeyUp(s)),this.on("keydown",s=>this.handleKeyPress(s)),this.on("mouseover",s=>this.handleMouseOver(s)),this.on("mouseout",s=>this.handleMouseOut(s)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${e}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(e){e.key==="Escape"&&this.muteToggle.focus()}handleMouseOver(e){this.addClass("vjs-hover"),Ls(ke,"keyup",this.handleKeyPressHandler_)}handleMouseOut(e){this.removeClass("vjs-hover"),Ri(ke,"keyup",this.handleKeyPressHandler_)}handleKeyPress(e){e.key==="Escape"&&this.handleMouseOut()}}eC.prototype.options_={children:["muteToggle","volumeControl"]};_e.registerComponent("VolumePanel",eC);class tC extends Ni{constructor(e,i){super(e,i),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`forward-${this.skipTime}`),this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipForwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`}handleClick(e){if(isNaN(this.player_.duration()))return;const i=this.player_.currentTime(),s=this.player_.liveTracker,n=s&&s.isLive()?s.seekableEnd():this.player_.duration();let r;i+this.skipTime<=n?r=i+this.skipTime:r=n,this.player_.currentTime(r)}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}}tC.prototype.controlText_="Skip Forward";_e.registerComponent("SkipForward",tC);class iC extends Ni{constructor(e,i){super(e,i),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`replay-${this.skipTime}`),this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipBackwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`}handleClick(e){const i=this.player_.currentTime(),s=this.player_.liveTracker,n=s&&s.isLive()&&s.seekableStart();let r;n&&i-this.skipTime<=n?r=n:i>=this.skipTime?r=i-this.skipTime:r=0,this.player_.currentTime(r)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}}iC.prototype.controlText_="Skip Backward";_e.registerComponent("SkipBackward",iC);class sC extends _e{constructor(e,i){super(e,i),i&&(this.menuButton_=i.menuButton),this.focusedChild_=-1,this.on("keydown",s=>this.handleKeyDown(s)),this.boundHandleBlur_=s=>this.handleBlur(s),this.boundHandleTapClick_=s=>this.handleTapClick(s)}addEventListenerForItem(e){e instanceof _e&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(e){e instanceof _e&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))}removeChild(e){typeof e=="string"&&(e=this.getChild(e)),this.removeEventListenerForItem(e),super.removeChild(e)}addItem(e){const i=this.addChild(e);i&&this.addEventListenerForItem(i)}createEl(){const e=this.options_.contentElType||"ul";this.contentEl_=Ye(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");const i=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return i.appendChild(this.contentEl_),Ls(i,"click",function(s){s.preventDefault(),s.stopImmediatePropagation()}),i}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(e){const i=e.relatedTarget||ke.activeElement;if(!this.children().some(s=>s.el()===i)){const s=this.menuButton_;s&&s.buttonPressed_&&i!==s.el().firstChild&&s.unpressButton()}}handleTapClick(e){if(this.menuButton_){this.menuButton_.unpressButton();const i=this.children();if(!Array.isArray(i))return;const s=i.filter(n=>n.el()===e.target)[0];if(!s)return;s.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}}handleKeyDown(e){e.key==="ArrowLeft"||e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(e.key==="ArrowRight"||e.key==="ArrowUp")&&(e.preventDefault(),e.stopPropagation(),this.stepBack())}stepForward(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_+1),this.focus(e)}stepBack(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_-1),this.focus(e)}focus(e=0){const i=this.children().slice();i.length&&i[0].hasClass("vjs-menu-title")&&i.shift(),i.length>0&&(e<0?e=0:e>=i.length&&(e=i.length-1),this.focusedChild_=e,i[e].el_.focus())}}_e.registerComponent("Menu",sC);class o0 extends _e{constructor(e,i={}){super(e,i),this.menuButton_=new Ni(e,i),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const s=Ni.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+s,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const n=r=>this.handleClick(r);this.handleMenuKeyUp_=r=>this.handleMenuKeyUp(r),this.on(this.menuButton_,"tap",n),this.on(this.menuButton_,"click",n),this.on(this.menuButton_,"keydown",r=>this.handleKeyDown(r)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),Ls(ke,"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",r=>this.handleMouseLeave(r)),this.on("keydown",r=>this.handleSubmenuKeyDown(r))}update(){const e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const e=new sC(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const i=Ye("li",{className:"vjs-menu-title",textContent:ti(this.options_.title),tabIndex:-1}),s=new _e(this.player_,{el:i});e.addItem(s)}if(this.items=this.createItems(),this.items)for(let i=0;i<this.items.length;i++)e.addItem(this.items[i]);return e}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}setIcon(e){super.setIcon(e,this.menuButton_.el_)}buildWrapperCSSClass(){let e="vjs-menu-button";this.options_.inline===!0?e+="-inline":e+="-popup";const i=Ni.prototype.buildCSSClass();return`vjs-menu-button ${e} ${i} ${super.buildCSSClass()}`}buildCSSClass(){let e="vjs-menu-button";return this.options_.inline===!0?e+="-inline":e+="-popup",`vjs-menu-button ${e} ${super.buildCSSClass()}`}controlText(e,i=this.menuButton_.el()){return this.menuButton_.controlText(e,i)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(e){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(e){this.removeClass("vjs-hover"),Ri(ke,"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(e){e.key==="Escape"||e.key==="Tab"?(this.buttonPressed_&&this.unpressButton(),!e.key==="Tab"&&(e.preventDefault(),this.menuButton_.focus())):(e.key==="Up"||e.key==="Down"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))}handleMenuKeyUp(e){(e.key==="Escape"||e.key==="Tab")&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(e){this.handleSubmenuKeyDown(e)}handleSubmenuKeyDown(e){(e.key==="Escape"||e.key==="Tab")&&(this.buttonPressed_&&this.unpressButton(),!e.key==="Tab"&&(e.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Mi&&f1())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}_e.registerComponent("MenuButton",o0);class a0 extends o0{constructor(e,i){const s=i.tracks;if(super(e,i),this.items.length<=1&&this.hide(),!s)return;const n=Ut(this,this.update);s.addEventListener("removetrack",n),s.addEventListener("addtrack",n),s.addEventListener("labelchange",n),this.player_.on("ready",n),this.player_.on("dispose",function(){s.removeEventListener("removetrack",n),s.removeEventListener("addtrack",n),s.removeEventListener("labelchange",n)})}}_e.registerComponent("TrackButton",a0);class zc extends Vf{constructor(e,i){super(e,i),this.selectable=i.selectable,this.isSelected_=i.selected||!1,this.multiSelectable=i.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(e,i,s){this.nonIconControl=!0;const n=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},i),s),r=Ye("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)});return this.player_.options_.experimentalSvgIcons?n.appendChild(r):n.replaceChild(r,n.querySelector(".vjs-icon-placeholder")),n}handleKeyDown(e){["Tab","Escape","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"].includes(e.key)||super.handleKeyDown(e)}handleClick(e){this.selected(!0)}selected(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}_e.registerComponent("MenuItem",zc);class Hc extends zc{constructor(e,i){const s=i.track,n=e.textTracks();i.label=s.label||s.language||"Unknown",i.selected=s.mode==="showing",super(e,i),this.track=s,this.kinds=(i.kinds||[i.kind||this.track.kind]).filter(Boolean);const r=(...l)=>{this.handleTracksChange.apply(this,l)},o=(...l)=>{this.handleSelectedLanguageChange.apply(this,l)};if(e.on(["loadstart","texttrackchange"],r),n.addEventListener("change",r),n.addEventListener("selectedlanguagechange",o),this.on("dispose",function(){e.off(["loadstart","texttrackchange"],r),n.removeEventListener("change",r),n.removeEventListener("selectedlanguagechange",o)}),n.onchange===void 0){let l;this.on(["tap","click"],function(){if(typeof $.Event!="object")try{l=new $.Event("change")}catch{}l||(l=ke.createEvent("Event"),l.initEvent("change",!0,!0)),n.dispatchEvent(l)})}this.handleTracksChange()}handleClick(e){const i=this.track,s=this.player_.textTracks();if(super.handleClick(e),!!s)for(let n=0;n<s.length;n++){const r=s[n];this.kinds.indexOf(r.kind)!==-1&&(r===i?r.mode!=="showing"&&(r.mode="showing"):r.mode!=="disabled"&&(r.mode="disabled"))}}handleTracksChange(e){const i=this.track.mode==="showing";i!==this.isSelected_&&this.selected(i)}handleSelectedLanguageChange(e){if(this.track.mode==="showing"){const i=this.player_.cache_.selectedLanguage;if(i&&i.enabled&&i.language===this.track.language&&i.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}}_e.registerComponent("TextTrackMenuItem",Hc);class nC extends Hc{constructor(e,i){i.track={player:e,kind:i.kind,kinds:i.kinds,default:!1,mode:"disabled"},i.kinds||(i.kinds=[i.kind]),i.label?i.track.label=i.label:i.track.label=i.kinds.join(" and ")+" off",i.selectable=!0,i.multiSelectable=!1,super(e,i)}handleTracksChange(e){const i=this.player().textTracks();let s=!0;for(let n=0,r=i.length;n<r;n++){const o=i[n];if(this.options_.kinds.indexOf(o.kind)>-1&&o.mode==="showing"){s=!1;break}}s!==this.isSelected_&&this.selected(s)}handleSelectedLanguageChange(e){const i=this.player().textTracks();let s=!0;for(let n=0,r=i.length;n<r;n++){const o=i[n];if(["captions","descriptions","subtitles"].indexOf(o.kind)>-1&&o.mode==="showing"){s=!1;break}}s&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}}_e.registerComponent("OffTextTrackMenuItem",nC);class Hl extends a0{constructor(e,i={}){i.tracks=e.textTracks(),super(e,i)}createItems(e=[],i=Hc){let s;this.label_&&(s=`${this.label_} off`),e.push(new nC(this.player_,{kinds:this.kinds_,kind:this.kind_,label:s})),this.hideThreshold_+=1;const n=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let r=0;r<n.length;r++){const o=n[r];if(this.kinds_.indexOf(o.kind)>-1){const l=new i(this.player_,{track:o,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});l.addClass(`vjs-${o.kind}-menu-item`),e.push(l)}}return e}}_e.registerComponent("TextTrackButton",Hl);class rC extends zc{constructor(e,i){const s=i.track,n=i.cue,r=e.currentTime();i.selectable=!0,i.multiSelectable=!1,i.label=n.text,i.selected=n.startTime<=r&&r<n.endTime,super(e,i),this.track=s,this.cue=n}handleClick(e){super.handleClick(),this.player_.currentTime(this.cue.startTime)}}_e.registerComponent("ChaptersTrackMenuItem",rC);class l0 extends Hl{constructor(e,i,s){super(e,i,s),this.setIcon("chapters"),this.selectCurrentItem_=()=>{this.items.forEach(n=>{n.selected(this.track_.activeCues[0]===n.cue)})}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(e){if(e&&e.track&&e.track.kind!=="chapters")return;const i=this.findChaptersTrack();i!==this.track_?(this.setTrack(i),super.update()):(!this.items||i&&i.cues&&i.cues.length!==this.items.length)&&super.update()}setTrack(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){const i=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);i&&i.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";const i=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);i&&i.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){const e=this.player_.textTracks()||[];for(let i=e.length-1;i>=0;i--){const s=e[i];if(s.kind===this.kind_)return s}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(ti(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){const e=[];if(!this.track_)return e;const i=this.track_.cues;if(!i)return e;for(let s=0,n=i.length;s<n;s++){const r=i[s],o=new rC(this.player_,{track:this.track_,cue:r});e.push(o)}return e}}l0.prototype.kind_="chapters";l0.prototype.controlText_="Chapters";_e.registerComponent("ChaptersButton",l0);class u0 extends Hl{constructor(e,i,s){super(e,i,s),this.setIcon("audio-description");const n=e.textTracks(),r=Ut(this,this.handleTracksChange);n.addEventListener("change",r),this.on("dispose",function(){n.removeEventListener("change",r)})}handleTracksChange(e){const i=this.player().textTracks();let s=!1;for(let n=0,r=i.length;n<r;n++){const o=i[n];if(o.kind!==this.kind_&&o.mode==="showing"){s=!0;break}}s?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}}u0.prototype.kind_="descriptions";u0.prototype.controlText_="Descriptions";_e.registerComponent("DescriptionsButton",u0);class c0 extends Hl{constructor(e,i,s){super(e,i,s),this.setIcon("subtitles")}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}}c0.prototype.kind_="subtitles";c0.prototype.controlText_="Subtitles";_e.registerComponent("SubtitlesButton",c0);class h0 extends Hc{constructor(e,i){i.track={player:e,kind:i.kind,label:i.kind+" settings",selectable:!1,default:!1,mode:"disabled"},i.selectable=!1,i.name="CaptionSettingsMenuItem",super(e,i),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+i.kind+" settings dialog")}handleClick(e){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}}_e.registerComponent("CaptionSettingsMenuItem",h0);class d0 extends Hl{constructor(e,i,s){super(e,i,s),this.setIcon("captions")}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new h0(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(e)}}d0.prototype.kind_="captions";d0.prototype.controlText_="Captions";_e.registerComponent("CaptionsButton",d0);class oC extends Hc{createEl(e,i,s){const n=super.createEl(e,i,s),r=n.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(this.player_.options_.experimentalSvgIcons?this.setIcon("captions",n):r.appendChild(Ye("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),r.appendChild(Ye("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),n}}_e.registerComponent("SubsCapsMenuItem",oC);class f0 extends Hl{constructor(e,i={}){super(e,i),this.label_="subtitles",this.setIcon("subtitles"),["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions",this.setIcon("captions")),this.menuButton_.controlText(ti(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new h0(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=super.createItems(e,oC),e}}f0.prototype.kinds_=["captions","subtitles"];f0.prototype.controlText_="Subtitles";_e.registerComponent("SubsCapsButton",f0);class aC extends zc{constructor(e,i){const s=i.track,n=e.audioTracks();i.label=s.label||s.language||"Unknown",i.selected=s.enabled,super(e,i),this.track=s,this.addClass(`vjs-${s.kind}-menu-item`);const r=(...o)=>{this.handleTracksChange.apply(this,o)};n.addEventListener("change",r),this.on("dispose",()=>{n.removeEventListener("change",r)})}createEl(e,i,s){const n=super.createEl(e,i,s),r=n.querySelector(".vjs-menu-item-text");return["main-desc","descriptions"].indexOf(this.options_.track.kind)>=0&&(r.appendChild(Ye("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),r.appendChild(Ye("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),n}handleClick(e){if(super.handleClick(e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){const i=this.player_.audioTracks();for(let s=0;s<i.length;s++){const n=i[s];n!==this.track&&(n.enabled=n===this.track)}}}handleTracksChange(e){this.selected(this.track.enabled)}}_e.registerComponent("AudioTrackMenuItem",aC);class lC extends a0{constructor(e,i={}){i.tracks=e.audioTracks(),super(e,i),this.setIcon("audio")}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(e=[]){this.hideThreshold_=1;const i=this.player_.audioTracks();for(let s=0;s<i.length;s++){const n=i[s];e.push(new aC(this.player_,{track:n,selectable:!0,multiSelectable:!1}))}return e}}lC.prototype.controlText_="Audio Track";_e.registerComponent("AudioTrackButton",lC);class p0 extends zc{constructor(e,i){const s=i.rate,n=parseFloat(s,10);i.label=s,i.selected=n===e.playbackRate(),i.selectable=!0,i.multiSelectable=!1,super(e,i),this.label=s,this.rate=n,this.on(e,"ratechange",r=>this.update(r))}handleClick(e){super.handleClick(),this.player().playbackRate(this.rate)}update(e){this.selected(this.player().playbackRate()===this.rate)}}p0.prototype.contentElType="button";_e.registerComponent("PlaybackRateMenuItem",p0);class uC extends o0{constructor(e,i){super(e,i),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(e,"loadstart",s=>this.updateVisibility(s)),this.on(e,"ratechange",s=>this.updateLabel(s)),this.on(e,"playbackrateschange",s=>this.handlePlaybackRateschange(s))}createEl(){const e=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=Ye("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const e=this.playbackRates(),i=[];for(let s=e.length-1;s>=0;s--)i.push(new p0(this.player(),{rate:e[s]+"x"}));return i}handlePlaybackRateschange(e){this.update()}playbackRates(){const e=this.player();return e.playbackRates&&e.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}}uC.prototype.controlText_="Playback Rate";_e.registerComponent("PlaybackRateMenuButton",uC);class cC extends _e{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(e="div",i={},s={}){return i.className||(i.className=this.buildCSSClass()),super.createEl(e,i,s)}}_e.registerComponent("Spacer",cC);class fF extends cC{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:""})}}_e.registerComponent("CustomControlSpacer",fF);class hC extends _e{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}hC.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","pictureInPictureToggle","fullscreenToggle"]};_e.registerComponent("ControlBar",hC);class dC extends jl{constructor(e,i){super(e,i),this.on(e,"error",s=>{this.open(s)})}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const e=this.player().error();return e?this.localize(e.message):""}}dC.prototype.options_=Object.assign({},jl.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});_e.registerComponent("ErrorDisplay",dC);class fC extends _e{constructor(e,i={}){super(e,i),this.el_.setAttribute("aria-labelledby",this.selectLabelledbyIds)}createEl(){return this.selectLabelledbyIds=[this.options_.legendId,this.options_.labelId].join(" ").trim(),Ye("select",{id:this.options_.id},{},this.options_.SelectOptions.map(i=>{const s=(this.options_.labelId?this.options_.labelId:`vjs-track-option-${Zs()}`)+"-"+i[1].replace(/\W+/g,""),n=Ye("option",{id:s,value:this.localize(i[0]),textContent:this.localize(i[1])});return n.setAttribute("aria-labelledby",`${this.selectLabelledbyIds} ${s}`),n}))}}_e.registerComponent("TextTrackSelect",fC);class oa extends _e{constructor(e,i={}){super(e,i);const s=Ye("legend",{textContent:this.localize(this.options_.legendText),id:this.options_.legendId});this.el().appendChild(s);const n=this.options_.selects;for(const r of n){const o=this.options_.selectConfigs[r],l=o.className,u=o.id.replace("%s",this.options_.id_);let h=null;const d=`vjs_select_${Zs()}`;if(this.options_.type==="colors"){h=Ye("span",{className:l});const _=Ye("label",{id:u,className:"vjs-label",textContent:this.localize(o.label)});_.setAttribute("for",d),h.appendChild(_)}const m=new fC(e,{SelectOptions:o.options,legendId:this.options_.legendId,id:d,labelId:u});this.addChild(m),this.options_.type==="colors"&&(h.appendChild(m.el()),this.el().appendChild(h))}}createEl(){return Ye("fieldset",{className:this.options_.className})}}_e.registerComponent("TextTrackFieldset",oa);class pC extends _e{constructor(e,i={}){super(e,i);const s=this.options_.textTrackComponentid,n=new oa(e,{id_:s,legendId:`captions-text-legend-${s}`,legendText:this.localize("Text"),className:"vjs-fg vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(n);const r=new oa(e,{id_:s,legendId:`captions-background-${s}`,legendText:this.localize("Text Background"),className:"vjs-bg vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(r);const o=new oa(e,{id_:s,legendId:`captions-window-${s}`,legendText:this.localize("Caption Area Background"),className:"vjs-window vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(o)}createEl(){return Ye("div",{className:"vjs-track-settings-colors"})}}_e.registerComponent("TextTrackSettingsColors",pC);class mC extends _e{constructor(e,i={}){super(e,i);const s=this.options_.textTrackComponentid,n=new oa(e,{id_:s,legendId:`captions-font-size-${s}`,legendText:"Font Size",className:"vjs-font-percent vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(n);const r=new oa(e,{id_:s,legendId:`captions-edge-style-${s}`,legendText:this.localize("Text Edge Style"),className:"vjs-edge-style vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(r);const o=new oa(e,{id_:s,legendId:`captions-font-family-${s}`,legendText:this.localize("Font Family"),className:"vjs-font-family vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(o)}createEl(){return Ye("div",{className:"vjs-track-settings-font"})}}_e.registerComponent("TextTrackSettingsFont",mC);class gC extends _e{constructor(e,i={}){super(e,i);const s=new Ni(e,{controlText:this.localize("restore all settings to the default values"),className:"vjs-default-button"});s.el().classList.remove("vjs-control","vjs-button"),s.el().textContent=this.localize("Reset"),this.addChild(s);const n=this.localize("Done"),r=new Ni(e,{controlText:n,className:"vjs-done-button"});r.el().classList.remove("vjs-control","vjs-button"),r.el().textContent=n,this.addChild(r)}createEl(){return Ye("div",{className:"vjs-track-settings-controls"})}}_e.registerComponent("TrackSettingsControls",gC);const Bm="vjs-text-track-settings",lT=["#000","Black"],uT=["#00F","Blue"],cT=["#0FF","Cyan"],hT=["#0F0","Green"],dT=["#F0F","Magenta"],fT=["#F00","Red"],pT=["#FFF","White"],mT=["#FF0","Yellow"],Fm=["1","Opaque"],Um=["0.5","Semi-Transparent"],gT=["0","Transparent"],Qr={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[lT,pT,fT,hT,uT,mT,dT,cT],className:"vjs-bg-color"},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[Fm,Um,gT],className:"vjs-bg-opacity vjs-opacity"},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[pT,lT,fT,hT,uT,mT,dT,cT],className:"vjs-text-color"},edgeStyle:{selector:".vjs-edge-style > select",id:"",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Drop shadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:t=>t==="1.00"?null:Number(t)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[Fm,Um],className:"vjs-text-opacity vjs-opacity"},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color",className:"vjs-window-color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[gT,Um,Fm],className:"vjs-window-opacity vjs-opacity"}};Qr.windowColor.options=Qr.backgroundColor.options;function _C(t,e){if(e&&(t=e(t)),t&&t!=="none")return t}function pF(t,e){const i=t.options[t.options.selectedIndex].value;return _C(i,e)}function mF(t,e,i){if(e){for(let s=0;s<t.options.length;s++)if(_C(t.options[s].value,i)===e){t.selectedIndex=s;break}}}class gF extends jl{constructor(e,i){i.temporary=!1,super(e,i),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.renderModalComponents(e),this.endDialog=Ye("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),i.persistTextTrackSettings===void 0&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.bindFunctionsToSelectsAndButtons(),this.options_.persistTextTrackSettings&&this.restoreSettings()}renderModalComponents(e){const i=new pC(e,{textTrackComponentid:this.id_,selectConfigs:Qr,fieldSets:[["color","textOpacity"],["backgroundColor","backgroundOpacity"],["windowColor","windowOpacity"]]});this.addChild(i);const s=new mC(e,{textTrackComponentid:this.id_,selectConfigs:Qr,fieldSets:[["fontPercent"],["edgeStyle"],["fontFamily"]]});this.addChild(s);const n=new gC(e);this.addChild(n)}bindFunctionsToSelectsAndButtons(){this.on(this.$(".vjs-done-button"),["click","tap"],()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),["click","tap"],()=>{this.setDefaults(),this.updateDisplay()}),nl(Qr,e=>{this.on(this.$(e.selector),"change",this.updateDisplay)})}dispose(){this.endDialog=null,super.dispose()}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return o1(Qr,(e,i,s)=>{const n=pF(this.$(i.selector),i.parser);return n!==void 0&&(e[s]=n),e},{})}setValues(e){nl(Qr,(i,s)=>{mF(this.$(i.selector),e[s],i.parser)})}setDefaults(){nl(Qr,e=>{const i=e.hasOwnProperty("default")?e.default:0;this.$(e.selector).selectedIndex=i})}restoreSettings(){let e;try{e=JSON.parse($.localStorage.getItem(Bm))}catch(i){ut.warn(i)}e&&this.setValues(e)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;const e=this.getValues();try{Object.keys(e).length?$.localStorage.setItem(Bm,JSON.stringify(e)):$.localStorage.removeItem(Bm)}catch(i){ut.warn(i)}}updateDisplay(){const e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()}handleLanguagechange(){this.fill(),this.renderModalComponents(this.player_),this.bindFunctionsToSelectsAndButtons()}}_e.registerComponent("TextTrackSettings",gF);class _F extends _e{constructor(e,i){let s=i.ResizeObserver||$.ResizeObserver;i.ResizeObserver===null&&(s=!1);const n=kt({createEl:!s,reportTouchActivity:!1},i);super(e,n),this.ResizeObserver=i.ResizeObserver||$.ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=P1(()=>{this.resizeHandler()},100,!1,this),s?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(e.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;const r=this.debouncedHandler_;let o=this.unloadListener_=function(){Ri(this,"resize",r),Ri(this,"unload",o),o=null};Ls(this.el_.contentWindow,"unload",o),Ls(this.el_.contentWindow,"resize",r)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}}_e.registerComponent("ResizeManager",_F);const yF={trackingThreshold:20,liveTolerance:15};class vF extends _e{constructor(e,i){const s=kt(yF,i,{createEl:!1});super(e,s),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=n=>this.handlePlay(n),this.handleFirstTimeupdate_=n=>this.handleFirstTimeupdate(n),this.handleSeeked_=n=>this.handleSeeked(n),this.seekToLiveEdge_=n=>this.seekToLiveEdge(n),this.reset_(),this.on(this.player_,"durationchange",n=>this.handleDurationchange(n)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){const e=this.player_.seekable();if(!e||!e.length)return;const i=Number($.performance.now().toFixed(4)),s=this.lastTime_===-1?0:(i-this.lastTime_)/1e3;this.lastTime_=i,this.pastSeekEnd_=this.pastSeekEnd()+s;const n=this.liveCurrentTime(),r=this.player_.currentTime();let o=this.player_.paused()||this.seekedBehindLive_||Math.abs(n-r)>this.options_.liveTolerance;(!this.timeupdateSeen_||n===1/0)&&(o=!1),o!==this.behindLiveEdge_&&(this.behindLiveEdge_=o,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,Ys),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const e=this.player_.seekable(),i=[];let s=e?e.length:0;for(;s--;)i.push(e.end(s));return i.length?i.sort()[i.length-1]:1/0}seekableStart(){const e=this.player_.seekable(),i=[];let s=e?e.length:0;for(;s--;)i.push(e.start(s));return i.length?i.sort()[0]:0}liveWindow(){const e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){const e=this.seekableEnd();return this.lastSeekEnd_!==-1&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return typeof this.trackingInterval_=="number"}seekToLiveEdge(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}}_e.registerComponent("LiveTracker",vF);class bF extends _e{constructor(e,i){super(e,i),this.on("statechanged",s=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:Ye("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${Zs()}`}),description:Ye("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${Zs()}`})},Ye("div",{className:"vjs-title-bar"},{},a1(this.els))}updateDom_(){const e=this.player_.tech_,i=e&&e.el_,s={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(n=>{const r=this.state[n],o=this.els[n],l=s[n];Ff(o),r&&po(o,r),i&&(i.removeAttribute(l),r&&i.setAttribute(l,o.id))}),this.state.title||this.state.description?this.show():this.hide()}update(e){this.setState(e)}dispose(){const e=this.player_.tech_,i=e&&e.el_;i&&(i.removeAttribute("aria-labelledby"),i.removeAttribute("aria-describedby")),super.dispose(),this.els=null}}_e.registerComponent("TitleBar",bF);const TF={initialDisplay:4e3,position:[],takeFocus:!1};class xF extends Ni{constructor(e,i){i=kt(TF,i),super(e,i),this.controlText(i.controlText),this.hide(),this.on(this.player_,["useractive","userinactive"],s=>{this.removeClass("force-display")})}buildCSSClass(){return`vjs-transient-button focus-visible ${this.options_.position.map(e=>`vjs-${e}`).join(" ")}`}createEl(){const e=Ye("button",{},{type:"button",class:this.buildCSSClass()},Ye("span"));return this.controlTextEl_=e.querySelector("span"),e}show(){super.show(),this.addClass("force-display"),this.options_.takeFocus&&this.el().focus({preventScroll:!0}),this.forceDisplayTimeout=this.player_.setTimeout(()=>{this.removeClass("force-display")},this.options_.initialDisplay)}hide(){this.removeClass("force-display"),super.hide()}dispose(){this.player_.clearTimeout(this.forceDisplayTimeout),super.dispose()}}_e.registerComponent("TransientButton",xF);const Pg=t=>{const e=t.el();if(e.hasAttribute("src"))return t.triggerSourceset(e.src),!0;const i=t.$$("source"),s=[];let n="";if(!i.length)return!1;for(let r=0;r<i.length;r++){const o=i[r].src;o&&s.indexOf(o)===-1&&s.push(o)}return s.length?(s.length===1&&(n=s[0]),t.triggerSourceset(n),!0):!1},SF=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(t){const e=ke.createElement(this.nodeName.toLowerCase());e.innerHTML=t;const i=ke.createDocumentFragment();for(;e.childNodes.length;)i.appendChild(e.childNodes[0]);return this.innerText="",$.Element.prototype.appendChild.call(this,i),this.innerHTML}}),yC=(t,e)=>{let i={};for(let s=0;s<t.length&&(i=Object.getOwnPropertyDescriptor(t[s],e),!(i&&i.set&&i.get));s++);return i.enumerable=!0,i.configurable=!0,i},CF=t=>yC([t.el(),$.HTMLMediaElement.prototype,$.Element.prototype,SF],"innerHTML"),_T=function(t){const e=t.el();if(e.resetSourceWatch_)return;const i={},s=CF(t),n=r=>(...o)=>{const l=r.apply(e,o);return Pg(t),l};["append","appendChild","insertAdjacentHTML"].forEach(r=>{e[r]&&(i[r]=e[r],e[r]=n(i[r]))}),Object.defineProperty(e,"innerHTML",kt(s,{set:n(s.set)})),e.resetSourceWatch_=()=>{e.resetSourceWatch_=null,Object.keys(i).forEach(r=>{e[r]=i[r]}),Object.defineProperty(e,"innerHTML",s)},t.one("sourceset",e.resetSourceWatch_)},wF=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?j1($.Element.prototype.getAttribute.call(this,"src")):""},set(t){return $.Element.prototype.setAttribute.call(this,"src",t),t}}),EF=t=>yC([t.el(),$.HTMLMediaElement.prototype,wF],"src"),AF=function(t){if(!t.featuresSourceset)return;const e=t.el();if(e.resetSourceset_)return;const i=EF(t),s=e.setAttribute,n=e.load;Object.defineProperty(e,"src",kt(i,{set:r=>{const o=i.set.call(e,r);return t.triggerSourceset(e.src),o}})),e.setAttribute=(r,o)=>{const l=s.call(e,r,o);return/src/i.test(r)&&t.triggerSourceset(e.src),l},e.load=()=>{const r=n.call(e);return Pg(t)||(t.triggerSourceset(""),_T(t)),r},e.currentSrc?t.triggerSourceset(e.currentSrc):Pg(t)||_T(t),e.resetSourceset_=()=>{e.resetSourceset_=null,e.load=n,e.setAttribute=s,Object.defineProperty(e,"src",i),e.resetSourceWatch_&&e.resetSourceWatch_()}};class Ve extends nt{constructor(e,i){super(e,i);const s=e.source;let n=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&this.el_.tagName==="VIDEO",s&&(this.el_.currentSrc!==s.src||e.tag&&e.tag.initNetworkState_===3)?this.setSource(s):this.handleLateInit_(this.el_),e.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const r=this.el_.childNodes;let o=r.length;const l=[];for(;o--;){const u=r[o];u.nodeName.toLowerCase()==="track"&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(u),this.remoteTextTracks().addTrack(u.track),this.textTracks().addTrack(u.track),!n&&!this.el_.hasAttribute("crossorigin")&&Hf(u.src)&&(n=!0)):l.push(u))}for(let u=0;u<l.length;u++)this.el_.removeChild(l[u])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&n&&ut.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),this.restoreMetadataTracksInIOSNativePlayer_(),(xc||Of)&&e.nativeControlsForTouch===!0&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),Ve.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){AF(this)}restoreMetadataTracksInIOSNativePlayer_(){const e=this.textTracks();let i;const s=()=>{i=[];for(let r=0;r<e.length;r++){const o=e[r];o.kind==="metadata"&&i.push({track:o,storedMode:o.mode})}};s(),e.addEventListener("change",s),this.on("dispose",()=>e.removeEventListener("change",s));const n=()=>{for(let r=0;r<i.length;r++){const o=i[r];o.track.mode==="disabled"&&o.track.mode!==o.storedMode&&(o.track.mode=o.storedMode)}e.removeEventListener("change",n)};this.on("webkitbeginfullscreen",()=>{e.removeEventListener("change",s),e.removeEventListener("change",n),e.addEventListener("change",n)}),this.on("webkitendfullscreen",()=>{e.removeEventListener("change",s),e.addEventListener("change",s),e.removeEventListener("change",n)})}overrideNative_(e,i){if(i!==this[`featuresNative${e}Tracks`])return;const s=e.toLowerCase();this[`${s}TracksListeners_`]&&Object.keys(this[`${s}TracksListeners_`]).forEach(n=>{this.el()[`${s}Tracks`].removeEventListener(n,this[`${s}TracksListeners_`][n])}),this[`featuresNative${e}Tracks`]=!i,this[`${s}TracksListeners_`]=null,this.proxyNativeTracksForType_(s)}overrideNativeAudioTracks(e){this.overrideNative_("Audio",e)}overrideNativeVideoTracks(e){this.overrideNative_("Video",e)}proxyNativeTracksForType_(e){const i=Ws[e],s=this.el()[i.getterName],n=this[i.getterName]();if(!this[`featuresNative${i.capitalName}Tracks`]||!s||!s.addEventListener)return;const r={change:l=>{const u={type:"change",target:n,currentTarget:n,srcElement:n};n.trigger(u),e==="text"&&this[Dl.remoteText.getterName]().trigger(u)},addtrack(l){n.addTrack(l.track)},removetrack(l){n.removeTrack(l.track)}},o=function(){const l=[];for(let u=0;u<n.length;u++){let h=!1;for(let d=0;d<s.length;d++)if(s[d]===n[u]){h=!0;break}h||l.push(n[u])}for(;l.length;)n.removeTrack(l.shift())};this[i.getterName+"Listeners_"]=r,Object.keys(r).forEach(l=>{const u=r[l];s.addEventListener(l,u),this.on("dispose",h=>s.removeEventListener(l,u))}),this.on("loadstart",o),this.on("dispose",l=>this.off("loadstart",o))}proxyNativeTracks_(){Ws.names.forEach(e=>{this.proxyNativeTracksForType_(e)})}createEl(){let e=this.options_.tag;if(!e||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(e){const s=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(s,e),Ve.disposeMediaElement(e),e=s}else{e=ke.createElement("video");const s=this.options_.tag&&Yr(this.options_.tag),n=kt({},s);(!xc||this.options_.nativeControlsForTouch!==!0)&&delete n.controls,g1(e,Object.assign(n,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&wl(e,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);const i=["loop","muted","playsinline","autoplay"];for(let s=0;s<i.length;s++){const n=i[s],r=this.options_[n];typeof r<"u"&&(r?wl(e,n,n):Nf(e,n),e[n]=r)}return e}handleLateInit_(e){if(e.networkState===0||e.networkState===3)return;if(e.readyState===0){let s=!1;const n=function(){s=!0};this.on("loadstart",n);const r=function(){s||this.trigger("loadstart")};this.on("loadedmetadata",r),this.ready(function(){this.off("loadstart",n),this.off("loadedmetadata",r),s||this.trigger("loadstart")});return}const i=["loadstart"];i.push("loadedmetadata"),e.readyState>=2&&i.push("loadeddata"),e.readyState>=3&&i.push("canplay"),e.readyState>=4&&i.push("canplaythrough"),this.ready(function(){i.forEach(function(s){this.trigger(s)},this)})}setScrubbing(e){this.isScrubbing_=e}scrubbing(){return this.isScrubbing_}setCurrentTime(e){try{this.isScrubbing_&&this.el_.fastSeek&&Mf?this.el_.fastSeek(e):this.el_.currentTime=e}catch(i){ut(i,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&mn&&Wn&&this.el_.currentTime===0){const e=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",e))};return this.on("timeupdate",e),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;const e=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},i=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",i),this.on("dispose",()=>{this.off("webkitbeginfullscreen",i),this.off("webkitendfullscreen",e)})}supportsFullScreen(){return typeof this.el_.webkitEnterFullScreen=="function"}enterFullScreen(){const e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)Fn(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(i){this.trigger("fullscreenerror",i)}},0);else try{e.webkitEnterFullScreen()}catch(i){this.trigger("fullscreenerror",i)}}exitFullScreen(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):super.requestVideoFrameCallback(e)}cancelVideoFrameCallback(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):super.cancelVideoFrameCallback(e)}src(e){if(e===void 0)return this.el_.src;this.setSrc(e)}addSourceElement(e,i){if(!e)return ut.error("Invalid source URL."),!1;const s={src:e};i&&(s.type=i);const n=Ye("source",{},s);return this.el_.appendChild(n),!0}removeSourceElement(e){if(!e)return ut.error("Source URL is required to remove the source element."),!1;const i=this.el_.querySelectorAll("source");for(const s of i)if(s.src===e)return this.el_.removeChild(s),!0;return ut.warn(`No matching source element found with src: ${e}`),!1}reset(){Ve.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(e){this.el_.controls=!!e}addTextTrack(e,i,s){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,i,s):super.addTextTrack(e,i,s)}createRemoteTextTrack(e){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(e);const i=ke.createElement("track");return e.kind&&(i.kind=e.kind),e.label&&(i.label=e.label),(e.language||e.srclang)&&(i.srclang=e.language||e.srclang),e.default&&(i.default=e.default),e.id&&(i.id=e.id),e.src&&(i.src=e.src),i}addRemoteTextTrack(e,i){const s=super.addRemoteTextTrack(e,i);return this.featuresNativeTextTracks&&this.el().appendChild(s),s}removeRemoteTextTrack(e){if(super.removeRemoteTextTrack(e),this.featuresNativeTextTracks){const i=this.$$("track");let s=i.length;for(;s--;)(e===i[s]||e===i[s].track)&&this.el().removeChild(i[s])}}getVideoPlaybackQuality(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();const e={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),$.performance&&(e.creationTime=$.performance.now()),e}}kf(Ve,"TEST_VID",function(){if(!Bl())return;const t=ke.createElement("video"),e=ke.createElement("track");return e.kind="captions",e.srclang="en",e.label="English",t.appendChild(e),t});Ve.isSupported=function(){try{Ve.TEST_VID.volume=.5}catch{return!1}return!!(Ve.TEST_VID&&Ve.TEST_VID.canPlayType)};Ve.canPlayType=function(t){return Ve.TEST_VID.canPlayType(t)};Ve.canPlaySource=function(t,e){return Ve.canPlayType(t.type)};Ve.canControlVolume=function(){try{const t=Ve.TEST_VID.volume;Ve.TEST_VID.volume=t/2+.1;const e=t!==Ve.TEST_VID.volume;return e&&Mi?($.setTimeout(()=>{Ve&&Ve.prototype&&(Ve.prototype.featuresVolumeControl=t!==Ve.TEST_VID.volume)}),!1):e}catch{return!1}};Ve.canMuteVolume=function(){try{const t=Ve.TEST_VID.muted;return Ve.TEST_VID.muted=!t,Ve.TEST_VID.muted?wl(Ve.TEST_VID,"muted","muted"):Nf(Ve.TEST_VID,"muted","muted"),t!==Ve.TEST_VID.muted}catch{return!1}};Ve.canControlPlaybackRate=function(){if(mn&&Wn&&If<58)return!1;try{const t=Ve.TEST_VID.playbackRate;return Ve.TEST_VID.playbackRate=t/2+.1,t!==Ve.TEST_VID.playbackRate}catch{return!1}};Ve.canOverrideAttributes=function(){try{const t=()=>{};Object.defineProperty(ke.createElement("video"),"src",{get:t,set:t}),Object.defineProperty(ke.createElement("audio"),"src",{get:t,set:t}),Object.defineProperty(ke.createElement("video"),"innerHTML",{get:t,set:t}),Object.defineProperty(ke.createElement("audio"),"innerHTML",{get:t,set:t})}catch{return!1}return!0};Ve.supportsNativeTextTracks=function(){return Mf||Mi&&Wn};Ve.supportsNativeVideoTracks=function(){return!!(Ve.TEST_VID&&Ve.TEST_VID.videoTracks)};Ve.supportsNativeAudioTracks=function(){return!!(Ve.TEST_VID&&Ve.TEST_VID.audioTracks)};Ve.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([t,e]){kf(Ve.prototype,t,()=>Ve[e](),!0)});Ve.prototype.featuresVolumeControl=Ve.canControlVolume();Ve.prototype.movingMediaElementInDOM=!Mi;Ve.prototype.featuresFullscreenResize=!0;Ve.prototype.featuresProgressEvents=!0;Ve.prototype.featuresTimeupdateEvents=!0;Ve.prototype.featuresVideoFrameCallback=!!(Ve.TEST_VID&&Ve.TEST_VID.requestVideoFrameCallback);Ve.disposeMediaElement=function(t){if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("src"),typeof t.load=="function"&&(function(){try{t.load()}catch{}})()}};Ve.resetMediaElement=function(t){if(!t)return;const e=t.querySelectorAll("source");let i=e.length;for(;i--;)t.removeChild(e[i]);t.removeAttribute("src"),typeof t.load=="function"&&(function(){try{t.load()}catch{}})()};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(t){Ve.prototype[t]=function(){return this.el_[t]||this.el_.hasAttribute(t)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(t){Ve.prototype["set"+ti(t)]=function(e){this.el_[t]=e,e?this.el_.setAttribute(t,t):this.el_.removeAttribute(t)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(t){Ve.prototype[t]=function(){return this.el_[t]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(t){Ve.prototype["set"+ti(t)]=function(e){this.el_[t]=e}});["pause","load","play"].forEach(function(t){Ve.prototype[t]=function(){return this.el_[t]()}});nt.withSourceHandlers(Ve);Ve.nativeSourceHandler={};Ve.nativeSourceHandler.canPlayType=function(t){try{return Ve.TEST_VID.canPlayType(t)}catch{return""}};Ve.nativeSourceHandler.canHandleSource=function(t,e){if(t.type)return Ve.nativeSourceHandler.canPlayType(t.type);if(t.src){const i=J_(t.src);return Ve.nativeSourceHandler.canPlayType(`video/${i}`)}return""};Ve.nativeSourceHandler.handleSource=function(t,e,i){e.setSrc(t.src)};Ve.nativeSourceHandler.dispose=function(){};Ve.registerSourceHandler(Ve.nativeSourceHandler);nt.registerTech("Html5",Ve);const vC=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],jm={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},kg=["tiny","xsmall","small","medium","large","xlarge","huge"],ud={};kg.forEach(t=>{const e=t.charAt(0)==="x"?`x-${t.substring(1)}`:t;ud[t]=`vjs-layout-${e}`});const DF={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};class Ct extends _e{constructor(e,i,s){if(e.id=e.id||i.id||`vjs_video_${Zs()}`,i=Object.assign(Ct.getTagSettings(e),i),i.initChildren=!1,i.createEl=!1,i.evented=!1,i.reportTouchActivity=!1,!i.language){const o=e.closest("[lang]");o&&(i.language=o.getAttribute("lang"))}if(super(null,i,s),this.boundDocumentFullscreenChange_=o=>this.documentFullscreenChange_(o),this.boundFullWindowOnEscKey_=o=>this.fullWindowOnEscKey(o),this.boundUpdateStyleEl_=o=>this.updateStyleEl_(o),this.boundApplyInitTime_=o=>this.applyInitTime_(o),this.boundUpdateCurrentBreakpoint_=o=>this.updateCurrentBreakpoint_(o),this.boundHandleTechClick_=o=>this.handleTechClick_(o),this.boundHandleTechDoubleClick_=o=>this.handleTechDoubleClick_(o),this.boundHandleTechTouchStart_=o=>this.handleTechTouchStart_(o),this.boundHandleTechTouchMove_=o=>this.handleTechTouchMove_(o),this.boundHandleTechTouchEnd_=o=>this.handleTechTouchEnd_(o),this.boundHandleTechTap_=o=>this.handleTechTap_(o),this.boundUpdatePlayerHeightOnAudioOnlyMode_=o=>this.updatePlayerHeightOnAudioOnlyMode_(o),this.isFullscreen_=!1,this.log=n1(this.id_),this.fsApi_=Od,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={controlBarHeight:null,playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=e,this.tagAttributes=e&&Yr(e),this.language(this.options_.language),i.languages){const o={};Object.getOwnPropertyNames(i.languages).forEach(function(l){o[l.toLowerCase()]=i.languages[l]}),this.languages_=o}else this.languages_=Ct.prototype.options_.languages;this.resetCache_(),this.poster_=i.poster||"",this.controls_=!!i.controls,e.controls=!1,e.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],e.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),i.plugins&&Object.keys(i.plugins).forEach(o=>{if(typeof this[o]!="function")throw new Error(`plugin "${o}" does not exist`)}),this.scrubbing_=!1,this.el_=this.createEl(),X_(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(Ls(ke,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const n=kt(this.options_);if(i.plugins&&Object.keys(i.plugins).forEach(o=>{this[o](i.plugins[o])}),i.debug&&this.debug(!0),this.options_.playerOptions=n,this.middleware_=[],this.playbackRates(i.playbackRates),i.experimentalSvgIcons){const l=new $.DOMParser().parseFromString(YB,"image/svg+xml");if(l.querySelector("parsererror"))ut.warn("Failed to load SVG Icons. Falling back to Font Icons."),this.options_.experimentalSvgIcons=null;else{const h=l.documentElement;h.style.display="none",this.el_.appendChild(h),this.addClass("vjs-svg-icons-enabled")}}this.initChildren(),this.isAudio(e.nodeName.toLowerCase()==="audio"),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),i.spatialNavigation&&i.spatialNavigation.enabled&&(this.spatialNavigation=new QB(this),this.addClass("vjs-spatial-navigation-enabled")),xc&&this.addClass("vjs-touch-enabled"),Mi||this.addClass("vjs-workinghover"),Ct.players[this.id_]=this;const r=vg.split(".")[0];this.addClass(`vjs-v${r}`),this.userActive(!0),this.reportUserActivity(),this.one("play",o=>this.listenForUserActivity_(o)),this.on("keydown",o=>this.handleKeyDown(o)),this.on("languagechange",o=>this.handleLanguagechange(o)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose"),this.off("dispose"),Ri(ke,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),Ri(ke,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),Ct.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),GB(this),Ki.names.forEach(e=>{const i=Ki[e],s=this[i.getterName]();s&&s.off&&s.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let e=this.tag,i,s=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player");const n=this.tag.tagName.toLowerCase()==="video-js";s?i=this.el_=e.parentNode:n||(i=this.el_=super.createEl("div"));const r=Yr(e);if(n){for(i=this.el_=e,e=this.tag=ke.createElement("video");i.children.length;)e.appendChild(i.firstChild);nc(i,"video-js")||na(i,"video-js"),i.appendChild(e),s=this.playerElIngest_=i,Object.keys(i).forEach(u=>{try{e[u]=i[u]}catch{}})}e.setAttribute("tabindex","-1"),r.tabindex="-1",Wn&&Lf&&(e.setAttribute("role","application"),r.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in r&&delete r.width,"height"in r&&delete r.height,Object.getOwnPropertyNames(r).forEach(function(u){n&&u==="class"||i.setAttribute(u,r[u]),n&&e.setAttribute(u,r[u])}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=i.player=this,this.addClass("vjs-paused");const o=["IS_SMART_TV","IS_TIZEN","IS_WEBOS","IS_ANDROID","IS_IPAD","IS_IPHONE","IS_CHROMECAST_RECEIVER"].filter(u=>d1[u]).map(u=>"vjs-device-"+u.substring(3).toLowerCase().replace(/\_/g,"-"));if(this.addClass(...o),$.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=A1("vjs-styles-dimensions");const u=co(".vjs-styles-defaults"),h=co("head");h.insertBefore(this.styleEl_,u?u.nextSibling:h.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);const l=e.getElementsByTagName("a");for(let u=0;u<l.length;u++){const h=l.item(u);na(h,"vjs-hidden"),h.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!s&&e.parentNode.insertBefore(i,e),Tg(e,i),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=i,i}crossOrigin(e){if(typeof e>"u")return this.techGet_("crossOrigin");if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){ut.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.techCall_("setCrossOrigin",e),this.posterImage&&this.posterImage.crossOrigin(e)}width(e){return this.dimension("width",e)}height(e){return this.dimension("height",e)}dimension(e,i){const s=e+"_";if(i===void 0)return this[s]||0;if(i===""||i==="auto"){this[s]=void 0,this.updateStyleEl_();return}const n=parseFloat(i);if(isNaN(n)){ut.error(`Improper value "${i}" supplied for for ${e}`);return}this[s]=n,this.updateStyleEl_()}fluid(e){if(e===void 0)return!!this.fluid_;this.fluid_=!!e,Tr(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),wB(this,()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(e){if(e===void 0)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(e){if(e===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if($.VIDEOJS_NO_DYNAMIC_STYLE===!0){const l=typeof this.width_=="number"?this.width_:this.options_.width,u=typeof this.height_=="number"?this.height_:this.options_.height,h=this.tech_&&this.tech_.el();h&&(l>=0&&(h.width=l),u>=0&&(h.height=u));return}let e,i,s,n;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?s=this.aspectRatio_:this.videoWidth()>0?s=this.videoWidth()+":"+this.videoHeight():s="16:9";const r=s.split(":"),o=r[1]/r[0];this.width_!==void 0?e=this.width_:this.height_!==void 0?e=this.height_/o:e=this.videoWidth()||300,this.height_!==void 0?i=this.height_:i=e*o,/^[^a-zA-Z]/.test(this.id())?n="dimensions-"+this.id():n=this.id()+"-dimensions",this.addClass(n),D1(this.styleEl_,`
      .${n} {
        width: ${e}px;
        height: ${i}px;
      }

      .${n}.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: ${o*100}%;
      }
    `)}loadTech_(e,i){this.tech_&&this.unloadTech_();const s=ti(e),n=e.charAt(0).toLowerCase()+e.slice(1);s!=="Html5"&&this.tag&&(nt.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=s,this.isReady_=!1;let r=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(r=!1);const o={source:i,autoplay:r,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${n}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};Ki.names.forEach(u=>{const h=Ki[u];o[h.getterName]=this[h.privateName]}),Object.assign(o,this.options_[s]),Object.assign(o,this.options_[n]),Object.assign(o,this.options_[e.toLowerCase()]),this.tag&&(o.tag=this.tag),i&&i.src===this.cache_.src&&this.cache_.currentTime>0&&(o.startTime=this.cache_.currentTime);const l=nt.getTech(e);if(!l)throw new Error(`No Tech named '${s}' exists! '${s}' should be registered using videojs.registerTech()'`);this.tech_=new l(o),this.tech_.ready(Ut(this,this.handleTechReady_),!0),Ag.jsonToTextTracks(this.textTracksJson_||[],this.tech_),vC.forEach(u=>{this.on(this.tech_,u,h=>this[`handleTech${ti(u)}_`](h))}),Object.keys(jm).forEach(u=>{this.on(this.tech_,u,h=>{if(this.tech_.playbackRate()===0&&this.tech_.seeking()){this.queuedCallbacks_.push({callback:this[`handleTech${jm[u]}_`].bind(this),event:h});return}this[`handleTech${jm[u]}_`](h)})}),this.on(this.tech_,"loadstart",u=>this.handleTechLoadStart_(u)),this.on(this.tech_,"sourceset",u=>this.handleTechSourceset_(u)),this.on(this.tech_,"waiting",u=>this.handleTechWaiting_(u)),this.on(this.tech_,"ended",u=>this.handleTechEnded_(u)),this.on(this.tech_,"seeking",u=>this.handleTechSeeking_(u)),this.on(this.tech_,"play",u=>this.handleTechPlay_(u)),this.on(this.tech_,"pause",u=>this.handleTechPause_(u)),this.on(this.tech_,"durationchange",u=>this.handleTechDurationChange_(u)),this.on(this.tech_,"fullscreenchange",(u,h)=>this.handleTechFullscreenChange_(u,h)),this.on(this.tech_,"fullscreenerror",(u,h)=>this.handleTechFullscreenError_(u,h)),this.on(this.tech_,"enterpictureinpicture",u=>this.handleTechEnterPictureInPicture_(u)),this.on(this.tech_,"leavepictureinpicture",u=>this.handleTechLeavePictureInPicture_(u)),this.on(this.tech_,"error",u=>this.handleTechError_(u)),this.on(this.tech_,"posterchange",u=>this.handleTechPosterChange_(u)),this.on(this.tech_,"textdata",u=>this.handleTechTextData_(u)),this.on(this.tech_,"ratechange",u=>this.handleTechRateChange_(u)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(s!=="Html5"||!this.tag)&&Tg(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){Ki.names.forEach(e=>{const i=Ki[e];this[i.privateName]=this[i.getterName]()}),this.textTracksJson_=Ag.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(e){return e===void 0&&ut.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_}version(){return{"video.js":vg}}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(e){if(!this.tech_||typeof e!="string")return;const i=()=>{const n=this.muted();this.muted(!0);const r=()=>{this.muted(n)};this.playTerminatedQueue_.push(r);const o=this.play();if(oc(o))return o.catch(l=>{throw r(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${l||""}`)})};let s;if(e==="any"&&!this.muted()?(s=this.play(),oc(s)&&(s=s.catch(i))):e==="muted"&&!this.muted()?s=i():s=this.play(),!!oc(s))return s.then(()=>{this.trigger({type:"autoplay-success",autoplay:e})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:e})})}updateSourceCaches_(e=""){let i=e,s="";typeof i!="string"&&(i=e.src,s=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],i&&!s&&(s=ZB(this,i)),this.cache_.source=kt({},e,{src:i,type:s});const n=this.cache_.sources.filter(u=>u.src&&u.src===i),r=[],o=this.$$("source"),l=[];for(let u=0;u<o.length;u++){const h=Yr(o[u]);r.push(h),h.src&&h.src===i&&l.push(h.src)}l.length&&!n.length?this.cache_.sources=r:n.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=i}handleTechSourceset_(e){if(!this.changingSrc_){let i=r=>this.updateSourceCaches_(r);const s=this.currentSource().src,n=e.src;s&&!/^blob:/.test(s)&&/^blob:/.test(n)&&(!this.lastSource_||this.lastSource_.tech!==n&&this.lastSource_.player!==s)&&(i=()=>{}),i(n),e.src||this.tech_.any(["sourceset","loadstart"],r=>{if(r.type==="sourceset")return;const o=this.techGet_("currentSrc");this.lastSource_.tech=o,this.updateSourceCaches_(o)})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})}hasStarted(e){if(e===void 0)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(e=>e.callback(e.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");const e=this.currentTime(),i=()=>{e!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",i))};this.on("timeupdate",i)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(e){this.controls_&&(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,e):this.paused()?Fn(this.play()):this.pause())}handleTechDoubleClick_(e){if(!this.controls_)return;Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),s=>s.contains(e.target))||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,e):this.isInPictureInPicture()&&!ke.pictureInPictureElement?this.exitPictureInPicture():this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(e){e.cancelable&&e.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(e){const i=e.target.player;if(i&&i!==this)return;const s=this.el();let n=ke[this.fsApi_.fullscreenElement]===s;!n&&s.matches&&(n=s.matches(":"+this.fsApi_.fullscreen)),this.isFullscreen(n)}handleTechFullscreenChange_(e,i){i&&(i.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(i.isFullscreen))}handleTechFullscreenError_(e,i){this.trigger("fullscreenerror",i)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(e){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(e){this.isInPictureInPicture(!1)}handleTechError_(){const e=this.tech_.error();e&&this.error(e)}handleTechTextData_(){let e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(e,i){this.ready(function(){if(e in $B)return VB(this.middleware_,this.tech_,e,i);if(e in iT)return tT(this.middleware_,this.tech_,e,i);try{this.tech_&&this.tech_[e](i)}catch(s){throw ut(s),s}},!0)}techGet_(e){if(!(!this.tech_||!this.tech_.isReady_)){if(e in qB)return HB(this.middleware_,this.tech_,e);if(e in iT)return tT(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(i){throw this.tech_[e]===void 0?(ut(`Video.js: ${e} method not defined for ${this.techName_} playback technology.`,i),i):i.name==="TypeError"?(ut(`Video.js: ${e} unavailable on ${this.techName_} playback technology element.`,i),this.tech_.isReady_=!1,i):(ut(i),i)}}}play(){return new Promise(e=>{this.play_(e)})}play_(e=Fn){this.playCallbacks_.push(e);const i=!!(!this.changingSrc_&&(this.src()||this.currentSrc())),s=!!(Mf||Mi);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!i){this.waitToPlay_=o=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!i&&s&&this.load();return}const n=this.techGet_("play");s&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),n===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(n)}runPlayTerminatedQueue_(){const e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(i){i()})}runPlayCallbacks_(e){const i=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],i.forEach(function(s){s(e)})}pause(){this.techCall_("pause")}paused(){return this.techGet_("paused")!==!1}played(){return this.techGet_("played")||hn(0,0)}scrubbing(e){if(typeof e>"u")return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(e){if(e===void 0)return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime;if(e<0&&(e=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",e),this.cache_.initTime=0,isFinite(e)&&(this.cache_.currentTime=Number(e))}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(e){if(e===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;e=parseFloat(e),e<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let e=this.techGet_("buffered");return(!e||!e.length)&&(e=hn(0,0)),e}seekable(){let e=this.techGet_("seekable");return(!e||!e.length)&&(e=hn(0,0)),e}seeking(){return this.techGet_("seeking")}ended(){return this.techGet_("ended")}networkState(){return this.techGet_("networkState")}readyState(){return this.techGet_("readyState")}bufferedPercent(){return B1(this.buffered(),this.duration())}bufferedEnd(){const e=this.buffered(),i=this.duration();let s=e.end(e.length-1);return s>i&&(s=i),s}volume(e){let i;if(e!==void 0){i=Math.max(0,Math.min(1,e)),this.cache_.volume=i,this.techCall_("setVolume",i),i>0&&this.lastVolume_(i);return}return i=parseFloat(this.techGet_("volume")),isNaN(i)?1:i}muted(e){if(e!==void 0){this.techCall_("setMuted",e);return}return this.techGet_("muted")||!1}defaultMuted(e){return e!==void 0&&this.techCall_("setDefaultMuted",e),this.techGet_("defaultMuted")||!1}lastVolume_(e){if(e!==void 0&&e!==0){this.cache_.lastVolume=e;return}return this.cache_.lastVolume}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(e){if(e!==void 0){const i=this.isFullscreen_;this.isFullscreen_=!!e,this.isFullscreen_!==i&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_}requestFullscreen(e){this.isInPictureInPicture()&&this.exitPictureInPicture();const i=this;return new Promise((s,n)=>{function r(){i.off("fullscreenerror",l),i.off("fullscreenchange",o)}function o(){r(),s()}function l(h,d){r(),n(d)}i.one("fullscreenchange",o),i.one("fullscreenerror",l);const u=i.requestFullscreenHelper_(e);u&&(u.then(r,r),u.then(s,n))})}requestFullscreenHelper_(e){let i;if(this.fsApi_.prefixed||(i=this.options_.fullscreen&&this.options_.fullscreen.options||{},e!==void 0&&(i=e)),this.fsApi_.requestFullscreen){const s=this.el_[this.fsApi_.requestFullscreen](i);return s&&s.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),s}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const e=this;return new Promise((i,s)=>{function n(){e.off("fullscreenerror",o),e.off("fullscreenchange",r)}function r(){n(),i()}function o(u,h){n(),s(h)}e.one("fullscreenchange",r),e.one("fullscreenerror",o);const l=e.exitFullscreenHelper_();l&&(l.then(n,n),l.then(i,s))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const e=ke[this.fsApi_.exitFullscreen]();return e&&Fn(e.then(()=>this.isFullscreen(!1))),e}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=ke.documentElement.style.overflow,Ls(ke,"keydown",this.boundFullWindowOnEscKey_),ke.documentElement.style.overflow="hidden",na(ke.body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(e){e.key==="Escape"&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,Ri(ke,"keydown",this.boundFullWindowOnEscKey_),ke.documentElement.style.overflow=this.docOrigOverflow,Rf(ke.body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(e){if(e===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(e){if(e!==void 0){this.isInPictureInPicture_=!!e,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&$.documentPictureInPicture){const e=ke.createElement(this.el().tagName);return e.classList=this.el().classList,e.classList.add("vjs-pip-container"),this.posterImage&&e.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&e.appendChild(this.titleBar.el().cloneNode(!0)),e.appendChild(Ye("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),$.documentPictureInPicture.requestWindow({width:this.videoWidth(),height:this.videoHeight()}).then(i=>(C1(i),this.el_.parentNode.insertBefore(e,this.el_),i.document.body.appendChild(this.el_),i.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger({type:"enterpictureinpicture",pipWindow:i}),i.addEventListener("pagehide",s=>{const n=s.target.querySelector(".video-js");e.parentNode.replaceChild(n,e),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")}),i))}return"pictureInPictureEnabled"in ke&&this.disablePictureInPicture()===!1?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){if($.documentPictureInPicture&&$.documentPictureInPicture.window)return $.documentPictureInPicture.window.close(),Promise.resolve();if("pictureInPictureEnabled"in ke)return ke.exitPictureInPicture()}handleKeyDown(e){const{userActions:i}=this.options_;!i||!i.hotkeys||(n=>{const r=n.tagName.toLowerCase();if(n.isContentEditable)return!0;const o=["button","checkbox","hidden","radio","reset","submit"];return r==="input"?o.indexOf(n.type)===-1:["textarea"].indexOf(r)!==-1})(this.el_.ownerDocument.activeElement)||(typeof i.hotkeys=="function"?i.hotkeys.call(this,e):this.handleHotkeys(e))}handleHotkeys(e){const i=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:s=o=>e.key.toLowerCase()==="f",muteKey:n=o=>e.key.toLowerCase()==="m",playPauseKey:r=o=>e.key.toLowerCase()==="k"||e.key.toLowerCase()===" "}=i;if(s.call(this,e)){e.preventDefault(),e.stopPropagation();const o=_e.getComponent("FullscreenToggle");ke[this.fsApi_.fullscreenEnabled]!==!1&&o.prototype.handleClick.call(this,e)}else n.call(this,e)?(e.preventDefault(),e.stopPropagation(),_e.getComponent("MuteToggle").prototype.handleClick.call(this,e)):r.call(this,e)&&(e.preventDefault(),e.stopPropagation(),_e.getComponent("PlayToggle").prototype.handleClick.call(this,e))}canPlayType(e){let i;for(let s=0,n=this.options_.techOrder;s<n.length;s++){const r=n[s];let o=nt.getTech(r);if(o||(o=_e.getComponent(r)),!o){ut.error(`The "${r}" tech is undefined. Skipped browser support check for that tech.`);continue}if(o.isSupported()&&(i=o.canPlayType(e),i))return i}return""}selectSource(e){const i=this.options_.techOrder.map(l=>[l,nt.getTech(l)]).filter(([l,u])=>u?u.isSupported():(ut.error(`The "${l}" tech is undefined. Skipped browser support check for that tech.`),!1)),s=function(l,u,h){let d;return l.some(m=>u.some(_=>{if(d=h(m,_),d)return!0})),d};let n;const r=l=>(u,h)=>l(h,u),o=([l,u],h)=>{if(u.canPlaySource(h,this.options_[l.toLowerCase()]))return{source:h,tech:l}};return this.options_.sourceOrder?n=s(e,i,r(o)):n=s(i,e,o),n||!1}handleSrc_(e,i){if(typeof e>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const s=V1(e);if(!s.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,i||(this.cache_.sources=s),this.updateSourceCaches_(s[0]),jB(this,s[0],(n,r)=>{if(this.middleware_=r,i||(this.cache_.sources=s),this.updateSourceCaches_(n),this.src_(n)){if(s.length>1)return this.handleSrc_(s.slice(1));this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),this.triggerReady();return}zB(r,this.tech_)}),s.length>1){const n=()=>{this.error(null),this.handleSrc_(s.slice(1),!0)},r=()=>{this.off("error",n)};this.one("error",n),this.one("playing",r),this.resetRetryOnError_=()=>{this.off("error",n),this.off("playing",r)}}}src(e){return this.handleSrc_(e,!1)}src_(e){const i=this.selectSource([e]);return i?O1(i.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(i.tech,i.source),this.tech_.ready(()=>{this.changingSrc_=!1}),!1):!0}addSourceElement(e,i){return this.tech_?this.tech_.addSourceElement(e,i):!1}removeSourceElement(e){return this.tech_?this.tech_.removeSourceElement(e):!1}load(){if(this.tech_&&this.tech_.vhs){this.src(this.currentSource());return}this.techCall_("load")}reset(){if(this.paused())this.doReset_();else{const e=this.play();Fn(e.then(()=>this.doReset_()))}}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),this.error(null),this.titleBar&&this.titleBar.update({title:void 0,description:void 0}),Tr(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const{currentTimeDisplay:e,durationDisplay:i,progressControl:s,remainingTimeDisplay:n}=this.controlBar||{},{seekBar:r}=s||{};e&&e.updateContent(),i&&i.updateContent(),n&&n.updateContent(),r&&(r.update(),r.loadProgressBar&&r.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){const e=this.currentSource(),i=[];return Object.keys(e).length!==0&&i.push(e),this.cache_.sources||i}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(e){if(e!==void 0){this.techCall_("setPreload",e),this.options_.preload=e;return}return this.techGet_("preload")}autoplay(e){if(e===void 0)return this.options_.autoplay||!1;let i;typeof e=="string"&&/(any|play|muted)/.test(e)||e===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_(typeof e=="string"?e:"play"),i=!1):e?this.options_.autoplay=!0:this.options_.autoplay=!1,i=typeof i>"u"?this.options_.autoplay:i,this.tech_&&this.techCall_("setAutoplay",i)}playsinline(e){return e!==void 0&&(this.techCall_("setPlaysinline",e),this.options_.playsinline=e),this.techGet_("playsinline")}loop(e){if(e!==void 0){this.techCall_("setLoop",e),this.options_.loop=e;return}return this.techGet_("loop")}poster(e){if(e===void 0)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(e){if(e===void 0)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(e){if(e===void 0)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(e){if(e===void 0)return this.error_||null;if(uo("beforeerror").forEach(i=>{const s=i(this,e);if(!($n(s)&&!Array.isArray(s)||typeof s=="string"||typeof s=="number"||s===null)){this.log.error("please return a value that MediaError expects in beforeerror hooks");return}e=s}),this.options_.suppressNotSupportedError&&e&&e.code===4){const i=function(){this.error(e)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],i),this.one("loadstart",function(){this.off(["click","touchstart"],i)});return}if(e===null){this.error_=null,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new Yt(e),this.addClass("vjs-error"),ut.error(`(CODE:${this.error_.code} ${Yt.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),uo("error").forEach(i=>i(this,this.error_))}reportUserActivity(e){this.userActivity_=!0}userActive(e){if(e===void 0)return this.userActive_;if(e=!!e,e!==this.userActive_){if(this.userActive_=e,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(i){i.stopPropagation(),i.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let e,i,s;const n=Ut(this,this.reportUserActivity),r=function(m){(m.screenX!==i||m.screenY!==s)&&(i=m.screenX,s=m.screenY,n())},o=function(){n(),this.clearInterval(e),e=this.setInterval(n,250)},l=function(m){n(),this.clearInterval(e)};this.on("mousedown",o),this.on("mousemove",r),this.on("mouseup",l),this.on("mouseleave",l);const u=this.getChild("controlBar");u&&!Mi&&!mn&&(u.on("mouseenter",function(m){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),u.on("mouseleave",function(m){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",n),this.on("keyup",n);let h;const d=function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(h);const m=this.options_.inactivityTimeout;m<=0||(h=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},m))};this.setInterval(d,250)}playbackRate(e){if(e!==void 0){this.techCall_("setPlaybackRate",e);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1}defaultPlaybackRate(e){return e!==void 0?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(e){if(e!==void 0){this.isAudio_=!!e;return}return!!this.isAudio_}updatePlayerHeightOnAudioOnlyMode_(){const e=this.getChild("ControlBar");!e||this.audioOnlyCache_.controlBarHeight===e.currentHeight()||(this.audioOnlyCache_.controlBarHeight=e.currentHeight(),this.height(this.audioOnlyCache_.controlBarHeight))}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const e=this.children(),i=this.getChild("ControlBar"),s=i&&i.currentHeight();e.forEach(n=>{n!==i&&n.el_&&!n.hasClass("vjs-hidden")&&(n.hide(),this.audioOnlyCache_.hiddenChildren.push(n))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.audioOnlyCache_.controlBarHeight=s,this.on("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.height(s),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.off("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.audioOnlyCache_.hiddenChildren.forEach(e=>e.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(e){if(typeof e!="boolean"||e===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=e,e){const i=[];return this.isInPictureInPicture()&&i.push(this.exitPictureInPicture()),this.isFullscreen()&&i.push(this.exitFullscreen()),this.audioPosterMode()&&i.push(this.audioPosterMode(!1)),Promise.all(i).then(()=>this.enableAudioOnlyUI_())}return Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(e){return typeof e!="boolean"||e===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=e,e?this.audioOnlyMode()?this.audioOnlyMode(!1).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()}))}addTextTrack(e,i,s){if(this.tech_)return this.tech_.addTextTrack(e,i,s)}addRemoteTextTrack(e,i){if(this.tech_)return this.tech_.addRemoteTextTrack(e,i)}removeRemoteTextTrack(e={}){let{track:i}=e;if(i||(i=e),this.tech_)return this.tech_.removeRemoteTextTrack(i)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(e){if(e===void 0)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),Tr(this)&&this.trigger("languagechange"))}languages(){return kt(Ct.prototype.options_.languages,this.languages_)}toJSON(){const e=kt(this.options_),i=e.tracks;e.tracks=[];for(let s=0;s<i.length;s++){let n=i[s];n=kt(n),n.player=void 0,e.tracks[s]=n}return e}createModal(e,i){i=i||{},i.content=e||"";const s=new jl(this,i);return this.addChild(s),s.on("dispose",()=>{this.removeChild(s)}),s.open(),s}updateCurrentBreakpoint_(){if(!this.responsive())return;const e=this.currentBreakpoint(),i=this.currentWidth();for(let s=0;s<kg.length;s++){const n=kg[s],r=this.breakpoints_[n];if(i<=r){if(e===n)return;e&&this.removeClass(ud[e]),this.addClass(ud[n]),this.breakpoint_=n;break}}}removeCurrentBreakpoint_(){const e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)}breakpoints(e){return e===void 0?Object.assign(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=Object.assign({},DF,e),this.updateCurrentBreakpoint_(),Object.assign(this.breakpoints_))}responsive(e){if(e===void 0)return this.responsive_;e=!!e;const i=this.responsive_;if(e!==i)return this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return ud[this.breakpoint_]||""}loadMedia(e,i){if(!e||typeof e!="object")return;const s=this.crossOrigin();this.reset(),this.cache_.media=kt(e);const{artist:n,artwork:r,description:o,poster:l,src:u,textTracks:h,title:d}=this.cache_.media;!r&&l&&(this.cache_.media.artwork=[{src:l,type:Vd(l)}]),s&&this.crossOrigin(s),u&&this.src(u),l&&this.poster(l),Array.isArray(h)&&h.forEach(m=>this.addRemoteTextTrack(m,!1)),this.titleBar&&this.titleBar.update({title:d,description:o||n||""}),this.ready(i)}getMedia(){if(!this.cache_.media){const e=this.poster(),i=this.currentSources(),s=Array.prototype.map.call(this.remoteTextTracks(),r=>({kind:r.kind,label:r.label,language:r.language,src:r.src})),n={src:i,textTracks:s};return e&&(n.poster=e,n.artwork=[{src:n.poster,type:Vd(n.poster)}]),n}return kt(this.cache_.media)}static getTagSettings(e){const i={sources:[],tracks:[]},s=Yr(e),n=s["data-setup"];if(nc(e,"vjs-fill")&&(s.fill=!0),nc(e,"vjs-fluid")&&(s.fluid=!0),n!==null)try{Object.assign(s,JSON.parse(n||"{}"))}catch(r){ut.error("data-setup",r)}if(Object.assign(i,s),e.hasChildNodes()){const r=e.childNodes;for(let o=0,l=r.length;o<l;o++){const u=r[o],h=u.nodeName.toLowerCase();h==="source"?i.sources.push(Yr(u)):h==="track"&&i.tracks.push(Yr(u))}}return i}debug(e){if(e===void 0)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(e){if(e===void 0)return this.cache_.playbackRates;Array.isArray(e)&&e.every(i=>typeof i=="number")&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))}}Ct.prototype.videoTracks=()=>{};Ct.prototype.audioTracks=()=>{};Ct.prototype.textTracks=()=>{};Ct.prototype.remoteTextTracks=()=>{};Ct.prototype.remoteTextTrackEls=()=>{};Ki.names.forEach(function(t){const e=Ki[t];Ct.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}});Ct.prototype.crossorigin=Ct.prototype.crossOrigin;Ct.players={};const Mu=$.navigator;Ct.prototype.options_={techOrder:nt.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Mu&&(Mu.languages&&Mu.languages[0]||Mu.userLanguage||Mu.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1,spatialNavigation:{enabled:!1,horizontalSeek:!1},enableSmoothSeeking:!1,disableSeekWhileScrubbingOnMobile:!1,disableSeekWhileScrubbingOnSTV:!1};vC.forEach(function(t){Ct.prototype[`handleTech${ti(t)}_`]=function(){return this.trigger(t)}});_e.registerComponent("Player",Ct);const qd="plugin",al="activePlugins_",Xa={},$d=t=>Xa.hasOwnProperty(t),cd=t=>$d(t)?Xa[t]:void 0,bC=(t,e)=>{t[al]=t[al]||{},t[al][e]=!0},Wd=(t,e,i)=>{const s=(i?"before":"")+"pluginsetup";t.trigger(s,e),t.trigger(s+":"+e.name,e)},PF=function(t,e){const i=function(){Wd(this,{name:t,plugin:e,instance:null},!0);const s=e.apply(this,arguments);return bC(this,t),Wd(this,{name:t,plugin:e,instance:s}),s};return Object.keys(e).forEach(function(s){i[s]=e[s]}),i},yT=(t,e)=>(e.prototype.name=t,function(...i){Wd(this,{name:t,plugin:e,instance:null},!0);const s=new e(this,...i);return this[t]=()=>s,Wd(this,s.getEventHash()),s});class vs{constructor(e){if(this.constructor===vs)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,this.log||(this.log=this.player.log.createLogger(this.name)),X_(this),delete this.trigger,L1(this,this.constructor.defaultState),bC(e,this.name),this.dispose=this.dispose.bind(this),e.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(e={}){return e.name=this.name,e.plugin=this.constructor,e.instance=this,e}trigger(e,i={}){return Ul(this.eventBusEl_,e,this.getEventHash(i))}handleStateChanged(e){}dispose(){const{name:e,player:i}=this;this.trigger("dispose"),this.off(),i.off("dispose",this.dispose),i[al][e]=!1,this.player=this.state=null,i[e]=yT(e,Xa[e])}static isBasic(e){const i=typeof e=="string"?cd(e):e;return typeof i=="function"&&!vs.prototype.isPrototypeOf(i.prototype)}static registerPlugin(e,i){if(typeof e!="string")throw new Error(`Illegal plugin name, "${e}", must be a string, was ${typeof e}.`);if($d(e))ut.warn(`A plugin named "${e}" already exists. You may want to avoid re-registering plugins!`);else if(Ct.prototype.hasOwnProperty(e))throw new Error(`Illegal plugin name, "${e}", cannot share a name with an existing player method!`);if(typeof i!="function")throw new Error(`Illegal plugin for "${e}", must be a function, was ${typeof i}.`);return Xa[e]=i,e!==qd&&(vs.isBasic(i)?Ct.prototype[e]=PF(e,i):Ct.prototype[e]=yT(e,i)),i}static deregisterPlugin(e){if(e===qd)throw new Error("Cannot de-register base plugin.");$d(e)&&(delete Xa[e],delete Ct.prototype[e])}static getPlugins(e=Object.keys(Xa)){let i;return e.forEach(s=>{const n=cd(s);n&&(i=i||{},i[s]=n)}),i}static getPluginVersion(e){const i=cd(e);return i&&i.VERSION||""}}vs.getPlugin=cd;vs.BASE_PLUGIN_NAME=qd;vs.registerPlugin(qd,vs);Ct.prototype.usingPlugin=function(t){return!!this[al]&&this[al][t]===!0};Ct.prototype.hasPlugin=function(t){return!!$d(t)};function kF(t,e){let i=!1;return function(...s){return i||ut.warn(t),i=!0,e.apply(this,s)}}function _n(t,e,i,s){return kF(`${e} is deprecated and will be removed in ${t}.0; please use ${i} instead.`,s)}var IF={NetworkBadStatus:"networkbadstatus",NetworkRequestFailed:"networkrequestfailed",NetworkRequestAborted:"networkrequestaborted",NetworkRequestTimeout:"networkrequesttimeout",NetworkBodyParserFailed:"networkbodyparserfailed",StreamingHlsPlaylistParserError:"streaminghlsplaylistparsererror",StreamingDashManifestParserError:"streamingdashmanifestparsererror",StreamingContentSteeringParserError:"streamingcontentsteeringparsererror",StreamingVttParserError:"streamingvttparsererror",StreamingFailedToSelectNextSegment:"streamingfailedtoselectnextsegment",StreamingFailedToDecryptSegment:"streamingfailedtodecryptsegment",StreamingFailedToTransmuxSegment:"streamingfailedtotransmuxsegment",StreamingFailedToAppendSegment:"streamingfailedtoappendsegment",StreamingCodecsChangeError:"streamingcodecschangeerror"};const TC=t=>t.indexOf("#")===0?t.slice(1):t;function oe(t,e,i){let s=oe.getPlayer(t);if(s)return e&&ut.warn(`Player "${t}" is already initialised. Options will not be applied.`),i&&s.ready(i),s;const n=typeof t=="string"?co("#"+TC(t)):t;if(!Fl(n))throw new TypeError("The element or ID supplied is not valid. (videojs)");const o=("getRootNode"in n?n.getRootNode()instanceof $.ShadowRoot:!1)?n.getRootNode():n.ownerDocument.body;(!n.ownerDocument.defaultView||!o.contains(n))&&ut.warn("The element supplied is not included in the DOM"),e=e||{},e.restoreEl===!0&&(e.restoreEl=(n.parentNode&&n.parentNode.hasAttribute&&n.parentNode.hasAttribute("data-vjs-player")?n.parentNode:n).cloneNode(!0)),uo("beforesetup").forEach(u=>{const h=u(n,kt(e));if(!$n(h)||Array.isArray(h)){ut.error("please return an object in beforesetup hooks");return}e=kt(e,h)});const l=_e.getComponent("Player");return s=new l(n,e,i),uo("setup").forEach(u=>u(s)),s}oe.hooks_=gr;oe.hooks=uo;oe.hook=hB;oe.hookOnce=dB;oe.removeHook=s1;if($.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&Bl()){let t=co(".vjs-styles-defaults");if(!t){t=A1("vjs-styles-defaults");const e=co("head");e&&e.insertBefore(t,e.firstChild),D1(t,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)}}Sg(1,oe);oe.VERSION=vg;oe.options=Ct.prototype.options_;oe.getPlayers=()=>Ct.players;oe.getPlayer=t=>{const e=Ct.players;let i;if(typeof t=="string"){const s=TC(t),n=e[s];if(n)return n;i=co("#"+s)}else i=t;if(Fl(i)){const{player:s,playerId:n}=i;if(s||e[n])return s||e[n]}};oe.getAllPlayers=()=>Object.keys(Ct.players).map(t=>Ct.players[t]).filter(Boolean);oe.players=Ct.players;oe.getComponent=_e.getComponent;oe.registerComponent=(t,e)=>(nt.isTech(e)&&ut.warn(`The ${t} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),_e.registerComponent.call(_e,t,e));oe.getTech=nt.getTech;oe.registerTech=nt.registerTech;oe.use=UB;Object.defineProperty(oe,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(oe.middleware,"TERMINATOR",{value:Hd,writeable:!1,enumerable:!0});oe.browser=d1;oe.obj=mB;oe.mergeOptions=_n(9,"videojs.mergeOptions","videojs.obj.merge",kt);oe.defineLazyProperty=_n(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",kf);oe.bind=_n(9,"videojs.bind","native Function.prototype.bind",Ut);oe.registerPlugin=vs.registerPlugin;oe.deregisterPlugin=vs.deregisterPlugin;oe.plugin=(t,e)=>(ut.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),vs.registerPlugin(t,e));oe.getPlugins=vs.getPlugins;oe.getPlugin=vs.getPlugin;oe.getPluginVersion=vs.getPluginVersion;oe.addLanguage=function(t,e){return t=(""+t).toLowerCase(),oe.options.languages=kt(oe.options.languages,{[t]:e}),oe.options.languages[t]};oe.log=ut;oe.createLogger=n1;oe.time=kB;oe.createTimeRange=_n(9,"videojs.createTimeRange","videojs.time.createTimeRanges",hn);oe.createTimeRanges=_n(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",hn);oe.formatTime=_n(9,"videojs.formatTime","videojs.time.formatTime",ha);oe.setFormatTime=_n(9,"videojs.setFormatTime","videojs.time.setFormatTime",R1);oe.resetFormatTime=_n(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",N1);oe.parseUrl=_n(9,"videojs.parseUrl","videojs.url.parseUrl",Q_);oe.isCrossOrigin=_n(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",Hf);oe.EventTarget=Os;oe.any=G_;oe.on=Ls;oe.one=jf;oe.off=Ri;oe.trigger=Ul;oe.xhr=H2;oe.TrackList=da;oe.TextTrack=Uc;oe.TextTrackList=Z_;oe.AudioTrack=z1;oe.AudioTrackList=F1;oe.VideoTrack=H1;oe.VideoTrackList=U1;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(t=>{oe[t]=function(){return ut.warn(`videojs.${t}() is deprecated; use videojs.dom.${t}() instead`),w1[t].apply(null,arguments)}});oe.computedStyle=_n(9,"videojs.computedStyle","videojs.dom.computedStyle",Al);oe.dom=w1;oe.fn=CB;oe.num=oF;oe.str=DB;oe.url=BB;oe.Error=IF;/*! @name videojs-contrib-quality-levels @version 4.1.0 @license Apache-2.0 */class LF{constructor(e){let i=this;return i.id=e.id,i.label=i.id,i.width=e.width,i.height=e.height,i.bitrate=e.bandwidth,i.frameRate=e.frameRate,i.enabled_=e.enabled,Object.defineProperty(i,"enabled",{get(){return i.enabled_()},set(s){i.enabled_(s)}}),i}}class Gd extends oe.EventTarget{constructor(){super();let e=this;return e.levels_=[],e.selectedIndex_=-1,Object.defineProperty(e,"selectedIndex",{get(){return e.selectedIndex_}}),Object.defineProperty(e,"length",{get(){return e.levels_.length}}),e[Symbol.iterator]=()=>e.levels_.values(),e}addQualityLevel(e){let i=this.getQualityLevelById(e.id);if(i)return i;const s=this.levels_.length;return i=new LF(e),""+s in this||Object.defineProperty(this,s,{get(){return this.levels_[s]}}),this.levels_.push(i),this.trigger({qualityLevel:i,type:"addqualitylevel"}),i}removeQualityLevel(e){let i=null;for(let s=0,n=this.length;s<n;s++)if(this[s]===e){i=this.levels_.splice(s,1)[0],this.selectedIndex_===s?this.selectedIndex_=-1:this.selectedIndex_>s&&this.selectedIndex_--;break}return i&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),i}getQualityLevelById(e){for(let i=0,s=this.length;i<s;i++){const n=this[i];if(n.id===e)return n}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}Gd.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const t in Gd.prototype.allowedEvents_)Gd.prototype["on"+t]=null;var xC="4.1.0";const OF=function(t,e){const i=t.qualityLevels,s=new Gd,n=function(){s.dispose(),t.qualityLevels=i,t.off("dispose",n)};return t.on("dispose",n),t.qualityLevels=()=>s,t.qualityLevels.VERSION=xC,s},SC=function(t){return OF(this,oe.obj.merge({},t))};oe.registerPlugin("qualityLevels",SC);SC.VERSION=xC;/*! @name @videojs/http-streaming @version 3.17.2 @license Apache-2.0 */const hs=Ef,Xd=(t,e)=>e&&e.responseURL&&t!==e.responseURL?e.responseURL:t,Js=t=>oe.log.debug?oe.log.debug.bind(oe,"VHS:",`${t} >`):function(){};function wt(...t){const e=oe.obj||oe;return(e.merge||e.mergeOptions).apply(e,t)}function Ti(...t){const e=oe.time||oe;return(e.createTimeRanges||e.createTimeRanges).apply(e,t)}function MF(t){if(t.length===0)return"Buffered Ranges are empty";let e=`Buffered Ranges: 
`;for(let i=0;i<t.length;i++){const s=t.start(i),n=t.end(i);e+=`${s} --> ${n}. Duration (${n-s})
`}return e}const Un=1/30,jn=Un*3,CC=function(t,e){const i=[];let s;if(t&&t.length)for(s=0;s<t.length;s++)e(t.start(s),t.end(s))&&i.push([t.start(s),t.end(s)]);return Ti(i)},Ka=function(t,e){return CC(t,function(i,s){return i-jn<=e&&s+jn>=e})},Xh=function(t,e){return CC(t,function(i){return i-Un>=e})},RF=function(t){if(t.length<2)return Ti();const e=[];for(let i=1;i<t.length;i++){const s=t.end(i-1),n=t.start(i);e.push([s,n])}return Ti(e)},NF=function(t,e){let i=null,s=null,n=0;const r=[],o=[];if(!t||!t.length||!e||!e.length)return Ti();let l=t.length;for(;l--;)r.push({time:t.start(l),type:"start"}),r.push({time:t.end(l),type:"end"});for(l=e.length;l--;)r.push({time:e.start(l),type:"start"}),r.push({time:e.end(l),type:"end"});for(r.sort(function(u,h){return u.time-h.time}),l=0;l<r.length;l++)r[l].type==="start"?(n++,n===2&&(i=r[l].time)):r[l].type==="end"&&(n--,n===1&&(s=r[l].time)),i!==null&&s!==null&&(o.push([i,s]),i=null,s=null);return Ti(o)},wC=t=>{const e=[];if(!t||!t.length)return"";for(let i=0;i<t.length;i++)e.push(t.start(i)+" => "+t.end(i));return e.join(", ")},BF=function(t,e,i=1){return((t.length?t.end(t.length-1):0)-e)/i},Zo=t=>{const e=[];for(let i=0;i<t.length;i++)e.push({start:t.start(i),end:t.end(i)});return e},FF=function(t,e){if(t===e)return!1;if(!t&&e||!e&&t||t.length!==e.length)return!0;for(let i=0;i<t.length;i++)if(t.start(i)!==e.start(i)||t.end(i)!==e.end(i))return!0;return!1},zm=function(t){if(!(!t||!t.length||!t.end))return t.end(t.length-1)},m0=function(t,e){let i=0;if(!t||!t.length)return i;for(let s=0;s<t.length;s++){const n=t.start(s),r=t.end(s);if(!(e>r)){if(e>n&&e<=r){i+=r-e;continue}i+=r-n}}return i},g0=(t,e)=>{if(!e.preload)return e.duration;let i=0;return(e.parts||[]).forEach(function(s){i+=s.duration}),(e.preloadHints||[]).forEach(function(s){s.type==="PART"&&(i+=t.partTargetDuration)}),i},Ig=t=>(t.segments||[]).reduce((e,i,s)=>(i.parts?i.parts.forEach(function(n,r){e.push({duration:n.duration,segmentIndex:s,partIndex:r,part:n,segment:i})}):e.push({duration:i.duration,segmentIndex:s,partIndex:null,segment:i,part:null}),e),[]),EC=t=>{const e=t.segments&&t.segments.length&&t.segments[t.segments.length-1];return e&&e.parts||[]},AC=({preloadSegment:t})=>{if(!t)return;const{parts:e,preloadHints:i}=t;let s=(i||[]).reduce((n,r)=>n+(r.type==="PART"?1:0),0);return s+=e&&e.length?e.length:0,s},DC=(t,e)=>{if(e.endList)return 0;if(t&&t.suggestedPresentationDelay)return t.suggestedPresentationDelay;const i=EC(e).length>0;return i&&e.serverControl&&e.serverControl.partHoldBack?e.serverControl.partHoldBack:i&&e.partTargetDuration?e.partTargetDuration*3:e.serverControl&&e.serverControl.holdBack?e.serverControl.holdBack:e.targetDuration?e.targetDuration*3:0},UF=function(t,e){let i=0,s=e-t.mediaSequence,n=t.segments[s];if(n){if(typeof n.start<"u")return{result:n.start,precise:!0};if(typeof n.end<"u")return{result:n.end-n.duration,precise:!0}}for(;s--;){if(n=t.segments[s],typeof n.end<"u")return{result:i+n.end,precise:!0};if(i+=g0(t,n),typeof n.start<"u")return{result:i+n.start,precise:!0}}return{result:i,precise:!1}},jF=function(t,e){let i=0,s,n=e-t.mediaSequence;for(;n<t.segments.length;n++){if(s=t.segments[n],typeof s.start<"u")return{result:s.start-i,precise:!0};if(i+=g0(t,s),typeof s.end<"u")return{result:s.end-i,precise:!0}}return{result:-1,precise:!1}},PC=function(t,e,i){if(typeof e>"u"&&(e=t.mediaSequence+t.segments.length),e<t.mediaSequence)return 0;const s=UF(t,e);if(s.precise)return s.result;const n=jF(t,e);return n.precise?n.result:s.result+i},kC=function(t,e,i){if(!t)return 0;if(typeof i!="number"&&(i=0),typeof e>"u"){if(t.totalDuration)return t.totalDuration;if(!t.endList)return $.Infinity}return PC(t,e,i)},ac=function({defaultDuration:t,durationList:e,startIndex:i,endIndex:s}){let n=0;if(i>s&&([i,s]=[s,i]),i<0){for(let r=i;r<Math.min(0,s);r++)n+=t;i=0}for(let r=i;r<s;r++)n+=e[r].duration;return n},IC=function(t,e,i,s){if(!t||!t.segments)return null;if(t.endList)return kC(t);if(e===null)return null;e=e||0;let n=PC(t,t.mediaSequence+t.segments.length,e);return i&&(s=typeof s=="number"?s:DC(null,t),n-=s),Math.max(0,n)},zF=function(t,e,i){const n=e||0;let r=IC(t,e,!0,i);return r===null?Ti():(r<n&&(r=n),Ti(n,r))},HF=function({playlist:t,currentTime:e,startingSegmentIndex:i,startingPartIndex:s,startTime:n,exactManifestTimings:r}){let o=e-n;const l=Ig(t);let u=0;for(let h=0;h<l.length;h++){const d=l[h];if(i===d.segmentIndex&&!(typeof s=="number"&&typeof d.partIndex=="number"&&s!==d.partIndex)){u=h;break}}if(o<0){if(u>0)for(let h=u-1;h>=0;h--){const d=l[h];if(o+=d.duration,r){if(o<0)continue}else if(o+Un<=0)continue;return{partIndex:d.partIndex,segmentIndex:d.segmentIndex,startTime:n-ac({defaultDuration:t.targetDuration,durationList:l,startIndex:u,endIndex:h})}}return{partIndex:l[0]&&l[0].partIndex||null,segmentIndex:l[0]&&l[0].segmentIndex||0,startTime:e}}if(u<0){for(let h=u;h<0;h++)if(o-=t.targetDuration,o<0)return{partIndex:l[0]&&l[0].partIndex||null,segmentIndex:l[0]&&l[0].segmentIndex||0,startTime:e};u=0}for(let h=u;h<l.length;h++){const d=l[h];o-=d.duration;const m=d.duration>Un,_=o===0,T=m&&o+Un>=0;if(!((_||T)&&h!==l.length-1)){if(r){if(o>0)continue}else if(o-Un>=0)continue;return{partIndex:d.partIndex,segmentIndex:d.segmentIndex,startTime:n+ac({defaultDuration:t.targetDuration,durationList:l,startIndex:u,endIndex:h})}}}return{segmentIndex:l[l.length-1].segmentIndex,partIndex:l[l.length-1].partIndex,startTime:e}},LC=function(t){return t.excludeUntil&&t.excludeUntil>Date.now()},_0=function(t){return t.excludeUntil&&t.excludeUntil===1/0},Wf=function(t){const e=LC(t);return!t.disabled&&!e},VF=function(t){return t.disabled},qF=function(t){for(let e=0;e<t.segments.length;e++)if(t.segments[e].key)return!0;return!1},OC=function(t,e){return e.attributes&&e.attributes[t]},$F=function(t,e,i,s=0){return OC("BANDWIDTH",i)?(t*i.attributes.BANDWIDTH-s*8)/e:NaN},Lg=(t,e)=>{if(t.playlists.length===1)return!0;const i=e.attributes.BANDWIDTH||Number.MAX_VALUE;return t.playlists.filter(s=>Wf(s)?(s.attributes.BANDWIDTH||0)<i:!1).length===0},y0=(t,e)=>!t&&!e||!t&&e||t&&!e?!1:!!(t===e||t.id&&e.id&&t.id===e.id||t.resolvedUri&&e.resolvedUri&&t.resolvedUri===e.resolvedUri||t.uri&&e.uri&&t.uri===e.uri),vT=function(t,e){const i=t&&t.mediaGroups&&t.mediaGroups.AUDIO||{};let s=!1;for(const n in i){for(const r in i[n])if(s=e(i[n][r]),s)break;if(s)break}return!!s},Vc=t=>{if(!t||!t.playlists||!t.playlists.length)return vT(t,i=>i.playlists&&i.playlists.length||i.uri);for(let e=0;e<t.playlists.length;e++){const i=t.playlists[e],s=i.attributes&&i.attributes.CODECS;if(!(s&&s.split(",").every(r=>$2(r))||vT(t,r=>y0(i,r))))return!1}return!0};var fs={liveEdgeDelay:DC,duration:kC,seekable:zF,getMediaInfoForTime:HF,isEnabled:Wf,isDisabled:VF,isExcluded:LC,isIncompatible:_0,playlistEnd:IC,isAes:qF,hasAttribute:OC,estimateSegmentRequestTime:$F,isLowestEnabledRendition:Lg,isAudioOnly:Vc,playlistMatch:y0,segmentDurationWithParts:g0};const{log:MC}=oe,ll=(t,e)=>`${t}-${e}`,RC=(t,e,i)=>`placeholder-uri-${t}-${e}-${i}`,WF=({onwarn:t,oninfo:e,manifestString:i,customTagParsers:s=[],customTagMappers:n=[],llhls:r})=>{const o=new O3;t&&o.on("warn",t),e&&o.on("info",e),s.forEach(h=>o.addParser(h)),n.forEach(h=>o.addTagMapper(h)),o.push(i),o.end();const l=o.manifest;if(r||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(h){l.hasOwnProperty(h)&&delete l[h]}),l.segments&&l.segments.forEach(function(h){["parts","preloadHints"].forEach(function(d){h.hasOwnProperty(d)&&delete h[d]})})),!l.targetDuration){let h=10;l.segments&&l.segments.length&&(h=l.segments.reduce((d,m)=>Math.max(d,m.duration),0)),t&&t({message:`manifest has no targetDuration defaulting to ${h}`}),l.targetDuration=h}const u=EC(l);if(u.length&&!l.partTargetDuration){const h=u.reduce((d,m)=>Math.max(d,m.duration),0);t&&(t({message:`manifest has no partTargetDuration defaulting to ${h}`}),MC.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),l.partTargetDuration=h}return l},Vl=(t,e)=>{t.mediaGroups&&["AUDIO","SUBTITLES"].forEach(i=>{if(t.mediaGroups[i])for(const s in t.mediaGroups[i])for(const n in t.mediaGroups[i][s]){const r=t.mediaGroups[i][s][n];e(r,i,s,n)}})},NC=({playlist:t,uri:e,id:i})=>{t.id=i,t.playlistErrors_=0,e&&(t.uri=e),t.attributes=t.attributes||{}},GF=t=>{let e=t.playlists.length;for(;e--;){const i=t.playlists[e];NC({playlist:i,id:ll(e,i.uri)}),i.resolvedUri=hs(t.uri,i.uri),t.playlists[i.id]=i,t.playlists[i.uri]=i,i.attributes.BANDWIDTH||MC.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},XF=t=>{Vl(t,e=>{e.uri&&(e.resolvedUri=hs(t.uri,e.uri))})},KF=(t,e)=>{const i=ll(0,e),s={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:$.location.href,resolvedUri:$.location.href,playlists:[{uri:e,id:i,resolvedUri:e,attributes:{}}]};return s.playlists[i]=s.playlists[0],s.playlists[e]=s.playlists[0],s},BC=(t,e,i=RC)=>{t.uri=e;for(let n=0;n<t.playlists.length;n++)if(!t.playlists[n].uri){const r=`placeholder-uri-${n}`;t.playlists[n].uri=r}const s=Vc(t);Vl(t,(n,r,o,l)=>{if(!n.playlists||!n.playlists.length){if(s&&r==="AUDIO"&&!n.uri)for(let u=0;u<t.playlists.length;u++){const h=t.playlists[u];if(h.attributes&&h.attributes.AUDIO&&h.attributes.AUDIO===o)return}n.playlists=[si({},n)]}n.playlists.forEach(function(u,h){const d=i(r,o,l,u),m=ll(h,d);u.uri?u.resolvedUri=u.resolvedUri||hs(t.uri,u.uri):(u.uri=h===0?d:m,u.resolvedUri=u.uri),u.id=u.id||m,u.attributes=u.attributes||{},t.playlists[u.id]=u,t.playlists[u.uri]=u})}),GF(t),XF(t)};class bT{constructor(){this.offset_=null,this.pendingDateRanges_=new Map,this.processedDateRanges_=new Map}setOffset(e=[]){if(this.offset_!==null||!e.length)return;const[i]=e;i.programDateTime!==void 0&&(this.offset_=i.programDateTime/1e3)}setPendingDateRanges(e=[]){if(!e.length)return;const[i]=e,s=i.startDate.getTime();this.trimProcessedDateRanges_(s),this.pendingDateRanges_=e.reduce((n,r)=>(n.set(r.id,r),n),new Map)}processDateRange(e){this.pendingDateRanges_.delete(e.id),this.processedDateRanges_.set(e.id,e)}getDateRangesToProcess(){if(this.offset_===null)return[];const e={},i=[];this.pendingDateRanges_.forEach((s,n)=>{if(!this.processedDateRanges_.has(n)&&(s.startTime=s.startDate.getTime()/1e3-this.offset_,s.processDateRange=()=>this.processDateRange(s),i.push(s),!!s.class))if(e[s.class]){const r=e[s.class].push(s);s.classListIndex=r-1}else e[s.class]=[s],s.classListIndex=0});for(const s of i){const n=e[s.class]||[];s.endDate?s.endTime=s.endDate.getTime()/1e3-this.offset_:s.endOnNext&&n[s.classListIndex+1]?s.endTime=n[s.classListIndex+1].startTime:s.duration?s.endTime=s.startTime+s.duration:s.plannedDuration?s.endTime=s.startTime+s.plannedDuration:s.endTime=s.startTime}return i}trimProcessedDateRanges_(e){new Map(this.processedDateRanges_).forEach((s,n)=>{s.startDate.getTime()<e&&this.processedDateRanges_.delete(n)})}}const FC=22,aa=({requestType:t,request:e,error:i,parseFailure:s})=>{const n=e.status<200||e.status>299,r=e.status>=400&&e.status<=499,o={uri:e.uri,requestType:t},l=n&&!r||s;if(i&&r)o.error=si({},i),o.errorType=oe.Error.NetworkRequestFailed;else if(e.aborted)o.errorType=oe.Error.NetworkRequestAborted;else if(e.timedout)o.errorType=oe.Error.NetworkRequestTimeout;else if(l){const u=s?oe.Error.NetworkBodyParserFailed:oe.Error.NetworkBadStatus;o.errorType=u,o.status=e.status,o.headers=e.headers}return o},ZF=Js("CodecUtils"),UC=function(t){const e=t.attributes||{};if(e.CODECS)return Rn(e.CODECS)},jC=(t,e)=>{const i=e.attributes||{};return t&&t.mediaGroups&&t.mediaGroups.AUDIO&&i.AUDIO&&t.mediaGroups.AUDIO[i.AUDIO]},YF=(t,e)=>{if(!jC(t,e))return!0;const i=e.attributes||{},s=t.mediaGroups.AUDIO[i.AUDIO];for(const n in s)if(!s[n].uri&&!s[n].playlists)return!0;return!1},wc=function(t){const e={};return t.forEach(({mediaType:i,type:s,details:n})=>{e[i]=e[i]||[],e[i].push(q2(`${s}${n}`))}),Object.keys(e).forEach(function(i){if(e[i].length>1){ZF(`multiple ${i} codecs found as attributes: ${e[i].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),e[i]=null;return}e[i]=e[i][0]}),e},TT=function(t){let e=0;return t.audio&&e++,t.video&&e++,e},lc=function(t,e){const i=e.attributes||{},s=wc(UC(e)||[]);if(jC(t,e)&&!s.audio&&!YF(t,e)){const n=wc(R3(t,i.AUDIO)||[]);n.audio&&(s.audio=n.audio)}return s},{EventTarget:QF}=oe,JF=(t,e)=>{if(e.endList||!e.serverControl)return t;const i={};if(e.serverControl.canBlockReload){const{preloadSegment:s}=e;let n=e.mediaSequence+e.segments.length;if(s){const r=s.parts||[],o=AC(e)-1;o>-1&&o!==r.length-1&&(i._HLS_part=o),(o>-1||r.length)&&n--}i._HLS_msn=n}if(e.serverControl&&e.serverControl.canSkipUntil&&(i._HLS_skip=e.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(i).length){const s=new $.URL(t);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(n){i.hasOwnProperty(n)&&s.searchParams.set(n,i[n])}),t=s.toString()}return t},e5=(t,e)=>{if(!t)return e;const i=wt(t,e);if(t.preloadHints&&!e.preloadHints&&delete i.preloadHints,t.parts&&!e.parts)delete i.parts;else if(t.parts&&e.parts)for(let s=0;s<e.parts.length;s++)t.parts&&t.parts[s]&&(i.parts[s]=wt(t.parts[s],e.parts[s]));return!t.skipped&&e.skipped&&(i.skipped=!1),t.preload&&!e.preload&&(i.preload=!1),i},t5=(t,e,i)=>{const s=t.slice(),n=e.slice();i=i||0;const r=[];let o;for(let l=0;l<n.length;l++){const u=s[l+i],h=n[l];u?(o=u.map||o,r.push(e5(u,h))):(o&&!h.map&&(h.map=o),r.push(h))}return r},zC=(t,e)=>{!t.resolvedUri&&t.uri&&(t.resolvedUri=hs(e,t.uri)),t.key&&!t.key.resolvedUri&&(t.key.resolvedUri=hs(e,t.key.uri)),t.map&&!t.map.resolvedUri&&(t.map.resolvedUri=hs(e,t.map.uri)),t.map&&t.map.key&&!t.map.key.resolvedUri&&(t.map.key.resolvedUri=hs(e,t.map.key.uri)),t.parts&&t.parts.length&&t.parts.forEach(i=>{i.resolvedUri||(i.resolvedUri=hs(e,i.uri))}),t.preloadHints&&t.preloadHints.length&&t.preloadHints.forEach(i=>{i.resolvedUri||(i.resolvedUri=hs(e,i.uri))})},HC=function(t){const e=t.segments||[],i=t.preloadSegment;if(i&&i.parts&&i.parts.length){if(i.preloadHints){for(let s=0;s<i.preloadHints.length;s++)if(i.preloadHints[s].type==="MAP")return e}i.duration=t.targetDuration,i.preload=!0,e.push(i)}return e},VC=(t,e)=>t===e||t.segments&&e.segments&&t.segments.length===e.segments.length&&t.endList===e.endList&&t.mediaSequence===e.mediaSequence&&t.preloadSegment===e.preloadSegment,Og=(t,e,i=VC)=>{const s=wt(t,{}),n=s.playlists[e.id];if(!n||i(n,e))return null;e.segments=HC(e);const r=wt(n,e);if(r.preloadSegment&&!e.preloadSegment&&delete r.preloadSegment,n.segments){if(e.skip){e.segments=e.segments||[];for(let o=0;o<e.skip.skippedSegments;o++)e.segments.unshift({skipped:!0})}r.segments=t5(n.segments,e.segments,e.mediaSequence-n.mediaSequence)}r.segments.forEach(o=>{zC(o,r.resolvedUri)});for(let o=0;o<s.playlists.length;o++)s.playlists[o].id===e.id&&(s.playlists[o]=r);return s.playlists[e.id]=r,s.playlists[e.uri]=r,Vl(t,(o,l,u,h)=>{if(o.playlists)for(let d=0;d<o.playlists.length;d++)e.id===o.playlists[d].id&&(o.playlists[d]=r)}),s},Mg=(t,e)=>{const i=t.segments||[],s=i[i.length-1],n=s&&s.parts&&s.parts[s.parts.length-1],r=n&&n.duration||s&&s.duration;return e&&r?r*1e3:(t.partTargetDuration||t.targetDuration||10)*500},xT=(t,e,i)=>{if(!t)return;const s=[];return t.forEach(n=>{if(!n.attributes)return;const{BANDWIDTH:r,RESOLUTION:o,CODECS:l}=n.attributes;s.push({id:n.id,bandwidth:r,resolution:o,codecs:l})}),{type:e,isLive:i,renditions:s}};class Za extends QF{constructor(e,i,s={}){if(super(),!e)throw new Error("A non-empty playlist URL or object is required");this.logger_=Js("PlaylistLoader");const{withCredentials:n=!1}=s;this.src=e,this.vhs_=i,this.withCredentials=n,this.addDateRangesToTextTrack_=s.addDateRangesToTextTrack;const r=i.options_;this.customTagParsers=r&&r.customTagParsers||[],this.customTagMappers=r&&r.customTagMappers||[],this.llhls=r&&r.llhls,this.dateRangesStorage_=new bT,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_),this.on("loadedplaylist",this.handleLoadedPlaylist_.bind(this))}handleLoadedPlaylist_(){const e=this.media();if(!e)return;this.dateRangesStorage_.setOffset(e.segments),this.dateRangesStorage_.setPendingDateRanges(e.dateRanges);const i=this.dateRangesStorage_.getDateRangesToProcess();!i.length||!this.addDateRangesToTextTrack_||this.addDateRangesToTextTrack_(i)}handleMediaupdatetimeout_(){if(this.state!=="HAVE_METADATA")return;const e=this.media();let i=hs(this.main.uri,e.uri);this.llhls&&(i=JF(i,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:i,withCredentials:this.withCredentials,requestType:"hls-playlist"},(s,n)=>{if(this.request){if(s)return this.playlistRequestError(this.request,this.media(),"HAVE_METADATA");this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}})}playlistRequestError(e,i,s){const{uri:n,id:r}=i;this.request=null,s&&(this.state=s),this.error={playlist:this.main.playlists[r],status:e.status,message:`HLS playlist request error at URL: ${n}.`,responseText:e.responseText,code:e.status>=500?4:2,metadata:aa({requestType:e.requestType,request:e,error:e.error})},this.trigger("error")}parseManifest_({url:e,manifestString:i}){try{const s=WF({onwarn:({message:n})=>this.logger_(`m3u8-parser warn for ${e}: ${n}`),oninfo:({message:n})=>this.logger_(`m3u8-parser info for ${e}: ${n}`),manifestString:i,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls});return!s.playlists||!s.playlists.length||this.excludeAudioOnlyVariants(s.playlists),s}catch(s){this.error=s,this.error.metadata={errorType:oe.Error.StreamingHlsPlaylistParserError,error:s}}}excludeAudioOnlyVariants(e){const i=s=>{const n=s.attributes||{},{width:r,height:o}=n.RESOLUTION||{};if(r&&o)return!0;const l=UC(s)||[];return!!wc(l).video};e.some(i)&&e.forEach(s=>{i(s)||(s.excludeUntil=1/0)})}haveMetadata({playlistString:e,playlistObject:i,url:s,id:n}){this.request=null,this.state="HAVE_METADATA";const r={playlistInfo:{type:"media",uri:s}};this.trigger({type:"playlistparsestart",metadata:r});const o=i||this.parseManifest_({url:s,manifestString:e});o.lastRequest=Date.now(),NC({playlist:o,uri:s,id:n});const l=Og(this.main,o);this.targetDuration=o.partTargetDuration||o.targetDuration,this.pendingMedia_=null,l?(this.main=l,this.media_=this.main.playlists[n]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(Mg(this.media(),!!l)),r.parsedPlaylist=xT(this.main.playlists,r.playlistInfo.type,!this.media_.endList),this.trigger({type:"playlistparsecomplete",metadata:r}),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),$.clearTimeout(this.mediaUpdateTimeout),$.clearTimeout(this.finalRenditionTimeout),this.dateRangesStorage_=new bT,this.off()}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e,i){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof e=="string"){if(!this.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.main.playlists[e]}if($.clearTimeout(this.finalRenditionTimeout),i){const l=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=$.setTimeout(this.media.bind(this,e,!1),l);return}const s=this.state,n=!this.media_||e.id!==this.media_.id,r=this.main.playlists[e.id];if(r&&r.endList||e.endList&&e.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,n&&(this.trigger("mediachanging"),s==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(Mg(e,!0)),!n)return;if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e;const o={playlistInfo:{type:"media",uri:e.uri}};this.trigger({type:"playlistrequeststart",metadata:o}),this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials,requestType:"hls-playlist"},(l,u)=>{if(this.request){if(e.lastRequest=Date.now(),e.resolvedUri=Xd(e.resolvedUri,u),l)return this.playlistRequestError(this.request,e,s);this.trigger({type:"playlistrequestcomplete",metadata:o}),this.haveMetadata({playlistString:u.responseText,url:e.uri,id:e.id}),s==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}})}pause(){this.mediaUpdateTimeout&&($.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")}load(e){this.mediaUpdateTimeout&&($.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const i=this.media();if(e){const s=i?(i.partTargetDuration||i.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=$.setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},s);return}if(!this.started){this.start();return}i&&!i.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")}updateMediaUpdateTimeout_(e){this.mediaUpdateTimeout&&($.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=$.setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(e)},e))}start(){if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=$.location.href),this.src.resolvedUri=this.src.uri,setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);return}const e={playlistInfo:{type:"multivariant",uri:this.src}};this.trigger({type:"playlistrequeststart",metadata:e}),this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials,requestType:"hls-playlist"},(i,s)=>{if(!this.request)return;if(this.request=null,i)return this.error={status:s.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:s.responseText,code:2,metadata:aa({requestType:s.requestType,request:s,error:i})},this.state==="HAVE_NOTHING"&&(this.started=!1),this.trigger("error");this.trigger({type:"playlistrequestcomplete",metadata:e}),this.src=Xd(this.src,s),this.trigger({type:"playlistparsestart",metadata:e});const n=this.parseManifest_({manifestString:s.responseText,url:this.src});e.parsedPlaylist=xT(n.playlists,e.playlistInfo.type,!1),this.trigger({type:"playlistparsecomplete",metadata:e}),this.setupInitialPlaylist(n)})}srcUri(){return typeof this.src=="string"?this.src:this.src.uri}setupInitialPlaylist(e){if(this.state="HAVE_MAIN_MANIFEST",e.playlists){this.main=e,BC(this.main,this.srcUri()),e.playlists.forEach(s=>{s.segments=HC(s),s.segments.forEach(n=>{zC(n,s.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.main.playlists[0]);return}const i=this.srcUri()||$.location.href;this.main=KF(e,i),this.haveMetadata({playlistObject:e,url:i,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}updateOrDeleteClone(e,i){const s=this.main,n=e.ID;let r=s.playlists.length;for(;r--;){const o=s.playlists[r];if(o.attributes["PATHWAY-ID"]===n){const l=o.resolvedUri,u=o.id;if(i){const h=this.createCloneURI_(o.resolvedUri,e),d=ll(n,h),m=this.createCloneAttributes_(n,o.attributes),_=this.createClonePlaylist_(o,d,e,m);s.playlists[r]=_,s.playlists[d]=_,s.playlists[h]=_}else s.playlists.splice(r,1);delete s.playlists[u],delete s.playlists[l]}}this.updateOrDeleteCloneMedia(e,i)}updateOrDeleteCloneMedia(e,i){const s=this.main,n=e.ID;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(r=>{if(!(!s.mediaGroups[r]||!s.mediaGroups[r][n])){for(const o in s.mediaGroups[r])if(o===n){for(const l in s.mediaGroups[r][o])s.mediaGroups[r][o][l].playlists.forEach((h,d)=>{const m=s.playlists[h.id],_=m.id,T=m.resolvedUri;delete s.playlists[_],delete s.playlists[T]});delete s.mediaGroups[r][o]}}}),i&&this.createClonedMediaGroups_(e)}addClonePathway(e,i={}){const s=this.main,n=s.playlists.length,r=this.createCloneURI_(i.resolvedUri,e),o=ll(e.ID,r),l=this.createCloneAttributes_(e.ID,i.attributes),u=this.createClonePlaylist_(i,o,e,l);s.playlists[n]=u,s.playlists[o]=u,s.playlists[r]=u,this.createClonedMediaGroups_(e)}createClonedMediaGroups_(e){const i=e.ID,s=e["BASE-ID"],n=this.main;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(r=>{if(!(!n.mediaGroups[r]||n.mediaGroups[r][i]))for(const o in n.mediaGroups[r]){if(o===s)n.mediaGroups[r][i]={};else continue;for(const l in n.mediaGroups[r][o]){const u=n.mediaGroups[r][o][l];n.mediaGroups[r][i][l]=si({},u);const h=n.mediaGroups[r][i][l],d=this.createCloneURI_(u.resolvedUri,e);h.resolvedUri=d,h.uri=d,h.playlists=[],u.playlists.forEach((m,_)=>{const T=n.playlists[m.id],C=RC(r,i,l),x=ll(i,C);if(T&&!n.playlists[x]){const E=this.createClonePlaylist_(T,x,e),P=E.resolvedUri;n.playlists[x]=E,n.playlists[P]=E}h.playlists[_]=this.createClonePlaylist_(m,x,e)})}}})}createClonePlaylist_(e,i,s,n){const r=this.createCloneURI_(e.resolvedUri,s),o={resolvedUri:r,uri:r,id:i};return e.segments&&(o.segments=[]),n&&(o.attributes=n),wt(e,o)}createCloneURI_(e,i){const s=new URL(e);s.hostname=i["URI-REPLACEMENT"].HOST;const n=i["URI-REPLACEMENT"].PARAMS;for(const r of Object.keys(n))s.searchParams.set(r,n[r]);return s.href}createCloneAttributes_(e,i){const s={"PATHWAY-ID":e};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(n=>{i[n]&&(s[n]=e)}),s}getKeyIdSet(e){const i=new Set;if(!e||!e.contentProtection)return i;for(const s in e.contentProtection)if(e.contentProtection[s]&&e.contentProtection[s].attributes&&e.contentProtection[s].attributes.keyId){const n=e.contentProtection[s].attributes.keyId;i.add(n.toLowerCase())}return i}}const Rg=function(t,e,i,s){const n=t.responseType==="arraybuffer"?t.response:t.responseText;!e&&n&&(t.responseTime=Date.now(),t.roundTripTime=t.responseTime-t.requestTime,t.bytesReceived=n.byteLength||n.length,t.bandwidth||(t.bandwidth=Math.floor(t.bytesReceived/t.roundTripTime*8*1e3))),i.headers&&(t.responseHeaders=i.headers),e&&e.code==="ETIMEDOUT"&&(t.timedout=!0),!e&&!t.aborted&&i.statusCode!==200&&i.statusCode!==206&&i.statusCode!==0&&(e=new Error("XHR Failed with a response of: "+(t&&(n||t.responseText)))),s(e,t)},i5=(t,e)=>{if(!t||!t.size)return;let i=e;return t.forEach(s=>{i=s(i)}),i},s5=(t,e,i,s)=>{!t||!t.size||t.forEach(n=>{n(e,i,s)})},qC=function(){const t=function e(i,s){i=wt({timeout:45e3},i);const n=e.beforeRequest||oe.Vhs.xhr.beforeRequest,r=e._requestCallbackSet||oe.Vhs.xhr._requestCallbackSet||new Set,o=e._responseCallbackSet||oe.Vhs.xhr._responseCallbackSet;n&&typeof n=="function"&&(oe.log.warn("beforeRequest is deprecated, use onRequest instead."),r.add(n));const l=oe.Vhs.xhr.original===!0?oe.xhr:oe.Vhs.xhr,u=i5(r,i);r.delete(n);const h=l(u||i,function(m,_){return s5(o,h,m,_),Rg(h,m,_,s)}),d=h.abort;return h.abort=function(){return h.aborted=!0,d.apply(h,arguments)},h.uri=i.uri,h.requestType=i.requestType,h.requestTime=Date.now(),h};return t.original=!0,t},n5=function(t){let e;const i=t.offset;return typeof t.offset=="bigint"||typeof t.length=="bigint"?e=$.BigInt(t.offset)+$.BigInt(t.length)-$.BigInt(1):e=t.offset+t.length-1,"bytes="+i+"-"+e},Ng=function(t){const e={};return t.byterange&&(e.Range=n5(t.byterange)),e},r5=function(t,e){return t.start(e)+"-"+t.end(e)},o5=function(t,e){const i=t.toString(16);return"00".substring(0,2-i.length)+i+(e%2?" ":"")},a5=function(t){return t>=32&&t<126?String.fromCharCode(t):"."},$C=function(t){const e={};return Object.keys(t).forEach(i=>{const s=t[i];G2(s)?e[i]={bytes:s.buffer,byteOffset:s.byteOffset,byteLength:s.byteLength}:e[i]=s}),e},Kd=function(t){const e=t.byterange||{length:1/0,offset:0};return[e.length,e.offset,t.resolvedUri].join(",")},WC=function(t){return t.resolvedUri},GC=t=>{const e=Array.prototype.slice.call(t),i=16;let s="",n,r;for(let o=0;o<e.length/i;o++)n=e.slice(o*i,o*i+i).map(o5).join(""),r=e.slice(o*i,o*i+i).map(a5).join(""),s+=n+" "+r+`
`;return s},l5=({bytes:t})=>GC(t),u5=t=>{let e="",i;for(i=0;i<t.length;i++)e+=r5(t,i)+" ";return e};var c5=Object.freeze({__proto__:null,createTransferableMessage:$C,initSegmentId:Kd,segmentKeyId:WC,hexDump:GC,tagDump:l5,textRanges:u5});const XC=.25,h5=(t,e)=>{if(!e.dateTimeObject)return null;const i=e.videoTimingInfo.transmuxerPrependedSeconds,n=e.videoTimingInfo.transmuxedPresentationStart+i,r=t-n;return new Date(e.dateTimeObject.getTime()+r*1e3)},d5=t=>t.transmuxedPresentationEnd-t.transmuxedPresentationStart-t.transmuxerPrependedSeconds,f5=(t,e)=>{let i;try{i=new Date(t)}catch{return null}if(!e||!e.segments||e.segments.length===0)return null;let s=e.segments[0];if(i<new Date(s.dateTimeObject))return null;for(let u=0;u<e.segments.length-1;u++){s=e.segments[u];const h=new Date(e.segments[u+1].dateTimeObject);if(i<h)break}const n=e.segments[e.segments.length-1],r=n.dateTimeObject,o=n.videoTimingInfo?d5(n.videoTimingInfo):n.duration+n.duration*XC,l=new Date(r.getTime()+o*1e3);return i>l?null:(i>new Date(r)&&(s=n),{segment:s,estimatedStart:s.videoTimingInfo?s.videoTimingInfo.transmuxedPresentationStart:fs.duration(e,e.mediaSequence+e.segments.indexOf(s)),type:s.videoTimingInfo?"accurate":"estimate"})},p5=(t,e)=>{if(!e||!e.segments||e.segments.length===0)return null;let i=0,s;for(let r=0;r<e.segments.length&&(s=e.segments[r],i=s.videoTimingInfo?s.videoTimingInfo.transmuxedPresentationEnd:i+s.duration,!(t<=i));r++);const n=e.segments[e.segments.length-1];if(n.videoTimingInfo&&n.videoTimingInfo.transmuxedPresentationEnd<t)return null;if(t>i){if(t>i+n.duration*XC)return null;s=n}return{segment:s,estimatedStart:s.videoTimingInfo?s.videoTimingInfo.transmuxedPresentationStart:i-s.duration,type:s.videoTimingInfo?"accurate":"estimate"}},m5=(t,e)=>{let i,s;try{i=new Date(t),s=new Date(e)}catch{}const n=i.getTime();return(s.getTime()-n)/1e3},g5=t=>{if(!t.segments||t.segments.length===0)return!1;for(let e=0;e<t.segments.length;e++)if(!t.segments[e].dateTimeObject)return!1;return!0},_5=({playlist:t,time:e=void 0,callback:i})=>{if(!i)throw new Error("getProgramTime: callback must be provided");if(!t||e===void 0)return i({message:"getProgramTime: playlist and time must be provided"});const s=p5(e,t);if(!s)return i({message:"valid programTime was not found"});if(s.type==="estimate")return i({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:s.estimatedStart});const n={mediaSeconds:e},r=h5(e,s.segment);return r&&(n.programDateTime=r.toISOString()),i(null,n)},KC=({programTime:t,playlist:e,retryCount:i=2,seekTo:s,pauseAfterSeek:n=!0,tech:r,callback:o})=>{if(!o)throw new Error("seekToProgramTime: callback must be provided");if(typeof t>"u"||!e||!s)return o({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!e.endList&&!r.hasStarted_)return o({message:"player must be playing a live stream to start buffering"});if(!g5(e))return o({message:"programDateTime tags must be provided in the manifest "+e.resolvedUri});const l=f5(t,e);if(!l)return o({message:`${t} was not found in the stream`});const u=l.segment,h=m5(u.dateTimeObject,t);if(l.type==="estimate"){if(i===0)return o({message:`${t} is not buffered yet. Try again`});s(l.estimatedStart+h),r.one("seeked",()=>{KC({programTime:t,playlist:e,retryCount:i-1,seekTo:s,pauseAfterSeek:n,tech:r,callback:o})});return}const d=u.start+h,m=()=>o(null,r.currentTime());r.one("seeked",m),n&&r.pause(),s(d)},Hm=(t,e)=>{if(t.readyState===4)return e()},y5=(t,e,i,s)=>{let n=[],r,o=!1;const l=function(m,_,T,C){return _.abort(),o=!0,i(m,_,T,C)},u=function(m,_){if(o)return;if(m)return m.metadata=aa({requestType:s,request:_,error:m}),l(m,_,"",n);const T=_.responseText.substring(n&&n.byteLength||0,_.responseText.length);if(n=$3(n,X2(T,!0)),r=r||Hu(n),n.length<10||r&&n.length<r+2)return Hm(_,()=>l(m,_,"",n));const C=H_(n);return C==="ts"&&n.length<188?Hm(_,()=>l(m,_,"",n)):!C&&n.length<376?Hm(_,()=>l(m,_,"",n)):l(null,_,C,n)},d=e({uri:t,beforeSend(m){m.overrideMimeType("text/plain; charset=x-user-defined"),m.addEventListener("progress",function({total:_,loaded:T}){return Rg(m,null,{statusCode:m.status},u)})}},function(m,_){return Rg(d,m,_,u)});return d},{EventTarget:v5}=oe,ST=function(t,e){if(!VC(t,e)||t.sidx&&e.sidx&&(t.sidx.offset!==e.sidx.offset||t.sidx.length!==e.sidx.length))return!1;if(!t.sidx&&e.sidx||t.sidx&&!e.sidx||t.segments&&!e.segments||!t.segments&&e.segments)return!1;if(!t.segments&&!e.segments)return!0;for(let i=0;i<t.segments.length;i++){const s=t.segments[i],n=e.segments[i];if(s.uri!==n.uri)return!1;if(!s.byterange&&!n.byterange)continue;const r=s.byterange,o=n.byterange;if(r&&!o||!r&&o||r.offset!==o.offset||r.length!==o.length)return!1}return!0},b5=(t,e,i,s)=>{const n=s.attributes.NAME||i;return`placeholder-uri-${t}-${e}-${n}`},T5=({mainXml:t,srcUrl:e,clientOffset:i,sidxMapping:s,previousManifest:n})=>{const r=V4(t,{manifestUri:e,clientOffset:i,sidxMapping:s,previousManifest:n});return BC(r,e,b5),r},x5=(t,e)=>{Vl(t,(i,s,n,r)=>{(!e.mediaGroups[s][n]||!(r in e.mediaGroups[s][n]))&&delete t.mediaGroups[s][n][r]})},S5=(t,e,i)=>{let s=!0,n=wt(t,{duration:e.duration,minimumUpdatePeriod:e.minimumUpdatePeriod,timelineStarts:e.timelineStarts});for(let r=0;r<e.playlists.length;r++){const o=e.playlists[r];if(o.sidx){const u=Df(o.sidx);i&&i[u]&&i[u].sidx&&U_(o,i[u].sidx,o.sidx.resolvedUri)}const l=Og(n,o,ST);l&&(n=l,s=!1)}return Vl(e,(r,o,l,u)=>{if(r.playlists&&r.playlists.length){const h=r.playlists[0].id,d=Og(n,r.playlists[0],ST);d&&(n=d,u in n.mediaGroups[o][l]||(n.mediaGroups[o][l][u]=r),n.mediaGroups[o][l][u].playlists[0]=n.playlists[h],s=!1)}}),x5(n,e),e.minimumUpdatePeriod!==t.minimumUpdatePeriod&&(s=!1),s?null:n},C5=(t,e)=>(!t.map&&!e.map||!!(t.map&&e.map&&t.map.byterange.offset===e.map.byterange.offset&&t.map.byterange.length===e.map.byterange.length))&&t.uri===e.uri&&t.byterange.offset===e.byterange.offset&&t.byterange.length===e.byterange.length,CT=(t,e)=>{const i={};for(const s in t){const r=t[s].sidx;if(r){const o=Df(r);if(!e[o])break;const l=e[o].sidxInfo;C5(l,r)&&(i[o]=e[o])}}return i},w5=(t,e)=>{let s=CT(t.playlists,e);return Vl(t,(n,r,o,l)=>{if(n.playlists&&n.playlists.length){const u=n.playlists;s=wt(s,CT(u,e))}}),s};class Bg extends v5{constructor(e,i,s={},n){super(),this.isPaused_=!0,this.mainPlaylistLoader_=n||this,n||(this.isMain_=!0);const{withCredentials:r=!1}=s;if(this.vhs_=i,this.withCredentials=r,this.addMetadataToTextTrack=s.addMetadataToTextTrack,!e)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=Js("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=e,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=e}get isPaused(){return this.isPaused_}requestErrored_(e,i,s){if(!this.request)return!0;if(this.request=null,e)return this.error=typeof e=="object"&&!(e instanceof Error)?e:{status:i.status,message:"DASH request error at URL: "+i.uri,response:i.response,code:2,metadata:e.metadata},s&&(this.state=s),this.trigger("error"),!0}addSidxSegments_(e,i,s){const n=e.sidx&&Df(e.sidx);if(!e.sidx||!n||this.mainPlaylistLoader_.sidxMapping_[n]){$.clearTimeout(this.mediaRequest_),this.mediaRequest_=$.setTimeout(()=>s(!1),0);return}const r=Xd(e.sidx.resolvedUri),o=(u,h)=>{if(this.requestErrored_(u,h,i))return;const d=this.mainPlaylistLoader_.sidxMapping_,{requestType:m}=h;let _;try{_=X4(Ke(h.response).subarray(8))}catch(T){T.metadata=aa({requestType:m,request:h,parseFailure:!0}),this.requestErrored_(T,h,i);return}return d[n]={sidxInfo:e.sidx,sidx:_},U_(e,_,e.sidx.resolvedUri),s(!0)},l="dash-sidx";this.request=y5(r,this.vhs_.xhr,(u,h,d,m)=>{if(u)return o(u,h);if(!d||d!=="mp4"){const C=d||"unknown";return o({status:h.status,message:`Unsupported ${C} container type for sidx segment at URL: ${r}`,response:"",playlist:e,internal:!0,playlistExclusionDuration:1/0,code:2},h)}const{offset:_,length:T}=e.sidx.byterange;if(m.length>=T+_)return o(u,{response:m.subarray(_,_+T),status:h.status,uri:h.uri});this.request=this.vhs_.xhr({uri:r,responseType:"arraybuffer",requestType:"dash-sidx",headers:Ng({byterange:e.sidx.byterange})},o)},l)}dispose(){this.isPaused_=!0,this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},$.clearTimeout(this.minimumUpdatePeriodTimeout_),$.clearTimeout(this.mediaRequest_),$.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);const i=this.state;if(typeof e=="string"){if(!this.mainPlaylistLoader_.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.mainPlaylistLoader_.main.playlists[e]}const s=!this.media_||e.id!==this.media_.id;if(s&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList){this.state="HAVE_METADATA",this.media_=e,s&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}s&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,i,n=>{this.haveMetadata({startingState:i,playlist:e})}))}haveMetadata({startingState:e,playlist:i}){this.state="HAVE_METADATA",this.loadedPlaylists_[i.id]=i,$.clearTimeout(this.mediaRequest_),this.mediaRequest_=null,this.refreshMedia_(i.id),e==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.isPaused_=!0,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),$.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&($.clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)}load(e){this.isPaused_=!1,$.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const i=this.media();if(e){const s=i?i.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=$.setTimeout(()=>this.load(),s);return}if(!this.started){this.start();return}i&&!i.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")}start(){if(this.started=!0,!this.isMain_){$.clearTimeout(this.mediaRequest_),this.mediaRequest_=$.setTimeout(()=>this.haveMain_(),0);return}this.requestMain_((e,i)=>{this.haveMain_(),!this.hasPendingRequest()&&!this.media_&&this.media(this.mainPlaylistLoader_.main.playlists[0])})}requestMain_(e){const i={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestrequeststart",metadata:i}),this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials,requestType:"dash-manifest"},(s,n)=>{if(s){const{requestType:o}=n;s.metadata=aa({requestType:o,request:n,error:s})}if(this.requestErrored_(s,n)){this.state==="HAVE_NOTHING"&&(this.started=!1);return}this.trigger({type:"manifestrequestcomplete",metadata:i});const r=n.responseText!==this.mainPlaylistLoader_.mainXml_;if(this.mainPlaylistLoader_.mainXml_=n.responseText,n.responseHeaders&&n.responseHeaders.date?this.mainLoaded_=Date.parse(n.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=Xd(this.mainPlaylistLoader_.srcUrl,n),r){this.handleMain_(),this.syncClientServerClock_(()=>e(n,r));return}return e(n,r)})}syncClientServerClock_(e){const i=q4(this.mainPlaylistLoader_.mainXml_);if(i===null)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e();if(i.method==="DIRECT")return this.mainPlaylistLoader_.clientOffset_=i.value-Date.now(),e();this.request=this.vhs_.xhr({uri:hs(this.mainPlaylistLoader_.srcUrl,i.value),method:i.method,withCredentials:this.withCredentials,requestType:"dash-clock-sync"},(s,n)=>{if(!this.request)return;if(s){const{requestType:o}=n;return this.error.metadata=aa({requestType:o,request:n,error:s}),this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e()}let r;i.method==="HEAD"?!n.responseHeaders||!n.responseHeaders.date?r=this.mainLoaded_:r=Date.parse(n.responseHeaders.date):r=Date.parse(n.responseText),this.mainPlaylistLoader_.clientOffset_=r-Date.now(),e()})}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){$.clearTimeout(this.mediaRequest_),this.mediaRequest_=null;const e=this.mainPlaylistLoader_.main,i={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestparsestart",metadata:i});let s;try{s=T5({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:e})}catch(r){this.error=r,this.error.metadata={errorType:oe.Error.StreamingDashManifestParserError,error:r},this.trigger("error")}e&&(s=S5(e,s,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=s||e;const n=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];if(n&&n!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=n),(!e||s&&s.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),this.addEventStreamToMetadataTrack_(s),s){const{duration:r,endList:o}=s,l=[];s.playlists.forEach(h=>{l.push({id:h.id,bandwidth:h.attributes.BANDWIDTH,resolution:h.attributes.RESOLUTION,codecs:h.attributes.CODECS})});const u={duration:r,isLive:!o,renditions:l};i.parsedManifest=u,this.trigger({type:"manifestparsecomplete",metadata:i})}return!!s}updateMinimumUpdatePeriodTimeout_(){const e=this.mainPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&($.clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);let i=e.main&&e.main.minimumUpdatePeriod;if(i===0&&(e.media()?i=e.media().targetDuration*1e3:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),typeof i!="number"||i<=0){i<0&&this.logger_(`found invalid minimumUpdatePeriod of ${i}, not setting a timeout`);return}this.createMUPTimeout_(i)}createMUPTimeout_(e){const i=this.mainPlaylistLoader_;i.minimumUpdatePeriodTimeout_=$.setTimeout(()=>{i.minimumUpdatePeriodTimeout_=null,i.trigger("minimumUpdatePeriod"),i.createMUPTimeout_(e)},e)}refreshXml_(){this.requestMain_((e,i)=>{i&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=w5(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,s=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(e){if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const i=this.mainPlaylistLoader_.main.playlists,s=!this.media_||this.media_!==i[e];if(s?this.media_=i[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const n=()=>{this.media().endList||(this.mediaUpdateTimeout=$.setTimeout(()=>{this.trigger("mediaupdatetimeout"),n()},Mg(this.media(),!!s)))};n()}this.trigger("loadedplaylist")}addEventStreamToMetadataTrack_(e){if(e&&this.mainPlaylistLoader_.main.eventStream){const i=this.mainPlaylistLoader_.main.eventStream.map(s=>({cueTime:s.start,frames:[{data:s.messageData}]}));this.addMetadataToTextTrack("EventStream",i,this.mainPlaylistLoader_.main.duration)}}getKeyIdSet(e){if(e.contentProtection){const i=new Set;for(const s in e.contentProtection){const n=e.contentProtection[s].attributes["cenc:default_KID"];n&&i.add(n.replace(/-/g,"").toLowerCase())}return i}}}var yi={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const E5=t=>{const e=new Uint8Array(new ArrayBuffer(t.length));for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e.buffer},ZC=function(t){return t.on=t.addEventListener,t.off=t.removeEventListener,t},A5=function(t){try{return URL.createObjectURL(new Blob([t],{type:"application/javascript"}))}catch{const i=new BlobBuilder;return i.append(t),URL.createObjectURL(i.getBlob())}},YC=function(t){return function(){const e=A5(t),i=ZC(new Worker(e));i.objURL=e;const s=i.terminate;return i.on=i.addEventListener,i.off=i.removeEventListener,i.terminate=function(){return URL.revokeObjectURL(e),s.call(this)},i}},QC=function(t){return`var browserWorkerPolyFill = ${ZC.toString()};
browserWorkerPolyFill(self);
`+t},JC=function(t){return t.toString().replace(/^function.+?{/,"").slice(0,-1)},D5=QC(JC(function(){var t=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=function(){this.init=function(){var f={};this.on=function(g,v){f[g]||(f[g]=[]),f[g]=f[g].concat(v)},this.off=function(g,v){var y;return f[g]?(y=f[g].indexOf(v),f[g]=f[g].slice(),f[g].splice(y,1),y>-1):!1},this.trigger=function(g){var v,y,S,A;if(v=f[g],!!v)if(arguments.length===2)for(S=v.length,y=0;y<S;++y)v[y].call(this,arguments[1]);else{for(A=[],y=arguments.length,y=1;y<arguments.length;++y)A.push(arguments[y]);for(S=v.length,y=0;y<S;++y)v[y].apply(this,A)}},this.dispose=function(){f={}}}};e.prototype.pipe=function(f){return this.on("data",function(g){f.push(g)}),this.on("done",function(g){f.flush(g)}),this.on("partialdone",function(g){f.partialFlush(g)}),this.on("endedtimeline",function(g){f.endTimeline(g)}),this.on("reset",function(g){f.reset(g)}),f},e.prototype.push=function(f){this.trigger("data",f)},e.prototype.flush=function(f){this.trigger("done",f)},e.prototype.partialFlush=function(f){this.trigger("partialdone",f)},e.prototype.endTimeline=function(f){this.trigger("endedtimeline",f)},e.prototype.reset=function(f){this.trigger("reset",f)};var i=e,s=Math.pow(2,32),n=function(f){var g=new DataView(f.buffer,f.byteOffset,f.byteLength),v;return g.getBigUint64?(v=g.getBigUint64(0),v<Number.MAX_SAFE_INTEGER?Number(v):v):g.getUint32(0)*s+g.getUint32(4)},r={getUint64:n,MAX_UINT32:s},o=r.MAX_UINT32,l,u,h,d,m,_,T,C,x,E,P,k,I,F,z,q,U,Z,D,R,Y,Q,J,ae,ce,le,se,ee,fe,re,ue,Oe,ze,Me,Ee,He;(function(){var f;if(J={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(f in J)J.hasOwnProperty(f)&&(J[f]=[f.charCodeAt(0),f.charCodeAt(1),f.charCodeAt(2),f.charCodeAt(3)]);ae=new Uint8Array([105,115,111,109]),le=new Uint8Array([97,118,99,49]),ce=new Uint8Array([0,0,0,1]),se=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),ee=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),fe={video:se,audio:ee},Oe=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),ue=new Uint8Array([0,0,0,0,0,0,0,0]),ze=new Uint8Array([0,0,0,0,0,0,0,0]),Me=ze,Ee=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),He=ze,re=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),l=function(f){var g=[],v=0,y,S,A;for(y=1;y<arguments.length;y++)g.push(arguments[y]);for(y=g.length;y--;)v+=g[y].byteLength;for(S=new Uint8Array(v+8),A=new DataView(S.buffer,S.byteOffset,S.byteLength),A.setUint32(0,S.byteLength),S.set(f,4),y=0,v=8;y<g.length;y++)S.set(g[y],v),v+=g[y].byteLength;return S},u=function(){return l(J.dinf,l(J.dref,Oe))},h=function(f){return l(J.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,f.audioobjecttype<<3|f.samplingfrequencyindex>>>1,f.samplingfrequencyindex<<7|f.channelcount<<3,6,1,2]))},d=function(){return l(J.ftyp,ae,ce,ae,le)},q=function(f){return l(J.hdlr,fe[f])},m=function(f){return l(J.mdat,f)},z=function(f){var g=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,f.duration>>>24&255,f.duration>>>16&255,f.duration>>>8&255,f.duration&255,85,196,0,0]);return f.samplerate&&(g[12]=f.samplerate>>>24&255,g[13]=f.samplerate>>>16&255,g[14]=f.samplerate>>>8&255,g[15]=f.samplerate&255),l(J.mdhd,g)},F=function(f){return l(J.mdia,z(f),q(f.type),T(f))},_=function(f){return l(J.mfhd,new Uint8Array([0,0,0,0,(f&4278190080)>>24,(f&16711680)>>16,(f&65280)>>8,f&255]))},T=function(f){return l(J.minf,f.type==="video"?l(J.vmhd,re):l(J.smhd,ue),u(),Z(f))},C=function(f,g){for(var v=[],y=g.length;y--;)v[y]=R(g[y]);return l.apply(null,[J.moof,_(f)].concat(v))},x=function(f){for(var g=f.length,v=[];g--;)v[g]=k(f[g]);return l.apply(null,[J.moov,P(4294967295)].concat(v).concat(E(f)))},E=function(f){for(var g=f.length,v=[];g--;)v[g]=Y(f[g]);return l.apply(null,[J.mvex].concat(v))},P=function(f){var g=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(f&4278190080)>>24,(f&16711680)>>16,(f&65280)>>8,f&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return l(J.mvhd,g)},U=function(f){var g=f.samples||[],v=new Uint8Array(4+g.length),y,S;for(S=0;S<g.length;S++)y=g[S].flags,v[S+4]=y.dependsOn<<4|y.isDependedOn<<2|y.hasRedundancy;return l(J.sdtp,v)},Z=function(f){return l(J.stbl,D(f),l(J.stts,He),l(J.stsc,Me),l(J.stsz,Ee),l(J.stco,ze))},(function(){var f,g;D=function(v){return l(J.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),v.type==="video"?f(v):g(v))},f=function(v){var y=v.sps||[],S=v.pps||[],A=[],B=[],j,V;for(j=0;j<y.length;j++)A.push((y[j].byteLength&65280)>>>8),A.push(y[j].byteLength&255),A=A.concat(Array.prototype.slice.call(y[j]));for(j=0;j<S.length;j++)B.push((S[j].byteLength&65280)>>>8),B.push(S[j].byteLength&255),B=B.concat(Array.prototype.slice.call(S[j]));if(V=[J.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(v.width&65280)>>8,v.width&255,(v.height&65280)>>8,v.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),l(J.avcC,new Uint8Array([1,v.profileIdc,v.profileCompatibility,v.levelIdc,255].concat([y.length],A,[S.length],B))),l(J.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],v.sarRatio){var W=v.sarRatio[0],te=v.sarRatio[1];V.push(l(J.pasp,new Uint8Array([(W&4278190080)>>24,(W&16711680)>>16,(W&65280)>>8,W&255,(te&4278190080)>>24,(te&16711680)>>16,(te&65280)>>8,te&255])))}return l.apply(null,V)},g=function(v){return l(J.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(v.channelcount&65280)>>8,v.channelcount&255,(v.samplesize&65280)>>8,v.samplesize&255,0,0,0,0,(v.samplerate&65280)>>8,v.samplerate&255,0,0]),h(v))}})(),I=function(f){var g=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(f.id&4278190080)>>24,(f.id&16711680)>>16,(f.id&65280)>>8,f.id&255,0,0,0,0,(f.duration&4278190080)>>24,(f.duration&16711680)>>16,(f.duration&65280)>>8,f.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(f.width&65280)>>8,f.width&255,0,0,(f.height&65280)>>8,f.height&255,0,0]);return l(J.tkhd,g)},R=function(f){var g,v,y,S,A,B,j;return g=l(J.tfhd,new Uint8Array([0,0,0,58,(f.id&4278190080)>>24,(f.id&16711680)>>16,(f.id&65280)>>8,f.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),B=Math.floor(f.baseMediaDecodeTime/o),j=Math.floor(f.baseMediaDecodeTime%o),v=l(J.tfdt,new Uint8Array([1,0,0,0,B>>>24&255,B>>>16&255,B>>>8&255,B&255,j>>>24&255,j>>>16&255,j>>>8&255,j&255])),A=92,f.type==="audio"?(y=Q(f,A),l(J.traf,g,v,y)):(S=U(f),y=Q(f,S.length+A),l(J.traf,g,v,y,S))},k=function(f){return f.duration=f.duration||4294967295,l(J.trak,I(f),F(f))},Y=function(f){var g=new Uint8Array([0,0,0,0,(f.id&4278190080)>>24,(f.id&16711680)>>16,(f.id&65280)>>8,f.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return f.type!=="video"&&(g[g.length-1]=0),l(J.trex,g)},(function(){var f,g,v;v=function(y,S){var A=0,B=0,j=0,V=0;return y.length&&(y[0].duration!==void 0&&(A=1),y[0].size!==void 0&&(B=2),y[0].flags!==void 0&&(j=4),y[0].compositionTimeOffset!==void 0&&(V=8)),[0,0,A|B|j|V,1,(y.length&4278190080)>>>24,(y.length&16711680)>>>16,(y.length&65280)>>>8,y.length&255,(S&4278190080)>>>24,(S&16711680)>>>16,(S&65280)>>>8,S&255]},g=function(y,S){var A,B,j,V,W,te;for(V=y.samples||[],S+=20+16*V.length,j=v(V,S),B=new Uint8Array(j.length+V.length*16),B.set(j),A=j.length,te=0;te<V.length;te++)W=V[te],B[A++]=(W.duration&4278190080)>>>24,B[A++]=(W.duration&16711680)>>>16,B[A++]=(W.duration&65280)>>>8,B[A++]=W.duration&255,B[A++]=(W.size&4278190080)>>>24,B[A++]=(W.size&16711680)>>>16,B[A++]=(W.size&65280)>>>8,B[A++]=W.size&255,B[A++]=W.flags.isLeading<<2|W.flags.dependsOn,B[A++]=W.flags.isDependedOn<<6|W.flags.hasRedundancy<<4|W.flags.paddingValue<<1|W.flags.isNonSyncSample,B[A++]=W.flags.degradationPriority&61440,B[A++]=W.flags.degradationPriority&15,B[A++]=(W.compositionTimeOffset&4278190080)>>>24,B[A++]=(W.compositionTimeOffset&16711680)>>>16,B[A++]=(W.compositionTimeOffset&65280)>>>8,B[A++]=W.compositionTimeOffset&255;return l(J.trun,B)},f=function(y,S){var A,B,j,V,W,te;for(V=y.samples||[],S+=20+8*V.length,j=v(V,S),A=new Uint8Array(j.length+V.length*8),A.set(j),B=j.length,te=0;te<V.length;te++)W=V[te],A[B++]=(W.duration&4278190080)>>>24,A[B++]=(W.duration&16711680)>>>16,A[B++]=(W.duration&65280)>>>8,A[B++]=W.duration&255,A[B++]=(W.size&4278190080)>>>24,A[B++]=(W.size&16711680)>>>16,A[B++]=(W.size&65280)>>>8,A[B++]=W.size&255;return l(J.trun,A)},Q=function(y,S){return y.type==="audio"?f(y,S):g(y,S)}})();var me={ftyp:d,mdat:m,moof:C,moov:x,initSegment:function(f){var g=d(),v=x(f),y;return y=new Uint8Array(g.byteLength+v.byteLength),y.set(g),y.set(v,g.byteLength),y}},Ae=function(f){var g,v,y=[],S=[];for(S.byteLength=0,S.nalCount=0,S.duration=0,y.byteLength=0,g=0;g<f.length;g++)v=f[g],v.nalUnitType==="access_unit_delimiter_rbsp"?(y.length&&(y.duration=v.dts-y.dts,S.byteLength+=y.byteLength,S.nalCount+=y.length,S.duration+=y.duration,S.push(y)),y=[v],y.byteLength=v.data.byteLength,y.pts=v.pts,y.dts=v.dts):(v.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(y.keyFrame=!0),y.duration=v.dts-y.dts,y.byteLength+=v.data.byteLength,y.push(v));return S.length&&(!y.duration||y.duration<=0)&&(y.duration=S[S.length-1].duration),S.byteLength+=y.byteLength,S.nalCount+=y.length,S.duration+=y.duration,S.push(y),S},Le=function(f){var g,v,y=[],S=[];for(y.byteLength=0,y.nalCount=0,y.duration=0,y.pts=f[0].pts,y.dts=f[0].dts,S.byteLength=0,S.nalCount=0,S.duration=0,S.pts=f[0].pts,S.dts=f[0].dts,g=0;g<f.length;g++)v=f[g],v.keyFrame?(y.length&&(S.push(y),S.byteLength+=y.byteLength,S.nalCount+=y.nalCount,S.duration+=y.duration),y=[v],y.nalCount=v.length,y.byteLength=v.byteLength,y.pts=v.pts,y.dts=v.dts,y.duration=v.duration):(y.duration+=v.duration,y.nalCount+=v.length,y.byteLength+=v.byteLength,y.push(v));return S.length&&y.duration<=0&&(y.duration=S[S.length-1].duration),S.byteLength+=y.byteLength,S.nalCount+=y.nalCount,S.duration+=y.duration,S.push(y),S},qe=function(f){var g;return!f[0][0].keyFrame&&f.length>1&&(g=f.shift(),f.byteLength-=g.byteLength,f.nalCount-=g.nalCount,f[0][0].dts=g.dts,f[0][0].pts=g.pts,f[0][0].duration+=g.duration),f},We=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},H=function(f,g){var v=We();return v.dataOffset=g,v.compositionTimeOffset=f.pts-f.dts,v.duration=f.duration,v.size=4*f.length,v.size+=f.byteLength,f.keyFrame&&(v.flags.dependsOn=2,v.flags.isNonSyncSample=0),v},X=function(f,g){var v,y,S,A,B,j=g||0,V=[];for(v=0;v<f.length;v++)for(A=f[v],y=0;y<A.length;y++)B=A[y],S=H(B,j),j+=S.size,V.push(S);return V},ie=function(f){var g,v,y,S,A,B,j=0,V=f.byteLength,W=f.nalCount,te=V+4*W,ge=new Uint8Array(te),Ne=new DataView(ge.buffer);for(g=0;g<f.length;g++)for(S=f[g],v=0;v<S.length;v++)for(A=S[v],y=0;y<A.length;y++)B=A[y],Ne.setUint32(j,B.data.byteLength),j+=4,ge.set(B.data,j),j+=B.data.byteLength;return ge},ve=function(f,g){var v,y=g||0,S=[];return v=H(f,y),S.push(v),S},ye=function(f){var g,v,y=0,S=f.byteLength,A=f.length,B=S+4*A,j=new Uint8Array(B),V=new DataView(j.buffer);for(g=0;g<f.length;g++)v=f[g],V.setUint32(y,v.data.byteLength),y+=4,j.set(v.data,y),y+=v.data.byteLength;return j},Te={groupNalsIntoFrames:Ae,groupFramesIntoGops:Le,extendFirstKeyFrame:qe,generateSampleTable:X,concatenateNalData:ie,generateSampleTableForFrame:ve,concatenateNalDataForFrame:ye},Ie=[33,16,5,32,164,27],Pe=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],xe=function(f){for(var g=[];f--;)g.push(0);return g},be=function(f){return Object.keys(f).reduce(function(g,v){return g[v]=new Uint8Array(f[v].reduce(function(y,S){return y.concat(S)},[])),g},{})},Ue,Re=function(){if(!Ue){var f={96e3:[Ie,[227,64],xe(154),[56]],88200:[Ie,[231],xe(170),[56]],64e3:[Ie,[248,192],xe(240),[56]],48e3:[Ie,[255,192],xe(268),[55,148,128],xe(54),[112]],44100:[Ie,[255,192],xe(268),[55,163,128],xe(84),[112]],32e3:[Ie,[255,192],xe(268),[55,234],xe(226),[112]],24e3:[Ie,[255,192],xe(268),[55,255,128],xe(268),[111,112],xe(126),[224]],16e3:[Ie,[255,192],xe(268),[55,255,128],xe(268),[111,255],xe(269),[223,108],xe(195),[1,192]],12e3:[Pe,xe(268),[3,127,248],xe(268),[6,255,240],xe(268),[13,255,224],xe(268),[27,253,128],xe(259),[56]],11025:[Pe,xe(268),[3,127,248],xe(268),[6,255,240],xe(268),[13,255,224],xe(268),[27,255,192],xe(268),[55,175,128],xe(108),[112]],8e3:[Pe,xe(268),[3,121,16],xe(47),[7]]};Ue=be(f)}return Ue},$e=9e4,Ge,Je,ct,at,Qt,Wt,ri;Ge=function(f){return f*$e},Je=function(f,g){return f*g},ct=function(f){return f/$e},at=function(f,g){return f/g},Qt=function(f,g){return Ge(at(f,g))},Wt=function(f,g){return Je(ct(f),g)},ri=function(f,g,v){return ct(v?f:f-g)};var it={ONE_SECOND_IN_TS:$e,secondsToVideoTs:Ge,secondsToAudioTs:Je,videoTsToSeconds:ct,audioTsToSeconds:at,audioTsToVideoTs:Qt,videoTsToAudioTs:Wt,metadataTsToSeconds:ri},ts=Re,is=it,ii=function(f){var g,v,y=0;for(g=0;g<f.length;g++)v=f[g],y+=v.data.byteLength;return y},xi=function(f,g,v,y){var S,A=0,B=0,j=0,V=0,W,te,ge;if(g.length&&(S=is.audioTsToVideoTs(f.baseMediaDecodeTime,f.samplerate),A=Math.ceil(is.ONE_SECOND_IN_TS/(f.samplerate/1024)),v&&y&&(B=S-Math.max(v,y),j=Math.floor(B/A),V=j*A),!(j<1||V>is.ONE_SECOND_IN_TS/2))){for(W=ts()[f.samplerate],W||(W=g[0].data),te=0;te<j;te++)ge=g[0],g.splice(0,0,{data:W,dts:ge.dts-A,pts:ge.pts-A});return f.baseMediaDecodeTime-=Math.floor(is.videoTsToAudioTs(V,f.samplerate)),V}},ss=function(f,g,v){return g.minSegmentDts>=v?f:(g.minSegmentDts=1/0,f.filter(function(y){return y.dts>=v?(g.minSegmentDts=Math.min(g.minSegmentDts,y.dts),g.minSegmentPts=g.minSegmentDts,!0):!1}))},Ts=function(f){var g,v,y=[];for(g=0;g<f.length;g++)v=f[g],y.push({size:v.data.byteLength,duration:1024});return y},ga=function(f){var g,v,y=0,S=new Uint8Array(ii(f));for(g=0;g<f.length;g++)v=f[g],S.set(v.data,y),y+=v.data.byteLength;return S},Ar={prefixWithSilence:xi,trimAdtsFramesByEarliestDts:ss,generateSampleTable:Ts,concatenateFrameData:ga},mo=it.ONE_SECOND_IN_TS,ql=function(f,g){typeof g.pts=="number"&&(f.timelineStartInfo.pts===void 0&&(f.timelineStartInfo.pts=g.pts),f.minSegmentPts===void 0?f.minSegmentPts=g.pts:f.minSegmentPts=Math.min(f.minSegmentPts,g.pts),f.maxSegmentPts===void 0?f.maxSegmentPts=g.pts:f.maxSegmentPts=Math.max(f.maxSegmentPts,g.pts)),typeof g.dts=="number"&&(f.timelineStartInfo.dts===void 0&&(f.timelineStartInfo.dts=g.dts),f.minSegmentDts===void 0?f.minSegmentDts=g.dts:f.minSegmentDts=Math.min(f.minSegmentDts,g.dts),f.maxSegmentDts===void 0?f.maxSegmentDts=g.dts:f.maxSegmentDts=Math.max(f.maxSegmentDts,g.dts))},O=function(f){delete f.minSegmentDts,delete f.maxSegmentDts,delete f.minSegmentPts,delete f.maxSegmentPts},N=function(f,g){var v,y,S=f.minSegmentDts;return g||(S-=f.timelineStartInfo.dts),v=f.timelineStartInfo.baseMediaDecodeTime,v+=S,v=Math.max(0,v),f.type==="audio"&&(y=f.samplerate/mo,v*=y,v=Math.floor(v)),v},G={clearDtsInfo:O,calculateTrackBaseMediaDecodeTime:N,collectDtsInfo:ql},he=4,De=128,Ze=function(f){for(var g=0,v={payloadType:-1,payloadSize:0},y=0,S=0;g<f.byteLength&&f[g]!==De;){for(;f[g]===255;)y+=255,g++;for(y+=f[g++];f[g]===255;)S+=255,g++;if(S+=f[g++],!v.payload&&y===he){var A=String.fromCharCode(f[g+3],f[g+4],f[g+5],f[g+6]);if(A==="GA94"){v.payloadType=y,v.payloadSize=S,v.payload=f.subarray(g,g+S);break}else v.payload=void 0}g+=S,y=0,S=0}return v},vt=function(f){return f.payload[0]!==181||(f.payload[1]<<8|f.payload[2])!==49||String.fromCharCode(f.payload[3],f.payload[4],f.payload[5],f.payload[6])!=="GA94"||f.payload[7]!==3?null:f.payload.subarray(8,f.payload.length-1)},mi=function(f,g){var v=[],y,S,A,B;if(!(g[0]&64))return v;for(S=g[0]&31,y=0;y<S;y++)A=y*3,B={type:g[A+2]&3,pts:f},g[A+2]&4&&(B.ccData=g[A+3]<<8|g[A+4],v.push(B));return v},Fi=function(f){for(var g=f.byteLength,v=[],y=1,S,A;y<g-2;)f[y]===0&&f[y+1]===0&&f[y+2]===3?(v.push(y+2),y+=2):y++;if(v.length===0)return f;S=g-v.length,A=new Uint8Array(S);var B=0;for(y=0;y<S;B++,y++)B===v[0]&&(B++,v.shift()),A[y]=f[B];return A},Ei={parseSei:Ze,parseUserData:vt,parseCaptionPackets:mi,discardEmulationPreventionBytes:Fi,USER_DATA_REGISTERED_ITU_T_T35:he},Ui=i,Gt=Ei,Be=function(f){f=f||{},Be.prototype.init.call(this),this.parse708captions_=typeof f.parse708captions=="boolean"?f.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new Nt(0,0),new Nt(0,1),new Nt(1,0),new Nt(1,1)],this.parse708captions_&&(this.cc708Stream_=new mt({captionServices:f.captionServices})),this.reset(),this.ccStreams_.forEach(function(g){g.on("data",this.trigger.bind(this,"data")),g.on("partialdone",this.trigger.bind(this,"partialdone")),g.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};Be.prototype=new Ui,Be.prototype.push=function(f){var g,v,y;if(f.nalUnitType==="sei_rbsp"&&(g=Gt.parseSei(f.escapedRBSP),!!g.payload&&g.payloadType===Gt.USER_DATA_REGISTERED_ITU_T_T35&&(v=Gt.parseUserData(g),!!v))){if(f.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(f.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}y=Gt.parseCaptionPackets(f.pts,v),this.captionPackets_=this.captionPackets_.concat(y),this.latestDts_!==f.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=f.dts}},Be.prototype.flushCCStreams=function(f){this.ccStreams_.forEach(function(g){return f==="flush"?g.flush():g.partialFlush()},this)},Be.prototype.flushStream=function(f){if(!this.captionPackets_.length){this.flushCCStreams(f);return}this.captionPackets_.forEach(function(g,v){g.presortIndex=v}),this.captionPackets_.sort(function(g,v){return g.pts===v.pts?g.presortIndex-v.presortIndex:g.pts-v.pts}),this.captionPackets_.forEach(function(g){g.type<2?this.dispatchCea608Packet(g):this.dispatchCea708Packet(g)},this),this.captionPackets_.length=0,this.flushCCStreams(f)},Be.prototype.flush=function(){return this.flushStream("flush")},Be.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Be.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(f){f.reset()})},Be.prototype.dispatchCea608Packet=function(f){this.setsTextOrXDSActive(f)?this.activeCea608Channel_[f.type]=null:this.setsChannel1Active(f)?this.activeCea608Channel_[f.type]=0:this.setsChannel2Active(f)&&(this.activeCea608Channel_[f.type]=1),this.activeCea608Channel_[f.type]!==null&&this.ccStreams_[(f.type<<1)+this.activeCea608Channel_[f.type]].push(f)},Be.prototype.setsChannel1Active=function(f){return(f.ccData&30720)===4096},Be.prototype.setsChannel2Active=function(f){return(f.ccData&30720)===6144},Be.prototype.setsTextOrXDSActive=function(f){return(f.ccData&28928)===256||(f.ccData&30974)===4138||(f.ccData&30974)===6186},Be.prototype.dispatchCea708Packet=function(f){this.parse708captions_&&this.cc708Stream_.push(f)};var Ms={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},ji=function(f){var g=Ms[f]||f;return f&4096&&f===g?"":String.fromCharCode(g)},zi=function(f){return 32<=f&&f<=127||160<=f&&f<=255},gi=function(f){this.windowNum=f,this.reset()};gi.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},gi.prototype.getText=function(){return this.rows.join(`
`)},gi.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},gi.prototype.newLine=function(f){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(f),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},gi.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},gi.prototype.addText=function(f){this.rows[this.rowIdx]+=f},gi.prototype.backspace=function(){if(!this.isEmpty()){var f=this.rows[this.rowIdx];this.rows[this.rowIdx]=f.substr(0,f.length-1)}};var zt=function(f,g,v){this.serviceNum=f,this.text="",this.currentWindow=new gi(-1),this.windows=[],this.stream=v,typeof g=="string"&&this.createTextDecoder(g)};zt.prototype.init=function(f,g){this.startPts=f;for(var v=0;v<8;v++)this.windows[v]=new gi(v),typeof g=="function"&&(this.windows[v].beforeRowOverflow=g)},zt.prototype.setCurrentWindow=function(f){this.currentWindow=this.windows[f]},zt.prototype.createTextDecoder=function(f){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(f)}catch(g){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+f+" encoding. "+g})}};var mt=function(f){f=f||{},mt.prototype.init.call(this);var g=this,v=f.captionServices||{},y={},S;Object.keys(v).forEach(A=>{S=v[A],/^SERVICE/.test(A)&&(y[A]=S.encoding)}),this.serviceEncodings=y,this.current708Packet=null,this.services={},this.push=function(A){A.type===3?(g.new708Packet(),g.add708Bytes(A)):(g.current708Packet===null&&g.new708Packet(),g.add708Bytes(A))}};mt.prototype=new Ui,mt.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},mt.prototype.add708Bytes=function(f){var g=f.ccData,v=g>>>8,y=g&255;this.current708Packet.ptsVals.push(f.pts),this.current708Packet.data.push(v),this.current708Packet.data.push(y)},mt.prototype.push708Packet=function(){var f=this.current708Packet,g=f.data,v=null,y=null,S=0,A=g[S++];for(f.seq=A>>6,f.sizeCode=A&63;S<g.length;S++)A=g[S++],v=A>>5,y=A&31,v===7&&y>0&&(A=g[S++],v=A),this.pushServiceBlock(v,S,y),y>0&&(S+=y-1)},mt.prototype.pushServiceBlock=function(f,g,v){var y,S=g,A=this.current708Packet.data,B=this.services[f];for(B||(B=this.initService(f,S));S<g+v&&S<A.length;S++)y=A[S],zi(y)?S=this.handleText(S,B):y===24?S=this.multiByteCharacter(S,B):y===16?S=this.extendedCommands(S,B):128<=y&&y<=135?S=this.setCurrentWindow(S,B):152<=y&&y<=159?S=this.defineWindow(S,B):y===136?S=this.clearWindows(S,B):y===140?S=this.deleteWindows(S,B):y===137?S=this.displayWindows(S,B):y===138?S=this.hideWindows(S,B):y===139?S=this.toggleWindows(S,B):y===151?S=this.setWindowAttributes(S,B):y===144?S=this.setPenAttributes(S,B):y===145?S=this.setPenColor(S,B):y===146?S=this.setPenLocation(S,B):y===143?B=this.reset(S,B):y===8?B.currentWindow.backspace():y===12?B.currentWindow.clearText():y===13?B.currentWindow.pendingNewLine=!0:y===14?B.currentWindow.clearText():y===141&&S++},mt.prototype.extendedCommands=function(f,g){var v=this.current708Packet.data,y=v[++f];return zi(y)&&(f=this.handleText(f,g,{isExtended:!0})),f},mt.prototype.getPts=function(f){return this.current708Packet.ptsVals[Math.floor(f/2)]},mt.prototype.initService=function(f,g){var y="SERVICE"+f,v=this,y,S;return y in this.serviceEncodings&&(S=this.serviceEncodings[y]),this.services[f]=new zt(f,S,v),this.services[f].init(this.getPts(g),function(A){v.flushDisplayed(A,v.services[f])}),this.services[f]},mt.prototype.handleText=function(f,g,v){var y=v&&v.isExtended,S=v&&v.isMultiByte,A=this.current708Packet.data,B=y?4096:0,j=A[f],V=A[f+1],W=g.currentWindow,te,ge;function Ne(Se){return Se.map(Xe=>("0"+(Xe&255).toString(16)).slice(-2)).join("")}if(S?(ge=[j,V],f++):ge=[j],g.textDecoder_&&!y)te=g.textDecoder_.decode(new Uint8Array(ge));else if(S){const Se=Ne(ge);te=String.fromCharCode(parseInt(Se,16))}else te=ji(B|j);return W.pendingNewLine&&!W.isEmpty()&&W.newLine(this.getPts(f)),W.pendingNewLine=!1,W.addText(te),f},mt.prototype.multiByteCharacter=function(f,g){var v=this.current708Packet.data,y=v[f+1],S=v[f+2];return zi(y)&&zi(S)&&(f=this.handleText(++f,g,{isMultiByte:!0})),f},mt.prototype.setCurrentWindow=function(f,g){var v=this.current708Packet.data,y=v[f],S=y&7;return g.setCurrentWindow(S),f},mt.prototype.defineWindow=function(f,g){var v=this.current708Packet.data,y=v[f],S=y&7;g.setCurrentWindow(S);var A=g.currentWindow;return y=v[++f],A.visible=(y&32)>>5,A.rowLock=(y&16)>>4,A.columnLock=(y&8)>>3,A.priority=y&7,y=v[++f],A.relativePositioning=(y&128)>>7,A.anchorVertical=y&127,y=v[++f],A.anchorHorizontal=y,y=v[++f],A.anchorPoint=(y&240)>>4,A.rowCount=y&15,y=v[++f],A.columnCount=y&63,y=v[++f],A.windowStyle=(y&56)>>3,A.penStyle=y&7,A.virtualRowCount=A.rowCount+1,f},mt.prototype.setWindowAttributes=function(f,g){var v=this.current708Packet.data,y=v[f],S=g.currentWindow.winAttr;return y=v[++f],S.fillOpacity=(y&192)>>6,S.fillRed=(y&48)>>4,S.fillGreen=(y&12)>>2,S.fillBlue=y&3,y=v[++f],S.borderType=(y&192)>>6,S.borderRed=(y&48)>>4,S.borderGreen=(y&12)>>2,S.borderBlue=y&3,y=v[++f],S.borderType+=(y&128)>>5,S.wordWrap=(y&64)>>6,S.printDirection=(y&48)>>4,S.scrollDirection=(y&12)>>2,S.justify=y&3,y=v[++f],S.effectSpeed=(y&240)>>4,S.effectDirection=(y&12)>>2,S.displayEffect=y&3,f},mt.prototype.flushDisplayed=function(f,g){for(var v=[],y=0;y<8;y++)g.windows[y].visible&&!g.windows[y].isEmpty()&&v.push(g.windows[y].getText());g.endPts=f,g.text=v.join(`

`),this.pushCaption(g),g.startPts=f},mt.prototype.pushCaption=function(f){f.text!==""&&(this.trigger("data",{startPts:f.startPts,endPts:f.endPts,text:f.text,stream:"cc708_"+f.serviceNum}),f.text="",f.startPts=f.endPts)},mt.prototype.displayWindows=function(f,g){var v=this.current708Packet.data,y=v[++f],S=this.getPts(f);this.flushDisplayed(S,g);for(var A=0;A<8;A++)y&1<<A&&(g.windows[A].visible=1);return f},mt.prototype.hideWindows=function(f,g){var v=this.current708Packet.data,y=v[++f],S=this.getPts(f);this.flushDisplayed(S,g);for(var A=0;A<8;A++)y&1<<A&&(g.windows[A].visible=0);return f},mt.prototype.toggleWindows=function(f,g){var v=this.current708Packet.data,y=v[++f],S=this.getPts(f);this.flushDisplayed(S,g);for(var A=0;A<8;A++)y&1<<A&&(g.windows[A].visible^=1);return f},mt.prototype.clearWindows=function(f,g){var v=this.current708Packet.data,y=v[++f],S=this.getPts(f);this.flushDisplayed(S,g);for(var A=0;A<8;A++)y&1<<A&&g.windows[A].clearText();return f},mt.prototype.deleteWindows=function(f,g){var v=this.current708Packet.data,y=v[++f],S=this.getPts(f);this.flushDisplayed(S,g);for(var A=0;A<8;A++)y&1<<A&&g.windows[A].reset();return f},mt.prototype.setPenAttributes=function(f,g){var v=this.current708Packet.data,y=v[f],S=g.currentWindow.penAttr;return y=v[++f],S.textTag=(y&240)>>4,S.offset=(y&12)>>2,S.penSize=y&3,y=v[++f],S.italics=(y&128)>>7,S.underline=(y&64)>>6,S.edgeType=(y&56)>>3,S.fontStyle=y&7,f},mt.prototype.setPenColor=function(f,g){var v=this.current708Packet.data,y=v[f],S=g.currentWindow.penColor;return y=v[++f],S.fgOpacity=(y&192)>>6,S.fgRed=(y&48)>>4,S.fgGreen=(y&12)>>2,S.fgBlue=y&3,y=v[++f],S.bgOpacity=(y&192)>>6,S.bgRed=(y&48)>>4,S.bgGreen=(y&12)>>2,S.bgBlue=y&3,y=v[++f],S.edgeRed=(y&48)>>4,S.edgeGreen=(y&12)>>2,S.edgeBlue=y&3,f},mt.prototype.setPenLocation=function(f,g){var v=this.current708Packet.data,y=v[f],S=g.currentWindow.penLoc;return g.currentWindow.pendingNewLine=!0,y=v[++f],S.row=y&15,y=v[++f],S.column=y&63,f},mt.prototype.reset=function(f,g){var v=this.getPts(f);return this.flushDisplayed(v,g),this.initService(g.serviceNum,f)};var Hi={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},yn=function(f){return f===null?"":(f=Hi[f]||f,String.fromCharCode(f))},_a=14,Gf=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Qn=function(){for(var f=[],g=_a+1;g--;)f.push({text:"",indent:0,offset:0});return f},Nt=function(f,g){Nt.prototype.init.call(this),this.field_=f||0,this.dataChannel_=g||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(v){var y,S,A,B,j;if(y=v.ccData&32639,y===this.lastControlCode_){this.lastControlCode_=null;return}if((y&61440)===4096?this.lastControlCode_=y:y!==this.PADDING_&&(this.lastControlCode_=null),A=y>>>8,B=y&255,y!==this.PADDING_)if(y===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(y===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(v.pts),this.flushDisplayed(v.pts),S=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=S,this.startPts_=v.pts;else if(y===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(v.pts);else if(y===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(v.pts);else if(y===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(v.pts);else if(y===this.CARRIAGE_RETURN_)this.clearFormatting(v.pts),this.flushDisplayed(v.pts),this.shiftRowsUp_(),this.startPts_=v.pts;else if(y===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1);else if(y===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(v.pts),this.displayed_=Qn();else if(y===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Qn();else if(y===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(v.pts),this.displayed_=Qn()),this.mode_="paintOn",this.startPts_=v.pts;else if(this.isSpecialCharacter(A,B))A=(A&3)<<8,j=yn(A|B),this[this.mode_](v.pts,j),this.column_++;else if(this.isExtCharacter(A,B))this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1),A=(A&3)<<8,j=yn(A|B),this[this.mode_](v.pts,j),this.column_++;else if(this.isMidRowCode(A,B))this.clearFormatting(v.pts),this[this.mode_](v.pts," "),this.column_++,(B&14)===14&&this.addFormatting(v.pts,["i"]),(B&1)===1&&this.addFormatting(v.pts,["u"]);else if(this.isOffsetControlCode(A,B)){const W=B&3;this.nonDisplayed_[this.row_].offset=W,this.column_+=W}else if(this.isPAC(A,B)){var V=Gf.indexOf(y&7968);if(this.mode_==="rollUp"&&(V-this.rollUpRows_+1<0&&(V=this.rollUpRows_-1),this.setRollUp(v.pts,V)),V!==this.row_&&V>=0&&V<=14&&(this.clearFormatting(v.pts),this.row_=V),B&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(v.pts,["u"]),(y&16)===16){const W=(y&14)>>1;this.column_=W*4,this.nonDisplayed_[this.row_].indent+=W}this.isColorPAC(B)&&(B&14)===14&&this.addFormatting(v.pts,["i"])}else this.isNormalChar(A)&&(B===0&&(B=null),j=yn(A),j+=yn(B),this[this.mode_](v.pts,j),this.column_+=j.length)}};Nt.prototype=new Ui,Nt.prototype.flushDisplayed=function(f){const g=y=>{this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+y+"."})},v=[];this.displayed_.forEach((y,S)=>{if(y&&y.text&&y.text.length){try{y.text=y.text.trim()}catch{g(S)}y.text.length&&v.push({text:y.text,line:S+1,position:10+Math.min(70,y.indent*10)+y.offset*2.5})}else y==null&&g(S)}),v.length&&this.trigger("data",{startPts:this.startPts_,endPts:f,content:v,stream:this.name_})},Nt.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Qn(),this.nonDisplayed_=Qn(),this.lastControlCode_=null,this.column_=0,this.row_=_a,this.rollUpRows_=2,this.formatting_=[]},Nt.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},Nt.prototype.isSpecialCharacter=function(f,g){return f===this.EXT_&&g>=48&&g<=63},Nt.prototype.isExtCharacter=function(f,g){return(f===this.EXT_+1||f===this.EXT_+2)&&g>=32&&g<=63},Nt.prototype.isMidRowCode=function(f,g){return f===this.EXT_&&g>=32&&g<=47},Nt.prototype.isOffsetControlCode=function(f,g){return f===this.OFFSET_&&g>=33&&g<=35},Nt.prototype.isPAC=function(f,g){return f>=this.BASE_&&f<this.BASE_+8&&g>=64&&g<=127},Nt.prototype.isColorPAC=function(f){return f>=64&&f<=79||f>=96&&f<=127},Nt.prototype.isNormalChar=function(f){return f>=32&&f<=127},Nt.prototype.setRollUp=function(f,g){if(this.mode_!=="rollUp"&&(this.row_=_a,this.mode_="rollUp",this.flushDisplayed(f),this.nonDisplayed_=Qn(),this.displayed_=Qn()),g!==void 0&&g!==this.row_)for(var v=0;v<this.rollUpRows_;v++)this.displayed_[g-v]=this.displayed_[this.row_-v],this.displayed_[this.row_-v]={text:"",indent:0,offset:0};g===void 0&&(g=this.row_),this.topRow_=g-this.rollUpRows_+1},Nt.prototype.addFormatting=function(f,g){this.formatting_=this.formatting_.concat(g);var v=g.reduce(function(y,S){return y+"<"+S+">"},"");this[this.mode_](f,v)},Nt.prototype.clearFormatting=function(f){if(this.formatting_.length){var g=this.formatting_.reverse().reduce(function(v,y){return v+"</"+y+">"},"");this.formatting_=[],this[this.mode_](f,g)}},Nt.prototype.popOn=function(f,g){var v=this.nonDisplayed_[this.row_].text;v+=g,this.nonDisplayed_[this.row_].text=v},Nt.prototype.rollUp=function(f,g){var v=this.displayed_[this.row_].text;v+=g,this.displayed_[this.row_].text=v},Nt.prototype.shiftRowsUp_=function(){var f;for(f=0;f<this.topRow_;f++)this.displayed_[f]={text:"",indent:0,offset:0};for(f=this.row_+1;f<_a+1;f++)this.displayed_[f]={text:"",indent:0,offset:0};for(f=this.topRow_;f<this.row_;f++)this.displayed_[f]=this.displayed_[f+1];this.displayed_[this.row_]={text:"",indent:0,offset:0}},Nt.prototype.paintOn=function(f,g){var v=this.displayed_[this.row_].text;v+=g,this.displayed_[this.row_].text=v};var $l={CaptionStream:Be,Cea608Stream:Nt,Cea708Stream:mt},ya={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},va=i,Xf=8589934592,Kf=4294967296,qc="shared",Wl=function(f,g){var v=1;for(f>g&&(v=-1);Math.abs(g-f)>Kf;)f+=v*Xf;return f},Gl=function(f){var g,v;Gl.prototype.init.call(this),this.type_=f||qc,this.push=function(y){if(y.type==="metadata"){this.trigger("data",y);return}this.type_!==qc&&y.type!==this.type_||(v===void 0&&(v=y.dts),y.dts=Wl(y.dts,v),y.pts=Wl(y.pts,v),g=y.dts,this.trigger("data",y))},this.flush=function(){v=g,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){v=void 0,g=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Gl.prototype=new va;var ba={TimestampRolloverStream:Gl,handleRollover:Wl},go=(f,g,v)=>{if(!f)return-1;for(var y=v;y<f.length;y++)if(f[y]===g)return y;return-1},$c={typedArrayIndexOf:go},_o=$c.typedArrayIndexOf,vn={Utf8:3},ft=function(f,g,v){var y,S="";for(y=g;y<v;y++)S+="%"+("00"+f[y].toString(16)).slice(-2);return S},Et=function(f,g,v){return decodeURIComponent(ft(f,g,v))},bn=function(f,g,v){return unescape(ft(f,g,v))},Rs=function(f){return f[0]<<21|f[1]<<14|f[2]<<7|f[3]},Ns={APIC:function(f){var g=1,v,y,S="-->";f.data[0]===vn.Utf8&&(v=_o(f.data,0,g),!(v<0)&&(f.mimeType=bn(f.data,g,v),g=v+1,f.pictureType=f.data[g],g++,y=_o(f.data,0,g),!(y<0)&&(f.description=Et(f.data,g,y),g=y+1,f.mimeType===S?f.url=bn(f.data,g,f.data.length):f.pictureData=f.data.subarray(g,f.data.length))))},"T*":function(f){f.data[0]===vn.Utf8&&(f.value=Et(f.data,1,f.data.length).replace(/\0*$/,""),f.values=f.value.split("\0"))},TXXX:function(f){var g;f.data[0]===vn.Utf8&&(g=_o(f.data,0,1),g!==-1&&(f.description=Et(f.data,1,g),f.value=Et(f.data,g+1,f.data.length).replace(/\0*$/,""),f.data=f.value))},"W*":function(f){f.url=bn(f.data,0,f.data.length).replace(/\0.*$/,"")},WXXX:function(f){var g;f.data[0]===vn.Utf8&&(g=_o(f.data,0,1),g!==-1&&(f.description=Et(f.data,1,g),f.url=bn(f.data,g+1,f.data.length).replace(/\0.*$/,"")))},PRIV:function(f){var g;for(g=0;g<f.data.length;g++)if(f.data[g]===0){f.owner=bn(f.data,0,g);break}f.privateData=f.data.subarray(g+1),f.data=f.privateData}},Xl=function(f){var g,v,y=10,S=0,A=[];if(!(f.length<10||f[0]!==73||f[1]!==68||f[2]!==51)){S=Rs(f.subarray(6,10)),S+=10;var B=f[5]&64;B&&(y+=4,y+=Rs(f.subarray(10,14)),S-=Rs(f.subarray(16,20)));do{if(g=Rs(f.subarray(y+4,y+8)),g<1)break;v=String.fromCharCode(f[y],f[y+1],f[y+2],f[y+3]);var j={id:v,data:f.subarray(y+10,y+g+10)};j.key=j.id,Ns[j.id]?Ns[j.id](j):j.id[0]==="T"?Ns["T*"](j):j.id[0]==="W"&&Ns["W*"](j),A.push(j),y+=10,y+=g}while(y<S);return A}},st={parseId3Frames:Xl,parseSyncSafeInteger:Rs,frameParsers:Ns},Xt=i,Kl=ya,xs=st,Si;Si=function(f){var g={descriptor:f&&f.descriptor},v=0,y=[],S=0,A;if(Si.prototype.init.call(this),this.dispatchType=Kl.METADATA_STREAM_TYPE.toString(16),g.descriptor)for(A=0;A<g.descriptor.length;A++)this.dispatchType+=("00"+g.descriptor[A].toString(16)).slice(-2);this.push=function(B){var j,V,W,te,ge,Ne;if(B.type==="timed-metadata"){if(B.dataAlignmentIndicator&&(S=0,y.length=0),y.length===0&&(B.data.length<10||B.data[0]!==73||B.data[1]!==68||B.data[2]!==51)){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(y.push(B),S+=B.data.byteLength,y.length===1&&(v=xs.parseSyncSafeInteger(B.data.subarray(6,10)),v+=10),!(S<v)){for(j={data:new Uint8Array(v),frames:[],pts:y[0].pts,dts:y[0].dts},ge=0;ge<v;)j.data.set(y[0].data.subarray(0,v-ge),ge),ge+=y[0].data.byteLength,S-=y[0].data.byteLength,y.shift();V=10,j.data[5]&64&&(V+=4,V+=xs.parseSyncSafeInteger(j.data.subarray(10,14)),v-=xs.parseSyncSafeInteger(j.data.subarray(16,20)));do{if(W=xs.parseSyncSafeInteger(j.data.subarray(V+4,V+8)),W<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if(Ne=String.fromCharCode(j.data[V],j.data[V+1],j.data[V+2],j.data[V+3]),te={id:Ne,data:j.data.subarray(V+10,V+W+10)},te.key=te.id,xs.frameParsers[te.id]?xs.frameParsers[te.id](te):te.id[0]==="T"?xs.frameParsers["T*"](te):te.id[0]==="W"&&xs.frameParsers["W*"](te),te.owner==="com.apple.streaming.transportStreamTimestamp"){var Se=te.data,Xe=(Se[3]&1)<<30|Se[4]<<22|Se[5]<<14|Se[6]<<6|Se[7]>>>2;Xe*=4,Xe+=Se[7]&3,te.timeStamp=Xe,j.pts===void 0&&j.dts===void 0&&(j.pts=te.timeStamp,j.dts=te.timeStamp),this.trigger("timestamp",te)}j.frames.push(te),V+=10,V+=W}while(V<v);this.trigger("data",j)}}}},Si.prototype=new Xt;var Zf=Si,Dr=i,en=$l,yt=ya,Jn=ba.TimestampRolloverStream,Tn,tn,Pr,Bs=188,yo=71;Tn=function(){var f=new Uint8Array(Bs),g=0;Tn.prototype.init.call(this),this.push=function(v){var y=0,S=Bs,A;for(g?(A=new Uint8Array(v.byteLength+g),A.set(f.subarray(0,g)),A.set(v,g),g=0):A=v;S<A.byteLength;){if(A[y]===yo&&A[S]===yo){this.trigger("data",A.subarray(y,S)),y+=Bs,S+=Bs;continue}y++,S++}y<A.byteLength&&(f.set(A.subarray(y),0),g=A.byteLength-y)},this.flush=function(){g===Bs&&f[0]===yo&&(this.trigger("data",f),g=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){g=0,this.trigger("reset")}},Tn.prototype=new Dr,tn=function(){var f,g,v,y;tn.prototype.init.call(this),y=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,f=function(S,A){var B=0;A.payloadUnitStartIndicator&&(B+=S[B]+1),A.type==="pat"?g(S.subarray(B),A):v(S.subarray(B),A)},g=function(S,A){A.section_number=S[7],A.last_section_number=S[8],y.pmtPid=(S[10]&31)<<8|S[11],A.pmtPid=y.pmtPid},v=function(S,A){var B,j,V,W;if(S[5]&1){for(y.programMapTable={video:null,audio:null,"timed-metadata":{}},B=(S[1]&15)<<8|S[2],j=3+B-4,V=(S[10]&15)<<8|S[11],W=12+V;W<j;){var te=S[W],ge=(S[W+1]&31)<<8|S[W+2];te===yt.H264_STREAM_TYPE&&y.programMapTable.video===null?y.programMapTable.video=ge:te===yt.ADTS_STREAM_TYPE&&y.programMapTable.audio===null?y.programMapTable.audio=ge:te===yt.METADATA_STREAM_TYPE&&(y.programMapTable["timed-metadata"][ge]=te),W+=((S[W+3]&15)<<8|S[W+4])+5}A.programMapTable=y.programMapTable}},this.push=function(S){var A={},B=4;if(A.payloadUnitStartIndicator=!!(S[1]&64),A.pid=S[1]&31,A.pid<<=8,A.pid|=S[2],(S[3]&48)>>>4>1&&(B+=S[B]+1),A.pid===0)A.type="pat",f(S.subarray(B),A),this.trigger("data",A);else if(A.pid===this.pmtPid)for(A.type="pmt",f(S.subarray(B),A),this.trigger("data",A);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([S,B,A]):this.processPes_(S,B,A)},this.processPes_=function(S,A,B){B.pid===this.programMapTable.video?B.streamType=yt.H264_STREAM_TYPE:B.pid===this.programMapTable.audio?B.streamType=yt.ADTS_STREAM_TYPE:B.streamType=this.programMapTable["timed-metadata"][B.pid],B.type="pes",B.data=S.subarray(A),this.trigger("data",B)}},tn.prototype=new Dr,tn.STREAM_TYPES={h264:27,adts:15},Pr=function(){var f=this,g=!1,v={data:[],size:0},y={data:[],size:0},S={data:[],size:0},A,B=function(V,W){var te;const ge=V[0]<<16|V[1]<<8|V[2];W.data=new Uint8Array,ge===1&&(W.packetLength=6+(V[4]<<8|V[5]),W.dataAlignmentIndicator=(V[6]&4)!==0,te=V[7],te&192&&(W.pts=(V[9]&14)<<27|(V[10]&255)<<20|(V[11]&254)<<12|(V[12]&255)<<5|(V[13]&254)>>>3,W.pts*=4,W.pts+=(V[13]&6)>>>1,W.dts=W.pts,te&64&&(W.dts=(V[14]&14)<<27|(V[15]&255)<<20|(V[16]&254)<<12|(V[17]&255)<<5|(V[18]&254)>>>3,W.dts*=4,W.dts+=(V[18]&6)>>>1)),W.data=V.subarray(9+V[8]))},j=function(V,W,te){var ge=new Uint8Array(V.size),Ne={type:W},Se=0,Xe=0,lt=!1,_i;if(!(!V.data.length||V.size<9)){for(Ne.trackId=V.data[0].pid,Se=0;Se<V.data.length;Se++)_i=V.data[Se],ge.set(_i.data,Xe),Xe+=_i.data.byteLength;B(ge,Ne),lt=W==="video"||Ne.packetLength<=V.size,(te||lt)&&(V.size=0,V.data.length=0),lt&&f.trigger("data",Ne)}};Pr.prototype.init.call(this),this.push=function(V){({pat:function(){},pes:function(){var W,te;switch(V.streamType){case yt.H264_STREAM_TYPE:W=v,te="video";break;case yt.ADTS_STREAM_TYPE:W=y,te="audio";break;case yt.METADATA_STREAM_TYPE:W=S,te="timed-metadata";break;default:return}V.payloadUnitStartIndicator&&j(W,te,!0),W.data.push(V),W.size+=V.data.byteLength},pmt:function(){var W={type:"metadata",tracks:[]};A=V.programMapTable,A.video!==null&&W.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+A.video,codec:"avc",type:"video"}),A.audio!==null&&W.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+A.audio,codec:"adts",type:"audio"}),g=!0,f.trigger("data",W)}})[V.type]()},this.reset=function(){v.size=0,v.data.length=0,y.size=0,y.data.length=0,this.trigger("reset")},this.flushStreams_=function(){j(v,"video"),j(y,"audio"),j(S,"timed-metadata")},this.flush=function(){if(!g&&A){var V={type:"metadata",tracks:[]};A.video!==null&&V.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+A.video,codec:"avc",type:"video"}),A.audio!==null&&V.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+A.audio,codec:"adts",type:"audio"}),f.trigger("data",V)}g=!1,this.flushStreams_(),this.trigger("done")}},Pr.prototype=new Dr;var Ta={PAT_PID:0,MP2T_PACKET_LENGTH:Bs,TransportPacketStream:Tn,TransportParseStream:tn,ElementaryStream:Pr,TimestampRolloverStream:Jn,CaptionStream:en.CaptionStream,Cea608Stream:en.Cea608Stream,Cea708Stream:en.Cea708Stream,MetadataStream:Zf};for(var kr in yt)yt.hasOwnProperty(kr)&&(Ta[kr]=yt[kr]);var Zl=Ta,Yl=i,xa=it.ONE_SECOND_IN_TS,vo,Sa=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];vo=function(f){var g,v=0;vo.prototype.init.call(this),this.skipWarn_=function(y,S){this.trigger("log",{level:"warn",message:`adts skiping bytes ${y} to ${S} in frame ${v} outside syncword`})},this.push=function(y){var S=0,A,B,j,V,W;if(f||(v=0),y.type==="audio"){g&&g.length?(j=g,g=new Uint8Array(j.byteLength+y.data.byteLength),g.set(j),g.set(y.data,j.byteLength)):g=y.data;for(var te;S+7<g.length;){if(g[S]!==255||(g[S+1]&246)!==240){typeof te!="number"&&(te=S),S++;continue}if(typeof te=="number"&&(this.skipWarn_(te,S),te=null),B=(~g[S+1]&1)*2,A=(g[S+3]&3)<<11|g[S+4]<<3|(g[S+5]&224)>>5,V=((g[S+6]&3)+1)*1024,W=V*xa/Sa[(g[S+2]&60)>>>2],g.byteLength-S<A)break;this.trigger("data",{pts:y.pts+v*W,dts:y.dts+v*W,sampleCount:V,audioobjecttype:(g[S+2]>>>6&3)+1,channelcount:(g[S+2]&1)<<2|(g[S+3]&192)>>>6,samplerate:Sa[(g[S+2]&60)>>>2],samplingfrequencyindex:(g[S+2]&60)>>>2,samplesize:16,data:g.subarray(S+7+B,S+A)}),v++,S+=A}typeof te=="number"&&(this.skipWarn_(te,S),te=null),g=g.subarray(S)}},this.flush=function(){v=0,this.trigger("done")},this.reset=function(){g=void 0,this.trigger("reset")},this.endTimeline=function(){g=void 0,this.trigger("endedtimeline")}},vo.prototype=new Yl;var Yf=vo,tt;tt=function(f){var g=f.byteLength,v=0,y=0;this.length=function(){return 8*g},this.bitsAvailable=function(){return 8*g+y},this.loadWord=function(){var S=f.byteLength-g,A=new Uint8Array(4),B=Math.min(4,g);if(B===0)throw new Error("no bytes available");A.set(f.subarray(S,S+B)),v=new DataView(A.buffer).getUint32(0),y=B*8,g-=B},this.skipBits=function(S){var A;y>S?(v<<=S,y-=S):(S-=y,A=Math.floor(S/8),S-=A*8,g-=A,this.loadWord(),v<<=S,y-=S)},this.readBits=function(S){var A=Math.min(y,S),B=v>>>32-A;return y-=A,y>0?v<<=A:g>0&&this.loadWord(),A=S-A,A>0?B<<A|this.readBits(A):B},this.skipLeadingZeros=function(){var S;for(S=0;S<y;++S)if((v&2147483648>>>S)!==0)return v<<=S,y-=S,S;return this.loadWord(),S+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var S=this.skipLeadingZeros();return this.readBits(S+1)-1},this.readExpGolomb=function(){var S=this.readUnsignedExpGolomb();return 1&S?1+S>>>1:-1*(S>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var Fs=tt,At=i,Wc=Fs,Ir,Lr,Ca;Lr=function(){var f=0,g,v;Lr.prototype.init.call(this),this.push=function(y){var S;v?(S=new Uint8Array(v.byteLength+y.data.byteLength),S.set(v),S.set(y.data,v.byteLength),v=S):v=y.data;for(var A=v.byteLength;f<A-3;f++)if(v[f+2]===1){g=f+5;break}for(;g<A;)switch(v[g]){case 0:if(v[g-1]!==0){g+=2;break}else if(v[g-2]!==0){g++;break}f+3!==g-2&&this.trigger("data",v.subarray(f+3,g-2));do g++;while(v[g]!==1&&g<A);f=g-2,g+=3;break;case 1:if(v[g-1]!==0||v[g-2]!==0){g+=3;break}this.trigger("data",v.subarray(f+3,g-2)),f=g-2,g+=3;break;default:g+=3;break}v=v.subarray(f),g-=f,f=0},this.reset=function(){v=null,f=0,this.trigger("reset")},this.flush=function(){v&&v.byteLength>3&&this.trigger("data",v.subarray(f+3)),v=null,f=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},Lr.prototype=new At,Ca={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},Ir=function(){var f=new Lr,g,v,y,S,A,B,j;Ir.prototype.init.call(this),g=this,this.push=function(V){V.type==="video"&&(v=V.trackId,y=V.pts,S=V.dts,f.push(V))},f.on("data",function(V){var W={trackId:v,pts:y,dts:S,data:V,nalUnitTypeCode:V[0]&31};switch(W.nalUnitTypeCode){case 5:W.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:W.nalUnitType="sei_rbsp",W.escapedRBSP=A(V.subarray(1));break;case 7:W.nalUnitType="seq_parameter_set_rbsp",W.escapedRBSP=A(V.subarray(1)),W.config=B(W.escapedRBSP);break;case 8:W.nalUnitType="pic_parameter_set_rbsp";break;case 9:W.nalUnitType="access_unit_delimiter_rbsp";break}g.trigger("data",W)}),f.on("done",function(){g.trigger("done")}),f.on("partialdone",function(){g.trigger("partialdone")}),f.on("reset",function(){g.trigger("reset")}),f.on("endedtimeline",function(){g.trigger("endedtimeline")}),this.flush=function(){f.flush()},this.partialFlush=function(){f.partialFlush()},this.reset=function(){f.reset()},this.endTimeline=function(){f.endTimeline()},j=function(V,W){var te=8,ge=8,Ne,Se;for(Ne=0;Ne<V;Ne++)ge!==0&&(Se=W.readExpGolomb(),ge=(te+Se+256)%256),te=ge===0?te:ge},A=function(V){for(var W=V.byteLength,te=[],ge=1,Ne,Se;ge<W-2;)V[ge]===0&&V[ge+1]===0&&V[ge+2]===3?(te.push(ge+2),ge+=2):ge++;if(te.length===0)return V;Ne=W-te.length,Se=new Uint8Array(Ne);var Xe=0;for(ge=0;ge<Ne;Xe++,ge++)Xe===te[0]&&(Xe++,te.shift()),Se[ge]=V[Xe];return Se},B=function(V){var W=0,te=0,ge=0,Ne=0,Se,Xe,lt,_i,Cs,jr,mu,gu,_u,yu,wh,Ht=[1,1],vu,ln;if(Se=new Wc(V),Xe=Se.readUnsignedByte(),_i=Se.readUnsignedByte(),lt=Se.readUnsignedByte(),Se.skipUnsignedExpGolomb(),Ca[Xe]&&(Cs=Se.readUnsignedExpGolomb(),Cs===3&&Se.skipBits(1),Se.skipUnsignedExpGolomb(),Se.skipUnsignedExpGolomb(),Se.skipBits(1),Se.readBoolean()))for(wh=Cs!==3?8:12,ln=0;ln<wh;ln++)Se.readBoolean()&&(ln<6?j(16,Se):j(64,Se));if(Se.skipUnsignedExpGolomb(),jr=Se.readUnsignedExpGolomb(),jr===0)Se.readUnsignedExpGolomb();else if(jr===1)for(Se.skipBits(1),Se.skipExpGolomb(),Se.skipExpGolomb(),mu=Se.readUnsignedExpGolomb(),ln=0;ln<mu;ln++)Se.skipExpGolomb();if(Se.skipUnsignedExpGolomb(),Se.skipBits(1),gu=Se.readUnsignedExpGolomb(),_u=Se.readUnsignedExpGolomb(),yu=Se.readBits(1),yu===0&&Se.skipBits(1),Se.skipBits(1),Se.readBoolean()&&(W=Se.readUnsignedExpGolomb(),te=Se.readUnsignedExpGolomb(),ge=Se.readUnsignedExpGolomb(),Ne=Se.readUnsignedExpGolomb()),Se.readBoolean()&&Se.readBoolean()){switch(vu=Se.readUnsignedByte(),vu){case 1:Ht=[1,1];break;case 2:Ht=[12,11];break;case 3:Ht=[10,11];break;case 4:Ht=[16,11];break;case 5:Ht=[40,33];break;case 6:Ht=[24,11];break;case 7:Ht=[20,11];break;case 8:Ht=[32,11];break;case 9:Ht=[80,33];break;case 10:Ht=[18,11];break;case 11:Ht=[15,11];break;case 12:Ht=[64,33];break;case 13:Ht=[160,99];break;case 14:Ht=[4,3];break;case 15:Ht=[3,2];break;case 16:Ht=[2,1];break;case 255:{Ht=[Se.readUnsignedByte()<<8|Se.readUnsignedByte(),Se.readUnsignedByte()<<8|Se.readUnsignedByte()];break}}Ht&&Ht[0]/Ht[1]}return{profileIdc:Xe,levelIdc:lt,profileCompatibility:_i,width:(gu+1)*16-W*2-te*2,height:(2-yu)*(_u+1)*16-ge*2-Ne*2,sarRatio:Ht}}},Ir.prototype=new At;var er={H264Stream:Ir},Ql=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Or=function(f,g){var v=f[g+6]<<21|f[g+7]<<14|f[g+8]<<7|f[g+9],y=f[g+5],S=(y&16)>>4;return v=v>=0?v:0,S?v+20:v+10},oi=function(f,g){return f.length-g<10||f[g]!==73||f[g+1]!==68||f[g+2]!==51?g:(g+=Or(f,g),oi(f,g))},tr=function(f){var g=oi(f,0);return f.length>=g+2&&(f[g]&255)===255&&(f[g+1]&240)===240&&(f[g+1]&22)===16},Jl=function(f){return f[0]<<21|f[1]<<14|f[2]<<7|f[3]},Gc=function(f,g,v){var y,S="";for(y=g;y<v;y++)S+="%"+("00"+f[y].toString(16)).slice(-2);return S},Qf=function(f,g,v){return unescape(Gc(f,g,v))},Xc=function(f,g){var v=(f[g+5]&224)>>5,y=f[g+4]<<3,S=f[g+3]&6144;return S|y|v},eu=function(f,g){return f[g]===73&&f[g+1]===68&&f[g+2]===51?"timed-metadata":f[g]&!0&&(f[g+1]&240)===240?"audio":null},Jf=function(f){for(var g=0;g+5<f.length;){if(f[g]!==255||(f[g+1]&246)!==240){g++;continue}return Ql[(f[g+2]&60)>>>2]}return null},Kc=function(f){var g,v,y,S;g=10,f[5]&64&&(g+=4,g+=Jl(f.subarray(10,14)));do{if(v=Jl(f.subarray(g+4,g+8)),v<1)return null;if(S=String.fromCharCode(f[g],f[g+1],f[g+2],f[g+3]),S==="PRIV"){y=f.subarray(g+10,g+v+10);for(var A=0;A<y.byteLength;A++)if(y[A]===0){var B=Qf(y,0,A);if(B==="com.apple.streaming.transportStreamTimestamp"){var j=y.subarray(A+1),V=(j[3]&1)<<30|j[4]<<22|j[5]<<14|j[6]<<6|j[7]>>>2;return V*=4,V+=j[7]&3,V}break}}g+=10,g+=v}while(g<f.byteLength);return null},ht={isLikelyAacData:tr,parseId3TagSize:Or,parseAdtsSize:Xc,parseType:eu,parseSampleRate:Jf,parseAacTimestamp:Kc},ep=i,ns=ht,xn;xn=function(){var f=new Uint8Array,g=0;xn.prototype.init.call(this),this.setTimestamp=function(v){g=v},this.push=function(v){var y=0,S=0,A,B,j,V;for(f.length?(V=f.length,f=new Uint8Array(v.byteLength+V),f.set(f.subarray(0,V)),f.set(v,V)):f=v;f.length-S>=3;){if(f[S]===73&&f[S+1]===68&&f[S+2]===51){if(f.length-S<10||(y=ns.parseId3TagSize(f,S),S+y>f.length))break;B={type:"timed-metadata",data:f.subarray(S,S+y)},this.trigger("data",B),S+=y;continue}else if((f[S]&255)===255&&(f[S+1]&240)===240){if(f.length-S<7||(y=ns.parseAdtsSize(f,S),S+y>f.length))break;j={type:"audio",data:f.subarray(S,S+y),pts:g,dts:g},this.trigger("data",j),S+=y;continue}S++}A=f.length-S,A>0?f=f.subarray(S):f=new Uint8Array},this.reset=function(){f=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){f=new Uint8Array,this.trigger("endedtimeline")}},xn.prototype=new ep;var Zc=xn,tp=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],tu=tp,ip=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Yc=ip,wa=i,bo=me,ir=Te,Ea=Ar,Jt=G,sn=Zl,To=it,nn=Yf,Qc=er.H264Stream,Jc=Zc,iu=ht.isLikelyAacData,sp=it.ONE_SECOND_IN_TS,su=tu,nu=Yc,Aa,xo,Mr,sr,eh=function(f,g){g.stream=f,this.trigger("log",g)},ru=function(f,g){for(var v=Object.keys(g),y=0;y<v.length;y++){var S=v[y];S==="headOfPipeline"||!g[S].on||g[S].on("log",eh.bind(f,S))}},So=function(f,g){var v;if(f.length!==g.length)return!1;for(v=0;v<f.length;v++)if(f[v]!==g[v])return!1;return!0},Sn=function(f,g,v,y,S,A){var B=v-g,j=y-g,V=S-v;return{start:{dts:f,pts:f+B},end:{dts:f+j,pts:f+V},prependedContentDuration:A,baseMediaDecodeTime:f}};xo=function(f,g){var v=[],y,S=0,A=0,B=1/0;g=g||{},y=g.firstSequenceNumber||0,xo.prototype.init.call(this),this.push=function(j){Jt.collectDtsInfo(f,j),f&&su.forEach(function(V){f[V]=j[V]}),v.push(j)},this.setEarliestDts=function(j){S=j},this.setVideoBaseMediaDecodeTime=function(j){B=j},this.setAudioAppendStart=function(j){A=j},this.flush=function(){var j,V,W,te,ge,Ne,Se;if(v.length===0){this.trigger("done","AudioSegmentStream");return}j=Ea.trimAdtsFramesByEarliestDts(v,f,S),f.baseMediaDecodeTime=Jt.calculateTrackBaseMediaDecodeTime(f,g.keepOriginalTimestamps),Se=Ea.prefixWithSilence(f,j,A,B),f.samples=Ea.generateSampleTable(j),W=bo.mdat(Ea.concatenateFrameData(j)),v=[],V=bo.moof(y,[f]),te=new Uint8Array(V.byteLength+W.byteLength),y++,te.set(V),te.set(W,V.byteLength),Jt.clearDtsInfo(f),ge=Math.ceil(sp*1024/f.samplerate),j.length&&(Ne=j.length*ge,this.trigger("segmentTimingInfo",Sn(To.audioTsToVideoTs(f.baseMediaDecodeTime,f.samplerate),j[0].dts,j[0].pts,j[0].dts+Ne,j[0].pts+Ne,Se||0)),this.trigger("timingInfo",{start:j[0].pts,end:j[0].pts+Ne})),this.trigger("data",{track:f,boxes:te}),this.trigger("done","AudioSegmentStream")},this.reset=function(){Jt.clearDtsInfo(f),v=[],this.trigger("reset")}},xo.prototype=new wa,Aa=function(f,g){var v,y=[],S=[],A,B;g=g||{},v=g.firstSequenceNumber||0,Aa.prototype.init.call(this),delete f.minPTS,this.gopCache_=[],this.push=function(j){Jt.collectDtsInfo(f,j),j.nalUnitType==="seq_parameter_set_rbsp"&&!A&&(A=j.config,f.sps=[j.data],nu.forEach(function(V){f[V]=A[V]},this)),j.nalUnitType==="pic_parameter_set_rbsp"&&!B&&(B=j.data,f.pps=[j.data]),y.push(j)},this.flush=function(){for(var j,V,W,te,ge,Ne,Se=0,Xe,lt;y.length&&y[0].nalUnitType!=="access_unit_delimiter_rbsp";)y.shift();if(y.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(j=ir.groupNalsIntoFrames(y),W=ir.groupFramesIntoGops(j),W[0][0].keyFrame||(V=this.getGopForFusion_(y[0],f),V?(Se=V.duration,W.unshift(V),W.byteLength+=V.byteLength,W.nalCount+=V.nalCount,W.pts=V.pts,W.dts=V.dts,W.duration+=V.duration):W=ir.extendFirstKeyFrame(W)),S.length){var _i;if(g.alignGopsAtEnd?_i=this.alignGopsAtEnd_(W):_i=this.alignGopsAtStart_(W),!_i){this.gopCache_.unshift({gop:W.pop(),pps:f.pps,sps:f.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),y=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}Jt.clearDtsInfo(f),W=_i}Jt.collectDtsInfo(f,W),f.samples=ir.generateSampleTable(W),ge=bo.mdat(ir.concatenateNalData(W)),f.baseMediaDecodeTime=Jt.calculateTrackBaseMediaDecodeTime(f,g.keepOriginalTimestamps),this.trigger("processedGopsInfo",W.map(function(Cs){return{pts:Cs.pts,dts:Cs.dts,byteLength:Cs.byteLength}})),Xe=W[0],lt=W[W.length-1],this.trigger("segmentTimingInfo",Sn(f.baseMediaDecodeTime,Xe.dts,Xe.pts,lt.dts+lt.duration,lt.pts+lt.duration,Se)),this.trigger("timingInfo",{start:W[0].pts,end:W[W.length-1].pts+W[W.length-1].duration}),this.gopCache_.unshift({gop:W.pop(),pps:f.pps,sps:f.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),y=[],this.trigger("baseMediaDecodeTime",f.baseMediaDecodeTime),this.trigger("timelineStartInfo",f.timelineStartInfo),te=bo.moof(v,[f]),Ne=new Uint8Array(te.byteLength+ge.byteLength),v++,Ne.set(te),Ne.set(ge,te.byteLength),this.trigger("data",{track:f,boxes:Ne}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),y=[],this.gopCache_.length=0,S.length=0,this.trigger("reset")},this.resetStream_=function(){Jt.clearDtsInfo(f),A=void 0,B=void 0},this.getGopForFusion_=function(j){var V=45e3,W=1/0,te,ge,Ne,Se,Xe;for(Xe=0;Xe<this.gopCache_.length;Xe++)Se=this.gopCache_[Xe],Ne=Se.gop,!(!(f.pps&&So(f.pps[0],Se.pps[0]))||!(f.sps&&So(f.sps[0],Se.sps[0])))&&(Ne.dts<f.timelineStartInfo.dts||(te=j.dts-Ne.dts-Ne.duration,te>=-1e4&&te<=V&&(!ge||W>te)&&(ge=Se,W=te)));return ge?ge.gop:null},this.alignGopsAtStart_=function(j){var V,W,te,ge,Ne,Se,Xe,lt;for(Ne=j.byteLength,Se=j.nalCount,Xe=j.duration,V=W=0;V<S.length&&W<j.length&&(te=S[V],ge=j[W],te.pts!==ge.pts);){if(ge.pts>te.pts){V++;continue}W++,Ne-=ge.byteLength,Se-=ge.nalCount,Xe-=ge.duration}return W===0?j:W===j.length?null:(lt=j.slice(W),lt.byteLength=Ne,lt.duration=Xe,lt.nalCount=Se,lt.pts=lt[0].pts,lt.dts=lt[0].dts,lt)},this.alignGopsAtEnd_=function(j){var V,W,te,ge,Ne,Se;for(V=S.length-1,W=j.length-1,Ne=null,Se=!1;V>=0&&W>=0;){if(te=S[V],ge=j[W],te.pts===ge.pts){Se=!0;break}if(te.pts>ge.pts){V--;continue}V===S.length-1&&(Ne=W),W--}if(!Se&&Ne===null)return null;var Xe;if(Se?Xe=W:Xe=Ne,Xe===0)return j;var lt=j.slice(Xe),_i=lt.reduce(function(Cs,jr){return Cs.byteLength+=jr.byteLength,Cs.duration+=jr.duration,Cs.nalCount+=jr.nalCount,Cs},{byteLength:0,duration:0,nalCount:0});return lt.byteLength=_i.byteLength,lt.duration=_i.duration,lt.nalCount=_i.nalCount,lt.pts=lt[0].pts,lt.dts=lt[0].dts,lt},this.alignGopsWith=function(j){S=j}},Aa.prototype=new wa,sr=function(f,g){this.numberOfTracks=0,this.metadataStream=g,f=f||{},typeof f.remux<"u"?this.remuxTracks=!!f.remux:this.remuxTracks=!0,typeof f.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=f.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,sr.prototype.init.call(this),this.push=function(v){if(v.content||v.text)return this.pendingCaptions.push(v);if(v.frames)return this.pendingMetadata.push(v);this.pendingTracks.push(v.track),this.pendingBytes+=v.boxes.byteLength,v.track.type==="video"&&(this.videoTrack=v.track,this.pendingBoxes.push(v.boxes)),v.track.type==="audio"&&(this.audioTrack=v.track,this.pendingBoxes.unshift(v.boxes))}},sr.prototype=new wa,sr.prototype.flush=function(f){var g=0,v={captions:[],captionStreams:{},metadata:[],info:{}},y,S,A,B=0,j;if(this.pendingTracks.length<this.numberOfTracks){if(f!=="VideoSegmentStream"&&f!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(B=this.videoTrack.timelineStartInfo.pts,nu.forEach(function(V){v.info[V]=this.videoTrack[V]},this)):this.audioTrack&&(B=this.audioTrack.timelineStartInfo.pts,su.forEach(function(V){v.info[V]=this.audioTrack[V]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?v.type=this.pendingTracks[0].type:v.type="combined",this.emittedTracks+=this.pendingTracks.length,A=bo.initSegment(this.pendingTracks),v.initSegment=new Uint8Array(A.byteLength),v.initSegment.set(A),v.data=new Uint8Array(this.pendingBytes),j=0;j<this.pendingBoxes.length;j++)v.data.set(this.pendingBoxes[j],g),g+=this.pendingBoxes[j].byteLength;for(j=0;j<this.pendingCaptions.length;j++)y=this.pendingCaptions[j],y.startTime=To.metadataTsToSeconds(y.startPts,B,this.keepOriginalTimestamps),y.endTime=To.metadataTsToSeconds(y.endPts,B,this.keepOriginalTimestamps),v.captionStreams[y.stream]=!0,v.captions.push(y);for(j=0;j<this.pendingMetadata.length;j++)S=this.pendingMetadata[j],S.cueTime=To.metadataTsToSeconds(S.pts,B,this.keepOriginalTimestamps),v.metadata.push(S);for(v.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",v),j=0;j<v.captions.length;j++)y=v.captions[j],this.trigger("caption",y);for(j=0;j<v.metadata.length;j++)S=v.metadata[j],this.trigger("id3Frame",S)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},sr.prototype.setRemux=function(f){this.remuxTracks=f},Mr=function(f){var g=this,v=!0,y,S;Mr.prototype.init.call(this),f=f||{},this.baseMediaDecodeTime=f.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var A={};this.transmuxPipeline_=A,A.type="aac",A.metadataStream=new sn.MetadataStream,A.aacStream=new Jc,A.audioTimestampRolloverStream=new sn.TimestampRolloverStream("audio"),A.timedMetadataTimestampRolloverStream=new sn.TimestampRolloverStream("timed-metadata"),A.adtsStream=new nn,A.coalesceStream=new sr(f,A.metadataStream),A.headOfPipeline=A.aacStream,A.aacStream.pipe(A.audioTimestampRolloverStream).pipe(A.adtsStream),A.aacStream.pipe(A.timedMetadataTimestampRolloverStream).pipe(A.metadataStream).pipe(A.coalesceStream),A.metadataStream.on("timestamp",function(B){A.aacStream.setTimestamp(B.timeStamp)}),A.aacStream.on("data",function(B){B.type!=="timed-metadata"&&B.type!=="audio"||A.audioSegmentStream||(S=S||{timelineStartInfo:{baseMediaDecodeTime:g.baseMediaDecodeTime},codec:"adts",type:"audio"},A.coalesceStream.numberOfTracks++,A.audioSegmentStream=new xo(S,f),A.audioSegmentStream.on("log",g.getLogTrigger_("audioSegmentStream")),A.audioSegmentStream.on("timingInfo",g.trigger.bind(g,"audioTimingInfo")),A.adtsStream.pipe(A.audioSegmentStream).pipe(A.coalesceStream),g.trigger("trackinfo",{hasAudio:!!S,hasVideo:!!y}))}),A.coalesceStream.on("data",this.trigger.bind(this,"data")),A.coalesceStream.on("done",this.trigger.bind(this,"done")),ru(this,A)},this.setupTsPipeline=function(){var A={};this.transmuxPipeline_=A,A.type="ts",A.metadataStream=new sn.MetadataStream,A.packetStream=new sn.TransportPacketStream,A.parseStream=new sn.TransportParseStream,A.elementaryStream=new sn.ElementaryStream,A.timestampRolloverStream=new sn.TimestampRolloverStream,A.adtsStream=new nn,A.h264Stream=new Qc,A.captionStream=new sn.CaptionStream(f),A.coalesceStream=new sr(f,A.metadataStream),A.headOfPipeline=A.packetStream,A.packetStream.pipe(A.parseStream).pipe(A.elementaryStream).pipe(A.timestampRolloverStream),A.timestampRolloverStream.pipe(A.h264Stream),A.timestampRolloverStream.pipe(A.adtsStream),A.timestampRolloverStream.pipe(A.metadataStream).pipe(A.coalesceStream),A.h264Stream.pipe(A.captionStream).pipe(A.coalesceStream),A.elementaryStream.on("data",function(B){var j;if(B.type==="metadata"){for(j=B.tracks.length;j--;)!y&&B.tracks[j].type==="video"?(y=B.tracks[j],y.timelineStartInfo.baseMediaDecodeTime=g.baseMediaDecodeTime):!S&&B.tracks[j].type==="audio"&&(S=B.tracks[j],S.timelineStartInfo.baseMediaDecodeTime=g.baseMediaDecodeTime);y&&!A.videoSegmentStream&&(A.coalesceStream.numberOfTracks++,A.videoSegmentStream=new Aa(y,f),A.videoSegmentStream.on("log",g.getLogTrigger_("videoSegmentStream")),A.videoSegmentStream.on("timelineStartInfo",function(V){S&&!f.keepOriginalTimestamps&&(S.timelineStartInfo=V,A.audioSegmentStream.setEarliestDts(V.dts-g.baseMediaDecodeTime))}),A.videoSegmentStream.on("processedGopsInfo",g.trigger.bind(g,"gopInfo")),A.videoSegmentStream.on("segmentTimingInfo",g.trigger.bind(g,"videoSegmentTimingInfo")),A.videoSegmentStream.on("baseMediaDecodeTime",function(V){S&&A.audioSegmentStream.setVideoBaseMediaDecodeTime(V)}),A.videoSegmentStream.on("timingInfo",g.trigger.bind(g,"videoTimingInfo")),A.h264Stream.pipe(A.videoSegmentStream).pipe(A.coalesceStream)),S&&!A.audioSegmentStream&&(A.coalesceStream.numberOfTracks++,A.audioSegmentStream=new xo(S,f),A.audioSegmentStream.on("log",g.getLogTrigger_("audioSegmentStream")),A.audioSegmentStream.on("timingInfo",g.trigger.bind(g,"audioTimingInfo")),A.audioSegmentStream.on("segmentTimingInfo",g.trigger.bind(g,"audioSegmentTimingInfo")),A.adtsStream.pipe(A.audioSegmentStream).pipe(A.coalesceStream)),g.trigger("trackinfo",{hasAudio:!!S,hasVideo:!!y})}}),A.coalesceStream.on("data",this.trigger.bind(this,"data")),A.coalesceStream.on("id3Frame",function(B){B.dispatchType=A.metadataStream.dispatchType,g.trigger("id3Frame",B)}),A.coalesceStream.on("caption",this.trigger.bind(this,"caption")),A.coalesceStream.on("done",this.trigger.bind(this,"done")),ru(this,A)},this.setBaseMediaDecodeTime=function(A){var B=this.transmuxPipeline_;f.keepOriginalTimestamps||(this.baseMediaDecodeTime=A),S&&(S.timelineStartInfo.dts=void 0,S.timelineStartInfo.pts=void 0,Jt.clearDtsInfo(S),B.audioTimestampRolloverStream&&B.audioTimestampRolloverStream.discontinuity()),y&&(B.videoSegmentStream&&(B.videoSegmentStream.gopCache_=[]),y.timelineStartInfo.dts=void 0,y.timelineStartInfo.pts=void 0,Jt.clearDtsInfo(y),B.captionStream.reset()),B.timestampRolloverStream&&B.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(A){S&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(A)},this.setRemux=function(A){var B=this.transmuxPipeline_;f.remux=A,B&&B.coalesceStream&&B.coalesceStream.setRemux(A)},this.alignGopsWith=function(A){y&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(A)},this.getLogTrigger_=function(A){var B=this;return function(j){j.stream=A,B.trigger("log",j)}},this.push=function(A){if(v){var B=iu(A);B&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!B&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),v=!1}this.transmuxPipeline_.headOfPipeline.push(A)},this.flush=function(){v=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},Mr.prototype=new wa;var np={Transmuxer:Mr},Co=function(f){return f>>>0},rs=function(f){return("00"+f.toString(16)).slice(-2)},wo={toUnsigned:Co,toHexString:rs},th=function(f){var g="";return g+=String.fromCharCode(f[0]),g+=String.fromCharCode(f[1]),g+=String.fromCharCode(f[2]),g+=String.fromCharCode(f[3]),g},ih=th,ou=wo.toUnsigned,au=ih,sh=function(f,g){var v=[],y,S,A,B,j;if(!g.length)return null;for(y=0;y<f.byteLength;)S=ou(f[y]<<24|f[y+1]<<16|f[y+2]<<8|f[y+3]),A=au(f.subarray(y+4,y+8)),B=S>1?y+S:f.byteLength,A===g[0]&&(g.length===1?v.push(f.subarray(y+8,B)):(j=sh(f.subarray(y+8,B),g.slice(1)),j.length&&(v=v.concat(j)))),y=B;return v},lu=sh,nh=wo.toUnsigned,rp=r.getUint64,Ss=function(f){var g={version:f[0],flags:new Uint8Array(f.subarray(1,4))};return g.version===1?g.baseMediaDecodeTime=rp(f.subarray(4)):g.baseMediaDecodeTime=nh(f[4]<<24|f[5]<<16|f[6]<<8|f[7]),g},Cn=Ss,op=function(f){var g=new DataView(f.buffer,f.byteOffset,f.byteLength),v={version:f[0],flags:new Uint8Array(f.subarray(1,4)),trackId:g.getUint32(4)},y=v.flags[2]&1,S=v.flags[2]&2,A=v.flags[2]&8,B=v.flags[2]&16,j=v.flags[2]&32,V=v.flags[0]&65536,W=v.flags[0]&131072,te;return te=8,y&&(te+=4,v.baseDataOffset=g.getUint32(12),te+=4),S&&(v.sampleDescriptionIndex=g.getUint32(te),te+=4),A&&(v.defaultSampleDuration=g.getUint32(te),te+=4),B&&(v.defaultSampleSize=g.getUint32(te),te+=4),j&&(v.defaultSampleFlags=g.getUint32(te)),V&&(v.durationIsEmpty=!0),!y&&W&&(v.baseDataOffsetIsMoof=!0),v},Us=op,ap=function(f){return{isLeading:(f[0]&12)>>>2,dependsOn:f[0]&3,isDependedOn:(f[1]&192)>>>6,hasRedundancy:(f[1]&48)>>>4,paddingValue:(f[1]&14)>>>1,isNonSyncSample:f[1]&1,degradationPriority:f[2]<<8|f[3]}},Rr=ap,rh=Rr,Eo=function(f){var g={version:f[0],flags:new Uint8Array(f.subarray(1,4)),samples:[]},v=new DataView(f.buffer,f.byteOffset,f.byteLength),y=g.flags[2]&1,S=g.flags[2]&4,A=g.flags[1]&1,B=g.flags[1]&2,j=g.flags[1]&4,V=g.flags[1]&8,W=v.getUint32(4),te=8,ge;for(y&&(g.dataOffset=v.getInt32(te),te+=4),S&&W&&(ge={flags:rh(f.subarray(te,te+4))},te+=4,A&&(ge.duration=v.getUint32(te),te+=4),B&&(ge.size=v.getUint32(te),te+=4),V&&(g.version===1?ge.compositionTimeOffset=v.getInt32(te):ge.compositionTimeOffset=v.getUint32(te),te+=4),g.samples.push(ge),W--);W--;)ge={},A&&(ge.duration=v.getUint32(te),te+=4),B&&(ge.size=v.getUint32(te),te+=4),j&&(ge.flags=rh(f.subarray(te,te+4)),te+=4),V&&(g.version===1?ge.compositionTimeOffset=v.getInt32(te):ge.compositionTimeOffset=v.getUint32(te),te+=4),g.samples.push(ge);return g},uu=Eo,Ao={tfdt:Cn,trun:uu},oh={parseTfdt:Ao.tfdt,parseTrun:Ao.trun},wn=function(f){for(var g=0,v=String.fromCharCode(f[g]),y="";v!=="\0";)y+=v,g++,v=String.fromCharCode(f[g]);return y+=v,y},Da={uint8ToCString:wn},Pa=Da.uint8ToCString,cu=r.getUint64,lp=function(f){var g=4,v=f[0],y,S,A,B,j,V,W,te;if(v===0){y=Pa(f.subarray(g)),g+=y.length,S=Pa(f.subarray(g)),g+=S.length;var ge=new DataView(f.buffer);A=ge.getUint32(g),g+=4,j=ge.getUint32(g),g+=4,V=ge.getUint32(g),g+=4,W=ge.getUint32(g),g+=4}else if(v===1){var ge=new DataView(f.buffer);A=ge.getUint32(g),g+=4,B=cu(f.subarray(g)),g+=8,V=ge.getUint32(g),g+=4,W=ge.getUint32(g),g+=4,y=Pa(f.subarray(g)),g+=y.length,S=Pa(f.subarray(g)),g+=S.length}te=new Uint8Array(f.subarray(g,f.byteLength));var Ne={scheme_id_uri:y,value:S,timescale:A||1,presentation_time:B,presentation_time_delta:j,event_duration:V,id:W,message_data:te};return up(v,Ne)?Ne:void 0},rn=function(f,g,v,y){return f||f===0?f/g:y+v/g},up=function(f,g){var v=g.scheme_id_uri!=="\0",y=f===0&&nr(g.presentation_time_delta)&&v,S=f===1&&nr(g.presentation_time)&&v;return!(f>1)&&y||S},nr=function(f){return f!==void 0||f!==null},cp={parseEmsgBox:lp,scaleTime:rn},Vi;typeof window<"u"?Vi=window:typeof t<"u"?Vi=t:typeof self<"u"?Vi=self:Vi={};var Do=Vi,Po=wo.toUnsigned,rr=wo.toHexString,Bt=lu,En=ih,Nr=cp,Br=Us,ka=uu,hu=Cn,ah=r.getUint64,lh,ko,uh,du,ch,Ia,hh,os=Do,La=st.parseId3Frames;lh=function(f){var g={},v=Bt(f,["moov","trak"]);return v.reduce(function(y,S){var A,B,j,V,W;return A=Bt(S,["tkhd"])[0],!A||(B=A[0],j=B===0?12:20,V=Po(A[j]<<24|A[j+1]<<16|A[j+2]<<8|A[j+3]),W=Bt(S,["mdia","mdhd"])[0],!W)?null:(B=W[0],j=B===0?12:20,y[V]=Po(W[j]<<24|W[j+1]<<16|W[j+2]<<8|W[j+3]),y)},g)},ko=function(f,g){var v;v=Bt(g,["moof","traf"]);var y=v.reduce(function(S,A){var B=Bt(A,["tfhd"])[0],j=Po(B[4]<<24|B[5]<<16|B[6]<<8|B[7]),V=f[j]||9e4,W=Bt(A,["tfdt"])[0],te=new DataView(W.buffer,W.byteOffset,W.byteLength),ge;W[0]===1?ge=ah(W.subarray(4,12)):ge=te.getUint32(4);let Ne;return typeof ge=="bigint"?Ne=ge/os.BigInt(V):typeof ge=="number"&&!isNaN(ge)&&(Ne=ge/V),Ne<Number.MAX_SAFE_INTEGER&&(Ne=Number(Ne)),Ne<S&&(S=Ne),S},1/0);return typeof y=="bigint"||isFinite(y)?y:0},uh=function(f,g){var v=Bt(g,["moof","traf"]),y=0,S=0,A;if(v&&v.length){var B=Bt(v[0],["tfhd"])[0],j=Bt(v[0],["trun"])[0],V=Bt(v[0],["tfdt"])[0];if(B){var W=Br(B);A=W.trackId}if(V){var te=hu(V);y=te.baseMediaDecodeTime}if(j){var ge=ka(j);ge.samples&&ge.samples.length&&(S=ge.samples[0].compositionTimeOffset||0)}}var Ne=f[A]||9e4;typeof y=="bigint"&&(S=os.BigInt(S),Ne=os.BigInt(Ne));var Se=(y+S)/Ne;return typeof Se=="bigint"&&Se<Number.MAX_SAFE_INTEGER&&(Se=Number(Se)),Se},du=function(f){var g=Bt(f,["moov","trak"]),v=[];return g.forEach(function(y){var S=Bt(y,["mdia","hdlr"]),A=Bt(y,["tkhd"]);S.forEach(function(B,j){var V=En(B.subarray(8,12)),W=A[j],te,ge,Ne;V==="vide"&&(te=new DataView(W.buffer,W.byteOffset,W.byteLength),ge=te.getUint8(0),Ne=ge===0?te.getUint32(12):te.getUint32(20),v.push(Ne))})}),v},Ia=function(f){var g=f[0],v=g===0?12:20;return Po(f[v]<<24|f[v+1]<<16|f[v+2]<<8|f[v+3])},ch=function(f){var g=Bt(f,["moov","trak"]),v=[];return g.forEach(function(y){var S={},A=Bt(y,["tkhd"])[0],B,j;A&&(B=new DataView(A.buffer,A.byteOffset,A.byteLength),j=B.getUint8(0),S.id=j===0?B.getUint32(12):B.getUint32(20));var V=Bt(y,["mdia","hdlr"])[0];if(V){var W=En(V.subarray(8,12));W==="vide"?S.type="video":W==="soun"?S.type="audio":S.type=W}var te=Bt(y,["mdia","minf","stbl","stsd"])[0];if(te){var ge=te.subarray(8);S.codec=En(ge.subarray(4,8));var Ne=Bt(ge,[S.codec])[0],Se,Xe;Ne&&(/^[asm]vc[1-9]$/i.test(S.codec)?(Se=Ne.subarray(78),Xe=En(Se.subarray(4,8)),Xe==="avcC"&&Se.length>11?(S.codec+=".",S.codec+=rr(Se[9]),S.codec+=rr(Se[10]),S.codec+=rr(Se[11])):S.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(S.codec)?(Se=Ne.subarray(28),Xe=En(Se.subarray(4,8)),Xe==="esds"&&Se.length>20&&Se[19]!==0?(S.codec+="."+rr(Se[19]),S.codec+="."+rr(Se[20]>>>2&63).replace(/^0/,"")):S.codec="mp4a.40.2"):S.codec=S.codec.toLowerCase())}var lt=Bt(y,["mdia","mdhd"])[0];lt&&(S.timescale=Ia(lt)),v.push(S)}),v},hh=function(f,g=0){var v=Bt(f,["emsg"]);return v.map(y=>{var S=Nr.parseEmsgBox(new Uint8Array(y)),A=La(S.message_data);return{cueTime:Nr.scaleTime(S.presentation_time,S.timescale,S.presentation_time_delta,g),duration:Nr.scaleTime(S.event_duration,S.timescale),frames:A}})};var Io={findBox:Bt,parseType:En,timescale:lh,startTime:ko,compositionStartTime:uh,videoTrackIds:du,tracks:ch,getTimescaleFromMediaHeader:Ia,getEmsgID3:hh};const{parseTrun:Oa}=oh,{findBox:dh}=Io;var fu=Do,hp=function(f){var g=dh(f,["moof","traf"]),v=dh(f,["mdat"]),y=[];return v.forEach(function(S,A){var B=g[A];y.push({mdat:S,traf:B})}),y},Lo=function(f,g,v){var y=g,S=v.defaultSampleDuration||0,A=v.defaultSampleSize||0,B=v.trackId,j=[];return f.forEach(function(V){var W=Oa(V),te=W.samples;te.forEach(function(ge){ge.duration===void 0&&(ge.duration=S),ge.size===void 0&&(ge.size=A),ge.trackId=B,ge.dts=y,ge.compositionTimeOffset===void 0&&(ge.compositionTimeOffset=0),typeof y=="bigint"?(ge.pts=y+fu.BigInt(ge.compositionTimeOffset),y+=fu.BigInt(ge.duration)):(ge.pts=y+ge.compositionTimeOffset,y+=ge.duration)}),j=j.concat(te)}),j},fh={getMdatTrafPairs:hp,parseSamples:Lo},Fr=Ei.discardEmulationPreventionBytes,ph=$l.CaptionStream,Ma=lu,dp=Cn,on=Us,{getMdatTrafPairs:mh,parseSamples:gh}=fh,Oo=function(f,g){for(var v=f,y=0;y<g.length;y++){var S=g[y];if(v<S.size)return S;v-=S.size}return null},fp=function(f,g,v){var y=new DataView(f.buffer,f.byteOffset,f.byteLength),S={logs:[],seiNals:[]},A,B,j,V;for(B=0;B+4<f.length;B+=j)if(j=y.getUint32(B),B+=4,!(j<=0))switch(f[B]&31){case 6:var W=f.subarray(B+1,B+1+j),te=Oo(B,g);if(A={nalUnitType:"sei_rbsp",size:j,data:W,escapedRBSP:Fr(W),trackId:v},te)A.pts=te.pts,A.dts=te.dts,V=te;else if(V)A.pts=V.pts,A.dts=V.dts;else{S.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+B+" for trackId "+v+". See mux.js#223."});break}S.seiNals.push(A);break}return S},Ra=function(f,g){var v={},y=mh(f);return y.forEach(function(S){var A=S.mdat,B=S.traf,j=Ma(B,["tfhd"]),V=on(j[0]),W=V.trackId,te=Ma(B,["tfdt"]),ge=te.length>0?dp(te[0]).baseMediaDecodeTime:0,Ne=Ma(B,["trun"]),Se,Xe;g===W&&Ne.length>0&&(Se=gh(Ne,ge,V),Xe=fp(A,Se,W),v[W]||(v[W]={seiNals:[],logs:[]}),v[W].seiNals=v[W].seiNals.concat(Xe.seiNals),v[W].logs=v[W].logs.concat(Xe.logs))}),v},Mo=function(f,g,v){var y;if(g===null)return null;y=Ra(f,g);var S=y[g]||{};return{seiNals:S.seiNals,logs:S.logs,timescale:v}},_h=function(){var f=!1,g,v,y,S,A,B;this.isInitialized=function(){return f},this.init=function(j){g=new ph,f=!0,B=j?j.isPartial:!1,g.on("data",function(V){V.startTime=V.startPts/S,V.endTime=V.endPts/S,A.captions.push(V),A.captionStreams[V.stream]=!0}),g.on("log",function(V){A.logs.push(V)})},this.isNewInit=function(j,V){return j&&j.length===0||V&&typeof V=="object"&&Object.keys(V).length===0?!1:y!==j[0]||S!==V[y]},this.parse=function(j,V,W){var te;if(this.isInitialized()){if(!V||!W)return null;if(this.isNewInit(V,W))y=V[0],S=W[y];else if(y===null||!S)return v.push(j),null}else return null;for(;v.length>0;){var ge=v.shift();this.parse(ge,V,W)}return te=Mo(j,y,S),te&&te.logs&&(A.logs=A.logs.concat(te.logs)),te===null||!te.seiNals?A.logs.length?{logs:A.logs,captions:[],captionStreams:[]}:null:(this.pushNals(te.seiNals),this.flushStream(),A)},this.pushNals=function(j){if(!this.isInitialized()||!j||j.length===0)return null;j.forEach(function(V){g.push(V)})},this.flushStream=function(){if(!this.isInitialized())return null;B?g.partialFlush():g.flush()},this.clearParsedCaptions=function(){A.captions=[],A.captionStreams={},A.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;g.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){v=[],y=null,S=null,A?this.clearParsedCaptions():A={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},yh=_h;const{parseTfdt:pp}=oh,an=lu,{getTimescaleFromMediaHeader:vh}=Io,{parseSamples:bh,getMdatTrafPairs:Th}=fh;var xh=function(){let f=9e4;this.init=function(g){const v=an(g,["moov","trak","mdia","mdhd"])[0];v&&(f=vh(v))},this.parseSegment=function(g){const v=[],y=Th(g);let S=0;return y.forEach(function(A){const B=A.mdat,j=A.traf,V=an(j,["tfdt"])[0],W=an(j,["tfhd"])[0],te=an(j,["trun"]);if(V&&(S=pp(V).baseMediaDecodeTime),te.length&&W){const ge=bh(te,S,W);let Ne=0;ge.forEach(function(Se){const Xe="utf-8",lt=new TextDecoder(Xe),_i=B.slice(Ne,Ne+Se.size);if(an(_i,["vtte"])[0]){Ne+=Se.size;return}an(_i,["vttc"]).forEach(function(mu){const gu=an(mu,["payl"])[0],_u=an(mu,["sttg"])[0],yu=Se.pts/f,wh=(Se.pts+Se.duration)/f;let Ht,vu;if(gu)try{Ht=lt.decode(gu)}catch(ln){console.error(ln)}if(_u)try{vu=lt.decode(_u)}catch(ln){console.error(ln)}Se.duration&&Ht&&v.push({cueText:Ht,start:yu,end:wh,settings:vu})}),Ne+=Se.size})}}),v}},Na=ya,pu=function(f){var g=f[1]&31;return g<<=8,g|=f[2],g},Ba=function(f){return!!(f[1]&64)},a=function(f){var g=0;return(f[3]&48)>>>4>1&&(g+=f[4]+1),g},c=function(f,g){var v=pu(f);return v===0?"pat":v===g?"pmt":g?"pes":null},p=function(f){var g=Ba(f),v=4+a(f);return g&&(v+=f[v]+1),(f[v+10]&31)<<8|f[v+11]},b=function(f){var g={},v=Ba(f),y=4+a(f);if(v&&(y+=f[y]+1),!!(f[y+5]&1)){var S,A,B;S=(f[y+1]&15)<<8|f[y+2],A=3+S-4,B=(f[y+10]&15)<<8|f[y+11];for(var j=12+B;j<A;){var V=y+j;g[(f[V+1]&31)<<8|f[V+2]]=f[V],j+=((f[V+3]&15)<<8|f[V+4])+5}return g}},w=function(f,g){var v=pu(f),y=g[v];switch(y){case Na.H264_STREAM_TYPE:return"video";case Na.ADTS_STREAM_TYPE:return"audio";case Na.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},M=function(f){var g=Ba(f);if(!g)return null;var v=4+a(f);if(v>=f.byteLength)return null;var y=null,S;return S=f[v+7],S&192&&(y={},y.pts=(f[v+9]&14)<<27|(f[v+10]&255)<<20|(f[v+11]&254)<<12|(f[v+12]&255)<<5|(f[v+13]&254)>>>3,y.pts*=4,y.pts+=(f[v+13]&6)>>>1,y.dts=y.pts,S&64&&(y.dts=(f[v+14]&14)<<27|(f[v+15]&255)<<20|(f[v+16]&254)<<12|(f[v+17]&255)<<5|(f[v+18]&254)>>>3,y.dts*=4,y.dts+=(f[v+18]&6)>>>1)),y},K=function(f){switch(f){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},ne=function(f){for(var g=4+a(f),v=f.subarray(g),y=0,S=0,A=!1,B;S<v.byteLength-3;S++)if(v[S+2]===1){y=S+5;break}for(;y<v.byteLength;)switch(v[y]){case 0:if(v[y-1]!==0){y+=2;break}else if(v[y-2]!==0){y++;break}S+3!==y-2&&(B=K(v[S+3]&31),B==="slice_layer_without_partitioning_rbsp_idr"&&(A=!0));do y++;while(v[y]!==1&&y<v.length);S=y-2,y+=3;break;case 1:if(v[y-1]!==0||v[y-2]!==0){y+=3;break}B=K(v[S+3]&31),B==="slice_layer_without_partitioning_rbsp_idr"&&(A=!0),S=y-2,y+=3;break;default:y+=3;break}return v=v.subarray(S),y-=S,S=0,v&&v.byteLength>3&&(B=K(v[S+3]&31),B==="slice_layer_without_partitioning_rbsp_idr"&&(A=!0)),A},de={parseType:c,parsePat:p,parsePmt:b,parsePayloadUnitStartIndicator:Ba,parsePesType:w,parsePesTime:M,videoPacketContainsKeyFrame:ne},Ce=ya,je=ba.handleRollover,Fe={};Fe.ts=de,Fe.aac=ht;var et=it.ONE_SECOND_IN_TS,bt=188,Dt=71,as=function(f,g){for(var v=0,y=bt,S,A;y<f.byteLength;){if(f[v]===Dt&&f[y]===Dt){switch(S=f.subarray(v,y),A=Fe.ts.parseType(S,g.pid),A){case"pat":g.pid=Fe.ts.parsePat(S);break;case"pmt":var B=Fe.ts.parsePmt(S);g.table=g.table||{},Object.keys(B).forEach(function(j){g.table[j]=B[j]});break}v+=bt,y+=bt;continue}v++,y++}},Ci=function(f,g,v){for(var y=0,S=bt,A,B,j,V,W,te=!1;S<=f.byteLength;){if(f[y]===Dt&&(f[S]===Dt||S===f.byteLength)){switch(A=f.subarray(y,S),B=Fe.ts.parseType(A,g.pid),B){case"pes":j=Fe.ts.parsePesType(A,g.table),V=Fe.ts.parsePayloadUnitStartIndicator(A),j==="audio"&&V&&(W=Fe.ts.parsePesTime(A),W&&(W.type="audio",v.audio.push(W),te=!0));break}if(te)break;y+=bt,S+=bt;continue}y++,S++}for(S=f.byteLength,y=S-bt,te=!1;y>=0;){if(f[y]===Dt&&(f[S]===Dt||S===f.byteLength)){switch(A=f.subarray(y,S),B=Fe.ts.parseType(A,g.pid),B){case"pes":j=Fe.ts.parsePesType(A,g.table),V=Fe.ts.parsePayloadUnitStartIndicator(A),j==="audio"&&V&&(W=Fe.ts.parsePesTime(A),W&&(W.type="audio",v.audio.push(W),te=!0));break}if(te)break;y-=bt,S-=bt;continue}y--,S--}},Ur=function(f,g,v){for(var y=0,S=bt,A,B,j,V,W,te,ge,Ne,Se=!1,Xe={data:[],size:0};S<f.byteLength;){if(f[y]===Dt&&f[S]===Dt){switch(A=f.subarray(y,S),B=Fe.ts.parseType(A,g.pid),B){case"pes":if(j=Fe.ts.parsePesType(A,g.table),V=Fe.ts.parsePayloadUnitStartIndicator(A),j==="video"&&(V&&!Se&&(W=Fe.ts.parsePesTime(A),W&&(W.type="video",v.video.push(W),Se=!0)),!v.firstKeyFrame)){if(V&&Xe.size!==0){for(te=new Uint8Array(Xe.size),ge=0;Xe.data.length;)Ne=Xe.data.shift(),te.set(Ne,ge),ge+=Ne.byteLength;if(Fe.ts.videoPacketContainsKeyFrame(te)){var lt=Fe.ts.parsePesTime(te);lt?(v.firstKeyFrame=lt,v.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}Xe.size=0}Xe.data.push(A),Xe.size+=A.byteLength}break}if(Se&&v.firstKeyFrame)break;y+=bt,S+=bt;continue}y++,S++}for(S=f.byteLength,y=S-bt,Se=!1;y>=0;){if(f[y]===Dt&&f[S]===Dt){switch(A=f.subarray(y,S),B=Fe.ts.parseType(A,g.pid),B){case"pes":j=Fe.ts.parsePesType(A,g.table),V=Fe.ts.parsePayloadUnitStartIndicator(A),j==="video"&&V&&(W=Fe.ts.parsePesTime(A),W&&(W.type="video",v.video.push(W),Se=!0));break}if(Se)break;y-=bt,S-=bt;continue}y--,S--}},gp=function(f,g){if(f.audio&&f.audio.length){var v=g;(typeof v>"u"||isNaN(v))&&(v=f.audio[0].dts),f.audio.forEach(function(A){A.dts=je(A.dts,v),A.pts=je(A.pts,v),A.dtsTime=A.dts/et,A.ptsTime=A.pts/et})}if(f.video&&f.video.length){var y=g;if((typeof y>"u"||isNaN(y))&&(y=f.video[0].dts),f.video.forEach(function(A){A.dts=je(A.dts,y),A.pts=je(A.pts,y),A.dtsTime=A.dts/et,A.ptsTime=A.pts/et}),f.firstKeyFrame){var S=f.firstKeyFrame;S.dts=je(S.dts,y),S.pts=je(S.pts,y),S.dtsTime=S.dts/et,S.ptsTime=S.pts/et}}},_p=function(f){for(var g=!1,v=0,y=null,S=null,A=0,B=0,j;f.length-B>=3;){var V=Fe.aac.parseType(f,B);switch(V){case"timed-metadata":if(f.length-B<10){g=!0;break}if(A=Fe.aac.parseId3TagSize(f,B),A>f.length){g=!0;break}S===null&&(j=f.subarray(B,B+A),S=Fe.aac.parseAacTimestamp(j)),B+=A;break;case"audio":if(f.length-B<7){g=!0;break}if(A=Fe.aac.parseAdtsSize(f,B),A>f.length){g=!0;break}y===null&&(j=f.subarray(B,B+A),y=Fe.aac.parseSampleRate(j)),v++,B+=A;break;default:B++;break}if(g)return null}if(y===null||S===null)return null;var W=et/y,te={audio:[{type:"audio",dts:S,pts:S},{type:"audio",dts:S+v*1024*W,pts:S+v*1024*W}]};return te},yp=function(f){var g={pid:null,table:null},v={};as(f,g);for(var y in g.table)if(g.table.hasOwnProperty(y)){var S=g.table[y];switch(S){case Ce.H264_STREAM_TYPE:v.video=[],Ur(f,g,v),v.video.length===0&&delete v.video;break;case Ce.ADTS_STREAM_TYPE:v.audio=[],Ci(f,g,v),v.audio.length===0&&delete v.audio;break}}return v},Sh=function(f,g){var v=Fe.aac.isLikelyAacData(f),y;return v?y=_p(f):y=yp(f),!y||!y.audio&&!y.video?null:(gp(y,g),y)},vp={inspect:Sh,parseAudioPes_:Ci};const Ch=function(f,g){g.on("data",function(v){const y=v.initSegment;v.initSegment={data:y.buffer,byteOffset:y.byteOffset,byteLength:y.byteLength};const S=v.data;v.data=S.buffer,f.postMessage({action:"data",segment:v,byteOffset:S.byteOffset,byteLength:S.byteLength},[v.data])}),g.on("done",function(v){f.postMessage({action:"done"})}),g.on("gopInfo",function(v){f.postMessage({action:"gopInfo",gopInfo:v})}),g.on("videoSegmentTimingInfo",function(v){const y={start:{decode:it.videoTsToSeconds(v.start.dts),presentation:it.videoTsToSeconds(v.start.pts)},end:{decode:it.videoTsToSeconds(v.end.dts),presentation:it.videoTsToSeconds(v.end.pts)},baseMediaDecodeTime:it.videoTsToSeconds(v.baseMediaDecodeTime)};v.prependedContentDuration&&(y.prependedContentDuration=it.videoTsToSeconds(v.prependedContentDuration)),f.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:y})}),g.on("audioSegmentTimingInfo",function(v){const y={start:{decode:it.videoTsToSeconds(v.start.dts),presentation:it.videoTsToSeconds(v.start.pts)},end:{decode:it.videoTsToSeconds(v.end.dts),presentation:it.videoTsToSeconds(v.end.pts)},baseMediaDecodeTime:it.videoTsToSeconds(v.baseMediaDecodeTime)};v.prependedContentDuration&&(y.prependedContentDuration=it.videoTsToSeconds(v.prependedContentDuration)),f.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:y})}),g.on("id3Frame",function(v){f.postMessage({action:"id3Frame",id3Frame:v})}),g.on("caption",function(v){f.postMessage({action:"caption",caption:v})}),g.on("trackinfo",function(v){f.postMessage({action:"trackinfo",trackInfo:v})}),g.on("audioTimingInfo",function(v){f.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:it.videoTsToSeconds(v.start),end:it.videoTsToSeconds(v.end)}})}),g.on("videoTimingInfo",function(v){f.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:it.videoTsToSeconds(v.start),end:it.videoTsToSeconds(v.end)}})}),g.on("log",function(v){f.postMessage({action:"log",log:v})})};class Kt{constructor(g,v){this.options=v||{},this.self=g,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new np.Transmuxer(this.options),Ch(this.self,this.transmuxer)}pushMp4Captions(g){this.captionParser||(this.captionParser=new yh,this.captionParser.init());const v=new Uint8Array(g.data,g.byteOffset,g.byteLength),y=this.captionParser.parse(v,g.trackIds,g.timescales);this.self.postMessage({action:"mp4Captions",captions:y&&y.captions||[],logs:y&&y.logs||[],data:v.buffer},[v.buffer])}initMp4WebVttParser(g){this.webVttParser||(this.webVttParser=new xh);const v=new Uint8Array(g.data,g.byteOffset,g.byteLength);this.webVttParser.init(v)}getMp4WebVttText(g){this.webVttParser||(this.webVttParser=new xh);const v=new Uint8Array(g.data,g.byteOffset,g.byteLength),y=this.webVttParser.parseSegment(v);this.self.postMessage({action:"getMp4WebVttText",mp4VttCues:y||[],data:v.buffer},[v.buffer])}probeMp4StartTime({timescales:g,data:v}){const y=Io.startTime(g,v);this.self.postMessage({action:"probeMp4StartTime",startTime:y,data:v},[v.buffer])}probeMp4Tracks({data:g}){const v=Io.tracks(g);this.self.postMessage({action:"probeMp4Tracks",tracks:v,data:g},[g.buffer])}probeEmsgID3({data:g,offset:v}){const y=Io.getEmsgID3(g,v);this.self.postMessage({action:"probeEmsgID3",id3Frames:y,emsgData:g},[g.buffer])}probeTs({data:g,baseStartTime:v}){const y=typeof v=="number"&&!isNaN(v)?v*it.ONE_SECOND_IN_TS:void 0,S=vp.inspect(g,y);let A=null;S&&(A={hasVideo:S.video&&S.video.length===2||!1,hasAudio:S.audio&&S.audio.length===2||!1},A.hasVideo&&(A.videoStart=S.video[0].ptsTime),A.hasAudio&&(A.audioStart=S.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:A,data:g},[g.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(g){const v=new Uint8Array(g.data,g.byteOffset,g.byteLength);this.transmuxer.push(v)}reset(){this.transmuxer.reset()}setTimestampOffset(g){const v=g.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(it.secondsToVideoTs(v)))}setAudioAppendStart(g){this.transmuxer.setAudioAppendStart(Math.ceil(it.secondsToVideoTs(g.appendStart)))}setRemux(g){this.transmuxer.setRemux(g.remux)}flush(g){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(g){this.transmuxer.alignGopsWith(g.gopsToAlignWith.slice())}}self.onmessage=function(f){if(f.data.action==="init"&&f.data.options){this.messageHandlers=new Kt(self,f.data.options);return}this.messageHandlers||(this.messageHandlers=new Kt(self)),f.data&&f.data.action&&f.data.action!=="init"&&this.messageHandlers[f.data.action]&&this.messageHandlers[f.data.action](f.data)}}));var P5=YC(D5);const k5=(t,e,i)=>{const{type:s,initSegment:n,captions:r,captionStreams:o,metadata:l,videoFrameDtsTime:u,videoFramePtsTime:h}=t.data.segment;e.buffer.push({captions:r,captionStreams:o,metadata:l});const d=t.data.segment.boxes||{data:t.data.segment.data},m={type:s,data:new Uint8Array(d.data,d.data.byteOffset,d.data.byteLength),initSegment:new Uint8Array(n.data,n.byteOffset,n.byteLength)};typeof u<"u"&&(m.videoFrameDtsTime=u),typeof h<"u"&&(m.videoFramePtsTime=h),i(m)},I5=({transmuxedData:t,callback:e})=>{t.buffer=[],e(t)},L5=(t,e)=>{e.gopInfo=t.data.gopInfo},ew=t=>{const{transmuxer:e,bytes:i,audioAppendStart:s,gopsToAlignWith:n,remux:r,onData:o,onTrackInfo:l,onAudioTimingInfo:u,onVideoTimingInfo:h,onVideoSegmentTimingInfo:d,onAudioSegmentTimingInfo:m,onId3:_,onCaptions:T,onDone:C,onEndedTimeline:x,onTransmuxerLog:E,isEndOfTimeline:P,segment:k,triggerSegmentEventFn:I}=t,F={buffer:[]};let z=P;const q=Z=>{e.currentTransmux===t&&(Z.data.action==="data"&&k5(Z,F,o),Z.data.action==="trackinfo"&&l(Z.data.trackInfo),Z.data.action==="gopInfo"&&L5(Z,F),Z.data.action==="audioTimingInfo"&&u(Z.data.audioTimingInfo),Z.data.action==="videoTimingInfo"&&h(Z.data.videoTimingInfo),Z.data.action==="videoSegmentTimingInfo"&&d(Z.data.videoSegmentTimingInfo),Z.data.action==="audioSegmentTimingInfo"&&m(Z.data.audioSegmentTimingInfo),Z.data.action==="id3Frame"&&_([Z.data.id3Frame],Z.data.id3Frame.dispatchType),Z.data.action==="caption"&&T(Z.data.caption),Z.data.action==="endedtimeline"&&(z=!1,x()),Z.data.action==="log"&&E(Z.data.log),Z.data.type==="transmuxed"&&(z||(e.onmessage=null,I5({transmuxedData:F,callback:C}),tw(e))))},U=()=>{const Z={message:"Received an error message from the transmuxer worker",metadata:{errorType:oe.Error.StreamingFailedToTransmuxSegment,segmentInfo:$o({segment:k})}};C(null,Z)};if(e.onmessage=q,e.onerror=U,s&&e.postMessage({action:"setAudioAppendStart",appendStart:s}),Array.isArray(n)&&e.postMessage({action:"alignGopsWith",gopsToAlignWith:n}),typeof r<"u"&&e.postMessage({action:"setRemux",remux:r}),i.byteLength){const Z=i instanceof ArrayBuffer?i:i.buffer,D=i instanceof ArrayBuffer?0:i.byteOffset;I({type:"segmenttransmuxingstart",segment:k}),e.postMessage({action:"push",data:Z,byteOffset:D,byteLength:i.byteLength},[Z])}P&&e.postMessage({action:"endTimeline"}),e.postMessage({action:"flush"})},tw=t=>{t.currentTransmux=null,t.transmuxQueue.length&&(t.currentTransmux=t.transmuxQueue.shift(),typeof t.currentTransmux=="function"?t.currentTransmux():ew(t.currentTransmux))},wT=(t,e)=>{t.postMessage({action:e}),tw(t)},iw=(t,e)=>{if(!e.currentTransmux){e.currentTransmux=t,wT(e,t);return}e.transmuxQueue.push(wT.bind(null,e,t))},O5=t=>{iw("reset",t)},M5=t=>{iw("endTimeline",t)},sw=t=>{if(!t.transmuxer.currentTransmux){t.transmuxer.currentTransmux=t,ew(t);return}t.transmuxer.transmuxQueue.push(t)},R5=t=>{const e=new P5;e.currentTransmux=null,e.transmuxQueue=[];const i=e.terminate;return e.terminate=()=>(e.currentTransmux=null,e.transmuxQueue.length=0,i.call(e)),e.postMessage({action:"init",options:t}),e};var Vm={reset:O5,endTimeline:M5,transmux:sw,createTransmuxer:R5};const ul=function(t){const e=t.transmuxer,i=t.endAction||t.action,s=t.callback,n=si({},t,{endAction:null,transmuxer:null,callback:null}),r=o=>{o.data.action===i&&(e.removeEventListener("message",r),o.data.data&&(o.data.data=new Uint8Array(o.data.data,t.byteOffset||0,t.byteLength||o.data.data.byteLength),t.data&&(t.data=o.data.data)),s(o.data))};if(e.addEventListener("message",r),t.data){const o=t.data instanceof ArrayBuffer;n.byteOffset=o?0:t.data.byteOffset,n.byteLength=t.data.byteLength;const l=[o?t.data:t.data.buffer];e.postMessage(n,l)}else e.postMessage(n)},zn={FAILURE:2,TIMEOUT:-101,ABORTED:-102},nw="wvtt",Fg=t=>{t.forEach(e=>{e.abort()})},N5=t=>({bandwidth:t.bandwidth,bytesReceived:t.bytesReceived||0,roundTripTime:t.roundTripTime||0}),B5=t=>{const e=t.target,s={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-e.requestTime||0};return s.bytesReceived=t.loaded,s.bandwidth=Math.floor(s.bytesReceived/s.roundTripTime*8*1e3),s},v0=(t,e)=>{const{requestType:i}=e,s=aa({requestType:i,request:e,error:t});return e.timedout?{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:zn.TIMEOUT,xhr:e,metadata:s}:e.aborted?{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:zn.ABORTED,xhr:e,metadata:s}:t?{status:e.status,message:"HLS request errored at URL: "+e.uri,code:zn.FAILURE,xhr:e,metadata:s}:e.responseType==="arraybuffer"&&e.response.byteLength===0?{status:e.status,message:"Empty HLS response at URL: "+e.uri,code:zn.FAILURE,xhr:e,metadata:s}:null},ET=(t,e,i,s)=>(n,r)=>{const o=r.response,l=v0(n,r);if(l)return i(l,t);if(o.byteLength!==16)return i({status:r.status,message:"Invalid HLS key at URL: "+r.uri,code:zn.FAILURE,xhr:r},t);const u=new DataView(o),h=new Uint32Array([u.getUint32(0),u.getUint32(4),u.getUint32(8),u.getUint32(12)]);for(let m=0;m<e.length;m++)e[m].bytes=h;const d={uri:r.uri};return s({type:"segmentkeyloadcomplete",segment:t,keyInfo:d}),i(null,t)},F5=(t,e)=>{e===nw&&t.transmuxer.postMessage({action:"initMp4WebVttParser",data:t.map.bytes})},U5=(t,e,i)=>{e===nw&&ul({action:"getMp4WebVttText",data:t.bytes,transmuxer:t.transmuxer,callback:({data:s,mp4VttCues:n})=>{t.bytes=s,i(null,t,{mp4VttCues:n})}})},rw=(t,e)=>{const i=H_(t.map.bytes);if(i!=="mp4"){const s=t.map.resolvedUri||t.map.uri,n=i||"unknown";return e({internal:!0,message:`Found unsupported ${n} container for initialization segment at URL: ${s}`,code:zn.FAILURE,metadata:{mediaType:n}})}ul({action:"probeMp4Tracks",data:t.map.bytes,transmuxer:t.transmuxer,callback:({tracks:s,data:n})=>(t.map.bytes=n,s.forEach(function(r){t.map.tracks=t.map.tracks||{},!t.map.tracks[r.type]&&(t.map.tracks[r.type]=r,typeof r.id=="number"&&r.timescale&&(t.map.timescales=t.map.timescales||{},t.map.timescales[r.id]=r.timescale),r.type==="text"&&F5(t,r.codec))}),e(null))})},j5=({segment:t,finishProcessingFn:e,triggerSegmentEventFn:i})=>(s,n)=>{const r=v0(s,n);if(r)return e(r,t);const o=new Uint8Array(n.response);if(i({type:"segmentloaded",segment:t}),t.map.key)return t.map.encryptedBytes=o,e(null,t);t.map.bytes=o,rw(t,function(l){if(l)return l.xhr=n,l.status=n.status,e(l,t);e(null,t)})},z5=({segment:t,finishProcessingFn:e,responseType:i,triggerSegmentEventFn:s})=>(n,r)=>{const o=v0(n,r);if(o)return e(o,t);s({type:"segmentloaded",segment:t});const l=i==="arraybuffer"||!r.responseText?r.response:E5(r.responseText.substring(t.lastReachedChar||0));return t.stats=N5(r),t.key?t.encryptedBytes=new Uint8Array(l):t.bytes=new Uint8Array(l),e(null,t)},H5=({segment:t,bytes:e,trackInfoFn:i,timingInfoFn:s,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:r,id3Fn:o,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:h,dataFn:d,doneFn:m,onTransmuxerLog:_,triggerSegmentEventFn:T})=>{const C=t.map&&t.map.tracks||{},x=!!(C.audio&&C.video);let E=s.bind(null,t,"audio","start");const P=s.bind(null,t,"audio","end");let k=s.bind(null,t,"video","start");const I=s.bind(null,t,"video","end"),F=()=>sw({bytes:e,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,remux:x,onData:z=>{z.type=z.type==="combined"?"video":z.type,d(t,z)},onTrackInfo:z=>{i&&(x&&(z.isMuxed=!0),i(t,z))},onAudioTimingInfo:z=>{E&&typeof z.start<"u"&&(E(z.start),E=null),P&&typeof z.end<"u"&&P(z.end)},onVideoTimingInfo:z=>{k&&typeof z.start<"u"&&(k(z.start),k=null),I&&typeof z.end<"u"&&I(z.end)},onVideoSegmentTimingInfo:z=>{const q={pts:{start:z.start.presentation,end:z.end.presentation},dts:{start:z.start.decode,end:z.end.decode}};T({type:"segmenttransmuxingtiminginfoavailable",segment:t,timingInfo:q}),n(z)},onAudioSegmentTimingInfo:z=>{const q={pts:{start:z.start.pts,end:z.end.pts},dts:{start:z.start.dts,end:z.end.dts}};T({type:"segmenttransmuxingtiminginfoavailable",segment:t,timingInfo:q}),r(z)},onId3:(z,q)=>{o(t,z,q)},onCaptions:z=>{l(t,[z])},isEndOfTimeline:u,onEndedTimeline:()=>{h()},onTransmuxerLog:_,onDone:(z,q)=>{m&&(z.type=z.type==="combined"?"video":z.type,T({type:"segmenttransmuxingcomplete",segment:t}),m(q,t,z))},segment:t,triggerSegmentEventFn:T});ul({action:"probeTs",transmuxer:t.transmuxer,data:e,baseStartTime:t.baseStartTime,callback:z=>{t.bytes=e=z.data;const q=z.result;q&&(i(t,{hasAudio:q.hasAudio,hasVideo:q.hasVideo,isMuxed:x}),i=null),F()}})},ow=({segment:t,bytes:e,trackInfoFn:i,timingInfoFn:s,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:r,id3Fn:o,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:h,dataFn:d,doneFn:m,onTransmuxerLog:_,triggerSegmentEventFn:T})=>{let C=new Uint8Array(e);if(uB(C)){t.isFmp4=!0;const{tracks:x}=t.map;if(x.text&&(!x.audio||!x.video)){d(t,{data:C,type:"text"}),U5(t,x.text.codec,m);return}const P={isFmp4:!0,hasVideo:!!x.video,hasAudio:!!x.audio};x.audio&&x.audio.codec&&x.audio.codec!=="enca"&&(P.audioCodec=x.audio.codec),x.video&&x.video.codec&&x.video.codec!=="encv"&&(P.videoCodec=x.video.codec),x.video&&x.audio&&(P.isMuxed=!0),i(t,P);const k=(I,F)=>{d(t,{data:C,type:P.hasAudio&&!P.isMuxed?"audio":"video"}),F&&F.length&&o(t,F),I&&I.length&&l(t,I),m(null,t,{})};ul({action:"probeMp4StartTime",timescales:t.map.timescales,data:C,transmuxer:t.transmuxer,callback:({data:I,startTime:F})=>{e=I.buffer,t.bytes=C=I,P.hasAudio&&!P.isMuxed&&s(t,"audio","start",F),P.hasVideo&&s(t,"video","start",F),ul({action:"probeEmsgID3",data:C,transmuxer:t.transmuxer,offset:F,callback:({emsgData:z,id3Frames:q})=>{if(e=z.buffer,t.bytes=C=z,!x.video||!z.byteLength||!t.transmuxer){k(void 0,q);return}ul({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:t.transmuxer,data:C,timescales:t.map.timescales,trackIds:[x.video.id],callback:U=>{e=U.data.buffer,t.bytes=C=U.data,U.logs.forEach(function(Z){_(wt(Z,{stream:"mp4CaptionParser"}))}),k(U.captions,q)}})}})}});return}if(!t.transmuxer){m(null,t,{});return}if(typeof t.container>"u"&&(t.container=H_(C)),t.container!=="ts"&&t.container!=="aac"){i(t,{hasAudio:!1,hasVideo:!1}),m(null,t,{});return}H5({segment:t,bytes:e,trackInfoFn:i,timingInfoFn:s,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:r,id3Fn:o,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:h,dataFn:d,doneFn:m,onTransmuxerLog:_,triggerSegmentEventFn:T})},aw=function({id:t,key:e,encryptedBytes:i,decryptionWorker:s,segment:n,doneFn:r},o){const l=h=>{if(h.data.source===t){s.removeEventListener("message",l);const d=h.data.decrypted;o(new Uint8Array(d.bytes,d.byteOffset,d.byteLength))}};s.onerror=()=>{const h="An error occurred in the decryption worker",d=$o({segment:n}),m={message:h,metadata:{error:new Error(h),errorType:oe.Error.StreamingFailedToDecryptSegment,segmentInfo:d,keyInfo:{uri:n.key.resolvedUri||n.map.key.resolvedUri}}};r(m,n)},s.addEventListener("message",l);let u;e.bytes.slice?u=e.bytes.slice():u=new Uint32Array(Array.prototype.slice.call(e.bytes)),s.postMessage($C({source:t,encrypted:i,key:u,iv:e.iv}),[i.buffer,u.buffer])},V5=({decryptionWorker:t,segment:e,trackInfoFn:i,timingInfoFn:s,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:r,id3Fn:o,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:h,dataFn:d,doneFn:m,onTransmuxerLog:_,triggerSegmentEventFn:T})=>{T({type:"segmentdecryptionstart"}),aw({id:e.requestId,key:e.key,encryptedBytes:e.encryptedBytes,decryptionWorker:t,segment:e,doneFn:m},C=>{e.bytes=C,T({type:"segmentdecryptioncomplete",segment:e}),ow({segment:e,bytes:e.bytes,trackInfoFn:i,timingInfoFn:s,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:r,id3Fn:o,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:h,dataFn:d,doneFn:m,onTransmuxerLog:_,triggerSegmentEventFn:T})})},q5=({activeXhrs:t,decryptionWorker:e,trackInfoFn:i,timingInfoFn:s,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:r,id3Fn:o,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:h,dataFn:d,doneFn:m,onTransmuxerLog:_,triggerSegmentEventFn:T})=>{let C=0,x=!1;return(E,P)=>{if(!x){if(E)return x=!0,Fg(t),m(E,P);if(C+=1,C===t.length){const k=function(){if(P.encryptedBytes)return V5({decryptionWorker:e,segment:P,trackInfoFn:i,timingInfoFn:s,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:r,id3Fn:o,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:h,dataFn:d,doneFn:m,onTransmuxerLog:_,triggerSegmentEventFn:T});ow({segment:P,bytes:P.bytes,trackInfoFn:i,timingInfoFn:s,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:r,id3Fn:o,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:h,dataFn:d,doneFn:m,onTransmuxerLog:_,triggerSegmentEventFn:T})};if(P.endOfAllRequests=Date.now(),P.map&&P.map.encryptedBytes&&!P.map.bytes)return T({type:"segmentdecryptionstart",segment:P}),aw({decryptionWorker:e,id:P.requestId+"-init",encryptedBytes:P.map.encryptedBytes,key:P.map.key,segment:P,doneFn:m},I=>{P.map.bytes=I,T({type:"segmentdecryptioncomplete",segment:P}),rw(P,F=>{if(F)return Fg(t),m(F,P);k()})});k()}}}},$5=({loadendState:t,abortFn:e})=>i=>{i.target.aborted&&e&&!t.calledAbortFn&&(e(),t.calledAbortFn=!0)},W5=({segment:t,progressFn:e,trackInfoFn:i,timingInfoFn:s,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:r,id3Fn:o,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:h,dataFn:d})=>m=>{if(!m.target.aborted)return t.stats=wt(t.stats,B5(m)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),e(m,t)},G5=({xhr:t,xhrOptions:e,decryptionWorker:i,segment:s,abortFn:n,progressFn:r,trackInfoFn:o,timingInfoFn:l,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:h,id3Fn:d,captionsFn:m,isEndOfTimeline:_,endedTimelineFn:T,dataFn:C,doneFn:x,onTransmuxerLog:E,triggerSegmentEventFn:P})=>{const k=[],I=q5({activeXhrs:k,decryptionWorker:i,trackInfoFn:o,timingInfoFn:l,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:h,id3Fn:d,captionsFn:m,isEndOfTimeline:_,endedTimelineFn:T,dataFn:C,doneFn:x,onTransmuxerLog:E,triggerSegmentEventFn:P});if(s.key&&!s.key.bytes){const Z=[s.key];s.map&&!s.map.bytes&&s.map.key&&s.map.key.resolvedUri===s.key.resolvedUri&&Z.push(s.map.key);const D=wt(e,{uri:s.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),R=ET(s,Z,I,P),Y={uri:s.key.resolvedUri};P({type:"segmentkeyloadstart",segment:s,keyInfo:Y});const Q=t(D,R);k.push(Q)}if(s.map&&!s.map.bytes){if(s.map.key&&(!s.key||s.key.resolvedUri!==s.map.key.resolvedUri)){const Q=wt(e,{uri:s.map.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),J=ET(s,[s.map.key],I,P),ae={uri:s.map.key.resolvedUri};P({type:"segmentkeyloadstart",segment:s,keyInfo:ae});const ce=t(Q,J);k.push(ce)}const D=wt(e,{uri:s.map.resolvedUri,responseType:"arraybuffer",headers:Ng(s.map),requestType:"segment-media-initialization"}),R=j5({segment:s,finishProcessingFn:I,triggerSegmentEventFn:P});P({type:"segmentloadstart",segment:s});const Y=t(D,R);k.push(Y)}const F=wt(e,{uri:s.part&&s.part.resolvedUri||s.resolvedUri,responseType:"arraybuffer",headers:Ng(s),requestType:"segment"}),z=z5({segment:s,finishProcessingFn:I,responseType:F.responseType,triggerSegmentEventFn:P});P({type:"segmentloadstart",segment:s});const q=t(F,z);q.addEventListener("progress",W5({segment:s,progressFn:r,trackInfoFn:o,timingInfoFn:l,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:h,id3Fn:d,captionsFn:m,isEndOfTimeline:_,endedTimelineFn:T,dataFn:C})),k.push(q);const U={};return k.forEach(Z=>{Z.addEventListener("loadend",$5({loadendState:U,abortFn:n}))}),()=>Fg(k)},Kh=Js("PlaylistSelector"),AT=function(t){if(!t||!t.playlist)return;const e=t.playlist;return JSON.stringify({id:e.id,bandwidth:t.bandwidth,width:t.width,height:t.height,codecs:e.attributes&&e.attributes.CODECS||""})},cl=function(t,e){if(!t)return"";const i=$.getComputedStyle(t);return i?i[e]:""},hl=function(t,e){const i=t.slice();t.sort(function(s,n){const r=e(s,n);return r===0?i.indexOf(s)-i.indexOf(n):r})},b0=function(t,e){let i,s;return t.attributes.BANDWIDTH&&(i=t.attributes.BANDWIDTH),i=i||$.Number.MAX_VALUE,e.attributes.BANDWIDTH&&(s=e.attributes.BANDWIDTH),s=s||$.Number.MAX_VALUE,i-s},X5=function(t,e){let i,s;return t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(i=t.attributes.RESOLUTION.width),i=i||$.Number.MAX_VALUE,e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(s=e.attributes.RESOLUTION.width),s=s||$.Number.MAX_VALUE,i===s&&t.attributes.BANDWIDTH&&e.attributes.BANDWIDTH?t.attributes.BANDWIDTH-e.attributes.BANDWIDTH:i-s};let lw=function(t){const{main:e,bandwidth:i,playerWidth:s,playerHeight:n,playerObjectFit:r,limitRenditionByPlayerDimensions:o,playlistController:l}=t;if(!e)return;const u={bandwidth:i,width:s,height:n,limitRenditionByPlayerDimensions:o};let h=e.playlists;fs.isAudioOnly(e)&&(h=l.getAudioTrackPlaylists_(),u.audioOnly=!0);let d=h.map(U=>{let Z;const D=U.attributes&&U.attributes.RESOLUTION&&U.attributes.RESOLUTION.width,R=U.attributes&&U.attributes.RESOLUTION&&U.attributes.RESOLUTION.height;return Z=U.attributes&&U.attributes.BANDWIDTH,Z=Z||$.Number.MAX_VALUE,{bandwidth:Z,width:D,height:R,playlist:U}});hl(d,(U,Z)=>U.bandwidth-Z.bandwidth),d=d.filter(U=>!fs.isIncompatible(U.playlist));let m=d.filter(U=>fs.isEnabled(U.playlist));m.length||(m=d.filter(U=>!fs.isDisabled(U.playlist)));const _=m.filter(U=>U.bandwidth*yi.BANDWIDTH_VARIANCE<i);let T=_[_.length-1];const C=_.filter(U=>U.bandwidth===T.bandwidth)[0];if(o===!1){const U=C||m[0]||d[0];if(U&&U.playlist){let Z="sortedPlaylistReps";return C&&(Z="bandwidthBestRep"),m[0]&&(Z="enabledPlaylistReps"),Kh(`choosing ${AT(U)} using ${Z} with options`,u),U.playlist}return Kh("could not choose a playlist with options",u),null}const x=_.filter(U=>U.width&&U.height);hl(x,(U,Z)=>U.width-Z.width);const E=x.filter(U=>U.width===s&&U.height===n);T=E[E.length-1];const P=E.filter(U=>U.bandwidth===T.bandwidth)[0];let k,I,F;P||(k=x.filter(U=>r==="cover"?U.width>s&&U.height>n:U.width>s||U.height>n),I=k.filter(U=>U.width===k[0].width&&U.height===k[0].height),T=I[I.length-1],F=I.filter(U=>U.bandwidth===T.bandwidth)[0]);let z;if(l.leastPixelDiffSelector){const U=x.map(Z=>(Z.pixelDiff=Math.abs(Z.width-s)+Math.abs(Z.height-n),Z));hl(U,(Z,D)=>Z.pixelDiff===D.pixelDiff?D.bandwidth-Z.bandwidth:Z.pixelDiff-D.pixelDiff),z=U[0]}const q=z||F||P||C||m[0]||d[0];if(q&&q.playlist){let U="sortedPlaylistReps";return z?U="leastPixelDiffRep":F?U="resolutionPlusOneRep":P?U="resolutionBestRep":C?U="bandwidthBestRep":m[0]&&(U="enabledPlaylistReps"),Kh(`choosing ${AT(q)} using ${U} with options`,u),q.playlist}return Kh("could not choose a playlist with options",u),null};const DT=function(){let t=this.useDevicePixelRatio&&$.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(t=this.customPixelRatio),lw({main:this.playlists.main,bandwidth:this.systemBandwidth,playerWidth:parseInt(cl(this.tech_.el(),"width"),10)*t,playerHeight:parseInt(cl(this.tech_.el(),"height"),10)*t,playerObjectFit:this.usePlayerObjectFit?cl(this.tech_.el(),"objectFit"):"",limitRenditionByPlayerDimensions:this.limitRenditionByPlayerDimensions,playlistController:this.playlistController_})},K5=function(t){let e=-1,i=-1;if(t<0||t>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){let s=this.useDevicePixelRatio&&$.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(s=this.customPixelRatio),e<0&&(e=this.systemBandwidth,i=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==i&&(e=t*this.systemBandwidth+(1-t)*e,i=this.systemBandwidth),lw({main:this.playlists.main,bandwidth:e,playerWidth:parseInt(cl(this.tech_.el(),"width"),10)*s,playerHeight:parseInt(cl(this.tech_.el(),"height"),10)*s,playerObjectFit:this.usePlayerObjectFit?cl(this.tech_.el(),"objectFit"):"",limitRenditionByPlayerDimensions:this.limitRenditionByPlayerDimensions,playlistController:this.playlistController_})}},Z5=function(t){const{main:e,currentTime:i,bandwidth:s,duration:n,segmentDuration:r,timeUntilRebuffer:o,currentTimeline:l,syncController:u}=t,h=e.playlists.filter(C=>!fs.isIncompatible(C));let d=h.filter(fs.isEnabled);d.length||(d=h.filter(C=>!fs.isDisabled(C)));const _=d.filter(fs.hasAttribute.bind(null,"BANDWIDTH")).map(C=>{const E=u.getSyncPoint(C,n,l,i)?1:2,k=fs.estimateSegmentRequestTime(r,s,C)*E-o;return{playlist:C,rebufferingImpact:k}}),T=_.filter(C=>C.rebufferingImpact<=0);return hl(T,(C,x)=>b0(x.playlist,C.playlist)),T.length?T[0]:(hl(_,(C,x)=>C.rebufferingImpact-x.rebufferingImpact),_[0]||null)},Y5=function(){const t=this.playlists.main.playlists.filter(fs.isEnabled);return hl(t,(i,s)=>b0(i,s)),t.filter(i=>!!lc(this.playlists.main,i).video)[0]||null},Q5=t=>{let e=0,i;return t.bytes&&(i=new Uint8Array(t.bytes),t.segments.forEach(s=>{i.set(s,e),e+=s.byteLength})),i};function uw(t){try{return new URL(t).pathname.split("/").slice(-2).join("/")}catch{return""}}const J5=function(t,e,i){if(!t[i]){e.trigger({type:"usage",name:"vhs-608"});let s=i;/^cc708_/.test(i)&&(s="SERVICE"+i.split("_")[1]);const n=e.textTracks().getTrackById(s);if(n)t[i]=n;else{const r=e.options_.vhs&&e.options_.vhs.captionServices||{};let o=i,l=i,u=!1;const h=r[s];h&&(o=h.label,l=h.language,u=h.default),t[i]=e.addRemoteTextTrack({kind:"captions",id:s,default:u,label:o,language:l},!1).track}}},e8=function({inbandTextTracks:t,captionArray:e,timestampOffset:i}){if(!e)return;const s=$.WebKitDataCue||$.VTTCue;e.forEach(n=>{const r=n.stream;n.content?n.content.forEach(o=>{const l=new s(n.startTime+i,n.endTime+i,o.text);l.line=o.line,l.align="left",l.position=o.position,l.positionAlign="line-left",t[r].addCue(l)}):t[r].addCue(new s(n.startTime+i,n.endTime+i,n.text))})},t8=function(t){Object.defineProperties(t.frame,{id:{get(){return oe.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),t.value.key}},value:{get(){return oe.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),t.value.data}},privateData:{get(){return oe.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),t.value.data}}})},i8=({inbandTextTracks:t,metadataArray:e,timestampOffset:i,videoDuration:s})=>{if(!e)return;const n=$.WebKitDataCue||$.VTTCue,r=t.metadataTrack_;if(!r||(e.forEach(d=>{const m=d.cueTime+i;typeof m!="number"||$.isNaN(m)||m<0||!(m<1/0)||!d.frames||!d.frames.length||d.frames.forEach(_=>{const T=new n(m,m,_.value||_.url||_.data||"");T.frame=_,T.value=_,t8(T),r.addCue(T)})}),!r.cues||!r.cues.length))return;const o=r.cues,l=[];for(let d=0;d<o.length;d++)o[d]&&l.push(o[d]);const u=l.reduce((d,m)=>{const _=d[m.startTime]||[];return _.push(m),d[m.startTime]=_,d},{}),h=Object.keys(u).sort((d,m)=>Number(d)-Number(m));h.forEach((d,m)=>{const _=u[d],T=isFinite(s)?s:d,C=Number(h[m+1])||T;_.forEach(x=>{x.endTime=C})})},s8={id:"ID",class:"CLASS",startDate:"START-DATE",duration:"DURATION",endDate:"END-DATE",endOnNext:"END-ON-NEXT",plannedDuration:"PLANNED-DURATION",scte35Out:"SCTE35-OUT",scte35In:"SCTE35-IN"},n8=new Set(["id","class","startDate","duration","endDate","endOnNext","startTime","endTime","processDateRange"]),r8=({inbandTextTracks:t,dateRanges:e})=>{const i=t.metadataTrack_;if(!i)return;const s=$.WebKitDataCue||$.VTTCue;e.forEach(n=>{for(const r of Object.keys(n)){if(n8.has(r))continue;const o=new s(n.startTime,n.endTime,"");o.id=n.id,o.type="com.apple.quicktime.HLS",o.value={key:s8[r],data:n[r]},(r==="scte35Out"||r==="scte35In")&&(o.value.data=new Uint8Array(o.value.data.match(/[\da-f]{2}/gi)).buffer),i.addCue(o)}n.processDateRange()})},PT=(t,e,i)=>{t.metadataTrack_||(t.metadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,oe.browser.IS_ANY_SAFARI||(t.metadataTrack_.inBandMetadataTrackDispatchType=e))},qu=function(t,e,i){let s,n;if(i&&i.cues)for(s=i.cues.length;s--;)n=i.cues[s],n.startTime>=t&&n.endTime<=e&&i.removeCue(n)},o8=function(t){const e=t.cues;if(!e)return;const i={};for(let s=e.length-1;s>=0;s--){const n=e[s],r=`${n.startTime}-${n.endTime}-${n.text}`;i[r]?t.removeCue(n):i[r]=n}},a8=(t,e,i)=>{if(typeof e>"u"||e===null||!t.length)return[];const s=Math.ceil((e-i+3)*Ko.ONE_SECOND_IN_TS);let n;for(n=0;n<t.length&&!(t[n].pts>s);n++);return t.slice(n)},l8=(t,e,i)=>{if(!e.length)return t;if(i)return e.slice();const s=e[0].pts;let n=0;for(n;n<t.length&&!(t[n].pts>=s);n++);return t.slice(0,n).concat(e)},u8=(t,e,i,s)=>{const n=Math.ceil((e-s)*Ko.ONE_SECOND_IN_TS),r=Math.ceil((i-s)*Ko.ONE_SECOND_IN_TS),o=t.slice();let l=t.length;for(;l--&&!(t[l].pts<=r););if(l===-1)return o;let u=l+1;for(;u--&&!(t[u].pts<=n););return u=Math.max(u,0),o.splice(u,l-u+1),o},c8=function(t,e){if(!t&&!e||!t&&e||t&&!e)return!1;if(t===e)return!0;const i=Object.keys(t).sort(),s=Object.keys(e).sort();if(i.length!==s.length)return!1;for(let n=0;n<i.length;n++){const r=i[n];if(r!==s[n]||t[r]!==e[r])return!1}return!0},h8=function(t,e,i){e=e||[];const s=[];let n=0;for(let r=0;r<e.length;r++){const o=e[r];if(t===o.timeline&&(s.push(r),n+=o.duration,n>i))return r}return s.length===0?0:s[s.length-1]},Ru=1,d8=500,kT=t=>typeof t=="number"&&isFinite(t),Zh=1/60,f8=(t,e,i)=>t!=="main"||!e||!i?null:!i.hasAudio&&!i.hasVideo?"Neither audio nor video found in segment.":e.hasVideo&&!i.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!e.hasVideo&&i.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null,p8=(t,e,i)=>{let s=e-yi.BACK_BUFFER_LENGTH;t.length&&(s=Math.max(s,t.start(0)));const n=e-i;return Math.min(n,s)},qa=t=>{const{startOfSegment:e,duration:i,segment:s,part:n,playlist:{mediaSequence:r,id:o,segments:l=[]},mediaIndex:u,partIndex:h,timeline:d}=t,m=l.length-1;let _="mediaIndex/partIndex increment";t.getMediaInfoForTime?_=`getMediaInfoForTime (${t.getMediaInfoForTime})`:t.isSyncRequest&&(_="getSyncSegmentCandidate (isSyncRequest)"),t.independent&&(_+=` with independent ${t.independent}`);const T=typeof h=="number",C=t.segment.uri?"segment":"pre-segment",x=T?AC({preloadSegment:s})-1:0;return`${C} [${r+u}/${r+m}]`+(T?` part [${h}/${x}]`:"")+` segment start/end [${s.start} => ${s.end}]`+(T?` part start/end [${n.start} => ${n.end}]`:"")+` startOfSegment [${e}] duration [${i}] timeline [${d}] selected by [${_}] playlist [${o}]`},IT=t=>`${t}TimingInfo`,m8=({segmentTimeline:t,currentTimeline:e,startOfSegment:i,buffered:s,overrideCheck:n})=>!n&&t===e?null:t<e?i:s.length?s.end(s.length-1):i,Ug=({timelineChangeController:t,currentTimeline:e,segmentTimeline:i,loaderType:s,audioDisabled:n})=>{if(e===i)return!1;if(s==="audio"){const r=t.lastTimelineChange({type:"main"});return!r||r.to!==i}if(s==="main"&&n){const r=t.pendingTimelineChange({type:"audio"});return!(r&&r.to===i)}return!1},g8=t=>{if(!t)return!1;const e=t.pendingTimelineChange({type:"audio"}),i=t.pendingTimelineChange({type:"main"}),s=e&&i,n=s&&e.to!==i.to;return!!(s&&e.from!==-1&&i.from!==-1&&n)},_8=t=>{const e=t.timelineChangeController_.pendingTimelineChange({type:"audio"}),i=t.timelineChangeController_.pendingTimelineChange({type:"main"});return e&&i&&e.to<i.to},qr=t=>{const e=t.pendingSegment_;if(!e)return;if(Ug({timelineChangeController:t.timelineChangeController_,currentTimeline:t.currentTimeline_,segmentTimeline:e.timeline,loaderType:t.loaderType_,audioDisabled:t.audioDisabled_})&&g8(t.timelineChangeController_)){if(_8(t)){t.timelineChangeController_.trigger("audioTimelineBehind");return}t.timelineChangeController_.trigger("fixBadTimelineChange")}},y8=t=>{let e=0;return["video","audio"].forEach(function(i){const s=t[`${i}TimingInfo`];if(!s)return;const{start:n,end:r}=s;let o;typeof n=="bigint"||typeof r=="bigint"?o=$.BigInt(r)-$.BigInt(n):typeof n=="number"&&typeof r=="number"&&(o=r-n),typeof o<"u"&&o>e&&(e=o)}),typeof e=="bigint"&&e<Number.MAX_SAFE_INTEGER&&(e=Number(e)),e},LT=({segmentDuration:t,maxDuration:e})=>t?Math.round(t)>e+Un:!1,v8=(t,e)=>{if(e!=="hls")return null;const i=y8({audioTimingInfo:t.audioTimingInfo,videoTimingInfo:t.videoTimingInfo});if(!i)return null;const s=t.playlist.targetDuration,n=LT({segmentDuration:i,maxDuration:s*2}),r=LT({segmentDuration:i,maxDuration:s}),o=`Segment with index ${t.mediaIndex} from playlist ${t.playlist.id} has a duration of ${i} when the reported duration is ${t.duration} and the target duration is ${s}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return n||r?{severity:n?"warn":"info",message:o}:null},$o=({type:t,segment:e})=>{if(!e)return;const i=!!(e.key||e.map&&e.map.ke),s=!!(e.map&&!e.map.bytes),n=e.startOfSegment===void 0?e.start:e.startOfSegment;return{type:t||e.type,uri:e.resolvedUri||e.uri,start:n,duration:e.duration,isEncrypted:i,isMediaInitialization:s}};class jg extends oe.EventTarget{constructor(e,i={}){if(super(),!e)throw new TypeError("Initialization settings are required");if(typeof e.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=e.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=e.hasPlayed,this.currentTime_=e.currentTime,this.seekable_=e.seekable,this.seeking_=e.seeking,this.duration_=e.duration,this.mediaSource_=e.mediaSource,this.vhs_=e.vhs,this.loaderType_=e.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=e.segmentMetadataTrack,this.goalBufferLength_=e.goalBufferLength,this.sourceType_=e.sourceType,this.sourceUpdater_=e.sourceUpdater,this.inbandTextTracks_=e.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=e.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=e.parse708captions,this.useDtsForTimestampOffset_=e.useDtsForTimestampOffset,this.captionServices_=e.captionServices,this.exactManifestTimings=e.exactManifestTimings,this.addMetadataToTextTrack=e.addMetadataToTextTrack,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.shouldForceTimestampOffsetAfterResync_=!1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=!1,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=e.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=e.decrypter,this.syncController_=e.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=Js(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(s){s!==this.state_&&(this.logger_(`${this.state_} -> ${s}`),this.state_=s,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():qr(this)}),this.sourceUpdater_.on("codecschange",s=>{this.trigger(si({type:"codecschange"},s))}),this.loaderType_==="main"&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():qr(this)}),this.loaderType_==="audio"&&this.timelineChangeController_.on("timelinechange",s=>{this.trigger(si({type:"timelinechange"},s)),this.hasEnoughInfoToLoad_()?this.processLoadQueue_():qr(this),this.hasEnoughInfoToAppend_()?this.processCallQueue_():qr(this)})}get mediaSequenceSync_(){return this.syncController_.getMediaSequenceSync(this.loaderType_)}createTransmuxer_(){return Vm.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&$.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null),this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,$.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(e){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==e}error(e){return typeof e<"u"&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&Vm.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return Ti();if(this.loaderType_==="main"){const{hasAudio:i,hasVideo:s,isMuxed:n}=e;if(s&&i&&!this.audioDisabled_&&!n)return this.sourceUpdater_.buffered();if(s)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(e,i=!1){if(!e)return null;const s=Kd(e);let n=this.initSegments_[s];return i&&!n&&e.bytes&&(this.initSegments_[s]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),n||e}segmentKey(e,i=!1){if(!e)return null;const s=WC(e);let n=this.keyCache_[s];this.cacheEncryptionKeys_&&i&&!n&&e.bytes&&(this.keyCache_[s]=n={resolvedUri:e.resolvedUri,bytes:e.bytes});const r={resolvedUri:(n||e).resolvedUri};return n&&(r.bytes=n.bytes),r}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(e,i={}){if(!e||this.playlist_&&this.playlist_.endList&&e.endList&&this.playlist_.uri===e.uri)return;const s=this.playlist_,n=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=i,this.state==="INIT"&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(e));let r=null;if(s&&(s.id?r=s.id:s.uri&&(r=s.uri)),this.logger_(`playlist update [${r} => ${e.id||e.uri}]`),this.mediaSequenceSync_&&(this.mediaSequenceSync_.update(e,this.currentTime_()),this.logger_(`Playlist update:
currentTime: ${this.currentTime_()}
bufferedEnd: ${zm(this.buffered_())}
`,this.mediaSequenceSync_.diagnostics)),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!s||s.uri!==e.uri){this.mediaIndex!==null&&(!e.endList&&typeof e.partTargetDuration=="number"?this.resetLoader():this.resyncLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}const o=e.mediaSequence-s.mediaSequence;if(this.logger_(`live window shift [${o}]`),this.mediaIndex!==null)if(this.mediaIndex-=o,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const l=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!l.parts||!l.parts.length||!l.parts[this.partIndex])){const u=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=u}}n&&(n.mediaIndex-=o,n.mediaIndex<0?(n.mediaIndex=null,n.partIndex=null):(n.mediaIndex>=0&&(n.segment=e.segments[n.mediaIndex]),n.partIndex>=0&&n.segment.parts&&(n.part=n.segment.parts[n.partIndex]))),this.syncController_.saveExpiredSegmentInfo(s,e)}pause(){this.checkBufferTimeout_&&($.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return this.checkBufferTimeout_===null}resetEverything(e){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.mediaSequenceSync_&&this.mediaSequenceSync_.resetAppendedStatus(),this.resyncLoader()}resyncLoader(){this.transmuxer_&&Vm.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1;const e=this.currentMediaInfo_&&this.currentMediaInfo_.isFmp4;this.sourceType_==="hls"&&!e&&(this.shouldForceTimestampOffsetAfterResync_=!0),this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(e,i,s=()=>{},n=!1){if(i===1/0&&(i=this.duration_()),i<=e){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}let r=1;const o=()=>{r--,r===0&&s()};(n||!this.audioDisabled_)&&(r++,this.sourceUpdater_.removeAudio(e,i,o)),(n||this.loaderType_==="main")&&(this.gopBuffer_=u8(this.gopBuffer_,e,i,this.timeMapping_),r++,this.sourceUpdater_.removeVideo(e,i,o));for(const l in this.inbandTextTracks_)qu(e,i,this.inbandTextTracks_[l]);qu(e,i,this.segmentMetadataTrack_),o()}monitorBuffer_(){this.checkBufferTimeout_&&$.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=$.setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&$.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=$.setTimeout(this.monitorBufferTick_.bind(this),d8)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const e=this.chooseNextRequest_();if(!e)return;const i={segmentInfo:$o({type:this.loaderType_,segment:e})};this.trigger({type:"segmentselected",metadata:i}),typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e)}isEndOfStream_(e=this.mediaIndex,i=this.playlist_,s=this.partIndex){if(!i||!this.mediaSource_)return!1;const n=typeof e=="number"&&i.segments[e],r=e+1===i.segments.length,o=!n||!n.parts||s+1===n.parts.length;return i.endList&&this.mediaSource_.readyState==="open"&&r&&o}chooseNextRequest_(){const e=this.buffered_(),i=zm(e)||0,s=m0(e,this.currentTime_()),n=!this.hasPlayed_()&&s>=1,r=s>=this.goalBufferLength_(),o=this.playlist_.segments;if(!o.length||n||r)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_(),this.loaderType_);const l={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(l.isSyncRequest)l.mediaIndex=h8(this.currentTimeline_,o,i),this.logger_(`choose next request. Can not find sync point. Fallback to media Index: ${l.mediaIndex}`);else if(this.mediaIndex!==null){const _=o[this.mediaIndex],T=typeof this.partIndex=="number"?this.partIndex:-1;l.startOfSegment=_.end?_.end:i,_.parts&&_.parts[T+1]?(l.mediaIndex=this.mediaIndex,l.partIndex=T+1):l.mediaIndex=this.mediaIndex+1}else{let _,T,C;const x=this.fetchAtBuffer_?i:this.currentTime_();if(this.mediaSequenceSync_&&this.logger_(`chooseNextRequest_ request after Quality Switch:
For TargetTime: ${x}.
CurrentTime: ${this.currentTime_()}
BufferedEnd: ${i}
Fetch At Buffer: ${this.fetchAtBuffer_}
`,this.mediaSequenceSync_.diagnostics),this.mediaSequenceSync_&&this.mediaSequenceSync_.isReliable){const E=this.getSyncInfoFromMediaSequenceSync_(x);if(!E){const P="No sync info found while using media sequence sync";return this.error({message:P,metadata:{errorType:oe.Error.StreamingFailedToSelectNextSegment,error:new Error(P)}}),this.logger_("chooseNextRequest_ - no sync info found using media sequence sync"),null}this.logger_(`chooseNextRequest_ mediaSequence syncInfo (${E.start} --> ${E.end})`),_=E.segmentIndex,T=E.partIndex,C=E.start}else{this.logger_("chooseNextRequest_ - fallback to a regular segment selection algorithm, based on a syncPoint.");const E=fs.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:x,startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});_=E.segmentIndex,T=E.partIndex,C=E.startTime}l.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${x}`:`currentTime ${x}`,l.mediaIndex=_,l.startOfSegment=C,l.partIndex=T,this.logger_(`choose next request. Playlist switched and we have a sync point. Media Index: ${l.mediaIndex} `)}const u=o[l.mediaIndex];let h=u&&typeof l.partIndex=="number"&&u.parts&&u.parts[l.partIndex];if(!u||typeof l.partIndex=="number"&&!h)return null;typeof l.partIndex!="number"&&u.parts&&(l.partIndex=0,h=u.parts[0]);const d=this.vhs_.playlists&&this.vhs_.playlists.main&&this.vhs_.playlists.main.independentSegments||this.playlist_.independentSegments;if(!s&&h&&!d&&!h.independent)if(l.partIndex===0){const _=o[l.mediaIndex-1],T=_.parts&&_.parts.length&&_.parts[_.parts.length-1];T&&T.independent&&(l.mediaIndex-=1,l.partIndex=_.parts.length-1,l.independent="previous segment")}else u.parts[l.partIndex-1].independent&&(l.partIndex-=1,l.independent="previous part");const m=this.mediaSource_&&this.mediaSource_.readyState==="ended";return l.mediaIndex>=o.length-1&&m&&!this.seeking_()?null:(this.shouldForceTimestampOffsetAfterResync_&&(this.shouldForceTimestampOffsetAfterResync_=!1,l.forceTimestampOffset=!0,this.logger_("choose next request. Force timestamp offset after loader resync")),this.generateSegmentInfo_(l))}getSyncInfoFromMediaSequenceSync_(e){if(!this.mediaSequenceSync_)return null;const i=Math.max(e,this.mediaSequenceSync_.start);e!==i&&this.logger_(`getSyncInfoFromMediaSequenceSync_. Pulled target time from ${e} to ${i}`);const s=this.mediaSequenceSync_.getSyncInfoForTime(i);if(!s)return null;if(!s.isAppended)return s;const n=this.mediaSequenceSync_.getSyncInfoForTime(s.end);return n?(n.isAppended&&this.logger_("getSyncInfoFromMediaSequenceSync_: We encounter unexpected scenario where next media sequence sync info is also appended!"),n):null}generateSegmentInfo_(e){const{independent:i,playlist:s,mediaIndex:n,startOfSegment:r,isSyncRequest:o,partIndex:l,forceTimestampOffset:u,getMediaInfoForTime:h}=e,d=s.segments[n],m=typeof l=="number"&&d.parts[l],_={requestId:"segment-loader-"+Math.random(),uri:m&&m.resolvedUri||d.resolvedUri,mediaIndex:n,partIndex:m?l:null,isSyncRequest:o,startOfSegment:r,playlist:s,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:d.timeline,duration:m&&m.duration||d.duration,segment:d,part:m,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:h,independent:i},T=typeof u<"u"?u:this.isPendingTimestampOffset_;_.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:d.timeline,currentTimeline:this.currentTimeline_,startOfSegment:r,buffered:this.buffered_(),overrideCheck:T});const C=zm(this.sourceUpdater_.audioBuffered());return typeof C=="number"&&(_.audioAppendStart=C-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(_.gopsToAlignWith=a8(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),_}timestampOffsetForSegment_(e){return m8(e)}earlyAbortWhenNeeded_(e){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return;const i=this.currentTime_(),s=e.bandwidth,n=this.pendingSegment_.duration,r=fs.estimateSegmentRequestTime(n,s,this.playlist_,e.bytesReceived),o=BF(this.buffered_(),i,this.vhs_.tech_.playbackRate())-1;if(r<=o)return;const l=Z5({main:this.vhs_.playlists.main,currentTime:i,bandwidth:s,duration:this.duration_(),segmentDuration:n,timeUntilRebuffer:o,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!l)return;const h=r-o-l.rebufferingImpact;let d=.5;o<=Un&&(d=1),!(!l.playlist||l.playlist.uri===this.playlist_.uri||h<d)&&(this.bandwidth=l.playlist.attributes.BANDWIDTH*yi.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(e){this.logger_(`Aborting ${qa(e)}`),this.mediaRequestsAborted+=1}handleProgress_(e,i){this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)&&this.trigger("progress")}handleTrackInfo_(e,i){const{hasAudio:s,hasVideo:n}=i,r={segmentInfo:$o({type:this.loaderType_,segment:e}),trackInfo:{hasAudio:s,hasVideo:n}};this.trigger({type:"segmenttransmuxingtrackinfoavailable",metadata:r}),this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)&&(this.checkForIllegalMediaSwitch(i)||(i=i||{},c8(this.currentMediaInfo_,i)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=i,this.currentMediaInfo_=i,this.logger_("trackinfo update",i),this.trigger("trackinfo")),!this.checkForAbort_(e.requestId)&&(this.pendingSegment_.trackInfo=i,this.hasEnoughInfoToAppend_()?this.processCallQueue_():qr(this))))}handleTimingInfo_(e,i,s,n){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;const r=this.pendingSegment_,o=IT(i);r[o]=r[o]||{},r[o][s]=n,this.logger_(`timinginfo: ${i} - ${s} - ${n}`),this.hasEnoughInfoToAppend_()?this.processCallQueue_():qr(this)}handleCaptions_(e,i){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(i.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,i));return}const n=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),r={};i.forEach(o=>{r[o.stream]=r[o.stream]||{startTime:1/0,captions:[],endTime:0};const l=r[o.stream];l.startTime=Math.min(l.startTime,o.startTime+n),l.endTime=Math.max(l.endTime,o.endTime+n),l.captions.push(o)}),Object.keys(r).forEach(o=>{const{startTime:l,endTime:u,captions:h}=r[o],d=this.inbandTextTracks_;this.logger_(`adding cues from ${l} -> ${u} for ${o}`),J5(d,this.vhs_.tech_,o),qu(l,u,d[o]),e8({captionArray:h,inbandTextTracks:d,timestampOffset:n})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(e,i,s){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,i,s));return}this.addMetadataToTextTrack(s,i,this.duration_())}processMetadataQueue_(){this.metadataQueue_.id3.forEach(e=>e()),this.metadataQueue_.caption.forEach(e=>e()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const e=this.callQueue_;this.callQueue_=[],e.forEach(i=>i())}processLoadQueue_(){const e=this.loadQueue_;this.loadQueue_=[],e.forEach(i=>i())}hasEnoughInfoToLoad_(){if(this.loaderType_!=="audio")return!0;const e=this.pendingSegment_;return e?this.getCurrentMediaInfo_()?!Ug({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1}getCurrentMediaInfo_(e=this.pendingSegment_){return e&&e.trackInfo||this.currentMediaInfo_}getMediaInfo_(e=this.pendingSegment_){return this.getCurrentMediaInfo_(e)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const e=this.pendingSegment_,i=this.getCurrentMediaInfo_();if(!e||!i)return!1;const{hasAudio:s,hasVideo:n,isMuxed:r}=i;return!(n&&!e.videoTimingInfo||s&&!this.audioDisabled_&&!r&&!e.audioTimingInfo||Ug({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(e,i){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){qr(this),this.callQueue_.push(this.handleData_.bind(this,e,i));return}const s=this.pendingSegment_;if(this.setTimeMapping_(s.timeline),this.updateMediaSecondsLoaded_(s.part||s.segment),this.mediaSource_.readyState!=="closed"){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),s.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),s.isFmp4=e.isFmp4,s.timingInfo=s.timingInfo||{},s.isFmp4)this.trigger("fmp4"),s.timingInfo.start=s[IT(i.type)].start;else{const n=this.getCurrentMediaInfo_(),r=this.loaderType_==="main"&&n&&n.hasVideo;let o;r&&(o=s.videoTimingInfo.start),s.timingInfo.start=this.trueSegmentStart_({currentStart:s.timingInfo.start,playlist:s.playlist,mediaIndex:s.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:r,firstVideoFrameTimeForData:o,videoTimingInfo:s.videoTimingInfo,audioTimingInfo:s.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(s,i.type),this.updateSourceBufferTimestampOffset_(s),s.isSyncRequest){this.updateTimingInfoEnd_(s),this.syncController_.saveSegmentTimingInfo({segmentInfo:s,shouldSaveTimelineMapping:this.loaderType_==="main"});const n=this.chooseNextRequest_();if(n.mediaIndex!==s.mediaIndex||n.partIndex!==s.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}s.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(s,i)}}updateAppendInitSegmentStatus(e,i){this.loaderType_==="main"&&typeof e.timestampOffset=="number"&&!e.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[i]!==e.playlist&&(this.appendInitSegment_[i]=!0)}getInitSegmentAndUpdateState_({type:e,initSegment:i,map:s,playlist:n}){if(s){const r=Kd(s);if(this.activeInitSegmentId_===r)return null;i=this.initSegmentForMap(s,!0).bytes,this.activeInitSegmentId_=r}return i&&this.appendInitSegment_[e]?(this.playlistOfLastInitSegment_[e]=n,this.appendInitSegment_[e]=!1,this.activeInitSegmentId_=null,i):null}handleQuotaExceededError_({segmentInfo:e,type:i,bytes:s},n){const r=this.sourceUpdater_.audioBuffered(),o=this.sourceUpdater_.videoBuffered();r.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+Zo(r).join(", ")),o.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+Zo(o).join(", "));const l=r.length?r.start(0):0,u=r.length?r.end(r.length-1):0,h=o.length?o.start(0):0,d=o.length?o.end(o.length-1):0;if(u-l<=Ru&&d-h<=Ru){this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${s.byteLength}, audio buffer: ${Zo(r).join(", ")}, video buffer: ${Zo(o).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:e,type:i,bytes:s}));const _=this.currentTime_()-Ru;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${_}`),this.remove(0,_,()=>{this.logger_(`On QUOTA_EXCEEDED_ERR, retrying append in ${Ru}s`),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=$.setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},Ru*1e3)},!0)}handleAppendError_({segmentInfo:e,type:i,bytes:s},n){if(n){if(n.code===FC){this.handleQuotaExceededError_({segmentInfo:e,type:i,bytes:s});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",n),this.error({message:`${i} append of ${s.length}b failed for segment #${e.mediaIndex} in playlist ${e.playlist.id}`,metadata:{errorType:oe.Error.StreamingFailedToAppendSegment}}),this.trigger("appenderror")}}appendToSourceBuffer_({segmentInfo:e,type:i,initSegment:s,data:n,bytes:r}){if(!r){const l=[n];let u=n.byteLength;s&&(l.unshift(s),u+=s.byteLength),r=Q5({bytes:u,segments:l})}const o={segmentInfo:$o({type:this.loaderType_,segment:e})};this.trigger({type:"segmentappendstart",metadata:o}),this.sourceUpdater_.appendBuffer({segmentInfo:e,type:i,bytes:r},this.handleAppendError_.bind(this,{segmentInfo:e,type:i,bytes:r}))}handleSegmentTimingInfo_(e,i,s){if(!this.pendingSegment_||i!==this.pendingSegment_.requestId)return;const n=this.pendingSegment_.segment,r=`${e}TimingInfo`;n[r]||(n[r]={}),n[r].transmuxerPrependedSeconds=s.prependedContentDuration||0,n[r].transmuxedPresentationStart=s.start.presentation,n[r].transmuxedDecodeStart=s.start.decode,n[r].transmuxedPresentationEnd=s.end.presentation,n[r].transmuxedDecodeEnd=s.end.decode,n[r].baseMediaDecodeTime=s.baseMediaDecodeTime}appendData_(e,i){const{type:s,data:n}=i;if(!n||!n.byteLength||s==="audio"&&this.audioDisabled_)return;const r=this.getInitSegmentAndUpdateState_({type:s,initSegment:i.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:s,initSegment:r,data:n})}loadSegment_(e){if(this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),typeof e.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){qr(this),this.loadQueue_.push(()=>{const i=si({},e,{forceTimestampOffset:!0});si(e,this.generateSegmentInfo_(i)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(e)});return}this.updateTransmuxerAndRequestSegment_(e)}updateTransmuxerAndRequestSegment_(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));const i=this.createSimplifiedSegmentObj_(e),s=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),n=this.mediaIndex!==null,r=e.timeline!==this.currentTimeline_&&e.timeline>0,o=s||n&&r;this.logger_(`Requesting
${uw(e.uri)}
${qa(e)}`),i.map&&!i.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=G5({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:i,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:o,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:l,level:u,stream:h})=>{this.logger_(`${qa(e)} logged from transmuxer stream ${h} as a ${u}: ${l}`)},triggerSegmentEventFn:({type:l,segment:u,keyInfo:h,trackInfo:d,timingInfo:m})=>{const T={segmentInfo:$o({segment:u})};h&&(T.keyInfo=h),d&&(T.trackInfo=d),m&&(T.timingInfo=m),this.trigger({type:l,metadata:T})}})}trimBackBuffer_(e){const i=p8(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);i>0&&this.remove(0,i)}createSimplifiedSegmentObj_(e){const i=e.segment,s=e.part,n=e.segment.key||e.segment.map&&e.segment.map.key,r=e.segment.map&&!e.segment.map.bytes,o={resolvedUri:s?s.resolvedUri:i.resolvedUri,byterange:s?s.byterange:i.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part,type:this.loaderType_,start:e.startOfSegment,duration:e.duration,isEncrypted:n,isMediaInitialization:r},l=e.playlist.segments[e.mediaIndex-1];if(l&&l.timeline===i.timeline&&(l.videoTimingInfo?o.baseStartTime=l.videoTimingInfo.transmuxedDecodeEnd:l.audioTimingInfo&&(o.baseStartTime=l.audioTimingInfo.transmuxedDecodeEnd)),i.key){const u=i.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);o.key=this.segmentKey(i.key),o.key.iv=u}return i.map&&(o.map=this.initSegmentForMap(i.map)),o}saveTransferStats_(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)}saveBandwidthRelatedStats_(e,i){if(this.pendingSegment_.byteLength=i.bytesReceived,e<Zh){this.logger_(`Ignoring segment's bandwidth because its duration of ${e} is less than the min to record ${Zh}`);return}const s={bandwidthInfo:{from:this.bandwidth,to:i.bandwidth}};this.trigger({type:"bandwidthupdated",metadata:s}),this.bandwidth=i.bandwidth,this.roundTrip=i.roundTripTime}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(e,i,s){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,i,s));return}if(this.saveTransferStats_(i.stats),!this.pendingSegment_||i.requestId!==this.pendingSegment_.requestId)return;if(e){if(this.pendingSegment_=null,this.state="READY",e.code===zn.ABORTED)return;if(this.pause(),e.code===zn.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(e),this.trigger("error");return}const n=this.pendingSegment_;this.saveBandwidthRelatedStats_(n.duration,i.stats),n.endOfAllRequests=i.endOfAllRequests,s.gopInfo&&(this.gopBuffer_=l8(this.gopBuffer_,s.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(n)}setTimeMapping_(e){const i=this.syncController_.mappingForTimeline(e);i!==null&&(this.timeMapping_=i)}updateMediaSecondsLoaded_(e){typeof e.start=="number"&&typeof e.end=="number"?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration}shouldUpdateTransmuxerTimestampOffset_(e){return e===null?!1:this.loaderType_==="main"&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset()}trueSegmentStart_({currentStart:e,playlist:i,mediaIndex:s,firstVideoFrameTimeForData:n,currentVideoTimestampOffset:r,useVideoTimingInfo:o,videoTimingInfo:l,audioTimingInfo:u}){if(typeof e<"u")return e;if(!o)return u.start;const h=i.segments[s-1];return s===0||!h||typeof h.start>"u"||h.end!==n+r?n:l.start}waitForAppendsToComplete_(e){const i=this.getCurrentMediaInfo_(e);if(!i){this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),this.trigger("error");return}const{hasAudio:s,hasVideo:n,isMuxed:r}=i,o=this.loaderType_==="main"&&n,l=!this.audioDisabled_&&s&&!r;if(e.waitingOnAppends=0,!e.hasAppendedData_){!e.timingInfo&&typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),this.checkAppendsDone_(e);return}o&&e.waitingOnAppends++,l&&e.waitingOnAppends++,o&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),l&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))}checkAppendsDone_(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,e.waitingOnAppends===0&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(e){const i=f8(this.loaderType_,this.getCurrentMediaInfo_(),e);return i?(this.error({message:i,playlistExclusionDuration:1/0}),this.trigger("error"),!0):!1}updateSourceBufferTimestampOffset_(e){if(e.timestampOffset===null||typeof e.timingInfo.start!="number"||e.changedTimestampOffset||this.loaderType_!=="main")return;let i=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),i=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),i=!0),i&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e,audioTimingInfo:i,timingInfo:s}){return this.useDtsForTimestampOffset_?e&&typeof e.transmuxedDecodeStart=="number"?e.transmuxedDecodeStart:i&&typeof i.transmuxedDecodeStart=="number"?i.transmuxedDecodeStart:s.start:s.start}updateTimingInfoEnd_(e){e.timingInfo=e.timingInfo||{};const i=this.getMediaInfo_(),n=this.loaderType_==="main"&&i&&i.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;n&&(e.timingInfo.end=typeof n.end=="number"?n.end:n.start+e.duration)}handleAppendsDone_(){if(this.pendingSegment_){const u={segmentInfo:$o({type:this.loaderType_,segment:this.pendingSegment_})};this.trigger({type:"appendsdone",metadata:u})}if(!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}const e=this.pendingSegment_;e.part&&e.part.syncInfo?e.part.syncInfo.markAppended():e.segment.syncInfo&&e.segment.syncInfo.markAppended(),this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:this.loaderType_==="main"});const i=v8(e,this.sourceType_);if(i&&(i.severity==="warn"?oe.log.warn(i.message):this.logger_(i.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_)){this.logger_(`Throwing away un-appended sync request ${qa(e)}`);return}this.logger_(`Appended ${qa(e)}`),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");const s=e.segment,n=e.part,r=s.end&&this.currentTime_()-s.end>e.playlist.targetDuration*3,o=n&&n.end&&this.currentTime_()-n.end>e.playlist.partTargetDuration*3;if(r||o){this.logger_(`bad ${r?"segment":"part"} ${qa(e)}`),this.resetEverything();return}this.mediaIndex!==null&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(e){if(e.duration<Zh){this.logger_(`Ignoring segment's throughput because its duration of ${e.duration} is less than the min to record ${Zh}`);return}const i=this.throughput.rate,s=Date.now()-e.endOfAllRequests+1,n=Math.floor(e.byteLength/s*8*1e3);this.throughput.rate+=(n-i)/++this.throughput.count}addSegmentMetadataCue_(e){if(!this.segmentMetadataTrack_)return;const i=e.segment,s=i.start,n=i.end;if(!kT(s)||!kT(n))return;qu(s,n,this.segmentMetadataTrack_);const r=$.WebKitDataCue||$.VTTCue,o={custom:i.custom,dateTimeObject:i.dateTimeObject,dateTimeString:i.dateTimeString,programDateTime:i.programDateTime,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:s,end:n},l=JSON.stringify(o),u=new r(s,n,l);u.value=o,this.segmentMetadataTrack_.addCue(u)}}function _r(){}const cw=function(t){return typeof t!="string"?t:t.replace(/./,e=>e.toUpperCase())},b8=["video","audio"],zg=(t,e)=>{const i=e[`${t}Buffer`];return i&&i.updating||e.queuePending[t]},T8=(t,e)=>{for(let i=0;i<e.length;i++){const s=e[i];if(s.type==="mediaSource")return null;if(s.type===t)return i}return null},dl=(t,e)=>{if(e.queue.length===0)return;let i=0,s=e.queue[i];if(s.type==="mediaSource"){!e.updating()&&e.mediaSource.readyState!=="closed"&&(e.queue.shift(),s.action(e),s.doneFn&&s.doneFn(),dl("audio",e),dl("video",e));return}if(t!=="mediaSource"&&!(!e.ready()||e.mediaSource.readyState==="closed"||zg(t,e))){if(s.type!==t){if(i=T8(t,e.queue),i===null)return;s=e.queue[i]}if(e.queue.splice(i,1),e.queuePending[t]=s,s.action(t,e),!s.doneFn){e.queuePending[t]=null,dl(t,e);return}}},hw=(t,e)=>{const i=e[`${t}Buffer`],s=cw(t);i&&(i.removeEventListener("updateend",e[`on${s}UpdateEnd_`]),i.removeEventListener("error",e[`on${s}Error_`]),e.codecs[t]=null,e[`${t}Buffer`]=null)},Bn=(t,e)=>t&&e&&Array.prototype.indexOf.call(t.sourceBuffers,e)!==-1,ws={appendBuffer:(t,e,i)=>(s,n)=>{const r=n[`${s}Buffer`];if(Bn(n.mediaSource,r)){n.logger_(`Appending segment ${e.mediaIndex}'s ${t.length} bytes to ${s}Buffer`);try{r.appendBuffer(t)}catch(o){n.logger_(`Error with code ${o.code} `+(o.code===FC?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${e.mediaIndex} to ${s}Buffer`),n.queuePending[s]=null,i(o)}}},remove:(t,e)=>(i,s)=>{const n=s[`${i}Buffer`];if(Bn(s.mediaSource,n)){s.logger_(`Removing ${t} to ${e} from ${i}Buffer`);try{n.remove(t,e)}catch{s.logger_(`Remove ${t} to ${e} from ${i}Buffer failed`)}}},timestampOffset:t=>(e,i)=>{const s=i[`${e}Buffer`];Bn(i.mediaSource,s)&&(i.logger_(`Setting ${e}timestampOffset to ${t}`),s.timestampOffset=t)},callback:t=>(e,i)=>{t()},endOfStream:t=>e=>{if(e.mediaSource.readyState==="open"){e.logger_(`Calling mediaSource endOfStream(${t||""})`);try{e.mediaSource.endOfStream(t)}catch(i){oe.log.warn("Failed to call media source endOfStream",i)}}},duration:t=>e=>{e.logger_(`Setting mediaSource duration to ${t}`);try{e.mediaSource.duration=t}catch(i){oe.log.warn("Failed to set media source duration",i)}},abort:()=>(t,e)=>{if(e.mediaSource.readyState!=="open")return;const i=e[`${t}Buffer`];if(Bn(e.mediaSource,i)){e.logger_(`calling abort on ${t}Buffer`);try{i.abort()}catch(s){oe.log.warn(`Failed to abort on ${t}Buffer`,s)}}},addSourceBuffer:(t,e)=>i=>{const s=cw(t),n=bl(e);i.logger_(`Adding ${t}Buffer with codec ${e} to mediaSource`);const r=i.mediaSource.addSourceBuffer(n);r.addEventListener("updateend",i[`on${s}UpdateEnd_`]),r.addEventListener("error",i[`on${s}Error_`]),i.codecs[t]=e,i[`${t}Buffer`]=r},removeSourceBuffer:t=>e=>{const i=e[`${t}Buffer`];if(hw(t,e),!!Bn(e.mediaSource,i)){e.logger_(`Removing ${t}Buffer with codec ${e.codecs[t]} from mediaSource`);try{e.mediaSource.removeSourceBuffer(i)}catch(s){oe.log.warn(`Failed to removeSourceBuffer ${t}Buffer`,s)}}},changeType:t=>(e,i)=>{const s=i[`${e}Buffer`],n=bl(t);if(!Bn(i.mediaSource,s))return;const r=t.substring(0,t.indexOf(".")),o=i.codecs[e];if(o.substring(0,o.indexOf("."))===r)return;const u={codecsChangeInfo:{from:o,to:t}};i.trigger({type:"codecschange",metadata:u}),i.logger_(`changing ${e}Buffer codec from ${o} to ${t}`);try{s.changeType(n),i.codecs[e]=t}catch(h){u.errorType=oe.Error.StreamingCodecsChangeError,u.error=h,h.metadata=u,i.error_=h,i.trigger("error"),oe.log.warn(`Failed to changeType on ${e}Buffer`,h)}}},Es=({type:t,sourceUpdater:e,action:i,doneFn:s,name:n})=>{e.queue.push({type:t,action:i,doneFn:s,name:n}),dl(t,e)},OT=(t,e)=>i=>{const s=e[`${t}Buffered`](),n=MF(s);if(e.logger_(`received "updateend" event for ${t} Source Buffer: `,n),e.queuePending[t]){const r=e.queuePending[t].doneFn;e.queuePending[t]=null,r&&r(e[`${t}Error_`])}dl(t,e)};class dw extends oe.EventTarget{constructor(e){super(),this.mediaSource=e,this.sourceopenListener_=()=>dl("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=Js("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=OT("video",this),this.onAudioUpdateEnd_=OT("audio",this),this.onVideoError_=i=>{this.videoError_=i},this.onAudioError_=i=>{this.audioError_=i},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(e,i){Es({type:"mediaSource",sourceUpdater:this,action:ws.addSourceBuffer(e,i),name:"addSourceBuffer"})}abort(e){Es({type:e,sourceUpdater:this,action:ws.abort(e),name:"abort"})}removeSourceBuffer(e){if(!this.canRemoveSourceBuffer()){oe.log.error("removeSourceBuffer is not supported!");return}Es({type:"mediaSource",sourceUpdater:this,action:ws.removeSourceBuffer(e),name:"removeSourceBuffer"})}canRemoveSourceBuffer(){return!oe.browser.IS_FIREFOX&&$.MediaSource&&$.MediaSource.prototype&&typeof $.MediaSource.prototype.removeSourceBuffer=="function"}static canChangeType(){return $.SourceBuffer&&$.SourceBuffer.prototype&&typeof $.SourceBuffer.prototype.changeType=="function"}canChangeType(){return this.constructor.canChangeType()}changeType(e,i){if(!this.canChangeType()){oe.log.error("changeType is not supported!");return}Es({type:e,sourceUpdater:this,action:ws.changeType(i),name:"changeType"})}addOrChangeSourceBuffers(e){if(!e||typeof e!="object"||Object.keys(e).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(i=>{const s=e[i];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(i,s);this.canChangeType()&&this.changeType(i,s)})}appendBuffer(e,i){const{segmentInfo:s,type:n,bytes:r}=e;if(this.processedAppend_=!0,n==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([e,i]),this.logger_(`delayed audio append of ${r.length} until video append`);return}const o=i;if(Es({type:n,sourceUpdater:this,action:ws.appendBuffer(r,s||{mediaIndex:-1},o),doneFn:i,name:"appendBuffer"}),n==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const l=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${l.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,l.forEach(u=>{this.appendBuffer.apply(this,u)})}}audioBuffered(){return Bn(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:Ti()}videoBuffered(){return Bn(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:Ti()}buffered(){const e=Bn(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,i=Bn(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return i&&!e?this.audioBuffered():e&&!i?this.videoBuffered():NF(this.audioBuffered(),this.videoBuffered())}setDuration(e,i=_r){Es({type:"mediaSource",sourceUpdater:this,action:ws.duration(e),name:"duration",doneFn:i})}endOfStream(e=null,i=_r){typeof e!="string"&&(e=void 0),Es({type:"mediaSource",sourceUpdater:this,action:ws.endOfStream(e),name:"endOfStream",doneFn:i})}removeAudio(e,i,s=_r){if(!this.audioBuffered().length||this.audioBuffered().end(0)===0){s();return}Es({type:"audio",sourceUpdater:this,action:ws.remove(e,i),doneFn:s,name:"remove"})}removeVideo(e,i,s=_r){if(!this.videoBuffered().length||this.videoBuffered().end(0)===0){s();return}Es({type:"video",sourceUpdater:this,action:ws.remove(e,i),doneFn:s,name:"remove"})}updating(){return!!(zg("audio",this)||zg("video",this))}audioTimestampOffset(e){return typeof e<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(Es({type:"audio",sourceUpdater:this,action:ws.timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_}videoTimestampOffset(e){return typeof e<"u"&&this.videoBuffer&&this.videoTimestampOffset_!==e&&(Es({type:"video",sourceUpdater:this,action:ws.timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_}audioQueueCallback(e){this.audioBuffer&&Es({type:"audio",sourceUpdater:this,action:ws.callback(e),name:"callback"})}videoQueueCallback(e){this.videoBuffer&&Es({type:"video",sourceUpdater:this,action:ws.callback(e),name:"callback"})}dispose(){this.trigger("dispose"),b8.forEach(e=>{this.abort(e),this.canRemoveSourceBuffer()?this.removeSourceBuffer(e):this[`${e}QueueCallback`](()=>hw(e,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}const MT=t=>decodeURIComponent(escape(String.fromCharCode.apply(null,t))),x8=t=>{const e=new Uint8Array(t);return Array.from(e).map(i=>i.toString(16).padStart(2,"0")).join("")},RT=new Uint8Array(`

`.split("").map(t=>t.charCodeAt(0)));class S8 extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}}class C8 extends jg{constructor(e,i={}){super(e,i),this.mediaSource_=null,this.subtitlesTrack_=null,this.featuresNativeTextTracks_=e.featuresNativeTextTracks,this.loadVttJs=e.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return Ti();const e=this.subtitlesTrack_.cues,i=e[0].startTime,s=e[e.length-1].startTime;return Ti([[i,s]])}initSegmentForMap(e,i=!1){if(!e)return null;const s=Kd(e);let n=this.initSegments_[s];if(i&&!n&&e.bytes){const r=RT.byteLength+e.bytes.byteLength,o=new Uint8Array(r);o.set(e.bytes),o.set(RT,e.bytes.byteLength),this.initSegments_[s]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:o}}return n||e}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(e){return typeof e>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=e,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)}remove(e,i){qu(e,i,this.subtitlesTrack_)}fillBuffer_(){const e=this.chooseNextRequest_();if(e){if(this.syncController_.timestampOffsetForTimeline(e.timeline)===null){const i=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};this.syncController_.one("timestampoffset",i),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(e)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e}stopForError(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(e,i,s){if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(i.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(e){e.code===zn.TIMEOUT&&this.handleTimeout_(),e.code===zn.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(e);return}const n=this.pendingSegment_,r=s.mp4VttCues&&s.mp4VttCues.length;r&&(n.mp4VttCues=s.mp4VttCues),this.saveBandwidthRelatedStats_(n.duration,i.stats),i.key&&this.segmentKey(i.key,!0),this.state="APPENDING",this.trigger("appending");const o=n.segment;if(o.map&&(o.map.bytes=i.map.bytes),n.bytes=i.bytes,typeof $.WebVTT!="function"&&typeof this.loadVttJs=="function"){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(()=>this.segmentRequestFinished_(e,i,s),()=>this.stopForError({message:"Error loading vtt.js"}));return}o.requested=!0;try{this.parseVTTCues_(n)}catch(l){this.stopForError({message:l.message,metadata:{errorType:oe.Error.StreamingVttParserError,error:l}});return}if(r||this.updateTimeMapping_(n,this.syncController_.timelines[n.timeline],this.playlist_),n.cues.length?n.timingInfo={start:n.cues[0].startTime,end:n.cues[n.cues.length-1].endTime}:n.timingInfo={start:n.startOfSegment,end:n.startOfSegment+n.duration},n.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}n.byteLength=n.bytes.byteLength,this.mediaSecondsLoaded+=o.duration,n.cues.forEach(l=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new $.VTTCue(l.startTime,l.endTime,l.text):l)}),o8(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(e,i){const s=e&&e.type==="vtt",n=i&&i.type==="text";s&&n&&super.handleData_(e,i)}updateTimingInfoEnd_(){}parseMp4VttCues_(e){const i=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();e.mp4VttCues.forEach(s=>{const n=s.start+i,r=s.end+i,o=new $.VTTCue(n,r,s.cueText);s.settings&&s.settings.split(" ").forEach(l=>{const u=l.split(":"),h=u[0],d=u[1];o[h]=isNaN(d)?d:Number(d)}),e.cues.push(o)})}parseVTTCues_(e){let i,s=!1;if(typeof $.WebVTT!="function")throw new S8;if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},e.mp4VttCues){this.parseMp4VttCues_(e);return}typeof $.TextDecoder=="function"?i=new $.TextDecoder("utf8"):(i=$.WebVTT.StringDecoder(),s=!0);const n=new $.WebVTT.Parser($,$.vttjs,i);if(n.oncue=e.cues.push.bind(e.cues),n.ontimestampmap=o=>{e.timestampmap=o},n.onparsingerror=o=>{oe.log.warn("Error encountered when parsing cues: "+o.message)},e.segment.map){let o=e.segment.map.bytes;s&&(o=MT(o)),n.parse(o)}let r=e.bytes;s&&(r=MT(r)),n.parse(r),n.flush()}updateTimeMapping_(e,i,s){const n=e.segment;if(!i)return;if(!e.cues.length){n.empty=!0;return}const{MPEGTS:r,LOCAL:o}=e.timestampmap,u=r/Ko.ONE_SECOND_IN_TS-o+i.mapping;if(e.cues.forEach(h=>{const d=h.endTime-h.startTime,m=this.handleRollover_(h.startTime+u,i.time);h.startTime=Math.max(m,0),h.endTime=Math.max(m+d,0)}),!s.syncInfo){const h=e.cues[0].startTime,d=e.cues[e.cues.length-1].startTime;s.syncInfo={mediaSequence:s.mediaSequence+e.mediaIndex,time:Math.min(h,d-n.duration)}}}handleRollover_(e,i){if(i===null)return e;let s=e*Ko.ONE_SECOND_IN_TS;const n=i*Ko.ONE_SECOND_IN_TS;let r;for(n<s?r=-8589934592:r=8589934592;Math.abs(s-n)>4294967296;)s+=r;return s/Ko.ONE_SECOND_IN_TS}}const w8=function(t,e){const i=t.cues;for(let s=0;s<i.length;s++){const n=i[s];if(e>=n.adStartTime&&e<=n.adEndTime)return n}return null},E8=function(t,e,i=0){if(!t.segments)return;let s=i,n;for(let r=0;r<t.segments.length;r++){const o=t.segments[r];if(n||(n=w8(e,s+o.duration/2)),n){if("cueIn"in o){n.endTime=s,n.adEndTime=s,s+=o.duration,n=null;continue}if(s<n.endTime){s+=o.duration;continue}n.endTime+=o.duration}else if("cueOut"in o&&(n=new $.VTTCue(s,s+o.duration,o.cueOut),n.adStartTime=s,n.adEndTime=s+parseFloat(o.cueOut),e.addCue(n)),"cueOutCont"in o){const[l,u]=o.cueOutCont.split("/").map(parseFloat);n=new $.VTTCue(s,s+o.duration,""),n.adStartTime=s-l,n.adEndTime=n.adStartTime+u,e.addCue(n)}s+=o.duration}};class NT{constructor({start:e,end:i,segmentIndex:s,partIndex:n=null,appended:r=!1}){this.start_=e,this.end_=i,this.segmentIndex_=s,this.partIndex_=n,this.appended_=r}isInRange(e){return e>=this.start&&e<this.end}markAppended(){this.appended_=!0}resetAppendedStatus(){this.appended_=!1}get isAppended(){return this.appended_}get start(){return this.start_}get end(){return this.end_}get segmentIndex(){return this.segmentIndex_}get partIndex(){return this.partIndex_}}class A8{constructor(e,i=[]){this.segmentSyncInfo_=e,this.partsSyncInfo_=i}get segmentSyncInfo(){return this.segmentSyncInfo_}get partsSyncInfo(){return this.partsSyncInfo_}get hasPartsSyncInfo(){return this.partsSyncInfo_.length>0}resetAppendStatus(){this.segmentSyncInfo_.resetAppendedStatus(),this.partsSyncInfo_.forEach(e=>e.resetAppendedStatus())}}class fw{constructor(){this.storage_=new Map,this.diagnostics_="",this.isReliable_=!1,this.start_=-1/0,this.end_=1/0}get start(){return this.start_}get end(){return this.end_}get diagnostics(){return this.diagnostics_}get isReliable(){return this.isReliable_}resetAppendedStatus(){this.storage_.forEach(e=>e.resetAppendStatus())}update(e,i){const{mediaSequence:s,segments:n}=e;if(this.isReliable_=this.isReliablePlaylist_(s,n),!!this.isReliable_)return this.updateStorage_(n,s,this.calculateBaseTime_(s,n,i))}getSyncInfoForTime(e){for(const{segmentSyncInfo:i,partsSyncInfo:s}of this.storage_.values())if(s.length){for(const n of s)if(n.isInRange(e))return n}else if(i.isInRange(e))return i;return null}getSyncInfoForMediaSequence(e){return this.storage_.get(e)}updateStorage_(e,i,s){const n=new Map;let r=`
`,o=s,l=i;this.start_=o,e.forEach((u,h)=>{const d=this.storage_.get(l),m=o,_=m+u.duration,T=!!(d&&d.segmentSyncInfo&&d.segmentSyncInfo.isAppended),C=new NT({start:m,end:_,appended:T,segmentIndex:h});u.syncInfo=C;let x=o;const E=(u.parts||[]).map((P,k)=>{const I=x,F=x+P.duration,z=!!(d&&d.partsSyncInfo&&d.partsSyncInfo[k]&&d.partsSyncInfo[k].isAppended),q=new NT({start:I,end:F,appended:z,segmentIndex:h,partIndex:k});return x=F,r+=`Media Sequence: ${l}.${k} | Range: ${I} --> ${F} | Appended: ${z}
`,P.syncInfo=q,q});n.set(l,new A8(C,E)),r+=`${uw(u.resolvedUri)} | Media Sequence: ${l} | Range: ${m} --> ${_} | Appended: ${T}
`,l++,o=_}),this.end_=o,this.storage_=n,this.diagnostics_=r}calculateBaseTime_(e,i,s){if(!this.storage_.size)return 0;if(this.storage_.has(e))return this.storage_.get(e).segmentSyncInfo.start;const n=Math.min(...this.storage_.keys());if(e<n){const r=n-e;let o=this.storage_.get(n).segmentSyncInfo.start;for(let l=0;l<r;l++){const u=i[l];o-=u.duration}return o}return s}isReliablePlaylist_(e,i){return e!=null&&Array.isArray(i)&&i.length}}class BT extends fw{constructor(e){super(),this.parent_=e}calculateBaseTime_(e,i,s){if(!this.storage_.size){const n=this.parent_.getSyncInfoForMediaSequence(e);return n?n.segmentSyncInfo.start:0}return super.calculateBaseTime_(e,i,s)}}const D8=86400,qm=[{name:"VOD",run:(t,e,i,s,n)=>i!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"MediaSequence",run:(t,e,i,s,n,r)=>{const o=t.getMediaSequenceSync(r);if(!o||!o.isReliable)return null;const l=o.getSyncInfoForTime(n);return l?{time:l.start,partIndex:l.partIndex,segmentIndex:l.segmentIndex}:null}},{name:"ProgramDateTime",run:(t,e,i,s,n)=>{if(!Object.keys(t.timelineToDatetimeMappings).length)return null;let r=null,o=null;const l=Ig(e);n=n||0;for(let u=0;u<l.length;u++){const h=e.endList||n===0?u:l.length-(u+1),d=l[h],m=d.segment,_=t.timelineToDatetimeMappings[m.timeline];if(!_||!m.dateTimeObject)continue;let C=m.dateTimeObject.getTime()/1e3+_;if(m.parts&&typeof d.partIndex=="number")for(let E=0;E<d.partIndex;E++)C+=m.parts[E].duration;const x=Math.abs(n-C);if(o!==null&&(x===0||o<x))break;o=x,r={time:C,segmentIndex:d.segmentIndex,partIndex:d.partIndex}}return r}},{name:"Segment",run:(t,e,i,s,n)=>{let r=null,o=null;n=n||0;const l=Ig(e);for(let u=0;u<l.length;u++){const h=e.endList||n===0?u:l.length-(u+1),d=l[h],m=d.segment,_=d.part&&d.part.start||m&&m.start;if(m.timeline===s&&typeof _<"u"){const T=Math.abs(n-_);if(o!==null&&o<T)break;(!r||o===null||o>=T)&&(o=T,r={time:_,segmentIndex:d.segmentIndex,partIndex:d.partIndex})}}return r}},{name:"Discontinuity",run:(t,e,i,s,n)=>{let r=null;if(n=n||0,e.discontinuityStarts&&e.discontinuityStarts.length){let o=null;for(let l=0;l<e.discontinuityStarts.length;l++){const u=e.discontinuityStarts[l],h=e.discontinuitySequence+l+1,d=t.discontinuities[h];if(d){const m=Math.abs(n-d.time);if(o!==null&&o<m)break;(!r||o===null||o>=m)&&(o=m,r={time:d.time,segmentIndex:u,partIndex:null})}}}return r}},{name:"Playlist",run:(t,e,i,s,n)=>e.syncInfo?{time:e.syncInfo.time,segmentIndex:e.syncInfo.mediaSequence-e.mediaSequence,partIndex:null}:null}];class P8 extends oe.EventTarget{constructor(e={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={};const i=new fw,s=new BT(i),n=new BT(i);this.mediaSequenceStorage_={main:i,audio:s,vtt:n},this.logger_=Js("SyncController")}getMediaSequenceSync(e){return this.mediaSequenceStorage_[e]||null}getSyncPoint(e,i,s,n,r){if(i!==1/0)return qm.find(({name:u})=>u==="VOD").run(this,e,i);const o=this.runStrategies_(e,i,s,n,r);if(!o.length)return null;for(const l of o){const{syncPoint:u,strategy:h}=l,{segmentIndex:d,time:m}=u;if(d<0)continue;const _=e.segments[d],T=m,C=T+_.duration;if(this.logger_(`Strategy: ${h}. Current time: ${n}. selected segment: ${d}. Time: [${T} -> ${C}]}`),n>=T&&n<C)return this.logger_("Found sync point with exact match: ",u),u}return this.selectSyncPoint_(o,{key:"time",value:n})}getExpiredTime(e,i){if(!e||!e.segments)return null;const s=this.runStrategies_(e,i,e.discontinuitySequence,0);if(!s.length)return null;const n=this.selectSyncPoint_(s,{key:"segmentIndex",value:0});return n.segmentIndex>0&&(n.time*=-1),Math.abs(n.time+ac({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:n.segmentIndex,endIndex:0}))}runStrategies_(e,i,s,n,r){const o=[];for(let l=0;l<qm.length;l++){const u=qm[l],h=u.run(this,e,i,s,n,r);h&&(h.strategy=u.name,o.push({strategy:u.name,syncPoint:h}))}return o}selectSyncPoint_(e,i){let s=e[0].syncPoint,n=Math.abs(e[0].syncPoint[i.key]-i.value),r=e[0].strategy;for(let o=1;o<e.length;o++){const l=Math.abs(e[o].syncPoint[i.key]-i.value);l<n&&(n=l,s=e[o].syncPoint,r=e[o].strategy)}return this.logger_(`syncPoint for [${i.key}: ${i.value}] chosen with strategy [${r}]: [time:${s.time}, segmentIndex:${s.segmentIndex}`+(typeof s.partIndex=="number"?`,partIndex:${s.partIndex}`:"")+"]"),s}saveExpiredSegmentInfo(e,i){const s=i.mediaSequence-e.mediaSequence;if(s>D8){oe.log.warn(`Not saving expired segment info. Media sequence gap ${s} is too large.`);return}for(let n=s-1;n>=0;n--){const r=e.segments[n];if(r&&typeof r.start<"u"){i.syncInfo={mediaSequence:e.mediaSequence+n,time:r.start},this.logger_(`playlist refresh sync: [time:${i.syncInfo.time}, mediaSequence: ${i.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){const i=e.segments[0],s=i.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[i.timeline]=-s}}saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:i}){const s=this.calculateSegmentTimeMapping_(e,e.timingInfo,i),n=e.segment;s&&(this.saveDiscontinuitySyncInfo_(e),e.playlist.syncInfo||(e.playlist.syncInfo={mediaSequence:e.playlist.mediaSequence+e.mediaIndex,time:n.start}));const r=n.dateTimeObject;n.discontinuity&&i&&r&&(this.timelineToDatetimeMappings[n.timeline]=-(r.getTime()/1e3))}timestampOffsetForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].time}mappingForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].mapping}calculateSegmentTimeMapping_(e,i,s){const n=e.segment,r=e.part;let o=this.timelines[e.timeline],l,u;if(typeof e.timestampOffset=="number")o={time:e.startOfSegment,mapping:e.startOfSegment-i.start},s&&(this.timelines[e.timeline]=o,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${e.timeline}: [time: ${o.time}] [mapping: ${o.mapping}]`)),l=e.startOfSegment,u=i.end+o.mapping;else if(o)l=i.start+o.mapping,u=i.end+o.mapping;else return!1;return r&&(r.start=l,r.end=u),(!n.start||l<n.start)&&(n.start=l),n.end=u,!0}saveDiscontinuitySyncInfo_(e){const i=e.playlist,s=e.segment;if(s.discontinuity)this.discontinuities[s.timeline]={time:s.start,accuracy:0};else if(i.discontinuityStarts&&i.discontinuityStarts.length)for(let n=0;n<i.discontinuityStarts.length;n++){const r=i.discontinuityStarts[n],o=i.discontinuitySequence+n+1,l=r-e.mediaIndex,u=Math.abs(l);if(!this.discontinuities[o]||this.discontinuities[o].accuracy>u){let h;l<0?h=s.start-ac({defaultDuration:i.targetDuration,durationList:i.segments,startIndex:e.mediaIndex,endIndex:r}):h=s.end+ac({defaultDuration:i.targetDuration,durationList:i.segments,startIndex:e.mediaIndex+1,endIndex:r}),this.discontinuities[o]={time:h,accuracy:u}}}}dispose(){this.trigger("dispose"),this.off()}}class k8 extends oe.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:e,from:i,to:s}){return typeof i=="number"&&typeof s=="number"&&(this.pendingTimelineChanges_[e]={type:e,from:i,to:s},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[e]}lastTimelineChange({type:e,from:i,to:s}){if(typeof i=="number"&&typeof s=="number"){this.lastTimelineChanges_[e]={type:e,from:i,to:s},delete this.pendingTimelineChanges_[e];const n={timelineChangeInfo:{from:i,to:s}};this.trigger({type:"timelinechange",metadata:n})}return this.lastTimelineChanges_[e]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}}const I8=QC(JC(function(){var t=(function(){function x(){this.listeners={}}var E=x.prototype;return E.on=function(k,I){this.listeners[k]||(this.listeners[k]=[]),this.listeners[k].push(I)},E.off=function(k,I){if(!this.listeners[k])return!1;var F=this.listeners[k].indexOf(I);return this.listeners[k]=this.listeners[k].slice(0),this.listeners[k].splice(F,1),F>-1},E.trigger=function(k){var I=this.listeners[k];if(I)if(arguments.length===2)for(var F=I.length,z=0;z<F;++z)I[z].call(this,arguments[1]);else for(var q=Array.prototype.slice.call(arguments,1),U=I.length,Z=0;Z<U;++Z)I[Z].apply(this,q)},E.dispose=function(){this.listeners={}},E.pipe=function(k){this.on("data",function(I){k.push(I)})},x})();/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */function e(x){return x.subarray(0,x.byteLength-x[x.byteLength-1])}/*! @name aes-decrypter @version 4.0.2 @license Apache-2.0 */const i=function(){const x=[[[],[],[],[],[]],[[],[],[],[],[]]],E=x[0],P=x[1],k=E[4],I=P[4];let F,z,q;const U=[],Z=[];let D,R,Y,Q,J,ae;for(F=0;F<256;F++)Z[(U[F]=F<<1^(F>>7)*283)^F]=F;for(z=q=0;!k[z];z^=D||1,q=Z[q]||1)for(Q=q^q<<1^q<<2^q<<3^q<<4,Q=Q>>8^Q&255^99,k[z]=Q,I[Q]=z,Y=U[R=U[D=U[z]]],ae=Y*16843009^R*65537^D*257^z*16843008,J=U[Q]*257^Q*16843008,F=0;F<4;F++)E[F][z]=J=J<<24^J>>>8,P[F][Q]=ae=ae<<24^ae>>>8;for(F=0;F<5;F++)E[F]=E[F].slice(0),P[F]=P[F].slice(0);return x};let s=null;class n{constructor(E){s||(s=i()),this._tables=[[s[0][0].slice(),s[0][1].slice(),s[0][2].slice(),s[0][3].slice(),s[0][4].slice()],[s[1][0].slice(),s[1][1].slice(),s[1][2].slice(),s[1][3].slice(),s[1][4].slice()]];let P,k,I;const F=this._tables[0][4],z=this._tables[1],q=E.length;let U=1;if(q!==4&&q!==6&&q!==8)throw new Error("Invalid aes key size");const Z=E.slice(0),D=[];for(this._key=[Z,D],P=q;P<4*q+28;P++)I=Z[P-1],(P%q===0||q===8&&P%q===4)&&(I=F[I>>>24]<<24^F[I>>16&255]<<16^F[I>>8&255]<<8^F[I&255],P%q===0&&(I=I<<8^I>>>24^U<<24,U=U<<1^(U>>7)*283)),Z[P]=Z[P-q]^I;for(k=0;P;k++,P--)I=Z[k&3?P:P-4],P<=4||k<4?D[k]=I:D[k]=z[0][F[I>>>24]]^z[1][F[I>>16&255]]^z[2][F[I>>8&255]]^z[3][F[I&255]]}decrypt(E,P,k,I,F,z){const q=this._key[1];let U=E^q[0],Z=I^q[1],D=k^q[2],R=P^q[3],Y,Q,J;const ae=q.length/4-2;let ce,le=4;const se=this._tables[1],ee=se[0],fe=se[1],re=se[2],ue=se[3],Oe=se[4];for(ce=0;ce<ae;ce++)Y=ee[U>>>24]^fe[Z>>16&255]^re[D>>8&255]^ue[R&255]^q[le],Q=ee[Z>>>24]^fe[D>>16&255]^re[R>>8&255]^ue[U&255]^q[le+1],J=ee[D>>>24]^fe[R>>16&255]^re[U>>8&255]^ue[Z&255]^q[le+2],R=ee[R>>>24]^fe[U>>16&255]^re[Z>>8&255]^ue[D&255]^q[le+3],le+=4,U=Y,Z=Q,D=J;for(ce=0;ce<4;ce++)F[(3&-ce)+z]=Oe[U>>>24]<<24^Oe[Z>>16&255]<<16^Oe[D>>8&255]<<8^Oe[R&255]^q[le++],Y=U,U=Z,Z=D,D=R,R=Y}}class r extends t{constructor(){super(t),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(E){this.jobs.push(E),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const o=function(x){return x<<24|(x&65280)<<8|(x&16711680)>>8|x>>>24},l=function(x,E,P){const k=new Int32Array(x.buffer,x.byteOffset,x.byteLength>>2),I=new n(Array.prototype.slice.call(E)),F=new Uint8Array(x.byteLength),z=new Int32Array(F.buffer);let q,U,Z,D,R,Y,Q,J,ae;for(q=P[0],U=P[1],Z=P[2],D=P[3],ae=0;ae<k.length;ae+=4)R=o(k[ae]),Y=o(k[ae+1]),Q=o(k[ae+2]),J=o(k[ae+3]),I.decrypt(R,Y,Q,J,z,ae),z[ae]=o(z[ae]^q),z[ae+1]=o(z[ae+1]^U),z[ae+2]=o(z[ae+2]^Z),z[ae+3]=o(z[ae+3]^D),q=R,U=Y,Z=Q,D=J;return F};class u{constructor(E,P,k,I){const F=u.STEP,z=new Int32Array(E.buffer),q=new Uint8Array(E.byteLength);let U=0;for(this.asyncStream_=new r,this.asyncStream_.push(this.decryptChunk_(z.subarray(U,U+F),P,k,q)),U=F;U<z.length;U+=F)k=new Uint32Array([o(z[U-4]),o(z[U-3]),o(z[U-2]),o(z[U-1])]),this.asyncStream_.push(this.decryptChunk_(z.subarray(U,U+F),P,k,q));this.asyncStream_.push(function(){I(null,e(q))})}static get STEP(){return 32e3}decryptChunk_(E,P,k,I){return function(){const F=l(E,P,k);I.set(F,E.byteOffset)}}}var h=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},d;typeof window<"u"?d=window:typeof h<"u"?d=h:typeof self<"u"?d=self:d={};var m=d,_=function(E){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(E):E&&E.buffer instanceof ArrayBuffer},T=m.BigInt||Number;T("0x1"),T("0x100"),T("0x10000"),T("0x1000000"),T("0x100000000"),T("0x10000000000"),T("0x1000000000000"),T("0x100000000000000"),T("0x10000000000000000"),(function(){var x=new Uint16Array([65484]),E=new Uint8Array(x.buffer,x.byteOffset,x.byteLength);return E[0]===255?"big":E[0]===204?"little":"unknown"})();const C=function(x){const E={};return Object.keys(x).forEach(P=>{const k=x[P];_(k)?E[P]={bytes:k.buffer,byteOffset:k.byteOffset,byteLength:k.byteLength}:E[P]=k}),E};self.onmessage=function(x){const E=x.data,P=new Uint8Array(E.encrypted.bytes,E.encrypted.byteOffset,E.encrypted.byteLength),k=new Uint32Array(E.key.bytes,E.key.byteOffset,E.key.byteLength/4),I=new Uint32Array(E.iv.bytes,E.iv.byteOffset,E.iv.byteLength/4);new u(P,k,I,function(F,z){self.postMessage(C({source:E.source,decrypted:z}),[z.buffer])})}}));var L8=YC(I8);const O8=t=>{let e=t.default?"main":"alternative";return t.characteristics&&t.characteristics.indexOf("public.accessibility.describes-video")>=0&&(e="main-desc"),e},pw=(t,e)=>{t.abort(),t.pause(),e&&e.activePlaylistLoader&&(e.activePlaylistLoader.pause(),e.activePlaylistLoader=null)},Hg=(t,e)=>{e.activePlaylistLoader=t,t.load()},M8=(t,e)=>()=>{const{segmentLoaders:{[t]:i,main:s},mediaTypes:{[t]:n}}=e,r=n.activeTrack(),o=n.getActiveGroup(),l=n.activePlaylistLoader,u=n.lastGroup_;if(!(o&&u&&o.id===u.id)&&(n.lastGroup_=o,n.lastTrack_=r,pw(i,n),!(!o||o.isMainPlaylist))){if(!o.playlistLoader){l&&s.resetEverything();return}i.resyncLoader(),Hg(o.playlistLoader,n)}},R8=(t,e)=>()=>{const{segmentLoaders:{[t]:i},mediaTypes:{[t]:s}}=e;s.lastGroup_=null,i.abort(),i.pause()},N8=(t,e)=>()=>{const{mainPlaylistLoader:i,segmentLoaders:{[t]:s,main:n},mediaTypes:{[t]:r}}=e,o=r.activeTrack(),l=r.getActiveGroup(),u=r.activePlaylistLoader,h=r.lastTrack_;if(!(h&&o&&h.id===o.id)&&(r.lastGroup_=l,r.lastTrack_=o,pw(s,r),!!l)){if(l.isMainPlaylist){if(!o||!h||o.id===h.id)return;const d=e.vhs.playlistController_,m=d.selectPlaylist();if(d.media()===m)return;r.logger_(`track change. Switching main audio from ${h.id} to ${o.id}`),i.pause(),n.resetEverything(),d.fastQualityChange_(m);return}if(t==="AUDIO"){if(!l.playlistLoader){n.setAudio(!0),n.resetEverything();return}s.setAudio(!0),n.setAudio(!1)}if(u===l.playlistLoader){Hg(l.playlistLoader,r);return}s.track&&s.track(o),s.resetEverything(),Hg(l.playlistLoader,r)}},Zd={AUDIO:(t,e)=>()=>{const{mediaTypes:{[t]:i},excludePlaylist:s}=e,n=i.activeTrack(),r=i.activeGroup(),o=(r.filter(u=>u.default)[0]||r[0]).id,l=i.tracks[o];if(n===l){s({error:{message:"Problem encountered loading the default audio track."}});return}oe.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const u in i.tracks)i.tracks[u].enabled=i.tracks[u]===l;i.onTrackChanged()},SUBTITLES:(t,e)=>()=>{const{mediaTypes:{[t]:i}}=e;oe.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");const s=i.activeTrack();s&&(s.mode="disabled"),i.onTrackChanged()}},FT={AUDIO:(t,e,i)=>{if(!e)return;const{tech:s,requestOptions:n,segmentLoaders:{[t]:r}}=i;e.on("loadedmetadata",()=>{const o=e.media();r.playlist(o,n),(!s.paused()||o.endList&&s.preload()!=="none")&&r.load()}),e.on("loadedplaylist",()=>{r.playlist(e.media(),n),s.paused()||r.load()}),e.on("error",Zd[t](t,i))},SUBTITLES:(t,e,i)=>{const{tech:s,requestOptions:n,segmentLoaders:{[t]:r},mediaTypes:{[t]:o}}=i;e.on("loadedmetadata",()=>{const l=e.media();r.playlist(l,n),r.track(o.activeTrack()),(!s.paused()||l.endList&&s.preload()!=="none")&&r.load()}),e.on("loadedplaylist",()=>{r.playlist(e.media(),n),s.paused()||r.load()}),e.on("error",Zd[t](t,i))}},B8={AUDIO:(t,e)=>{const{vhs:i,sourceType:s,segmentLoaders:{[t]:n},requestOptions:r,main:{mediaGroups:o},mediaTypes:{[t]:{groups:l,tracks:u,logger_:h}},mainPlaylistLoader:d}=e,m=Vc(d.main);(!o[t]||Object.keys(o[t]).length===0)&&(o[t]={main:{default:{default:!0}}},m&&(o[t].main.default.playlists=d.main.playlists));for(const _ in o[t]){l[_]||(l[_]=[]);for(const T in o[t][_]){let C=o[t][_][T],x;if(m?(h(`AUDIO group '${_}' label '${T}' is a main playlist`),C.isMainPlaylist=!0,x=null):s==="vhs-json"&&C.playlists?x=new Za(C.playlists[0],i,r):C.resolvedUri?x=new Za(C.resolvedUri,i,r):C.playlists&&s==="dash"?x=new Bg(C.playlists[0],i,r,d):x=null,C=wt({id:T,playlistLoader:x},C),FT[t](t,C.playlistLoader,e),l[_].push(C),typeof u[T]>"u"){const E=new oe.AudioTrack({id:T,kind:O8(C),enabled:!1,language:C.language,default:C.default,label:T});u[T]=E}}}n.on("error",Zd[t](t,e))},SUBTITLES:(t,e)=>{const{tech:i,vhs:s,sourceType:n,segmentLoaders:{[t]:r},requestOptions:o,main:{mediaGroups:l},mediaTypes:{[t]:{groups:u,tracks:h}},mainPlaylistLoader:d}=e;for(const m in l[t]){u[m]||(u[m]=[]);for(const _ in l[t][m]){if(!s.options_.useForcedSubtitles&&l[t][m][_].forced)continue;let T=l[t][m][_],C;if(n==="hls")C=new Za(T.resolvedUri,s,o);else if(n==="dash"){if(!T.playlists.filter(E=>E.excludeUntil!==1/0).length)return;C=new Bg(T.playlists[0],s,o,d)}else n==="vhs-json"&&(C=new Za(T.playlists?T.playlists[0]:T.resolvedUri,s,o));if(T=wt({id:_,playlistLoader:C},T),FT[t](t,T.playlistLoader,e),u[m].push(T),typeof h[_]>"u"){const x=i.addRemoteTextTrack({id:_,kind:"subtitles",default:T.default&&T.autoselect,language:T.language,label:_},!1).track;h[_]=x}}}r.on("error",Zd[t](t,e))},"CLOSED-CAPTIONS":(t,e)=>{const{tech:i,main:{mediaGroups:s},mediaTypes:{[t]:{groups:n,tracks:r}}}=e;for(const o in s[t]){n[o]||(n[o]=[]);for(const l in s[t][o]){const u=s[t][o][l];if(!/^(?:CC|SERVICE)/.test(u.instreamId))continue;const h=i.options_.vhs&&i.options_.vhs.captionServices||{};let d={label:l,language:u.language,instreamId:u.instreamId,default:u.default&&u.autoselect};if(h[d.instreamId]&&(d=wt(d,h[d.instreamId])),d.default===void 0&&delete d.default,n[o].push(wt({id:l},u)),typeof r[l]>"u"){const m=i.addRemoteTextTrack({id:d.instreamId,kind:"captions",default:d.default,language:d.language,label:d.label},!1).track;r[l]=m}}}}},mw=(t,e)=>{for(let i=0;i<t.length;i++)if(y0(e,t[i])||t[i].playlists&&mw(t[i].playlists,e))return!0;return!1},F8=(t,e)=>i=>{const{mainPlaylistLoader:s,mediaTypes:{[t]:{groups:n}}}=e,r=s.media();if(!r)return null;let o=null;r.attributes[t]&&(o=n[r.attributes[t]]);const l=Object.keys(n);if(!o)if(t==="AUDIO"&&l.length>1&&Vc(e.main))for(let u=0;u<l.length;u++){const h=n[l[u]];if(mw(h,r)){o=h;break}}else n.main?o=n.main:l.length===1&&(o=n[l[0]]);return typeof i>"u"?o:i===null||!o?null:o.filter(u=>u.id===i.id)[0]||null},U8={AUDIO:(t,e)=>()=>{const{mediaTypes:{[t]:{tracks:i}}}=e;for(const s in i)if(i[s].enabled)return i[s];return null},SUBTITLES:(t,e)=>()=>{const{mediaTypes:{[t]:{tracks:i}}}=e;for(const s in i)if(i[s].mode==="showing"||i[s].mode==="hidden")return i[s];return null}},j8=(t,{mediaTypes:e})=>()=>{const i=e[t].activeTrack();return i?e[t].activeGroup(i):null},z8=t=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(h=>{B8[h](h,t)});const{mediaTypes:e,mainPlaylistLoader:i,tech:s,vhs:n,segmentLoaders:{["AUDIO"]:r,main:o}}=t;["AUDIO","SUBTITLES"].forEach(h=>{e[h].activeGroup=F8(h,t),e[h].activeTrack=U8[h](h,t),e[h].onGroupChanged=M8(h,t),e[h].onGroupChanging=R8(h,t),e[h].onTrackChanged=N8(h,t),e[h].getActiveGroup=j8(h,t)});const l=e.AUDIO.activeGroup();if(l){const h=(l.filter(m=>m.default)[0]||l[0]).id;e.AUDIO.tracks[h].enabled=!0,e.AUDIO.onGroupChanged(),e.AUDIO.onTrackChanged(),e.AUDIO.getActiveGroup().playlistLoader?(o.setAudio(!1),r.setAudio(!0)):o.setAudio(!0)}i.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(h=>e[h].onGroupChanged())}),i.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(h=>e[h].onGroupChanging())});const u=()=>{e.AUDIO.onTrackChanged(),s.trigger({type:"usage",name:"vhs-audio-change"})};s.audioTracks().addEventListener("change",u),s.remoteTextTracks().addEventListener("change",e.SUBTITLES.onTrackChanged),n.on("dispose",()=>{s.audioTracks().removeEventListener("change",u),s.remoteTextTracks().removeEventListener("change",e.SUBTITLES.onTrackChanged)}),s.clearTracks("audio");for(const h in e.AUDIO.tracks)s.audioTracks().addTrack(e.AUDIO.tracks[h])},H8=()=>{const t={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{t[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:_r,activeTrack:_r,getActiveGroup:_r,onGroupChanged:_r,onTrackChanged:_r,lastTrack_:null,logger_:Js(`MediaGroups[${e}]`)}}),t};class UT{constructor(){this.priority_=[],this.pathwayClones_=new Map}set version(e){e===1&&(this.version_=e)}set ttl(e){this.ttl_=e||300}set reloadUri(e){e&&(this.reloadUri_=hs(this.reloadUri_,e))}set priority(e){e&&e.length&&(this.priority_=e)}set pathwayClones(e){e&&e.length&&(this.pathwayClones_=new Map(e.map(i=>[i.ID,i])))}get version(){return this.version_}get ttl(){return this.ttl_}get reloadUri(){return this.reloadUri_}get priority(){return this.priority_}get pathwayClones(){return this.pathwayClones_}}class V8 extends oe.EventTarget{constructor(e,i){super(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=!1,this.availablePathways_=new Set,this.steeringManifest=new UT,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.currentPathwayClones=new Map,this.nextPathwayClones=new Map,this.excludedSteeringManifestURLs=new Set,this.logger_=Js("Content Steering"),this.xhr_=e,this.getBandwidth_=i}assignTagProperties(e,i){this.manifestType_=i.serverUri?"HLS":"DASH";const s=i.serverUri||i.serverURL;if(!s){this.logger_(`steering manifest URL is ${s}, cannot request steering manifest.`),this.trigger("error");return}if(s.startsWith("data:")){this.decodeDataUriManifest_(s.substring(s.indexOf(",")+1));return}this.steeringManifest.reloadUri=hs(e,s),this.defaultPathway=i.pathwayId||i.defaultServiceLocation,this.queryBeforeStart=i.queryBeforeStart,this.proxyServerUrl_=i.proxyServerURL,this.defaultPathway&&!this.queryBeforeStart&&this.trigger("content-steering")}requestSteeringManifest(e){const i=this.steeringManifest.reloadUri;if(!i)return;const s=e?i:this.getRequestURI(i);if(!s){this.logger_("No valid content steering manifest URIs. Stopping content steering."),this.trigger("error"),this.dispose();return}const n={contentSteeringInfo:{uri:s}};this.trigger({type:"contentsteeringloadstart",metadata:n}),this.request_=this.xhr_({uri:s,requestType:"content-steering-manifest"},(r,o)=>{if(r){if(o.status===410){this.logger_(`manifest request 410 ${r}.`),this.logger_(`There will be no more content steering requests to ${s} this session.`),this.excludedSteeringManifestURLs.add(s);return}if(o.status===429){const h=o.responseHeaders["retry-after"];this.logger_(`manifest request 429 ${r}.`),this.logger_(`content steering will retry in ${h} seconds.`),this.startTTLTimeout_(parseInt(h,10));return}this.logger_(`manifest failed to load ${r}.`),this.startTTLTimeout_();return}this.trigger({type:"contentsteeringloadcomplete",metadata:n});let l;try{l=JSON.parse(this.request_.responseText)}catch(h){const d={errorType:oe.Error.StreamingContentSteeringParserError,error:h};this.trigger({type:"error",metadata:d})}this.assignSteeringProperties_(l);const u={contentSteeringInfo:n.contentSteeringInfo,contentSteeringManifest:{version:this.steeringManifest.version,reloadUri:this.steeringManifest.reloadUri,priority:this.steeringManifest.priority}};this.trigger({type:"contentsteeringparsed",metadata:u}),this.startTTLTimeout_()})}setProxyServerUrl_(e){const i=new $.URL(e),s=new $.URL(this.proxyServerUrl_);return s.searchParams.set("url",encodeURI(i.toString())),this.setSteeringParams_(s.toString())}decodeDataUriManifest_(e){const i=JSON.parse($.atob(e));this.assignSteeringProperties_(i)}setSteeringParams_(e){const i=new $.URL(e),s=this.getPathway(),n=this.getBandwidth_();if(s){const r=`_${this.manifestType_}_pathway`;i.searchParams.set(r,s)}if(n){const r=`_${this.manifestType_}_throughput`;i.searchParams.set(r,n)}return i.toString()}assignSteeringProperties_(e){if(this.steeringManifest.version=e.VERSION,!this.steeringManifest.version){this.logger_(`manifest version is ${e.VERSION}, which is not supported.`),this.trigger("error");return}this.steeringManifest.ttl=e.TTL,this.steeringManifest.reloadUri=e["RELOAD-URI"],this.steeringManifest.priority=e["PATHWAY-PRIORITY"]||e["SERVICE-LOCATION-PRIORITY"],this.steeringManifest.pathwayClones=e["PATHWAY-CLONES"],this.nextPathwayClones=this.steeringManifest.pathwayClones,this.availablePathways_.size||(this.logger_("There are no available pathways for content steering. Ending content steering."),this.trigger("error"),this.dispose());const s=(n=>{for(const r of n)if(this.availablePathways_.has(r))return r;return[...this.availablePathways_][0]})(this.steeringManifest.priority);this.currentPathway!==s&&(this.currentPathway=s,this.trigger("content-steering"))}getPathway(){return this.currentPathway||this.defaultPathway}getRequestURI(e){if(!e)return null;const i=n=>this.excludedSteeringManifestURLs.has(n);if(this.proxyServerUrl_){const n=this.setProxyServerUrl_(e);if(!i(n))return n}const s=this.setSteeringParams_(e);return i(s)?null:s}startTTLTimeout_(e=this.steeringManifest.ttl){const i=e*1e3;this.ttlTimeout_=$.setTimeout(()=>{this.requestSteeringManifest()},i)}clearTTLTimeout_(){$.clearTimeout(this.ttlTimeout_),this.ttlTimeout_=null}abort(){this.request_&&this.request_.abort(),this.request_=null}dispose(){this.off("content-steering"),this.off("error"),this.abort(),this.clearTTLTimeout_(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=null,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.excludedSteeringManifestURLs=new Set,this.availablePathways_=new Set,this.steeringManifest=new UT}addAvailablePathway(e){e&&this.availablePathways_.add(e)}clearAvailablePathways(){this.availablePathways_.clear()}excludePathway(e){return this.availablePathways_.delete(e)}didDASHTagChange(e,i){return!i&&this.steeringManifest.reloadUri||i&&(hs(e,i.serverURL)!==this.steeringManifest.reloadUri||i.defaultServiceLocation!==this.defaultPathway||i.queryBeforeStart!==this.queryBeforeStart||i.proxyServerURL!==this.proxyServerUrl_)}getAvailablePathways(){return this.availablePathways_}}const q8=(t,e)=>{let i=null;return(...s)=>{clearTimeout(i),i=setTimeout(()=>{t.apply(null,s)},e)}},$8=10;let $r;const W8=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],G8=function(t){return this.audioSegmentLoader_[t]+this.mainSegmentLoader_[t]},X8=function({currentPlaylist:t,buffered:e,currentTime:i,nextPlaylist:s,bufferLowWaterLine:n,bufferHighWaterLine:r,duration:o,bufferBasedABR:l,log:u}){if(!s)return oe.log.warn("We received no playlist to switch to. Please check your stream."),!1;const h=`allowing switch ${t&&t.id||"null"} -> ${s.id}`;if(!t)return u(`${h} as current playlist is not set`),!0;if(s.id===t.id)return!1;const d=!!Ka(e,i).length;if(!t.endList)return!d&&typeof t.partTargetDuration=="number"?(u(`not ${h} as current playlist is live llhls, but currentTime isn't in buffered.`),!1):(u(`${h} as current playlist is live`),!0);const m=m0(e,i),_=l?yi.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:yi.MAX_BUFFER_LOW_WATER_LINE;if(o<_)return u(`${h} as duration < max low water line (${o} < ${_})`),!0;const T=s.attributes.BANDWIDTH,C=t.attributes.BANDWIDTH;if(T<C&&(!l||m<r)){let x=`${h} as next bandwidth < current bandwidth (${T} < ${C})`;return l&&(x+=` and forwardBuffer < bufferHighWaterLine (${m} < ${r})`),u(x),!0}if((!l||T>C)&&m>=n){let x=`${h} as forwardBuffer >= bufferLowWaterLine (${m} >= ${n})`;return l&&(x+=` and next bandwidth > current bandwidth (${T} > ${C})`),u(x),!0}return u(`not ${h} as no switching criteria met`),!1};class K8 extends oe.EventTarget{constructor(e){super(),this.fastQualityChange_=q8(this.fastQualityChange_.bind(this),100);const{src:i,withCredentials:s,tech:n,bandwidth:r,externVhs:o,useCueTags:l,playlistExclusionDuration:u,enableLowInitialPlaylist:h,sourceType:d,cacheEncryptionKeys:m,bufferBasedABR:_,leastPixelDiffSelector:T,captionServices:C,experimentalUseMMS:x}=e;if(!i)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:E}=e;(E===null||typeof E>"u")&&(E=1/0),$r=o,this.bufferBasedABR=!!_,this.leastPixelDiffSelector=!!T,this.withCredentials=s,this.tech_=n,this.vhs_=n.vhs,this.player_=e.player_,this.sourceType_=d,this.useCueTags_=l,this.playlistExclusionDuration=u,this.maxPlaylistRetries=E,this.enableLowInitialPlaylist=h,this.usingManagedMediaSource_=!1,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:s,maxPlaylistRetries:E,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=H8(),x&&$.ManagedMediaSource?(this.tech_.el_.disableRemotePlayback=!0,this.mediaSource=new $.ManagedMediaSource,this.usingManagedMediaSource_=!0,oe.log("Using ManagedMediaSource")):$.MediaSource&&(this.mediaSource=new $.MediaSource),this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.load=this.load.bind(this),this.pause=this.pause.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.mediaSource.addEventListener("startstreaming",this.load),this.mediaSource.addEventListener("endstreaming",this.pause),this.seekable_=Ti(),this.hasPlayed_=!1,this.syncController_=new P8(e),this.segmentMetadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.segmentMetadataTrack_.mode="hidden",this.decrypter_=new L8,this.sourceUpdater_=new dw(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new k8,this.keyStatusMap_=new Map;const P={vhs:this.vhs_,parse708captions:e.parse708captions,useDtsForTimestampOffset:e.useDtsForTimestampOffset,captionServices:C,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:r,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:m,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:e.exactManifestTimings,addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)};this.mainPlaylistLoader_=this.sourceType_==="dash"?new Bg(i,this.vhs_,wt(this.requestOptions_,{addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)})):new Za(i,this.vhs_,wt(this.requestOptions_,{addDateRangesToTextTrack:this.addDateRangesToTextTrack_.bind(this)})),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new jg(wt(P,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e),this.audioSegmentLoader_=new jg(wt(P,{loaderType:"audio"}),e),this.subtitleSegmentLoader_=new C8(wt(P,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((F,z)=>{function q(){n.off("vttjserror",U),F()}function U(){n.off("vttjsloaded",q),z()}n.one("vttjsloaded",q),n.one("vttjserror",U),n.addWebVttScript_()})}),e);const k=()=>this.mainSegmentLoader_.bandwidth;this.contentSteeringController_=new V8(this.vhs_.xhr,k),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),W8.forEach(F=>{this[F+"_"]=G8.bind(this,F)}),this.logger_=Js("pc"),this.triggeredFmp4Usage=!1,this.tech_.preload()==="none"?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const I=this.tech_.preload()==="none"?"play":"loadstart";this.tech_.one(I,()=>{const F=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-F,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const e=this.mainAppendsToLoadedData_(),i=this.audioAppendsToLoadedData_();return e===-1||i===-1?-1:e+i}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(e="abr"){const i=this.selectPlaylist();i&&this.shouldSwitchToMedia_(i)&&this.switchMedia_(i,e)}switchMedia_(e,i,s){const n=this.media(),r=n&&(n.id||n.uri),o=e&&(e.id||e.uri);if(r&&r!==o){this.logger_(`switch media ${r} -> ${o} from ${i}`);const l={renditionInfo:{id:o,bandwidth:e.attributes.BANDWIDTH,resolution:e.attributes.RESOLUTION,codecs:e.attributes.CODECS},cause:i};this.trigger({type:"renditionselected",metadata:l}),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${i}`})}this.mainPlaylistLoader_.media(e,s)}switchMediaForDASHContentSteering_(){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{const i=this.mediaTypes_[e],s=i?i.activeGroup():null,n=this.contentSteeringController_.getPathway();if(s&&n){const o=(s.length?s[0].playlists:s.playlists).filter(l=>l.attributes.serviceLocation===n);o.length&&this.mediaTypes_[e].activePlaylistLoader.media(o[0])}})}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=$.setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||($.clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const e=this.main(),i=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return i;const s=e.mediaGroups.AUDIO,n=Object.keys(s);let r;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)r=this.mediaTypes_.AUDIO.activeTrack();else{const l=s.main||n.length&&s[n[0]];for(const u in l)if(l[u].default){r={label:u};break}}if(!r)return i;const o=[];for(const l in s)if(s[l][r.label]){const u=s[l][r.label];if(u.playlists&&u.playlists.length)o.push.apply(o,u.playlists);else if(u.uri)o.push(u);else if(e.playlists.length)for(let h=0;h<e.playlists.length;h++){const d=e.playlists[h];d.attributes&&d.attributes.AUDIO&&d.attributes.AUDIO===l&&o.push(d)}}return o.length?o:i}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{const i=this.mainPlaylistLoader_.media(),s=i.targetDuration*1.5*1e3;Lg(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=s,i.endList&&this.tech_.preload()!=="none"&&(this.mainSegmentLoader_.playlist(i,this.requestOptions_),this.mainSegmentLoader_.load()),z8({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),i),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let i=this.mainPlaylistLoader_.media();if(!i){this.attachContentSteeringListeners_(),this.initContentSteeringController_(),this.excludeUnsupportedVariants_();let s;if(this.enableLowInitialPlaylist&&(s=this.selectInitialPlaylist()),s||(s=this.selectPlaylist()),!s||!this.shouldSwitchToMedia_(s)||(this.initialMedia_=s,this.switchMedia_(this.initialMedia_,"initial"),!(this.sourceType_==="vhs-json"&&this.initialMedia_.segments)))return;i=this.initialMedia_}this.handleUpdatedMediaPlaylist(i)}),this.mainPlaylistLoader_.on("error",()=>{const i=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:i.playlist,error:i})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{const i=this.mainPlaylistLoader_.media(),s=i.targetDuration*1.5*1e3;Lg(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=s,this.sourceType_==="dash"&&this.mainPlaylistLoader_.isPaused&&this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(i,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_?this.runFastQualitySwitch_():this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{const i=this.mainPlaylistLoader_.media();if(i.lastExcludeReason_==="playlist-unchanged")return;this.stuckAtPlaylistEnd_(i)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})}),["manifestrequeststart","manifestrequestcomplete","manifestparsestart","manifestparsecomplete","playlistrequeststart","playlistrequestcomplete","playlistparsestart","playlistparsecomplete","renditiondisabled","renditionenabled"].forEach(i=>{this.mainPlaylistLoader_.on(i,s=>{this.player_.trigger(si({},s))})})}handleUpdatedMediaPlaylist(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_&&this.runFastQualitySwitch_(),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(e,i){const s=e.mediaGroups||{};let n=!0;const r=Object.keys(s.AUDIO);for(const o in s.AUDIO)for(const l in s.AUDIO[o])s.AUDIO[o][l].uri||(n=!1);n&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(s.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),$r.Playlist.isAes(i)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),r.length&&Object.keys(s.AUDIO[r[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(e){const i=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,s=this.tech_.currentTime(),n=this.bufferLowWaterLine(),r=this.bufferHighWaterLine(),o=this.tech_.buffered();return X8({buffered:o,currentTime:s,currentPlaylist:i,nextPlaylist:e,bufferLowWaterLine:n,bufferHighWaterLine:r,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{const s=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:s.playlist,error:s})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.timelineChangeController_.on("audioTimelineBehind",()=>{const s=this.audioSegmentLoader_.pendingSegment_;if(!s||!s.segment||!s.segment.syncInfo)return;const n=s.segment.syncInfo.end+.01;this.tech_.setCurrentTime(n)}),this.timelineChangeController_.on("fixBadTimelineChange",()=>{this.logger_("Fix bad timeline change. Restarting al segment loaders..."),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}),this.mainSegmentLoader_.on("earlyabort",s=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:$8}))});const e=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const s=this.getCodecsOrExclude_();s&&this.sourceUpdater_.addOrChangeSourceBuffers(s)};this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()}),["segmentselected","segmentloadstart","segmentloaded","segmentkeyloadstart","segmentkeyloadcomplete","segmentdecryptionstart","segmentdecryptioncomplete","segmenttransmuxingstart","segmenttransmuxingcomplete","segmenttransmuxingtrackinfoavailable","segmenttransmuxingtiminginfoavailable","segmentappendstart","appendsdone","bandwidthupdated","timelinechange","codecschange"].forEach(s=>{this.mainSegmentLoader_.on(s,n=>{this.player_.trigger(si({},n))}),this.audioSegmentLoader_.on(s,n=>{this.player_.trigger(si({},n))}),this.subtitleSegmentLoader_.on(s,n=>{this.player_.trigger(si({},n))})})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}pause(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}fastQualityChange_(e=this.selectPlaylist()){if(e&&e===this.mainPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(e,"fast-quality"),this.waitingForFastQualityPlaylistReceived_=!0}runFastQualitySwitch_(){this.waitingForFastQualityPlaylistReceived_=!1,this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const e=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0))return this.tech_.setCurrentTime(e.end(e.length-1))}setupFirstPlay(){const e=this.mainPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_)return!1;if(!e.endList||e.start){const i=this.seekable();if(!i.length)return!1;const s=i.end(0);let n=s;if(e.start){const r=e.start.timeOffset;r<0?n=Math.max(s+r,i.start(0)):n=Math.min(s,r)}this.trigger("firstplay"),this.tech_.setCurrentTime(n)}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const e=this.tech_.play();typeof e<"u"&&typeof e.then=="function"&&e.then(null,i=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const e=this.inbandTextTracks_.metadataTrack_.cues;if(!e||!e.length)return;const i=this.duration();e[e.length-1].endTime=isNaN(i)||Math.abs(i)===1/0?Number.MAX_VALUE:i}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const i=this.mainSegmentLoader_.getCurrentMediaInfo_();!i||i.hasVideo?e=e&&this.audioSegmentLoader_.ended_:e=this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(e){if(!this.seekable().length)return!1;const s=this.syncController_.getExpiredTime(e,this.duration());if(s===null)return!1;const n=$r.Playlist.playlistEnd(e,s),r=this.tech_.currentTime(),o=this.tech_.buffered();if(!o.length)return n-r<=jn;const l=o.end(o.length-1);return l-r<=jn&&n-l<=jn}excludePlaylist({playlistToExclude:e=this.mainPlaylistLoader_.media(),error:i={},playlistExclusionDuration:s}){if(e=e||this.mainPlaylistLoader_.media(),s=s||i.playlistExclusionDuration||this.playlistExclusionDuration,!e){this.error=i,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}e.playlistErrors_++;const n=this.mainPlaylistLoader_.main.playlists,r=n.filter(Wf),o=r.length===1&&r[0]===e;if(n.length===1&&s!==1/0)return oe.log.warn(`Problem encountered with playlist ${e.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(o);if(o){if(this.main().contentSteering){const C=this.pathwayAttribute_(e),x=this.contentSteeringController_.steeringManifest.ttl*1e3;this.contentSteeringController_.excludePathway(C),this.excludeThenChangePathway_(),setTimeout(()=>{this.contentSteeringController_.addAvailablePathway(C)},x);return}let T=!1;n.forEach(C=>{if(C===e)return;const x=C.excludeUntil;typeof x<"u"&&x!==1/0&&(T=!0,delete C.excludeUntil)}),T&&(oe.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let l;e.playlistErrors_>this.maxPlaylistRetries?l=1/0:l=Date.now()+s*1e3,e.excludeUntil=l,i.reason&&(e.lastExcludeReason_=i.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const u=this.selectPlaylist();if(!u){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}const h=i.internal?this.logger_:oe.log.warn,d=i.message?" "+i.message:"";h(`${i.internal?"Internal problem":"Problem"} encountered with playlist ${e.id}.${d} Switching to playlist ${u.id}.`),u.attributes.AUDIO!==e.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),u.attributes.SUBTITLES!==e.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const m=u.targetDuration/2*1e3||5*1e3,_=typeof u.lastRequest=="number"&&Date.now()-u.lastRequest<=m;return this.switchMedia_(u,"exclude",o||_)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(e,i){const s=[],n=e==="all";(n||e==="main")&&s.push(this.mainPlaylistLoader_);const r=[];(n||e==="audio")&&r.push("AUDIO"),(n||e==="subtitle")&&(r.push("CLOSED-CAPTIONS"),r.push("SUBTITLES")),r.forEach(o=>{const l=this.mediaTypes_[o]&&this.mediaTypes_[o].activePlaylistLoader;l&&s.push(l)}),["main","audio","subtitle"].forEach(o=>{const l=this[`${o}SegmentLoader_`];l&&(e===o||e==="all")&&s.push(l)}),s.forEach(o=>i.forEach(l=>{typeof o[l]=="function"&&o[l]()}))}setCurrentTime(e){const i=Ka(this.tech_.buffered(),e);if(!(this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media())||!this.mainPlaylistLoader_.media().segments)return 0;if(i&&i.length)return e;this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}duration(){if(!this.mainPlaylistLoader_)return 0;const e=this.mainPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:$r.Playlist.duration(e):1/0:0}seekable(){return this.seekable_}getSeekableRange_(e,i){const s=e.media();if(!s)return null;const n=this.syncController_.getMediaSequenceSync(i);if(n&&n.isReliable){const l=n.start,u=n.end;if(!isFinite(l)||!isFinite(u))return null;const h=$r.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,s),d=Math.max(l,u-h);return Ti([[l,d]])}const r=this.syncController_.getExpiredTime(s,this.duration());if(r===null)return null;const o=$r.Playlist.seekable(s,r,$r.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,s));return o.length?o:null}computeFinalSeekable_(e,i){if(!i)return e;const s=e.start(0),n=e.end(0),r=i.start(0),o=i.end(0);return r>n||s>o?e:Ti([[Math.max(s,r),Math.min(n,o)]])}onSyncInfoUpdate_(){if(!this.mainPlaylistLoader_)return;const e=this.getSeekableRange_(this.mainPlaylistLoader_,"main");if(!e)return;let i;if(this.mediaTypes_.AUDIO.activePlaylistLoader&&(i=this.getSeekableRange_(this.mediaTypes_.AUDIO.activePlaylistLoader,"audio"),!i))return;const s=this.seekable_;if(this.seekable_=this.computeFinalSeekable_(e,i),!this.seekable_||s&&s.length&&this.seekable_.length&&s.start(0)===this.seekable_.start(0)&&s.end(0)===this.seekable_.end(0))return;this.logger_(`seekable updated [${wC(this.seekable_)}]`);const n={seekableRanges:this.seekable_};this.trigger({type:"seekablerangeschanged",metadata:n}),this.tech_.trigger("seekablechanged")}updateDuration(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,e),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(e){const n=this.seekable();if(!n.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<n.end(n.length-1))&&this.sourceUpdater_.setDuration(n.end(n.length-1));return}const i=this.tech_.buffered();let s=$r.Playlist.duration(this.mainPlaylistLoader_.media());i.length>0&&(s=Math.max(s,i.end(i.length-1))),this.mediaSource.duration!==s&&this.sourceUpdater_.setDuration(s)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.contentSteeringController_.dispose(),this.keyStatusMap_.clear(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(e=>{const i=this.mediaTypes_[e].groups;for(const s in i)i[s].forEach(n=>{n.playlistLoader&&n.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,i=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),s=e?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!i||!s)}getCodecsOrExclude_(){const e={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},i=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();e.video=e.main;const s=lc(this.main(),i),n={},r=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(e.main.hasVideo&&(n.video=s.video||e.main.videoCodec||B3),e.main.isMuxed&&(n.video+=`,${s.audio||e.main.audioCodec||Db}`),(e.main.hasAudio&&!e.main.isMuxed||e.audio.hasAudio||r)&&(n.audio=s.audio||e.main.audioCodec||e.audio.audioCodec||Db,e.audio.isFmp4=e.main.hasAudio&&!e.main.isMuxed?e.main.isFmp4:e.audio.isFmp4),!n.audio&&!n.video){this.excludePlaylist({playlistToExclude:i,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});return}const o=(h,d)=>h?sc(d,this.usingManagedMediaSource_):Cm(d),l={};let u;if(["video","audio"].forEach(function(h){if(n.hasOwnProperty(h)&&!o(e[h].isFmp4,n[h])){const d=e[h].isFmp4?"browser":"muxer";l[d]=l[d]||[],l[d].push(n[h]),h==="audio"&&(u=d)}}),r&&u&&i.attributes.AUDIO){const h=i.attributes.AUDIO;this.main().playlists.forEach(d=>{(d.attributes&&d.attributes.AUDIO)===h&&d!==i&&(d.excludeUntil=1/0)}),this.logger_(`excluding audio group ${h} as ${u} does not support codec(s): "${n.audio}"`)}if(Object.keys(l).length){const h=Object.keys(l).reduce((d,m)=>(d&&(d+=", "),d+=`${m} does not support codec(s): "${l[m].join(",")}"`,d),"")+".";this.excludePlaylist({playlistToExclude:i,error:{internal:!0,message:h},playlistExclusionDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const h=[];if(["video","audio"].forEach(d=>{const m=(Rn(this.sourceUpdater_.codecs[d]||"")[0]||{}).type,_=(Rn(n[d]||"")[0]||{}).type;m&&_&&m.toLowerCase()!==_.toLowerCase()&&h.push(`"${this.sourceUpdater_.codecs[d]}" -> "${n[d]}"`)}),h.length){this.excludePlaylist({playlistToExclude:i,error:{message:`Codec switching not supported: ${h.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0});return}}return n}tryToCreateSourceBuffers_(){if(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_())return;const e=this.getCodecsOrExclude_();if(!e)return;this.sourceUpdater_.createSourceBuffers(e);const i=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(i)}excludeUnsupportedVariants_(){const e=this.main().playlists,i=[];Object.keys(e).forEach(s=>{const n=e[s];if(i.indexOf(n.id)!==-1)return;i.push(n.id);const r=lc(this.main,n),o=[];r.audio&&!Cm(r.audio)&&!sc(r.audio,this.usingManagedMediaSource_)&&o.push(`audio codec ${r.audio}`),r.video&&!Cm(r.video)&&!sc(r.video,this.usingManagedMediaSource_)&&o.push(`video codec ${r.video}`),r.text&&r.text==="stpp.ttml.im1t"&&o.push(`text codec ${r.text}`),o.length&&(n.excludeUntil=1/0,this.logger_(`excluding ${n.id} for unsupported: ${o.join(", ")}`))})}excludeIncompatibleVariants_(e){const i=[],s=this.main().playlists,n=wc(Rn(e)),r=TT(n),o=n.video&&Rn(n.video)[0]||null,l=n.audio&&Rn(n.audio)[0]||null;Object.keys(s).forEach(u=>{const h=s[u];if(i.indexOf(h.id)!==-1||h.excludeUntil===1/0)return;i.push(h.id);const d=[],m=lc(this.mainPlaylistLoader_.main,h),_=TT(m);if(!(!m.audio&&!m.video)){if(_!==r&&d.push(`codec count "${_}" !== "${r}"`),!this.sourceUpdater_.canChangeType()){const T=m.video&&Rn(m.video)[0]||null,C=m.audio&&Rn(m.audio)[0]||null;T&&o&&T.type.toLowerCase()!==o.type.toLowerCase()&&d.push(`video codec "${T.type}" !== "${o.type}"`),C&&l&&C.type.toLowerCase()!==l.type.toLowerCase()&&d.push(`audio codec "${C.type}" !== "${l.type}"`)}d.length&&(h.excludeUntil=1/0,this.logger_(`excluding ${h.id}: ${d.join(" && ")}`))}})}updateAdCues_(e){let i=0;const s=this.seekable();s.length&&(i=s.start(0)),E8(e,this.cueTagsTrack_,i)}goalBufferLength(){const e=this.tech_.currentTime(),i=yi.GOAL_BUFFER_LENGTH,s=yi.GOAL_BUFFER_LENGTH_RATE,n=Math.max(i,yi.MAX_GOAL_BUFFER_LENGTH);return Math.min(i+e*s,n)}bufferLowWaterLine(){const e=this.tech_.currentTime(),i=yi.BUFFER_LOW_WATER_LINE,s=yi.BUFFER_LOW_WATER_LINE_RATE,n=Math.max(i,yi.MAX_BUFFER_LOW_WATER_LINE),r=Math.max(i,yi.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(i+e*s,this.bufferBasedABR?r:n)}bufferHighWaterLine(){return yi.BUFFER_HIGH_WATER_LINE}addDateRangesToTextTrack_(e){PT(this.inbandTextTracks_,"com.apple.streaming",this.tech_),r8({inbandTextTracks:this.inbandTextTracks_,dateRanges:e})}addMetadataToTextTrack(e,i,s){const n=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():this.sourceUpdater_.audioTimestampOffset();PT(this.inbandTextTracks_,e,this.tech_),i8({inbandTextTracks:this.inbandTextTracks_,metadataArray:i,timestampOffset:n,videoDuration:s})}pathwayAttribute_(e){return e.attributes["PATHWAY-ID"]||e.attributes.serviceLocation}initContentSteeringController_(){const e=this.main();if(e.contentSteering){for(const i of e.playlists)this.contentSteeringController_.addAvailablePathway(this.pathwayAttribute_(i));if(this.contentSteeringController_.assignTagProperties(e.uri,e.contentSteering),this.contentSteeringController_.queryBeforeStart){this.contentSteeringController_.requestSteeringManifest(!0);return}this.tech_.one("canplay",()=>{this.contentSteeringController_.requestSteeringManifest()})}}resetContentSteeringController_(){this.contentSteeringController_.clearAvailablePathways(),this.contentSteeringController_.dispose(),this.initContentSteeringController_()}attachContentSteeringListeners_(){this.contentSteeringController_.on("content-steering",this.excludeThenChangePathway_.bind(this)),["contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"].forEach(i=>{this.contentSteeringController_.on(i,s=>{this.trigger(si({},s))})}),this.sourceType_==="dash"&&this.mainPlaylistLoader_.on("loadedplaylist",()=>{const i=this.main();(this.contentSteeringController_.didDASHTagChange(i.uri,i.contentSteering)||(()=>{const r=this.contentSteeringController_.getAvailablePathways(),o=[];for(const l of i.playlists){const u=l.attributes.serviceLocation;if(u&&(o.push(u),!r.has(u)))return!0}return!!(!o.length&&r.size)})())&&this.resetContentSteeringController_()})}excludeThenChangePathway_(){const e=this.contentSteeringController_.getPathway();if(!e)return;this.handlePathwayClones_();const s=this.main().playlists,n=new Set;let r=!1;Object.keys(s).forEach(o=>{const l=s[o],u=this.pathwayAttribute_(l),h=u&&e!==u;l.excludeUntil===1/0&&l.lastExcludeReason_==="content-steering"&&!h&&(delete l.excludeUntil,delete l.lastExcludeReason_,r=!0);const m=!l.excludeUntil&&l.excludeUntil!==1/0;!n.has(l.id)&&h&&m&&(n.add(l.id),l.excludeUntil=1/0,l.lastExcludeReason_="content-steering",this.logger_(`excluding ${l.id} for ${l.lastExcludeReason_}`))}),this.contentSteeringController_.manifestType_==="DASH"&&Object.keys(this.mediaTypes_).forEach(o=>{const l=this.mediaTypes_[o];if(l.activePlaylistLoader){const u=l.activePlaylistLoader.media_;u&&u.attributes.serviceLocation!==e&&(r=!0)}}),r&&this.changeSegmentPathway_()}handlePathwayClones_(){const i=this.main().playlists,s=this.contentSteeringController_.currentPathwayClones,n=this.contentSteeringController_.nextPathwayClones;if(s&&s.size||n&&n.size){for(const[o,l]of s.entries())n.get(o)||(this.mainPlaylistLoader_.updateOrDeleteClone(l),this.contentSteeringController_.excludePathway(o));for(const[o,l]of n.entries()){const u=s.get(o);if(!u){i.filter(d=>d.attributes["PATHWAY-ID"]===l["BASE-ID"]).forEach(d=>{this.mainPlaylistLoader_.addClonePathway(l,d)}),this.contentSteeringController_.addAvailablePathway(o);continue}this.equalPathwayClones_(u,l)||(this.mainPlaylistLoader_.updateOrDeleteClone(l,!0),this.contentSteeringController_.addAvailablePathway(o))}this.contentSteeringController_.currentPathwayClones=new Map(JSON.parse(JSON.stringify([...n])))}}equalPathwayClones_(e,i){if(e["BASE-ID"]!==i["BASE-ID"]||e.ID!==i.ID||e["URI-REPLACEMENT"].HOST!==i["URI-REPLACEMENT"].HOST)return!1;const s=e["URI-REPLACEMENT"].PARAMS,n=i["URI-REPLACEMENT"].PARAMS;for(const r in s)if(s[r]!==n[r])return!1;for(const r in n)if(s[r]!==n[r])return!1;return!0}changeSegmentPathway_(){const e=this.selectPlaylist();this.pauseLoading(),this.contentSteeringController_.manifestType_==="DASH"&&this.switchMediaForDASHContentSteering_(),this.switchMedia_(e,"content-steering")}excludeNonUsablePlaylistsByKeyId_(){if(!this.mainPlaylistLoader_||!this.mainPlaylistLoader_.main)return;let e=0;const i="non-usable";this.mainPlaylistLoader_.main.playlists.forEach(s=>{const n=this.mainPlaylistLoader_.getKeyIdSet(s);!n||!n.size||n.forEach(r=>{const o="usable",l=this.keyStatusMap_.has(r)&&this.keyStatusMap_.get(r)===o,u=s.lastExcludeReason_===i&&s.excludeUntil===1/0;l?l&&u&&(delete s.excludeUntil,delete s.lastExcludeReason_,this.logger_(`enabling playlist ${s.id} because key ID ${r} is ${o}`)):(s.excludeUntil!==1/0&&s.lastExcludeReason_!==i&&(s.excludeUntil=1/0,s.lastExcludeReason_=i,this.logger_(`excluding playlist ${s.id} because the key ID ${r} doesn't exist in the keyStatusMap or is not ${o}`)),e++)})}),e>=this.mainPlaylistLoader_.main.playlists.length&&this.mainPlaylistLoader_.main.playlists.forEach(s=>{const n=s&&s.attributes&&s.attributes.RESOLUTION&&s.attributes.RESOLUTION.height<720,r=s.excludeUntil===1/0&&s.lastExcludeReason_===i;n&&r&&(delete s.excludeUntil,oe.log.warn(`enabling non-HD playlist ${s.id} because all playlists were excluded due to ${i} key IDs`))})}addKeyStatus_(e,i){const r=(typeof e=="string"?e:x8(e)).slice(0,32).toLowerCase();this.logger_(`KeyStatus '${i}' with key ID ${r} added to the keyStatusMap`),this.keyStatusMap_.set(r,i)}updatePlaylistByKeyStatus(e,i){this.addKeyStatus_(e,i),this.waitingForFastQualityPlaylistReceived_||this.excludeNonUsableThenChangePlaylist_(),this.mainPlaylistLoader_.off("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this)),this.mainPlaylistLoader_.on("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this))}excludeNonUsableThenChangePlaylist_(){this.excludeNonUsablePlaylistsByKeyId_(),this.fastQualityChange_()}}const Z8=(t,e,i)=>s=>{const n=t.main.playlists[e],r=_0(n),o=Wf(n);if(typeof s>"u")return o;s?delete n.disabled:n.disabled=!0;const l={renditionInfo:{id:e,bandwidth:n.attributes.BANDWIDTH,resolution:n.attributes.RESOLUTION,codecs:n.attributes.CODECS},cause:"fast-quality"};return s!==o&&!r&&(s?(i(n),t.trigger({type:"renditionenabled",metadata:l})):t.trigger({type:"renditiondisabled",metadata:l})),s};class Y8{constructor(e,i,s){const{playlistController_:n}=e,r=n.fastQualityChange_.bind(n);if(i.attributes){const o=i.attributes.RESOLUTION;this.width=o&&o.width,this.height=o&&o.height,this.bandwidth=i.attributes.BANDWIDTH,this.frameRate=i.attributes["FRAME-RATE"]}this.codecs=lc(n.main(),i),this.playlist=i,this.id=s,this.enabled=Z8(e.playlists,i.id,r)}}const Q8=function(t){t.representations=()=>{const e=t.playlistController_.main(),i=Vc(e)?t.playlistController_.getAudioTrackPlaylists_():e.playlists;return i?i.filter(s=>!_0(s)).map((s,n)=>new Y8(t,s,s.id)):[]}},jT=["seeking","seeked","pause","playing","error"];class J8 extends oe.EventTarget{constructor(e){super(),this.playlistController_=e.playlistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.playedRanges_=[],this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=Js("PlaybackWatcher"),this.logger_("initialize");const i=()=>this.monitorCurrentTime_(),s=()=>this.monitorCurrentTime_(),n=()=>this.techWaiting_(),r=()=>this.resetTimeUpdate_(),o=this.playlistController_,l=["main","subtitle","audio"],u={};l.forEach(d=>{u[d]={reset:()=>this.resetSegmentDownloads_(d),updateend:()=>this.checkSegmentDownloads_(d)},o[`${d}SegmentLoader_`].on("appendsdone",u[d].updateend),o[`${d}SegmentLoader_`].on("playlistupdate",u[d].reset),this.tech_.on(["seeked","seeking"],u[d].reset)});const h=d=>{["main","audio"].forEach(m=>{o[`${m}SegmentLoader_`][d]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),h("off"))},this.clearSeekingAppendCheck_=()=>h("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),h("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",n),this.tech_.on(jT,r),this.tech_.on("canplay",s),this.tech_.one("play",i),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",n),this.tech_.off(jT,r),this.tech_.off("canplay",s),this.tech_.off("play",i),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),l.forEach(d=>{o[`${d}SegmentLoader_`].off("appendsdone",u[d].updateend),o[`${d}SegmentLoader_`].off("playlistupdate",u[d].reset),this.tech_.off(["seeked","seeking"],u[d].reset)}),this.checkCurrentTimeTimeout_&&$.clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&$.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=$.setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(e){const i=this.playlistController_[`${e}SegmentLoader_`];this[`${e}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${e} loader`),this[`${e}StalledDownloads_`]=0,this[`${e}Buffered_`]=i.buffered_()}checkSegmentDownloads_(e){const i=this.playlistController_,s=i[`${e}SegmentLoader_`],n=s.buffered_(),r=FF(this[`${e}Buffered_`],n);if(this[`${e}Buffered_`]=n,r){const o={bufferedRanges:n};i.trigger({type:"bufferedrangeschanged",metadata:o}),this.resetSegmentDownloads_(e);return}this[`${e}StalledDownloads_`]++,this.logger_(`found #${this[`${e}StalledDownloads_`]} ${e} appends that did not increase buffer (possible stalled download)`,{playlistId:s.playlist_&&s.playlist_.id,buffered:Zo(n)}),!(this[`${e}StalledDownloads_`]<10)&&(this.logger_(`${e} loader stalled download exclusion`),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:`vhs-${e}-download-exclusion`}),e!=="subtitle"&&i.excludePlaylist({error:{message:`Excessive ${e} segment downloading detected.`},playlistExclusionDuration:1/0}))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const e=this.tech_.currentTime(),i=this.tech_.buffered();if(this.lastRecordedTime===e&&(!i.length||e+jn>=i.end(i.length-1)))return this.techWaiting_();if(this.consecutiveUpdates>=5&&e===this.lastRecordedTime)this.consecutiveUpdates++,this.waiting_();else if(e===this.lastRecordedTime)this.consecutiveUpdates++;else{this.playedRanges_.push(Ti([this.lastRecordedTime,e]));const s={playedRanges:this.playedRanges_};this.playlistController_.trigger({type:"playedrangeschanged",metadata:s}),this.consecutiveUpdates=0,this.lastRecordedTime=e}}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;const i=this.seekable(),s=this.tech_.currentTime(),n=this.afterSeekableWindow_(i,s,this.media(),this.allowSeeksWithinUnsafeLiveWindow);let r;if(n&&(r=i.end(i.length-1)),this.beforeSeekableWindow_(i,s)){const C=i.start(0);r=C+(C===i.end(0)?0:jn)}if(typeof r<"u")return this.logger_(`Trying to seek outside of seekable at time ${s} with seekable range ${wC(i)}. Seeking to ${r}.`),this.tech_.setCurrentTime(r),!0;const o=this.playlistController_.sourceUpdater_,l=this.tech_.buffered(),u=o.audioBuffer?o.audioBuffered():null,h=o.videoBuffer?o.videoBuffered():null,d=this.media(),m=d.partTargetDuration?d.partTargetDuration:(d.targetDuration-Un)*2,_=[u,h];for(let C=0;C<_.length;C++){if(!_[C])continue;if(m0(_[C],s)<m)return!1}const T=Xh(l,s);return T.length===0?!1:(r=T.start(0)+jn,this.logger_(`Buffered region starts (${T.start(0)})  just beyond seek point (${s}). Seeking to ${r}.`),this.tech_.setCurrentTime(r),!0)}waiting_(){if(this.techWaiting_())return;const e=this.tech_.currentTime(),i=this.tech_.buffered(),s=Ka(i,e);if(s.length&&e+3<=s.end(0)){this.resetTimeUpdate_(),this.tech_.setCurrentTime(e),this.logger_(`Stopped at ${e} while inside a buffered region [${s.start(0)} -> ${s.end(0)}]. Attempting to resume playback by seeking to the current time.`),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"});return}}techWaiting_(){const e=this.seekable(),i=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(e,i)){const l=e.end(e.length-1);return this.logger_(`Fell out of live window at time ${i}. Seeking to live point (seekable end) ${l}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(l),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const s=this.tech_.vhs.playlistController_.sourceUpdater_,n=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:s.audioBuffered(),videoBuffered:s.videoBuffered(),currentTime:i}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(i),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const o=Xh(n,i);return o.length>0?(this.logger_(`Stopped at ${i} and seeking to ${o.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(i),!0):!1}afterSeekableWindow_(e,i,s,n=!1){if(!e.length)return!1;let r=e.end(e.length-1)+jn;const o=!s.endList,l=typeof s.partTargetDuration=="number";return o&&(l||n)&&(r=e.end(e.length-1)+s.targetDuration*3),i>r}beforeSeekableWindow_(e,i){return!!(e.length&&e.start(0)>0&&i<e.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:e,audioBuffered:i,currentTime:s}){if(!e)return;let n;if(e.length&&i.length){const r=Ka(e,s-3),o=Ka(e,s),l=Ka(i,s);l.length&&!o.length&&r.length&&(n={start:r.end(0),end:l.end(0)})}else Xh(e,s).length||(n=this.gapFromVideoUnderflow_(e,s));return n?(this.logger_(`Encountered a gap in video from ${n.start} to ${n.end}. Seeking to current time ${s}`),!0):!1}skipTheGap_(e){const i=this.tech_.buffered(),s=this.tech_.currentTime(),n=Xh(i,s);if(this.resetTimeUpdate_(),n.length===0||s!==e)return;this.logger_("skipTheGap_:","currentTime:",s,"scheduled currentTime:",e,"nextRange start:",n.start(0)),this.tech_.setCurrentTime(n.start(0)+Un);const r={gapInfo:{from:s,to:n.start(0)}};this.playlistController_.trigger({type:"gapjumped",metadata:r}),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"})}gapFromVideoUnderflow_(e,i){const s=RF(e);for(let n=0;n<s.length;n++){const r=s.start(n),o=s.end(n);if(i-r<4&&i-r>2)return{start:r,end:o}}return null}}const eU={errorInterval:30,getSource(t){const i=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource();return t(i)}},gw=function(t,e){let i=0,s=0;const n=wt(eU,e);t.ready(()=>{t.trigger({type:"usage",name:"vhs-error-reload-initialized"})});const r=function(){s&&t.currentTime(s)},o=function(d){d!=null&&(s=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",r),t.src(d),t.trigger({type:"usage",name:"vhs-error-reload"}),t.play())},l=function(){if(Date.now()-i<n.errorInterval*1e3){t.trigger({type:"usage",name:"vhs-error-reload-canceled"});return}if(!n.getSource||typeof n.getSource!="function"){oe.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return i=Date.now(),n.getSource.call(t,o)},u=function(){t.off("loadedmetadata",r),t.off("error",l),t.off("dispose",u)},h=function(d){u(),gw(t,d)};t.on("error",l),t.on("dispose",u),t.reloadSourceOnError=h},tU=function(t){gw(this,t)};var _w="3.17.2",iU="7.1.0",sU="1.3.1",nU="7.2.0",rU="4.0.2";const Zt={PlaylistLoader:Za,Playlist:fs,utils:c5,STANDARD_PLAYLIST_SELECTOR:DT,INITIAL_PLAYLIST_SELECTOR:Y5,lastBandwidthSelector:DT,movingAverageBandwidthSelector:K5,comparePlaylistBandwidth:b0,comparePlaylistResolution:X5,xhr:qC()};Object.keys(yi).forEach(t=>{Object.defineProperty(Zt,t,{get(){return oe.log.warn(`using Vhs.${t} is UNSAFE be sure you know what you are doing`),yi[t]},set(e){if(oe.log.warn(`using Vhs.${t} is UNSAFE be sure you know what you are doing`),typeof e!="number"||e<0){oe.log.warn(`value of Vhs.${t} must be greater than or equal to 0`);return}yi[t]=e}})});const yw="videojs-vhs",vw=function(t,e){const i=e.media();let s=-1;for(let n=0;n<t.length;n++)if(t[n].id===i.id){s=n;break}t.selectedIndex_=s,t.trigger({selectedIndex:s,type:"change"})},oU=function(t,e){e.representations().forEach(i=>{t.addQualityLevel(i)}),vw(t,e.playlists)};Zt.canPlaySource=function(){return oe.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const aU=(t,e,i)=>{if(!t)return t;let s={};e&&e.attributes&&e.attributes.CODECS&&(s=wc(Rn(e.attributes.CODECS))),i&&i.attributes&&i.attributes.CODECS&&(s.audio=i.attributes.CODECS);const n=bl(s.video),r=bl(s.audio),o={};for(const l in t)o[l]={},r&&(o[l].audioContentType=r),n&&(o[l].videoContentType=n),e.contentProtection&&e.contentProtection[l]&&e.contentProtection[l].pssh&&(o[l].pssh=e.contentProtection[l].pssh),typeof t[l]=="string"&&(o[l].url=t[l]);return wt(t,o)},lU=(t,e)=>t.reduce((i,s)=>{if(!s.contentProtection)return i;const n=e.reduce((r,o)=>{const l=s.contentProtection[o];return l&&l.pssh&&(r[o]={pssh:l.pssh}),r},{});return Object.keys(n).length&&i.push(n),i},[]),uU=({player:t,sourceKeySystems:e,audioMedia:i,mainPlaylists:s})=>{if(!t.eme.initializeMediaKeys)return Promise.resolve();const n=i?s.concat([i]):s,r=lU(n,Object.keys(e)),o=[],l=[];return r.forEach(u=>{l.push(new Promise((h,d)=>{t.tech_.one("keysessioncreated",h)})),o.push(new Promise((h,d)=>{t.eme.initializeMediaKeys({keySystems:u},m=>{if(m){d(m);return}h()})}))}),Promise.race([Promise.all(o),Promise.race(l)])},cU=({player:t,sourceKeySystems:e,media:i,audioMedia:s})=>{const n=aU(e,i,s);return n?(t.currentSource().keySystems=n,n&&!t.eme?(oe.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},bw=()=>{if(!$.localStorage)return null;const t=$.localStorage.getItem(yw);if(!t)return null;try{return JSON.parse(t)}catch{return null}},hU=t=>{if(!$.localStorage)return!1;let e=bw();e=e?wt(e,t):t;try{$.localStorage.setItem(yw,JSON.stringify(e))}catch{return!1}return e},dU=t=>t.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(t.substring(t.indexOf(",")+1)):t,Tw=(t,e)=>{t._requestCallbackSet||(t._requestCallbackSet=new Set),t._requestCallbackSet.add(e)},xw=(t,e)=>{t._responseCallbackSet||(t._responseCallbackSet=new Set),t._responseCallbackSet.add(e)},Sw=(t,e)=>{t._requestCallbackSet&&(t._requestCallbackSet.delete(e),t._requestCallbackSet.size||delete t._requestCallbackSet)},Cw=(t,e)=>{t._responseCallbackSet&&(t._responseCallbackSet.delete(e),t._responseCallbackSet.size||delete t._responseCallbackSet)};Zt.supportsNativeHls=(function(){if(!ke||!ke.createElement)return!1;const t=ke.createElement("video");return oe.getTech("Html5").isSupported()?["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(i){return/maybe|probably/i.test(t.canPlayType(i))}):!1})();Zt.supportsNativeDash=(function(){return!ke||!ke.createElement||!oe.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(ke.createElement("video").canPlayType("application/dash+xml"))})();Zt.supportsTypeNatively=t=>t==="hls"?Zt.supportsNativeHls:t==="dash"?Zt.supportsNativeDash:!1;Zt.isSupported=function(){return oe.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};Zt.xhr.onRequest=function(t){Tw(Zt.xhr,t)};Zt.xhr.onResponse=function(t){xw(Zt.xhr,t)};Zt.xhr.offRequest=function(t){Sw(Zt.xhr,t)};Zt.xhr.offResponse=function(t){Cw(Zt.xhr,t)};const fU=oe.getComponent("Component");class ww extends fU{constructor(e,i,s){if(super(i,s.vhs),typeof s.initialBandwidth=="number"&&(this.options_.bandwidth=s.initialBandwidth),this.logger_=Js("VhsHandler"),i.options_&&i.options_.playerId){const n=oe.getPlayer(i.options_.playerId);this.player_=n}if(this.tech_=i,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&i.overrideNativeAudioTracks&&i.overrideNativeVideoTracks)i.overrideNativeAudioTracks(!0),i.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(i.featuresNativeVideoTracks||i.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(ke,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],n=>{const r=ke.fullscreenElement||ke.webkitFullscreenElement||ke.mozFullScreenElement||ke.msFullscreenElement;r&&r.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(e={}){if(this.options_=wt(this.options_,e),this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.usePlayerObjectFit=this.options_.usePlayerObjectFit||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useForcedSubtitles=this.options_.useForcedSubtitles||!1,this.options_.useNetworkInformationApi=typeof this.options_.useNetworkInformationApi<"u"?this.options_.useNetworkInformationApi:!0,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=this.options_.llhls!==!1,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,typeof this.options_.playlistExclusionDuration!="number"&&(this.options_.playlistExclusionDuration=60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){const s=bw();s&&s.bandwidth&&(this.options_.bandwidth=s.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),s&&s.throughput&&(this.options_.throughput=s.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=yi.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===yi.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","usePlayerObjectFit","customPixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useForcedSubtitles","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(s=>{typeof this.source_[s]<"u"&&(this.options_[s]=this.source_[s])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio,this.usePlayerObjectFit=this.options_.usePlayerObjectFit;const i=this.options_.customPixelRatio;typeof i=="number"&&i>=0&&(this.customPixelRatio=i)}setOptions(e={}){this.setOptions_(e)}src(e,i){if(!e)return;this.setOptions_(),this.options_.src=dU(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Zt,this.options_.sourceType=W2(i),this.options_.seekTo=r=>{this.tech_.setCurrentTime(r)},this.options_.player_=this.player_,this.playlistController_=new K8(this.options_);const s=wt({liveRangeSafeTimeDelta:jn},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new J8(s),this.attachStreamingEventListeners_(),this.playlistController_.on("error",()=>{const r=oe.players[this.tech_.options_.playerId];let o=this.playlistController_.error;typeof o=="object"&&!o.code?o.code=3:typeof o=="string"&&(o={message:o,code:3}),r.error(o)});const n=this.options_.bufferBasedABR?Zt.movingAverageBandwidthSelector(.55):Zt.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):n.bind(this),this.playlistController_.selectInitialPlaylist=Zt.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(r){this.playlistController_.selectPlaylist=r.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(r){this.playlistController_.mainSegmentLoader_.throughput.rate=r,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let r=this.playlistController_.mainSegmentLoader_.bandwidth;const o=$.navigator.connection||$.navigator.mozConnection||$.navigator.webkitConnection,l=1e7;if(this.options_.useNetworkInformationApi&&o){const u=o.downlink*1e3*1e3;u>=l&&r>=l?r=Math.max(r,u):r=u}return r},set(r){this.playlistController_.mainSegmentLoader_.bandwidth=r,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){const r=1/(this.bandwidth||1);let o;return this.throughput>0?o=1/this.throughput:o=0,Math.floor(1/(r+o))},set(){oe.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>Zo(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>Zo(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&hU({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{Q8(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=$.URL.createObjectURL(this.playlistController_.mediaSource),(oe.browser.IS_ANY_SAFARI||oe.browser.IS_IOS)&&this.options_.overrideNative&&this.options_.sourceType==="hls"&&typeof this.tech_.addSourceElement=="function"?(this.tech_.addSourceElement(this.mediaSourceUrl_),this.tech_.addSourceElement(this.source_.src)):this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),uU({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e&&e.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(i=>{this.logger_("error while creating EME key session",i),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,i=cU({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:e&&e.media()});if(this.player_.tech_.on("keystatuschange",s=>{this.playlistController_.updatePlaylistByKeyStatus(s.keyId,s.status)}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),!i){this.playlistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()}setupQualityLevels_(){const e=oe.players[this.tech_.options_.playerId];!e||!e.qualityLevels||this.qualityLevels_||(this.qualityLevels_=e.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{oU(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{vw(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":_w,"mux.js":iU,"mpd-parser":sU,"m3u8-parser":nU,"aes-decrypter":rU}}version(){return this.constructor.version()}canChangeType(){return dw.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(e){this.playlistController_.setCurrentTime(e)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&$.URL.revokeObjectURL&&($.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(e,i){return _5({playlist:this.playlistController_.media(),time:e,callback:i})}seekToProgramTime(e,i,s=!0,n=2){return KC({programTime:e,playlist:this.playlistController_.media(),retryCount:n,pauseAfterSeek:s,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:i})}setupXhrHooks_(){this.xhr.onRequest=e=>{Tw(this.xhr,e)},this.xhr.onResponse=e=>{xw(this.xhr,e)},this.xhr.offRequest=e=>{Sw(this.xhr,e)},this.xhr.offResponse=e=>{Cw(this.xhr,e)},this.player_.trigger("xhr-hooks-ready")}attachStreamingEventListeners_(){const e=["seekablerangeschanged","bufferedrangeschanged","contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"],i=["gapjumped","playedrangeschanged"];e.forEach(s=>{this.playlistController_.on(s,n=>{this.player_.trigger(si({},n))})}),i.forEach(s=>{this.playbackWatcher_.on(s,n=>{this.player_.trigger(si({},n))})})}}const Yd={name:"videojs-http-streaming",VERSION:_w,canHandleSource(t,e={}){const i=wt(oe.options,e);return!i.vhs.experimentalUseMMS&&!sc("avc1.4d400d,mp4a.40.2",!1)?!1:Yd.canPlayType(t.type,i)},handleSource(t,e,i={}){const s=wt(oe.options,i);return e.vhs=new ww(t,e,s),e.vhs.xhr=qC(),e.vhs.setupXhrHooks_(),e.vhs.src(t.src,t.type),e.vhs},canPlayType(t,e){const i=W2(t);if(!i)return"";const s=Yd.getOverrideNative(e);return!Zt.supportsTypeNatively(i)||s?"maybe":""},getOverrideNative(t={}){const{vhs:e={}}=t,i=!(oe.browser.IS_ANY_SAFARI||oe.browser.IS_IOS),{overrideNative:s=i}=e;return s}},pU=()=>sc("avc1.4d400d,mp4a.40.2",!0);pU()&&oe.getTech("Html5").registerSourceHandler(Yd,0);oe.VhsHandler=ww;oe.VhsSourceHandler=Yd;oe.Vhs=Zt;oe.use||oe.registerComponent("Vhs",Zt);oe.options.vhs=oe.options.vhs||{};(!oe.getPlugin||!oe.getPlugin("reloadSourceOnError"))&&oe.registerPlugin("reloadSourceOnError",tU);console.log("THIS IS A VALIDATION OF RELEASES!");const Nu=[{videoTitle:"Saisir le contour du parc",videoSource:"https://github.com/cunvoas/opendata-tool-spare-data/raw/refs/heads/main/video-aide/SaisirContourParc_1024p.webm",poster:"https://github.com/cunvoas/opendata-tool-spare-data/raw/refs/heads/main/video-aide/SaisirContourParc.png"},{videoTitle:"Saisir les entres de parc",videoSource:"https://github.com/cunvoas/opendata-tool-spare-data/raw/refs/heads/main/video-aide/SaisirLesEntrees_1024p.webm",poster:"https://github.com/cunvoas/opendata-tool-spare-data/raw/refs/heads/main/video-aide/SaisirLesEntrees.png"}],mU={name:"AppVideoAdmin",data(){return{player:null,currentVideo:Nu[0],videoSource:Nu[0].videoSource,poster:Nu[0].poster,sources:Nu}},methods:{changeVideo(t){this.currentVideo=Nu[t],this.videoSource=this.currentVideo.videoSource,this.poster=this.currentVideo.poster,this.player&&(this.player.src({src:this.videoSource,type:"video/webm"}),this.player.poster(this.poster),this.player.load(),this.player.play())}},mounted(){this.$nextTick(()=>{this.$refs.videoPlayer&&(this.player=oe(this.$refs.videoPlayer,{fluid:!0,responsive:!0,controls:!0,playbackRates:[.5,1,1.25,1.5]}))})},beforeUnmount(){this.player&&this.player.dispose()}},gU={class:"text-left align-top"},_U={class:"my-4 text-center"},yU=["onClick"],vU={class:"max-w-[800px] mx-auto my-5"},bU={class:"text-lg font-medium mb-2"},TU={id:"videoPlayer",ref:"videoPlayer",class:"video-js vjs-big-play-centered vjs-16-9 w-full h-auto aspect-video",controls:"",preload:"auto"},xU=["src"];function SU(t,e,i,s,n,r){return St(),Lt("div",gU,[e[1]||(e[1]=we("h5",{class:"text-xl font-semibold mb-3"},"Saisie des parcs et des entres",-1)),e[2]||(e[2]=we("p",{class:"mb-4"},[Hs(" Les vidos ci-dessous vous montrent comment saisir les contours des parcs et les entres de parc. "),we("br"),Hs(" L'application des parcs est  disposition des associations contributrices. ")],-1)),we("div",_U,[(St(!0),Lt(vi,null,ea(n.sources,(o,l)=>(St(),Lt("button",{key:l,onClick:u=>r.changeVideo(l),class:"mx-2 px-4 py-2 bg-green-600 text-white border-none rounded cursor-pointer hover:bg-green-700 transition-colors",type:"button"},Ps(o.videoTitle),9,yU))),128))]),we("div",vU,[we("h5",bU,Ps(n.currentVideo.videoTitle),1),we("video",TU,[we("source",{src:n.videoSource,type:"video/webm"},null,8,xU),e[0]||(e[0]=we("p",{class:"vjs-no-js"}," Pour voir la vido, merci d'activer JavaScript ",-1))],512)])])}const CU=Kn(mU,[["render",SU],["__scopeId","data-v-ec3d31ae"]]),wU=[{path:"/carte",name:"appCarte",title:"Carte",component:OL},{path:"/stats",name:"stats",title:"Statistiques",component:n3},{path:"/information",name:"appInformation",title:"informations",component:u3},{path:"/aideoVideo",name:"appVideoAdmin",title:"Video d'aide",component:CU},{path:"/",redirect:{name:"appCarte"}},{path:"/:pathMatch(.*)*",redirect:"/carte"}],Ew=_P({history:KD("/parcs-et-jardins/"),routes:wU}),EU=14400*1e3;async function zT(){try{const e=await(await fetch("/parcs-et-jardins/version.json")).json(),i=localStorage.getItem("app-version");i&&i!==e.version?(console.log("Nouvelle version dtecte, rechargement..."),localStorage.setItem("app-version",e.version),window.location.reload(!0)):localStorage.setItem("app-version",e.version)}catch(t){console.error("Erreur lors de la vrification de version:",t)}}function AU(){zT(),setInterval(zT,EU)}const T0=qA(hD);function DU(t,e){if(e.regionId&&(t.regionId=e.regionId,console.log("[GEO] Region preset from URL:",e.regionId)),e.c2cId&&(t.com2coId=e.c2cId,console.log("[GEO] c2c preset from URL:",e.c2cId)),e.city){const i=e.city;i.regionId&&(t.regionId=i.regionId),i.com2coId&&(t.com2coId=i.com2coId),i.cityId&&(t.cityId=i.cityId),t.locType=i.locType||"city",t.lonX=i.lonX,t.latY=i.latY,t.cityName=i.name,console.log("[GEO] Location preset from URL:",i)}return t}function PU(){if(!QA())return;const t=Xx(),e=localStorage.getItem("location-selected"),i=e?JSON.parse(e):{};DU(i,t),localStorage.setItem("location-selected",JSON.stringify(i))}PU();T0.use(ZA,{host:"https://autmel.piwik.pro",siteId:"f948682b-11fe-4d25-ab02-fcfe606a7397"});T0.use(Ew);AU();T0.mount("#app");Ew.afterEach((t,e)=>{window._paq.push(["setCustomUrl",t.fullPath]),window._paq.push(["trackPageView"])});
